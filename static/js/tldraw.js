(function(){
shadow$provide[609]=function(qa,T,Ra,F){function n(q,B,A){var a,G={},t=null,k=null;void 0!==A&&(t=""+A);void 0!==B.key&&(t=""+B.key);void 0!==B.ref&&(k=B.ref);for(a in B)p.call(B,a)&&!b.hasOwnProperty(a)&&(G[a]=B[a]);if(q&&q.defaultProps)for(a in B=q.defaultProps,B)void 0===G[a]&&(G[a]=B[a]);return{$$typeof:R,type:q,key:t,ref:k,props:G,_owner:z.current}}T(13);qa=T(16);var R=60103;F.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(T=Symbol.for,R=T("react.element"),F.Fragment=T("react.fragment"));
var z=qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};F.jsx=n;F.jsxs=n};
shadow$provide[611]=function(qa,T,Ra,F){Ra.exports=T(609)};
shadow$provide[612]=function(qa,T,Ra,F){function n(oc){for(var Dd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+oc,wd=1;wd<arguments.length;wd++)Dd+="\x26args[]\x3d"+encodeURIComponent(arguments[wd]);return"Minified React error #"+oc+"; visit "+Dd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(oc){if(null==oc)return null;if("function"===typeof oc)return oc.displayName||oc.name||null;if("string"===typeof oc)return oc;
switch(oc){case J:return"Fragment";case U:return"Portal";case D:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case I:return"SuspenseList"}if("object"===typeof oc)switch(oc.$$typeof){case P:return(oc.displayName||"Context")+".Consumer";case N:return(oc._context.displayName||"Context")+".Provider";case Z:var Dd=oc.render;Dd=Dd.displayName||Dd.name||"";return oc.displayName||(""!==Dd?"ForwardRef("+Dd+")":"ForwardRef");case ha:return R(oc.type);case ba:return R(oc._render);case L:Dd=
oc._payload;oc=oc._init;try{return R(oc(Dd))}catch(wd){}}return null}function z(oc,Dd){for(var wd=oc._threadCount|0;wd<=Dd;wd++)oc[wd]=oc._currentValue2,oc._threadCount=wd+1}function p(oc,Dd,wd,Xd){if(Xd&&(Xd=oc.contextType,"object"===typeof Xd&&null!==Xd))return z(Xd,wd),Xd[wd];if(oc=oc.contextTypes){wd={};for(var ud in oc)wd[ud]=Dd[ud];Dd=wd}else Dd=ya;return Dd}function b(oc){if(Ea.call(Wa,oc))return!0;if(Ea.call(Pa,oc))return!1;if(Ua.test(oc))return Wa[oc]=!0;Pa[oc]=!0;return!1}function q(oc,
Dd,wd,Xd){if(null!==wd&&0===wd.type)return!1;switch(typeof Dd){case "function":case "symbol":return!0;case "boolean":if(Xd)return!1;if(null!==wd)return!wd.acceptsBooleans;oc=oc.toLowerCase().slice(0,5);return"data-"!==oc&&"aria-"!==oc;default:return!1}}function B(oc,Dd,wd,Xd){if(null===Dd||"undefined"===typeof Dd||q(oc,Dd,wd,Xd))return!0;if(Xd)return!1;if(null!==wd)switch(wd.type){case 3:return!Dd;case 4:return!1===Dd;case 5:return isNaN(Dd);case 6:return isNaN(Dd)||1>Dd}return!1}function A(oc,Dd,
wd,Xd,ud,Hd,nd){this.acceptsBooleans=2===Dd||3===Dd||4===Dd;this.attributeName=Xd;this.attributeNamespace=ud;this.mustUseProperty=wd;this.propertyName=oc;this.type=Dd;this.sanitizeURL=Hd;this.removeEmptyString=nd}function a(oc){return oc[1].toUpperCase()}function G(oc){if("boolean"===typeof oc||"number"===typeof oc)return""+oc;oc=""+oc;var Dd=cb.exec(oc);if(Dd){var wd="",Xd,ud=0;for(Xd=Dd.index;Xd<oc.length;Xd++){switch(oc.charCodeAt(Xd)){case 34:Dd="\x26quot;";break;case 38:Dd="\x26amp;";break;case 39:Dd=
"\x26#x27;";break;case 60:Dd="\x26lt;";break;case 62:Dd="\x26gt;";break;default:continue}ud!==Xd&&(wd+=oc.substring(ud,Xd));ud=Xd+1;wd+=Dd}oc=ud!==Xd?wd+oc.substring(ud,Xd):wd}return oc}function t(oc,Dd){var wd=Na.hasOwnProperty(oc)?Na[oc]:null,Xd;if(Xd="style"!==oc)Xd=null!==wd?0===wd.type:!(2<oc.length)||"o"!==oc[0]&&"O"!==oc[0]||"n"!==oc[1]&&"N"!==oc[1]?!1:!0;if(Xd||B(oc,Dd,wd,!1))return"";if(null!==wd){oc=wd.attributeName;Xd=wd.type;if(3===Xd||4===Xd&&!0===Dd)return oc+'\x3d""';wd.sanitizeURL&&
(Dd=""+Dd);return oc+'\x3d"'+(G(Dd)+'"')}return b(oc)?oc+'\x3d"'+(G(Dd)+'"'):""}function k(oc,Dd){return oc===Dd&&(0!==oc||1/oc===1/Dd)||oc!==oc&&Dd!==Dd}function h(){if(null===oa)throw Error(n(321));return oa}function f(){if(0<yb)throw Error(n(312));return{memoizedState:null,queue:null,next:null}}function r(){null===sa?null===Ca?(Aa=!1,Ca=sa=f()):(Aa=!0,sa=Ca):null===sa.next?(Aa=!1,sa=sa.next=f()):(Aa=!0,sa=sa.next);return sa}function x(oc,Dd,wd,Xd){for(;Ia;)Ia=!1,yb+=1,sa=null,wd=oc(Dd,Xd);H();
return wd}function H(){oa=null;Ia=!1;Ca=null;yb=0;sa=Ta=null}function y(oc,Dd){return"function"===typeof Dd?Dd(oc):Dd}function w(oc,Dd,wd){oa=h();sa=r();if(Aa){var Xd=sa.queue;Dd=Xd.dispatch;if(null!==Ta&&(wd=Ta.get(Xd),void 0!==wd)){Ta.delete(Xd);Xd=sa.memoizedState;do Xd=oc(Xd,wd.action),wd=wd.next;while(null!==wd);sa.memoizedState=Xd;return[Xd,Dd]}return[sa.memoizedState,Dd]}oc=oc===y?"function"===typeof Dd?Dd():Dd:void 0!==wd?wd(Dd):Dd;sa.memoizedState=oc;oc=sa.queue={last:null,dispatch:null};
oc=oc.dispatch=m.bind(null,oa,oc);return[sa.memoizedState,oc]}function v(oc,Dd){oa=h();sa=r();Dd=void 0===Dd?null:Dd;if(null!==sa){var wd=sa.memoizedState;if(null!==wd&&null!==Dd){var Xd=wd[1];a:if(null===Xd)Xd=!1;else{for(var ud=0;ud<Xd.length&&ud<Dd.length;ud++)if(!Oa(Dd[ud],Xd[ud])){Xd=!1;break a}Xd=!0}if(Xd)return wd[0]}}oc=oc();sa.memoizedState=[oc,Dd];return oc}function m(oc,Dd,wd){if(!(25>yb))throw Error(n(301));if(oc===oa)if(Ia=!0,oc={action:wd,next:null},null===Ta&&(Ta=new Map),wd=Ta.get(Dd),
void 0===wd)Ta.set(Dd,oc);else{for(Dd=wd;null!==Dd.next;)Dd=Dd.next;Dd.next=oc}}function S(){}function ja(oc){switch(oc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K(oc){if(void 0===oc||null===oc)return oc;var Dd="";E.Children.forEach(oc,function(wd){null!=wd&&(Dd+=wd)});return Dd}function la(oc,Dd){if(void 0===oc)throw Error(n(152,R(Dd)||"Component"));}function W(oc,Dd,wd){function Xd(nd,
Vd){var Mb=Vd.prototype&&Vd.prototype.isReactComponent,dc=p(Vd,Dd,wd,Mb),Wb=[],qb=!1,mb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Wb)return null},enqueueReplaceState:function(te,sd){qb=!0;Wb=[sd]},enqueueSetState:function(te,sd){if(null===Wb)return null;Wb.push(sd)}};if(Mb){if(Mb=new Vd(nd.props,dc,mb),"function"===typeof Vd.getDerivedStateFromProps){var $b=Vd.getDerivedStateFromProps.call(null,nd.props,Mb.state);null!=$b&&(Mb.state=aa({},Mb.state,$b))}}else if(oa={},
Mb=Vd(nd.props,dc,mb),Mb=x(Vd,nd.props,Mb,dc),null==Mb||null==Mb.render){oc=Mb;la(oc,Vd);return}Mb.props=nd.props;Mb.context=dc;Mb.updater=mb;mb=Mb.state;void 0===mb&&(Mb.state=mb=null);if("function"===typeof Mb.UNSAFE_componentWillMount||"function"===typeof Mb.componentWillMount)if("function"===typeof Mb.componentWillMount&&"function"!==typeof Vd.getDerivedStateFromProps&&Mb.componentWillMount(),"function"===typeof Mb.UNSAFE_componentWillMount&&"function"!==typeof Vd.getDerivedStateFromProps&&Mb.UNSAFE_componentWillMount(),
Wb.length){mb=Wb;var qc=qb;Wb=null;qb=!1;if(qc&&1===mb.length)Mb.state=mb[0];else{$b=qc?mb[0]:Mb.state;var Tc=!0;for(qc=qc?1:0;qc<mb.length;qc++){var $c=mb[qc];$c="function"===typeof $c?$c.call(Mb,$b,nd.props,dc):$c;null!=$c&&(Tc?(Tc=!1,$b=aa({},$b,$c)):aa($b,$c))}Mb.state=$b}}else Wb=null;oc=Mb.render();la(oc,Vd);if("function"===typeof Mb.getChildContext&&(nd=Vd.childContextTypes,"object"===typeof nd)){var Od=Mb.getChildContext(),$d;for($d in Od)if(!($d in nd))throw Error(n(108,R(Vd)||"Unknown",
$d));}Od&&(Dd=aa({},Dd,Od))}for(;E.isValidElement(oc);){var ud=oc,Hd=ud.type;if("function"!==typeof Hd)break;Xd(ud,Hd)}return{child:oc,context:Dd}}var aa=T(13),E=T(16),U=60106,J=60107,O=60108,D=60114,N=60109,P=60110,Z=60112,Y=60113,I=60120,ha=60115,L=60116,ba=60121,fa=60117,da=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(qa=Symbol.for,U=qa("react.portal"),J=qa("react.fragment"),O=qa("react.strict_mode"),D=qa("react.profiler"),N=qa("react.provider"),P=qa("react.context"),Z=qa("react.forward_ref"),
Y=qa("react.suspense"),I=qa("react.suspense_list"),ha=qa("react.memo"),L=qa("react.lazy"),ba=qa("react.block"),fa=qa("react.fundamental"),da=qa("react.scope"),pa=qa("react.debug_trace_mode"),za=qa("react.legacy_hidden"));qa=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ga=new Uint16Array(16);for(T=0;15>T;T++)Ga[T]=T+1;Ga[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Pa={},Wa={},Na={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(oc){Na[oc]=new A(oc,0,!1,oc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(oc){var Dd=oc[0];Na[Dd]=new A(Dd,1,!1,oc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(oc){Na[oc]=
new A(oc,2,!1,oc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(oc){Na[oc]=new A(oc,2,!1,oc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(oc){Na[oc]=new A(oc,3,!1,oc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(oc){Na[oc]=new A(oc,3,!0,oc,null,!1,!1)});["capture","download"].forEach(function(oc){Na[oc]=new A(oc,4,!1,oc,null,!1,!1)});["cols","rows","size","span"].forEach(function(oc){Na[oc]=new A(oc,6,!1,oc,null,!1,!1)});["rowSpan","start"].forEach(function(oc){Na[oc]=new A(oc,5,!1,oc.toLowerCase(),null,!1,!1)});var db=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(oc){var Dd=
oc.replace(db,a);Na[Dd]=new A(Dd,1,!1,oc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(oc){var Dd=oc.replace(db,a);Na[Dd]=new A(Dd,1,!1,oc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(oc){var Dd=oc.replace(db,a);Na[Dd]=new A(Dd,1,!1,oc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(oc){Na[oc]=new A(oc,1,!1,oc.toLowerCase(),null,!1,!1)});
Na.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(oc){Na[oc]=new A(oc,1,!1,oc.toLowerCase(),null,!0,!0)});var cb=/["'&<>]/,Oa="function"===typeof Object.is?Object.is:k,oa=null,Ca=null,sa=null,Aa=!1,Ia=!1,Ta=null,yb=0,ib=null,Lb={readContext:function(oc){var Dd=ib.threadID;z(oc,Dd);return oc[Dd]},useContext:function(oc){h();var Dd=ib.threadID;z(oc,Dd);return oc[Dd]},useMemo:v,useReducer:w,useRef:function(oc){oa=
h();sa=r();var Dd=sa.memoizedState;return null===Dd?(oc={current:oc},sa.memoizedState=oc):Dd},useState:function(oc){return w(y,oc)},useLayoutEffect:function(){},useCallback:function(oc,Dd){return v(function(){return oc},Dd)},useImperativeHandle:S,useEffect:S,useDebugValue:S,useDeferredValue:function(oc){h();return oc},useTransition:function(){h();return[function(oc){oc()},!1]},useOpaqueIdentifier:function(){return(ib.identifierPrefix||"")+"R:"+(ib.uniqueID++).toString(36)},useMutableSource:function(oc,
Dd){h();return Dd(oc._source)}},Ub={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},fc=aa({menuitem:!0},Ub),Qa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nb=["Webkit","ms","Moz","O"];Object.keys(Qa).forEach(function(oc){nb.forEach(function(Dd){Dd=Dd+oc.charAt(0).toUpperCase()+oc.substring(1);Qa[Dd]=Qa[oc]})});var ob=/([A-Z])/g,Xb=/^ms-/,Ic=E.Children.toArray,
Yc=qa.ReactCurrentDispatcher,Oc={listing:!0,pre:!0,textarea:!0},Bb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,uc={},Vc={},id=Object.prototype.hasOwnProperty,Jd={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Gd=function(){function oc(wd,Xd,ud){E.isValidElement(wd)?wd.type!==J?wd=[wd]:(wd=wd.props.children,wd=E.isValidElement(wd)?[wd]:Ic(wd)):wd=Ic(wd);wd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:wd,childIndex:0,context:ya,footer:""};
var Hd=Ga[0];if(0===Hd){var nd=Ga;Hd=nd.length;var Vd=2*Hd;if(!(65536>=Vd))throw Error(n(304));var Mb=new Uint16Array(Vd);Mb.set(nd);Ga=Mb;Ga[0]=Hd+1;for(nd=Hd;nd<Vd-1;nd++)Ga[nd]=nd+1;Ga[Vd-1]=0}else Ga[0]=Ga[Hd];this.threadID=Hd;this.stack=[wd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Xd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Dd=oc.prototype;Dd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var wd=this.threadID;Ga[wd]=Ga[0];Ga[0]=wd}};Dd.pushProvider=function(wd){var Xd=++this.contextIndex,ud=wd.type._context,Hd=this.threadID;z(ud,Hd);var nd=ud[Hd];this.contextStack[Xd]=ud;this.contextValueStack[Xd]=nd;ud[Hd]=wd.props.value};Dd.popProvider=function(){var wd=this.contextIndex,Xd=this.contextStack[wd],ud=this.contextValueStack[wd];this.contextStack[wd]=null;this.contextValueStack[wd]=
null;this.contextIndex--;Xd[this.threadID]=ud};Dd.clearProviders=function(){for(var wd=this.contextIndex;0<=wd;wd--)this.contextStack[wd][this.threadID]=this.contextValueStack[wd]};Dd.read=function(wd){if(this.exhausted)return null;var Xd=ib;ib=this;var ud=Yc.current;Yc.current=Lb;try{for(var Hd=[""],nd=!1;Hd[0].length<wd;){if(0===this.stack.length){this.exhausted=!0;var Vd=this.threadID;Ga[Vd]=Ga[0];Ga[0]=Vd;break}var Mb=this.stack[this.stack.length-1];if(nd||Mb.childIndex>=Mb.children.length){var dc=
Mb.footer;""!==dc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Mb.type)this.currentSelectValue=null;else if(null!=Mb.type&&null!=Mb.type.type&&Mb.type.type.$$typeof===N)this.popProvider(Mb.type);else if(Mb.type===Y){this.suspenseDepth--;var Wb=Hd.pop();if(nd){nd=!1;var qb=Mb.fallbackFrame;if(!qb)throw Error(n(303));this.stack.push(qb);Hd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Hd[this.suspenseDepth]+=Wb}Hd[this.suspenseDepth]+=dc}else{var mb=Mb.children[Mb.childIndex++],
$b="";try{$b+=this.render(mb,Mb.context,Mb.domNamespace)}catch(qc){if(null!=qc&&"function"===typeof qc.then)throw Error(n(294));throw qc;}finally{}Hd.length<=this.suspenseDepth&&Hd.push("");Hd[this.suspenseDepth]+=$b}}return Hd[0]}finally{Yc.current=ud,ib=Xd,H()}};Dd.render=function(wd,Xd,ud){if("string"===typeof wd||"number"===typeof wd){ud=""+wd;if(""===ud)return"";if(this.makeStaticMarkup)return G(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(ud);this.previousWasTextNode=!0;return G(ud)}Xd=
W(wd,Xd,this.threadID);wd=Xd.child;Xd=Xd.context;if(null===wd||!1===wd)return"";if(!E.isValidElement(wd)){if(null!=wd&&null!=wd.$$typeof){ud=wd.$$typeof;if(ud===U)throw Error(n(257));throw Error(n(258,ud.toString()));}wd=Ic(wd);this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,context:Xd,footer:""});return""}var Hd=wd.type;if("string"===typeof Hd)return this.renderDOM(wd,Xd,ud);switch(Hd){case za:case pa:case O:case D:case I:case J:return wd=Ic(wd.props.children),this.stack.push({type:null,
domNamespace:ud,children:wd,childIndex:0,context:Xd,footer:""}),"";case Y:throw Error(n(294));case da:throw Error(n(343));}if("object"===typeof Hd&&null!==Hd)switch(Hd.$$typeof){case Z:oa={};var nd=Hd.render(wd.props,wd.ref);nd=x(Hd.render,wd.props,nd,wd.ref);nd=Ic(nd);this.stack.push({type:null,domNamespace:ud,children:nd,childIndex:0,context:Xd,footer:""});return"";case ha:return wd=[E.createElement(Hd.type,aa({ref:wd.ref},wd.props))],this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,
context:Xd,footer:""}),"";case N:return Hd=Ic(wd.props.children),ud={type:wd,domNamespace:ud,children:Hd,childIndex:0,context:Xd,footer:""},this.pushProvider(wd),this.stack.push(ud),"";case P:Hd=wd.type;nd=wd.props;var Vd=this.threadID;z(Hd,Vd);Hd=Ic(nd.children(Hd[Vd]));this.stack.push({type:wd,domNamespace:ud,children:Hd,childIndex:0,context:Xd,footer:""});return"";case fa:throw Error(n(338));case L:return Hd=wd.type,nd=Hd._init,Hd=nd(Hd._payload),wd=[E.createElement(Hd,aa({ref:wd.ref},wd.props))],
this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,context:Xd,footer:""}),""}throw Error(n(130,null==Hd?Hd:typeof Hd,""));};Dd.renderDOM=function(wd,Xd,ud){var Hd=wd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&ja(Hd);if(!uc.hasOwnProperty(Hd)){if(!Bb.test(Hd))throw Error(n(65,Hd));uc[Hd]=!0}var nd=wd.props;if("input"===Hd)nd=aa({type:void 0},nd,{defaultChecked:void 0,defaultValue:void 0,value:null!=nd.value?nd.value:nd.defaultValue,checked:null!=nd.checked?nd.checked:
nd.defaultChecked});else if("textarea"===Hd){var Vd=nd.value;if(null==Vd){Vd=nd.defaultValue;var Mb=nd.children;if(null!=Mb){if(null!=Vd)throw Error(n(92));if(Array.isArray(Mb)){if(!(1>=Mb.length))throw Error(n(93));Mb=Mb[0]}Vd=""+Mb}null==Vd&&(Vd="")}nd=aa({},nd,{value:void 0,children:""+Vd})}else if("select"===Hd)this.currentSelectValue=null!=nd.value?nd.value:nd.defaultValue,nd=aa({},nd,{value:void 0});else if("option"===Hd){Mb=this.currentSelectValue;var dc=K(nd.children);if(null!=Mb){var Wb=
null!=nd.value?nd.value+"":dc;Vd=!1;if(Array.isArray(Mb))for(var qb=0;qb<Mb.length;qb++){if(""+Mb[qb]===Wb){Vd=!0;break}}else Vd=""+Mb===Wb;nd=aa({selected:void 0,children:void 0},nd,{selected:Vd,children:dc})}}if(Vd=nd){if(fc[Hd]&&(null!=Vd.children||null!=Vd.dangerouslySetInnerHTML))throw Error(n(137,Hd));if(null!=Vd.dangerouslySetInnerHTML){if(null!=Vd.children)throw Error(n(60));if(!("object"===typeof Vd.dangerouslySetInnerHTML&&"__html"in Vd.dangerouslySetInnerHTML))throw Error(n(61));}if(null!=
Vd.style&&"object"!==typeof Vd.style)throw Error(n(62));}Vd=nd;Mb=this.makeStaticMarkup;dc=1===this.stack.length;Wb="\x3c"+wd.type;a:if(-1===Hd.indexOf("-"))qb="string"===typeof Vd.is;else switch(Hd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":qb=!1;break a;default:qb=!0}for(sd in Vd)if(id.call(Vd,sd)){var mb=Vd[sd];if(null!=mb){if("style"===sd){var $b=void 0,qc="",Tc="";for($b in mb)if(mb.hasOwnProperty($b)){var $c=
0===$b.indexOf("--"),Od=mb[$b];if(null!=Od){if($c)var $d=$b;else if($d=$b,Vc.hasOwnProperty($d))$d=Vc[$d];else{var te=$d.replace(ob,"-$1").toLowerCase().replace(Xb,"-ms-");$d=Vc[$d]=te}qc+=Tc+$d+":";Tc=$b;$c=null==Od||"boolean"===typeof Od||""===Od?"":$c||"number"!==typeof Od||0===Od||Qa.hasOwnProperty(Tc)&&Qa[Tc]?(""+Od).trim():Od+"px";qc+=$c;Tc=";"}}mb=qc||null}$b=null;qb?Jd.hasOwnProperty(sd)||($b=sd,$b=b($b)&&null!=mb?$b+'\x3d"'+(G(mb)+'"'):""):$b=t(sd,mb);$b&&(Wb+=" "+$b)}}Mb||dc&&(Wb+=' data-reactroot\x3d""');
var sd=Wb;Vd="";Ub.hasOwnProperty(Hd)?sd+="/\x3e":(sd+="\x3e",Vd="\x3c/"+wd.type+"\x3e");a:{Mb=nd.dangerouslySetInnerHTML;if(null!=Mb){if(null!=Mb.__html){Mb=Mb.__html;break a}}else if(Mb=nd.children,"string"===typeof Mb||"number"===typeof Mb){Mb=G(Mb);break a}Mb=null}null!=Mb?(nd=[],Oc.hasOwnProperty(Hd)&&"\n"===Mb.charAt(0)&&(sd+="\n"),sd+=Mb):nd=Ic(nd.children);wd=wd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?ja(wd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===wd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Hd,children:nd,childIndex:0,context:Xd,footer:Vd});this.previousWasTextNode=!1;return sd};return oc}();F.renderToNodeStream=function(){throw Error(n(207));};F.renderToStaticMarkup=function(oc,Dd){oc=new Gd(oc,!0,Dd);try{return oc.read(Infinity)}finally{oc.destroy()}};F.renderToStaticNodeStream=function(){throw Error(n(208));};F.renderToString=function(oc,Dd){oc=new Gd(oc,!1,Dd);try{return oc.read(Infinity)}finally{oc.destroy()}};F.version="17.0.2"};
shadow$provide[614]=function(qa,T,Ra,F){Ra.exports=T(612)};
shadow$provide[615]=function(qa,T,Ra,F){function n(){if(!La&&(La="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!La))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return La(Xa)}function R(c){let g=0;var u=0;for(var M of c)g+=M.w*M.h,u=Math.max(u,M.w);c.sort((xa,Ma)=>
Ma.h-xa.h);u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),u),h:Infinity}];let ea=M=0;for(const xa of c)for(c=u.length-1;0<=c;c--){var ma=u[c];if(!(xa.w>ma.w||xa.h>ma.h)){xa.x=ma.x;xa.y=ma.y;ea=Math.max(ea,xa.y+xa.h);M=Math.max(M,xa.x+xa.w);xa.w===ma.w&&xa.h===ma.h?(ma=u.pop(),c<u.length&&(u[c]=ma)):xa.h===ma.h?(ma.x+=xa.w,ma.w-=xa.w):(xa.w!==ma.w&&u.push({x:ma.x+xa.w,y:ma.y,w:ma.w-xa.w,h:xa.h}),ma.y+=xa.h,ma.h-=xa.h);break}}return{w:M,h:ea,fill:g/(M*ea)||0}}function z(c,...g){return{didIntersect:0<
g.length,message:c,points:g}}function p(c,g,u=0){const M=[c[0]+g[0]/2,c[1]+g[1]/2],ea=Ja.rotWith(c,M,u),ma=Ja.rotWith(Ja.add(c,[g[0],0]),M,u),xa=Ja.rotWith(Ja.add(c,g),M,u);c=Ja.rotWith(Ja.add(c,[0,g[1]]),M,u);return[["top",[ea,ma]],["right",[ma,xa]],["bottom",[xa,c]],["left",[c,ea]]]}function b(c,g,u,M){const [ea,ma]=c,[xa,Ma]=g,[Za,hb]=u,[zb,Ob]=M;return Ma/xa!==(Ob-hb)/(zb-Za)&&(g=xa*(Ob-hb)-Ma*(zb-Za),0!==g&&(c=((ma-hb)*(zb-Za)-(ea-Za)*(Ob-hb))/g,g=((ma-hb)*xa-(ea-Za)*Ma)/g,0<=c&&0<=g&&1>=g))?
z("intersection",[ea+c*xa,ma+c*Ma]):z("no intersection")}function q(c,g,u,M,ea=0){return k(u,M,ea,c,g)}function B(c,g,u,M=0){const {minX:ea,minY:ma,width:xa,height:Ma}=u;return q(c,g,[ea,ma],[xa,Ma],M)}function A(c,g,u,M){var ea=Ja.sub(c,u);u=Ja.sub(M,u);g=Ja.sub(g,c);M=u[0]*ea[1]-u[1]*ea[0];ea=g[0]*ea[1]-g[1]*ea[0];u=u[1]*g[0]-u[0]*g[1];return 0===M||0===ea?z("coincident"):0===u?z("parallel"):0!==u&&(M/=u,ea/=u,0<=M&&1>=M&&0<=ea&&1>=ea)?z("intersection",Ja.add(c,Ja.mul(g,M))):z("no intersection")}
function a(c,g,u,M){var ea=(g[0]-c[0])*(g[0]-c[0])+(g[1]-c[1])*(g[1]-c[1]),ma=2*((g[0]-c[0])*(c[0]-u[0])+(g[1]-c[1])*(c[1]-u[1]));u=ma*ma-4*ea*(u[0]*u[0]+u[1]*u[1]+c[0]*c[0]+c[1]*c[1]-2*(u[0]*c[0]+u[1]*c[1])-M*M);if(0>u)return z("outside");if(0===u)return z("tangent");M=Math.sqrt(u);u=(-ma+M)/(2*ea);ea=(-ma-M)/(2*ea);if((0>u||1<u)&&(0>ea||1<ea))return 0>u&&0>ea||1<u&&1<ea?z("outside"):z("inside");ma=[];0<=u&&1>=u&&ma.push(Ja.lrp(c,g,u));0<=ea&&1>=ea&&ma.push(Ja.lrp(c,g,ea));return z("intersection",
...ma)}function G(c,g,u,M,ea,ma=0){if(0===M||0===ea||Ja.isEqual(c,g))return z("no intersection");M=0>M?M:-M;ea=0>ea?ea:-ea;c=Ja.sub(Ja.rotWith(c,u,-ma),u);g=Ja.sub(Ja.rotWith(g,u,-ma),u);var xa=Ja.sub(g,c),Ma=xa[0]*xa[0]/M/M+xa[1]*xa[1]/ea/ea;xa=2*c[0]*xa[0]/M/M+2*c[1]*xa[1]/ea/ea;const Za=[];M=xa*xa-4*Ma*(c[0]*c[0]/M/M+c[1]*c[1]/ea/ea-1);0===M?Za.push(-xa/2/Ma):0<M&&(M=Math.sqrt(M),Za.push((-xa+M)/2/Ma),Za.push((-xa-M)/2/Ma));Ma=Za.filter(hb=>0<=hb&&1>=hb).map(hb=>Ja.add(u,Ja.add(c,Ja.mul(Ja.sub(g,
c),hb)))).map(hb=>Ja.rotWith(hb,u,ma));return z("intersection",...Ma)}function t(c,g,u){const M=[];for(let ea=1;ea<u.length;ea++){const ma=A(c,g,u[ea-1],u[ea]);ma&&M.push(...ma.points)}return 0===M.length?z("no intersection"):z("intersection",...u)}function k(c,g,u,M,ea){return p(c,g,u).reduce((ma,[xa,[Ma,Za]])=>{(Ma=b(M,ea,Ma,Za))&&ma.push(z(xa,...Ma.points));return ma},[]).filter(ma=>ma.didIntersect)}function h(c,g,u,M){return p(c,g).reduce((ea,[ma,[xa,Ma]])=>{(xa=A(u,M,xa,Ma))&&ea.push(z(ma,...xa.points));
return ea},[]).filter(ea=>ea.didIntersect)}function f(c,g,u,M){return p(c,g).reduce((ea,[ma,[xa,Ma]])=>{(xa=a(xa,Ma,u,M))&&ea.push(wf(Fe({},xa),{message:ma}));return ea},[]).filter(ea=>ea.didIntersect)}function r(c,g,u,M,ea,ma=0){return p(c,g).reduce((xa,[Ma,[Za,hb]])=>{(Za=G(Za,hb,u,M,ea,ma))&&xa.push(wf(Fe({},Za),{message:Ma}));return xa},[]).filter(xa=>xa.didIntersect)}function x(c,g,u){return p(c,g).reduce((M,[ea,[ma,xa]])=>{ma=t(ma,xa,u);ma.didIntersect&&M.push(z(ea,...ma.points));return M},
[]).filter(M=>M.didIntersect)}function H(c,g,u){return p(c,g).reduce((M,[ea,[ma,xa]])=>{{const Ma=[];for(let Za=1;Za<u.length+1;Za++){const hb=A(ma,xa,u[Za-1],u[Za%u.length]);hb&&Ma.push(...hb.points)}ma=0===Ma.length?z("no intersection"):z("intersection",...u)}ma.didIntersect&&M.push(z(ea,...ma.points));return M},[]).filter(M=>M.didIntersect)}function y(c,g,u,M=0,ea,ma){return g===u?f(ea,ma,c,g):r(ea,ma,c,g,u,M)}function w(c,g,u){const {minX:M,minY:ea,width:ma,height:xa}=c;return h([M,ea],[ma,xa],
g,u)}function v(c){for(var g=arguments.length,u=Array(1<g?g-1:0),M=1;M<g;M++)u[M-1]=arguments[M];throw Error("number"===typeof c?"[MobX] minified error nr: "+c+(u.length?" "+u.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+c);}function m(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof qa?qa:"undefined"!==typeof self?self:Mh}function S(){Ah||v("Proxy not available")}
function ja(c){var g=!1;return function(){if(!g)return g=!0,c.apply(this,arguments)}}function K(c){return"function"===typeof c}function la(c){switch(typeof c){case "string":case "symbol":case "number":return!0}return!1}function W(c){return null!==c&&"object"===typeof c}function aa(c){if(!W(c))return!1;c=Object.getPrototypeOf(c);if(null==c)return!0;c=Object.hasOwnProperty.call(c,"constructor")&&c.constructor;return"function"===typeof c&&c.toString()===pm}function E(c){return(c=null==c?void 0:c.constructor)?
"GeneratorFunction"===c.name||"GeneratorFunction"===c.displayName?!0:!1:!1}function U(c,g,u){Dl(c,g,{enumerable:!1,writable:!0,configurable:!0,value:u})}function J(c,g,u){Dl(c,g,{enumerable:!1,writable:!1,configurable:!0,value:u})}function O(c,g){var u="isMobX"+c;g.prototype[u]=!0;return function(M){return W(M)&&!0===M[u]}}function D(c){return c instanceof Map}function N(c){return c instanceof Set}function P(c){var g=Object.keys(c);if(!Yl)return g;var u=Object.getOwnPropertySymbols(c);return u.length?
[].concat(g,u.filter(function(M){return mo.propertyIsEnumerable.call(c,M)})):g}function Z(c){return null===c?null:"object"===typeof c?""+c:c}function Y(c,g){return mo.hasOwnProperty.call(c,g)}function I(c,g){for(var u=0;u<g.length;u++){var M=g[u];M.enumerable=M.enumerable||!1;M.configurable=!0;"value"in M&&(M.writable=!0);Object.defineProperty(c,M.key,M)}}function ha(c,g,u){g&&I(c.prototype,g);u&&I(c,u);Object.defineProperty(c,"prototype",{writable:!1});return c}function L(){L=Object.assign||function(c){for(var g=
1;g<arguments.length;g++){var u=arguments[g],M;for(M in u)Object.prototype.hasOwnProperty.call(u,M)&&(c[M]=u[M])}return c};return L.apply(this,arguments)}function ba(c,g){c.prototype=Object.create(g.prototype);c.prototype.constructor=c;fa(c,g)}function fa(c,g){fa=Object.setPrototypeOf||function(u,M){u.__proto__=M;return u};return fa(c,g)}function da(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function pa(c,g){if(c){if("string"===
typeof c)return za(c,g);var u=Object.prototype.toString.call(c).slice(8,-1);"Object"===u&&c.constructor&&(u=c.constructor.name);if("Map"===u||"Set"===u)return Array.from(c);if("Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return za(c,g)}}function za(c,g){if(null==g||g>c.length)g=c.length;for(var u=0,M=Array(g);u<g;u++)M[u]=c[u];return M}function ya(c,g){var u="undefined"!==typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(u)return(u=u.call(c)).next.bind(u);if(Array.isArray(c)||
(u=pa(c))||g&&c&&"number"===typeof c.length){u&&(c=u);var M=0;return function(){return M>=c.length?{done:!0}:{done:!1,value:c[M++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ga(c){return Object.assign(function(g,u){Ua(g,u,c)},c)}function Ua(c,g,u){Y(c,Sj)||U(c,Sj,L({},c[Sj]));u.annotationType_!==ds&&(c[Sj][g]=u)}function Ea(c){Y(c,Sj)||U(c,Sj,L({},c[Sj]));return c[Sj]}function Pa(c,
g,u){void 0===g&&(g=Ek);void 0===u&&(u=Ek);c=new Rn(c);g!==Ek&&rc(yh,c,g,void 0);u!==Ek&&sd(c,u);return c}function Wa(c,g,u){return Kc(c)?c:Array.isArray(c)?ug.array(c,{name:u}):aa(c)?ug.object(c,void 0,{name:u}):D(c)?ug.map(c,{name:u}):N(c)?ug.set(c,{name:u}):"function"!==typeof c||Tc(c)||Qb(c)?c:E(c)?Ze(c):gf(u,c)}function Na(c){return c}function db(c,g){return{annotationType_:c,options_:g,make_:cb,extend_:Oa}}function cb(c,g,u,M){var ea;if(null!=(ea=this.options_)&&ea.bound)return null===this.extend_(c,
g,u,!1)?0:1;if(M===c.target_)return null===this.extend_(c,g,u,!1)?0:2;if(Tc(u.value))return 1;c=oa(c,this,g,u,!1);Dl(M,g,c);return 2}function Oa(c,g,u,M){u=oa(c,this,g,u);return c.defineProperty_(g,u,M)}function oa(c,g,u,M,ea){var ma,xa,Ma,Za,hb,zb,Ob;void 0===ea&&(ea=ia.safeDescriptors);M=M.value;if(null!=(ma=g.options_)&&ma.bound){var bc;M=M.bind(null!=(bc=c.proxy_)?bc:c.target_)}return{value:Yc(null!=(xa=null==(Ma=g.options_)?void 0:Ma.name)?xa:u.toString(),M,null!=(Za=null==(hb=g.options_)?void 0:
hb.autoAction)?Za:!1,null!=(zb=g.options_)&&zb.bound?null!=(Ob=c.proxy_)?Ob:c.target_:void 0),configurable:ea?c.isPlainObject_:!0,enumerable:!1,writable:ea?!1:!0}}function Ca(c,g){return{annotationType_:c,options_:g,make_:sa,extend_:Aa}}function sa(c,g,u,M){var ea;if(M===c.target_)return null===this.extend_(c,g,u,!1)?0:2;if(null!=(ea=this.options_)&&ea.bound&&(!Y(c.target_,g)||!Qb(c.target_[g]))&&null===this.extend_(c,g,u,!1))return 0;if(Qb(u.value))return 1;c=Ia(c,this,g,u,!1,!1);Dl(M,g,c);return 2}
function Aa(c,g,u,M){var ea;u=Ia(c,this,g,u,null==(ea=this.options_)?void 0:ea.bound);return c.defineProperty_(g,u,M)}function Ia(c,g,u,M,ea,ma){void 0===ma&&(ma=ia.safeDescriptors);g=M.value;Qb(g)||(g=Ze(g));if(ea){var xa;g=g.bind(null!=(xa=c.proxy_)?xa:c.target_);g.isMobXFlow=!0}return{value:g,configurable:ma?c.isPlainObject_:!0,enumerable:!1,writable:ma?!1:!0}}function Ta(c,g){return{annotationType_:c,options_:g,make_:yb,extend_:ib}}function yb(c,g,u){return null===this.extend_(c,g,u,!1)?0:1}function ib(c,
g,u,M){return c.defineComputedProperty_(g,L({},this.options_,{get:u.get,set:u.set}),M)}function Lb(c,g){return{annotationType_:c,options_:g,make_:Ub,extend_:fc}}function Ub(c,g,u){return null===this.extend_(c,g,u,!1)?0:1}function fc(c,g,u,M){var ea,ma;return c.defineObservableProperty_(g,u.value,null!=(ea=null==(ma=this.options_)?void 0:ma.enhancer)?ea:Wa,M)}function Qa(c){return{annotationType_:"true",options_:c,make_:nb,extend_:ob}}function nb(c,g,u,M){var ea,ma;if(u.get)return ah.make_(c,g,u,M);
if(u.set){u=Yc(g.toString(),u.set);if(M===c.target_)return null===c.defineProperty_(g,{configurable:ia.safeDescriptors?c.isPlainObject_:!0,set:u})?0:2;Dl(M,g,{configurable:!0,set:u});return 2}if(M!==c.target_&&"function"===typeof u.value){var xa;if(E(u.value)){var Ma;return(null!=(Ma=this.options_)&&Ma.autoBind?Ze.bound:Ze).make_(c,g,u,M)}return(null!=(xa=this.options_)&&xa.autoBind?gf.bound:gf).make_(c,g,u,M)}xa=!1===(null==(ea=this.options_)?void 0:ea.deep)?ug.ref:ug;if("function"===typeof u.value&&
null!=(ma=this.options_)&&ma.autoBind){var Za;u.value=u.value.bind(null!=(Za=c.proxy_)?Za:c.target_)}return xa.make_(c,g,u,M)}function ob(c,g,u,M){var ea,ma;if(u.get)return ah.extend_(c,g,u,M);if(u.set)return c.defineProperty_(g,{configurable:ia.safeDescriptors?c.isPlainObject_:!0,set:Yc(g.toString(),u.set)},M);if("function"===typeof u.value&&null!=(ea=this.options_)&&ea.autoBind){var xa;u.value=u.value.bind(null!=(xa=c.proxy_)?xa:c.target_)}return(!1===(null==(ma=this.options_)?void 0:ma.deep)?ug.ref:
ug).extend_(c,g,u,M)}function Xb(c){if(!0===c.deep)var g=Wa;else{if(!1===c.deep)c=Na;else{c=c.defaultDecorator;var u;c=c?null!=(g=null==(u=c.options_)?void 0:u.enhancer)?g:Wa:Wa}g=c}return g}function Ic(c,g,u){if(la(g))Ua(c,g,Wq);else return Kc(c)?c:aa(c)?ug.object(c,g,u):Array.isArray(c)?ug.array(c,g):D(c)?ug.map(c,g):N(c)?ug.set(c,g):"object"===typeof c&&null!==c?c:ug.box(c,g)}function Yc(c,g,u,M){function ea(){a:{var ma=M||this,xa=arguments,Ma=ia.trackingDerivation,Za=!u||!Ma;Hd();var hb=ia.allowStateChanges;
Za&&(Gd(),hb=Bb(!0));var zb=oc(!0),Ob=Yq++,bc=xp;xp=Ob;try{var yc=g.apply(ma,xa);break a}catch(Ac){var ic=Ac;throw Ac;}finally{xp!==Ob&&v(30),xp=bc,void 0!==ic&&(ia.suppressReactionErrors=!0),ia.allowStateChanges=hb,ia.allowStateReads=zb,nd(),Za&&(ia.trackingDerivation=Ma),ia.suppressReactionErrors=!1}yc=void 0}return yc}void 0===u&&(u=!1);ea.isMobxAction=!0;lo&&(lq.value=c,Object.defineProperty(ea,"name",lq));return ea}function Oc(c,g){c=Bb(c);try{return g()}finally{ia.allowStateChanges=c}}function Bb(c){var g=
ia.allowStateChanges;ia.allowStateChanges=c;return g}function uc(c){switch(c.dependenciesState_){case Zi.UP_TO_DATE_:return!1;case Zi.NOT_TRACKING_:case Zi.STALE_:return!0;case Zi.POSSIBLY_STALE_:for(var g=oc(!0),u=Gd(),M=c.observing_,ea=M.length,ma=0;ma<ea;ma++){var xa=M[ma];if(kq(xa)){if(ia.disableErrorBoundaries)xa.get();else try{xa.get()}catch(Ma){return ia.trackingDerivation=u,ia.allowStateReads=g,!0}if(c.dependenciesState_===Zi.STALE_)return ia.trackingDerivation=u,ia.allowStateReads=g,!0}}Dd(c);
ia.trackingDerivation=u;ia.allowStateReads=g;return!1}}function Vc(c,g,u){var M=oc(!0);Dd(c);c.newObserving_=Array(c.observing_.length+100);c.unboundDepsCount_=0;c.runId_=++ia.runId;var ea=ia.trackingDerivation;ia.trackingDerivation=c;ia.inBatch++;if(!0===ia.disableErrorBoundaries)var ma=g.call(u);else try{ma=g.call(u)}catch(zb){ma=new yn(zb)}ia.inBatch--;ia.trackingDerivation=ea;var xa=c.observing_;g=c.observing_=c.newObserving_;u=Zi.UP_TO_DATE_;ea=0;for(var Ma=c.unboundDepsCount_,Za=0;Za<Ma;Za++){var hb=
g[Za];0===hb.diffValue_&&(hb.diffValue_=1,ea!==Za&&(g[ea]=hb),ea++);hb.dependenciesState_>u&&(u=hb.dependenciesState_)}g.length=ea;c.newObserving_=null;for(Ma=xa.length;Ma--;)Za=xa[Ma],0===Za.diffValue_&&Xd(Za,c),Za.diffValue_=0;for(;ea--;)xa=g[ea],1===xa.diffValue_&&(xa.diffValue_=0,Ma=c,xa.observers_.add(Ma),xa.lowestObserverState_>Ma.dependenciesState_&&(xa.lowestObserverState_=Ma.dependenciesState_));u!==Zi.UP_TO_DATE_&&(c.dependenciesState_=u,c.onBecomeStale_());ia.allowStateReads=M;return ma}
function id(c){var g=c.observing_;c.observing_=[];for(var u=g.length;u--;)Xd(g[u],c);c.dependenciesState_=Zi.NOT_TRACKING_}function Jd(c){var g=Gd();try{return c()}finally{ia.trackingDerivation=g}}function Gd(){var c=ia.trackingDerivation;ia.trackingDerivation=null;return c}function oc(c){var g=ia.allowStateReads;ia.allowStateReads=c;return g}function Dd(c){if(c.dependenciesState_!==Zi.UP_TO_DATE_){c.dependenciesState_=Zi.UP_TO_DATE_;c=c.observing_;for(var g=c.length;g--;)c[g].lowestObserverState_=
Zi.UP_TO_DATE_}}function wd(){(ia.pendingReactions.length||ia.inBatch||ia.isRunningReactions)&&v(36);V=!0;if(Yo){var c=m();0===--c.__mobxInstanceCount&&(c.__mobxGlobals=void 0);ia=new Zq}}function Xd(c,g){c.observers_["delete"](g);0===c.observers_.size&&ud(c)}function ud(c){!1===c.isPendingUnobservation_&&(c.isPendingUnobservation_=!0,ia.pendingUnobservations.push(c))}function Hd(){ia.inBatch++}function nd(){if(0===--ia.inBatch){0<ia.inBatch||ia.isRunningReactions||Fb(qb);for(var c=ia.pendingUnobservations,
g=0;g<c.length;g++){var u=c[g];u.isPendingUnobservation_=!1;0===u.observers_.size&&(u.isBeingObserved_&&(u.isBeingObserved_=!1,u.onBUO()),u instanceof up&&u.suspend_())}ia.pendingUnobservations=[]}}function Vd(c){var g=ia.trackingDerivation;if(null!==g)return g.runId_!==c.lastAccessedBy_&&(c.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=c,!c.isBeingObserved_&&ia.trackingContext&&(c.isBeingObserved_=!0,c.onBO())),!0;0===c.observers_.size&&0<ia.inBatch&&ud(c);return!1}function Mb(c){c.lowestObserverState_!==
Zi.STALE_&&(c.lowestObserverState_=Zi.STALE_,c.observers_.forEach(function(g){if(g.dependenciesState_===Zi.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=Zi.STALE_}))}function dc(c){c.lowestObserverState_!==Zi.STALE_&&(c.lowestObserverState_=Zi.STALE_,c.observers_.forEach(function(g){g.dependenciesState_===Zi.POSSIBLY_STALE_?g.dependenciesState_=Zi.STALE_:g.dependenciesState_===Zi.UP_TO_DATE_&&(c.lowestObserverState_=Zi.UP_TO_DATE_)}))}function Wb(c){c.lowestObserverState_===Zi.UP_TO_DATE_&&
(c.lowestObserverState_=Zi.POSSIBLY_STALE_,c.observers_.forEach(function(g){g.dependenciesState_===Zi.UP_TO_DATE_&&(g.dependenciesState_=Zi.POSSIBLY_STALE_,g.onBecomeStale_())}))}function qb(){ia.isRunningReactions=!0;for(var c=ia.pendingReactions,g=0;0<c.length;){++g===gb&&(console.error("[mobx] cycle in reaction: "+c[0]),c.splice(0));for(var u=c.splice(0),M=0,ea=u.length;M<ea;M++)u[M].runReaction_()}ia.isRunningReactions=!1}function mb(c){var g=Fb;Fb=function(u){return c(function(){return g(u)})}}
function $b(c){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function qc(c){return function(g,u){if(K(g))return Yc(g.name||"\x3cunnamed action\x3e",g,c);if(K(u))return Yc(g,u,c);if(la(u))return Ua(g,u,c?Ge:fd);if(la(g))return Ga(db(c?"autoAction":Hc,{name:g,autoAction:c}))}}function Tc(c){return K(c)&&!0===c.isMobxAction}function $c(c,g){function u(){c(Za)}var M,ea;void 0===g&&(g=Fo);var ma=null!=(M=null==(ea=g)?void 0:ea.name)?M:"Autorun";if(g.scheduler||g.delay){var xa=
Od(g),Ma=!1;var Za=new Da(ma,function(){Ma||(Ma=!0,xa(function(){Ma=!1;Za.isDisposed_||Za.track(u)}))},g.onError,g.requiresObservable)}else Za=new Da(ma,function(){this.track(u)},g.onError,g.requiresObservable);Za.schedule_();return Za.getDisposer_()}function Od(c){return c.scheduler?c.scheduler:c.delay?function(g){return setTimeout(g,c.delay)}:Hg}function $d(c,g,u){function M(){zb=!1;if(!ic.isDisposed_){var Ac=!1;ic.track(function(){var tc=Oc(!1,function(){return c(ic)});Ac=hb||!yc(Ob,tc);bc=Ob;
Ob=tc});hb&&u.fireImmediately?xa(Ob,bc,ic):!hb&&Ac&&xa(Ob,bc,ic);hb=!1}}var ea;void 0===u&&(u=Fo);var ma=null!=(ea=u.name)?ea:"Reaction",xa=cf(ma,u.onError?te(u.onError,g):g),Ma=!u.scheduler&&!u.delay,Za=Od(u),hb=!0,zb=!1,Ob,bc,yc=u.compareStructural?wn.structural:u.equals||wn["default"],ic=new Da(ma,function(){hb||Ma?M():zb||(zb=!0,Za(M))},u.onError,u.requiresObservable);ic.schedule_();return ic.getDisposer_()}function te(c,g){return function(){try{return g.apply(this,arguments)}catch(u){c.call(this,
u)}}}function sd(c,g,u){return rc(kh,c,g,u)}function rc(c,g,u,M){var ea="function"===typeof M?qe(g,u):qe(g),ma=K(M)?M:u,xa=c+"L";ea[xa]?ea[xa].add(ma):ea[xa]=new Set([ma]);return function(){var Ma=ea[xa];Ma&&(Ma["delete"](ma),0===Ma.size&&delete ea[xa])}}function Lc(c){!0===c.isolateGlobalState&&wd();var g=c.useProxies,u=c.enforceActions;void 0!==g&&(ia.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(ia.verifyProxies=!0);void 0!==u&&(g="always"===u?"always":
"observed"===u,ia.enforceActions=g,ia.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(M){M in c&&(ia[M]=!!c[M])});ia.allowStateReads=!ia.observableRequiresReaction;c.reactionScheduler&&mb(c.reactionScheduler)}function Me(c,g,u,M){var ea=es(g),ma=jb(c,M)[$g];Hd();try{Tn(ea).forEach(function(xa){ma.extend_(xa,ea[xa],u?xa in u?u[xa]:!0:!0)})}finally{nd()}return c}
function mc(c){var g={name:c.name_};c.observing_&&0<c.observing_.length&&(g.dependencies=Array.from(new Set(c.observing_)).map(mc));return g}function Ke(){this.message="FLOW_CANCELLED"}function Qb(c){return!0===(null==c?void 0:c.isMobXFlow)}function Kc(c,g){return c?void 0!==g?Cd(c)?c[$g].values_.has(g):!1:Cd(c)||!!c[$g]||Vo(c)||lc(c)||kq(c):!1}function Tb(c){if(Cd(c))return c[$g].ownKeys_();v(38)}function bd(c,g,u){c.set(g,u);return u}function me(c,g){if(null==c||"object"!==typeof c||c instanceof
Date||!Kc(c))return c;if(Mu(c)||kq(c))return me(c.get(),g);if(g.has(c))return g.get(c);if(Cb(c)){var u=bd(g,c,Array(c.length));c.forEach(function(xa,Ma){u[Ma]=me(xa,g)});return u}if(pq(c)){var M=bd(g,c,new Set);c.forEach(function(xa){M.add(me(xa,g))});return M}if(Bp(c)){var ea=bd(g,c,new Map);c.forEach(function(xa,Ma){ea.set(Ma,me(xa,g))});return ea}var ma=bd(g,c,{});Tb(c).forEach(function(xa){mo.propertyIsEnumerable.call(c,xa)&&(ma[xa]=me(c[xa],g))});return ma}function ne(){v("trace() is not available in production builds");
for(var c=!1,g=arguments.length,u=Array(g),M=0;M<g;M++)u[M]=arguments[M];"boolean"===typeof u[u.length-1]&&(c=u.pop());a:{switch(u.length){case 0:g=ia.trackingDerivation;break a;case 1:g=qe(u[0]);break a;case 2:g=qe(u[0],u[1]);break a}g=void 0}if(!g)return v("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===zp.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=c?
zp.BREAK:zp.LOG}function Cc(c,g){void 0===g&&(g=void 0);Hd();try{return c.apply(g)}finally{nd()}}function xb(c){return void 0!==c.interceptors_&&0<c.interceptors_.length}function Qd(c,g){var u=c.interceptors_||(c.interceptors_=[]);u.push(g);return ja(function(){var M=u.indexOf(g);-1!==M&&u.splice(M,1)})}function ae(c,g){var u=Gd();try{var M=[].concat(c.interceptors_||[]);c=0;for(var ea=M.length;c<ea&&((g=M[c](g))&&!g.type&&v(14),g);c++);return g}finally{ia.trackingDerivation=u}}function od(c){return void 0!==
c.changeListeners_&&0<c.changeListeners_.length}function nc(c,g){var u=c.changeListeners_||(c.changeListeners_=[]);u.push(g);return ja(function(){var M=u.indexOf(g);-1!==M&&u.splice(M,1)})}function Ne(c,g){var u=Gd();if(c=c.changeListeners_){c=c.slice();for(var M=0,ea=c.length;M<ea;M++)c[M](g);ia.trackingDerivation=u}}function yf(c,g,u){var M=jb(c,u)[$g];Hd();try{var ea;null!=(ea=g)?ea:g=Ea(c);Tn(g).forEach(function(ma){return M.make_(ma,g[ma])})}finally{nd()}return c}function qf(c,g,u,M){void 0===
u&&(u="ObservableArray");void 0===M&&(M=!1);S();g=new zh(u,g,M,!1);J(g.values_,$g,g);u=new Proxy(g.values_,xg);g.proxy_=u;c&&c.length&&(M=Bb(!0),g.spliceWithArray_(0,0,c),ia.allowStateChanges=M);return u}function wg(c,g){"function"===typeof Array.prototype[c]&&(Sh[c]=g(c))}function Ya(c){return function(){var g=this[$g];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[c].apply(g,arguments)}}function Ab(c){return function(g,u){var M=this,ea=this[$g];ea.atom_.reportObserved();return ea.dehanceValues_(ea.values_)[c](function(ma,
xa){return g.call(u,ma,xa,M)})}}function bb(c){return function(){var g=this,u=this[$g];u.atom_.reportObserved();u=u.dehanceValues_(u.values_);var M=arguments[0];arguments[0]=function(ea,ma,xa){return M(ea,ma,xa,g)};return u[c].apply(u,arguments)}}function Cb(c){return W(c)&&Kh(c[$g])}function ec(c){if(D(c)||Bp(c))return c;if(Array.isArray(c))return new Map(c);if(aa(c)){var g=new Map,u;for(u in c)g.set(u,c[u]);return g}return v(21,c)}function jb(c,g){var u;if(Y(c,$g))return c;var M=null!=(u=null==
g?void 0:g.name)?u:"ObservableObject";u=Dx;var ea=new Map;M=String(M);var ma;var xa=g?null!=(ma=g.defaultDecorator)?ma:Qa(g):void 0;g=new u(c,ea,M,xa);U(c,$g,g);return c}function gd(c){return Ax[c]||(Ax[c]={get:function(){return this[$g].getObservablePropValue_(c)},set:function(g){return this[$g].setObservablePropValue_(c,g)}})}function Cd(c){return W(c)?pB(c[$g]):!1}function he(c){return{enumerable:!1,configurable:!0,get:function(){return this[$g].get_(c)},set:function(g){this[$g].set_(c,g)}}}function Zd(c){if(c>
Wu){for(var g=Wu;g<c+100;g++)Dl(Xu.prototype,""+g,he(g));Wu=c}}function $e(c,g,u){return new Xu(c,g,u)}function qe(c,g){if("object"===typeof c&&null!==c){if(Cb(c))return void 0!==g&&v(23),c[$g].atom_;if(pq(c))return c[$g];if(Bp(c)){if(void 0===g)return c.keysAtom_;var u=c.data_.get(g)||c.hasMap_.get(g);u||v(25,g,Jg(c));return u}if(Cd(c)){if(!g)return v(26);(u=c[$g].values_.get(g))||v(27,g,Jg(c));return u}if(Vo(c)||kq(c)||lc(c))return c}else if(K(c)&&lc(c[$g]))return c[$g];v(28)}function ef(c,g){c||
v(29);if(void 0!==g)return ef(qe(c,g));if(Vo(c)||kq(c)||lc(c)||Bp(c)||pq(c))return c;if(c[$g])return c[$g];v(24,c)}function Jg(c,g){if(void 0!==g)c=qe(c,g);else{if(Tc(c))return c.name;c=Cd(c)||Bp(c)||pq(c)?ef(c):qe(c)}return c.name_}function of(c,g,u){void 0===u&&(u=-1);return wb(c,g,u)}function wb(c,g,u,M,ea){if(c===g)return 0!==c||1/c===1/g;if(null==c||null==g)return!1;if(c!==c)return g!==g;var ma=typeof c;if("function"!==ma&&"object"!==ma&&"object"!=typeof g)return!1;ma=Fx.call(c);if(ma!==Fx.call(g))return!1;
switch(ma){case "[object RegExp]":case "[object String]":return""+c===""+g;case "[object Number]":return+c!==+c?+g!==+g:0===+c?1/+c===1/g:+c===+g;case "[object Date]":case "[object Boolean]":return+c===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(c)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=u&&u++}c=ta(c);g=ta(g);ma="[object Array]"===ma;if(!ma){if("object"!=typeof c||"object"!=typeof g)return!1;var xa=c.constructor,Ma=g.constructor;if(xa!==
Ma&&!(K(xa)&&xa instanceof xa&&K(Ma)&&Ma instanceof Ma)&&"constructor"in c&&"constructor"in g)return!1}if(0===u)return!1;0>u&&(u=-1);M=M||[];ea=ea||[];for(xa=M.length;xa--;)if(M[xa]===c)return ea[xa]===g;M.push(c);ea.push(g);if(ma){xa=c.length;if(xa!==g.length)return!1;for(;xa--;)if(!wb(c[xa],g[xa],u-1,M,ea))return!1}else{ma=Object.keys(c);xa=ma.length;if(Object.keys(g).length!==xa)return!1;for(;xa--;)if(Ma=ma[xa],!Y(g,Ma)||!wb(c[Ma],g[Ma],u-1,M,ea))return!1}M.pop();ea.pop();return!0}function ta(c){return Cb(c)?
c.slice():D(c)||Bp(c)||N(c)||pq(c)?Array.from(c.entries()):c}function ra(c){c[Symbol.iterator]=Ha;return c}function Ha(){return this}function ab(c,g){const u=new Set(g),M=Object.values(c),ea=new Set(M.filter(ma=>u.has(ma.toId)||u.has(ma.fromId)));c=ea.size;for(g=-1;0!==g;)ea.forEach(ma=>{ma=ma.fromId;for(const xa of M)xa.fromId===ma&&ea.add(xa),xa.toId===ma&&ea.add(xa)}),g=ea.size-c,c=ea.size;return Array.from(ea.values())}function Gb(c,g,u,M,ea,ma,xa,Ma){if(ea=g.getBindingPoint(ea,ma,xa,Ma))return{id:M,
type:"line",fromId:c.id,toId:g.id,handleId:u,point:fb.toFixed(ea.point),distance:ea.distance}}function jc(c,g){const u=c.getCenter(),M=g.getCenter();var ea=ca();ea=wf(Fe({},is.defaultProps),{id:ea,type:is.id,parentId:c.props.parentId,point:u});c=Gb(ea,c,"start",ca(),u,u,fb.uni(fb.sub(M,u)),!1);g=Gb(ea,g,"end",ca(),M,M,fb.uni(fb.sub(u,M)),!1);return c&&g?(ea.handles.start.point=[0,0],ea.handles.end.point=fb.sub(M,u),ea.handles.start.bindingId=c.id,ea.handles.end.bindingId=g.id,[ea,[c,g]]):null}function Qc(c,
g){return(0,fB.default)(c,g,{arrayMerge:(u,M,ea)=>M})}function md(c,g,u,M=!1){const [ea,ma]=g,[xa,Ma]=u;c=xa+(c-ea)/(ma-ea)*(Ma-xa);return M?xa<Ma?Math.max(Math.min(c,Ma),xa):Math.max(Math.min(c,xa),Ma):c}function ye(c,g){return new Promise((u,M)=>{if(g){const ea=document.createElement("video");ea.addEventListener("loadedmetadata",function(){u([this.videoWidth,this.videoHeight])},!1);ea.src=c}else{const ea=new Image;ea.onload=()=>u([ea.width,ea.height]);ea.src=c;ea.onerror=ma=>M(ma)}})}function We(){var c;
null==(c=document.getElementById("__textLabelMeasure"))?void 0:c.remove();c=document.createElement("pre");c.id="__textLabelMeasure";Object.assign(c.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none"});c.tabIndex=-1;document.body.appendChild(c);return c}function Gf(c,g,u=
0){var M,ea,ma;if(!c)return[16,32];let xa;xa="string"===typeof g?g:`${null!=(M=g.fontStyle)?M:"normal"} ${null!=(ea=g.fontVariant)?ea:"normal"} ${null!=(ma=g.fontWeight)?ma:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!Qu.has(`${c}-${xa}-${u}`)){if(!Zo)return[10,10];Zo.parent||document.body.appendChild(Zo);Zo.innerHTML=`${c}&#8203;`;Zo.style.font=xa;Zo.style.padding=u+"px";Qu.set(`${c}-${xa}-${u}`,[Zo.offsetWidth||1,Zo.offsetHeight||1])}return Qu.get(`${c}-${xa}-${u}`)}
function Zf(c){try{if("string"!==typeof c||!Ka.test(c))throw TypeError("Invalid UUID");var g,u=new Uint8Array(16);u[0]=(g=parseInt(c.slice(0,8),16))>>>24;u[1]=g>>>16&255;u[2]=g>>>8&255;u[3]=g&255;u[4]=(g=parseInt(c.slice(9,13),16))>>>8;u[5]=g&255;u[6]=(g=parseInt(c.slice(14,18),16))>>>8;u[7]=g&255;u[8]=(g=parseInt(c.slice(19,23),16))>>>8;u[9]=g&255;u[10]=(g=parseInt(c.slice(24,36),16))/1099511627776&255;u[11]=g/4294967296&255;u[12]=g>>>24&255;u[13]=g>>>16&255;u[14]=g>>>8&255;u[15]=g&255;return!0}catch(M){return!1}}
function Ef(c,g=0,u){let M;return function(...ea){null==u?void 0:u(...ea);clearTimeout(M);M=setTimeout(()=>c.apply(ea),g)}}function uf(c,g){return hg(c,["symbol"===typeof g?g:g+""])}function Qf(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function zg(c){return!!c}function hi(c=0){return new Promise(g=>setTimeout(g,c))}function sh(c="noid"){Nu[c]||(Nu[c]=Ow.createContext({}));return Nu[c]}function Ug(c="noid"){return Ow.useContext(sh(c))}function Ch(c){const {callbacks:g}=Ug(),u=
Qw.useRef(-1);return Qw.useMemo(()=>{const M=ea=>{var ma,xa;const {order:Ma=0}=ea;if(!Ma){var Za=ea.target;Za.removeEventListener("pointerup",M);Za.releasePointerCapture(ea.pointerId);null==(ma=g.onPointerUp)?void 0:ma.call(g,{type:"selection",handle:c,order:Ma},ea);ma=Date.now();Za=ma-u.current;300<Za?u.current=ma:300>=Za&&(null==(xa=g.onDoubleClick)?void 0:xa.call(g,{type:"selection",handle:c,order:Ma},ea),u.current=-1);ea.order=Ma+1}};return{onPointerDown:ea=>{var ma;const {order:xa=0}=ea;if(!xa){var Ma=
tg(ea.currentTarget);Ma.setPointerCapture(ea.pointerId);Ma.addEventListener("pointerup",M);null==(ma=g.onPointerDown)?void 0:ma.call(g,{type:"selection",handle:c,order:xa},ea);ea.order=xa+1}},onPointerMove:ea=>{var ma;const {order:xa=0}=ea;xa||(null==(ma=g.onPointerMove)?void 0:ma.call(g,{type:"selection",handle:c,order:xa},ea),ea.order=xa+1)},onPointerEnter:ea=>{var ma;const {order:xa=0}=ea;xa||(null==(ma=g.onPointerEnter)?void 0:ma.call(g,{type:"selection",handle:c,order:xa},ea),ea.order=xa+1)},
onPointerLeave:ea=>{var ma;const {order:xa=0}=ea;xa||(null==(ma=g.onPointerLeave)?void 0:ma.call(g,{type:"selection",handle:c,order:xa},ea),ea.order=xa+1)},onKeyDown:ea=>{var ma;null==(ma=g.onKeyDown)?void 0:ma.call(g,{type:"selection",handle:c,order:-1},ea)},onKeyUp:ea=>{var ma;null==(ma=g.onKeyUp)?void 0:ma.call(g,{type:"selection",handle:c,order:-1},ea)}}},[g])}function tg(c){var g;if(null==(g=c.namespaceURI)?0:g.endsWith("svg")){if(c.parentElement)return tg(c.parentElement);throw Error("Could not find a parent element of an HTML type!");
}return c}function bi(c,g,u){const M=gs.useRef(!1),ea=gs.useCallback(()=>{var ma;if(M.current){const xa=null==(ma=c.current)?void 0:ma.getBoundingClientRect();xa&&(ma={minX:xa.left,maxX:xa.left+xa.width,minY:xa.top,maxY:xa.top+xa.height,width:xa.width,height:xa.height},g.updateBounds(ma),null==u?void 0:u(ma))}else M.current=!0},[c,u]);gs.useEffect(()=>{const ma=c.current?cB(c.current):document,xa=Ef(ea,100);ma.addEventListener("scroll",xa);window.addEventListener("resize",xa);return()=>{ma.removeEventListener("scroll",
xa);window.removeEventListener("resize",xa)}},[]);gs.useLayoutEffect(()=>{const ma=new ResizeObserver(xa=>{xa[0].contentRect&&ea()});c.current&&ma.observe(c.current);return()=>{ma.disconnect()}},[c]);gs.useEffect(()=>{ea();setTimeout(()=>{var ma,xa;null==(xa=null==(ma=c.current)?void 0:ma.querySelector(".tl-canvas"))?void 0:xa.focus()})},[c])}function ff(c,g){return Object.keys(g).reduce((u,M)=>{const ea=g[M];return ea?u+`${`--${c}-${M}`}: ${ea};
`:u},"")}function Th(c,g,u=".logseq-tldraw"){Ou.useLayoutEffect(()=>{const M=document.createElement("style"),ea=ff(c,g);M.setAttribute("id",`${c}-theme`);M.setAttribute("data-selector",u);M.innerHTML=`
        ${u} {
          ${ea}
        }
      `;document.head.appendChild(M);return()=>{M&&document.head.contains(M)&&document.head.removeChild(M)}},[c,g,u])}function $i(c,g){Ou.useLayoutEffect(()=>{if(Pu.get(c))return()=>{};const u=document.createElement("style");u.innerHTML=g;u.setAttribute("id",c);document.head.appendChild(u);Pu.set(c,u);return()=>{u&&document.head.contains(u)&&(document.head.removeChild(u),Pu.delete(c))}},[c,g])}function Al(c,g){const u=Ou.useMemo(()=>Fe(Fe({},dB),c),[c]);Th("tl",u,g);$i("tl-canvas",aB)}function zj(c=
"noid"){av[c]||(av[c]=Ix.createContext({}));return av[c]}function rf(c="noid"){return Ix.useContext(zj(c))}function Pj(){const c=rf(),{callbacks:g}=Ug(),u=ny.useRef(-1);return ny.useMemo(()=>({onPointerDown:M=>{var ea,ma,xa;const {order:Ma=0}=M;Ma||(null==(ea=M.currentTarget)?void 0:ea.setPointerCapture(M.pointerId));null==(ma=g.onPointerDown)?void 0:ma.call(g,{type:"canvas",order:Ma},M);ea=Date.now();ma=ea-u.current;300<ma?u.current=ea:300>=ma&&(null==(xa=g.onDoubleClick)?void 0:xa.call(g,{type:"canvas",
order:Ma},M),u.current=-1)},onPointerMove:M=>{var ea;const {order:ma=0}=M;null==(ea=g.onPointerMove)?void 0:ea.call(g,{type:"canvas",order:ma},M)},onPointerUp:M=>{var ea,ma;const {order:xa=0}=M;xa||(null==(ea=M.currentTarget)?void 0:ea.releasePointerCapture(M.pointerId));null==(ma=g.onPointerUp)?void 0:ma.call(g,{type:"canvas",order:xa},M)},onPointerEnter:M=>{var ea;const {order:ma=0}=M;null==(ea=g.onPointerEnter)?void 0:ea.call(g,{type:"canvas",order:ma},M)},onPointerLeave:M=>{var ea;const {order:ma=
0}=M;null==(ea=g.onPointerLeave)?void 0:ea.call(g,{type:"canvas",order:ma},M)},onDrop:M=>mi(this,null,function*(){M.preventDefault();c.drop(M.dataTransfer,[M.clientX,M.clientY])}),onDragOver:M=>{M.preventDefault()}}),[g])}function uk(c,g,u){return 0===g||Infinity===Math.abs(g)?Math.pow(c,5*u):c*g*u/(g+u*c)}function si(c,g,u,M=.15){return 0===M?Math.max(g,Math.min(c,u)):c<g?-uk(g-c,u-g,M)+g:c>u?+uk(c-u,u-g,M)+u:c}function Bl(c,[g,u],[M,ea]){const [[ma,xa],[Ma,Za]]=c;return[si(g,ma,xa,M),si(u,Ma,Za,
ea)]}function Uh(c,g,u){g in c?Object.defineProperty(c,g,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[g]=u;return c}function Sk(c,g){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(c);g&&(M=M.filter(function(ea){return Object.getOwnPropertyDescriptor(c,ea).enumerable}));u.push.apply(u,M)}return u}function pg(c){for(var g=1;g<arguments.length;g++){var u=null!=arguments[g]?arguments[g]:{};g%2?Sk(Object(u),!0).forEach(function(M){Uh(c,M,u[M])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):Sk(Object(u)).forEach(function(M){Object.defineProperty(c,M,Object.getOwnPropertyDescriptor(u,M))})}return c}function gk(c){return c?c[0].toUpperCase()+c.slice(1):""}function Zj(c=!1,g){return c&&!tB.includes(g)}function hm(c,g="",u=!1){const M=Jx[c];g=M?M[g]||g:g;return"on"+gk(c)+gk(g)+(Zj(u,g)?"Capture":"")}function nl(c){c=c.substring(2).toLowerCase();const g=!!~c.indexOf("passive");g&&(c=c.replace("passive",""));var u=uB.includes(c)?
"capturecapture":"capture";(u=!!~c.indexOf(u))&&(c=c.replace("capture",""));return{device:c,capture:u,passive:g}}function vk(c,g=""){const u=Jx[c];return c+(u?u[g]||g:g)}function Qj(c){return"touches"in c?"touch":"pointerType"in c?c.pointerType:"mouse"}function ol(c){return Array.from(c.touches).filter(g=>{var u,M;return g.target===c.currentTarget||(null===(u=c.currentTarget)||void 0===u?void 0:null===(M=u.contains)||void 0===M?void 0:M.call(u,g.target))})}function Tk(c){return"touches"in c?("touchend"===
c.type||"touchcancel"===c.type?c.changedTouches:c.targetTouches)[0]:c}function gl(c,g){const u=g.clientX-c.clientX,M=g.clientY-c.clientY;return{angle:-(180*Math.atan2(u,M))/Math.PI,distance:Math.hypot(u,M),origin:[(g.clientX+c.clientX)/2,(g.clientY+c.clientY)/2]}}function jk(c){return ol(c).map(g=>g.identifier)}function ak(c,g){const [u,M]=Array.from(c.touches).filter(ea=>g.includes(ea.identifier));return gl(u,M)}function kk(c){const g=Tk(c);return"touches"in c?g.identifier:g.pointerId}function Vf(c){c=
Tk(c);return[c.clientX,c.clientY]}function jg(c){let {deltaX:g,deltaY:u,deltaMode:M}=c;1===M?(g*=40,u*=40):2===M&&(g*=800,u*=800);return[g,u]}function Qi(c,...g){return"function"===typeof c?c(...g):c}function Dh(){}function ui(...c){return 0===c.length?Dh:1===c.length?c[0]:function(){let g;for(const u of c)g=u.apply(this,arguments)||g;return g}}function wk([c,g],u){c=Math.abs(c);g=Math.abs(g);if(c>g&&c>u)return"x";if(g>c&&g>u)return"y"}function ci(c){bv.set(c.key,c.engine);cv.set(c.key,c.resolver)}
function Eh(c={},g){const u={};for(const [M,ea]of Object.entries(g))switch(typeof ea){case "function":u[M]=ea.call(u,c[M],M,c);break;case "object":u[M]=Eh(c[M],ea);break;case "boolean":ea&&(u[M]=c[M])}return u}function xk(c,g,u={}){const {target:M,eventOptions:ea,window:ma,enabled:xa,transform:Ma}=c;var Za=aC;if(null==c)c={};else{if(null==c)var hb={};else{hb={};var zb=Object.keys(c),Ob;for(Ob=0;Ob<zb.length;Ob++){var bc=zb[Ob];0<=Za.indexOf(bc)||(hb[bc]=c[bc])}}if(Object.getOwnPropertySymbols)for(Ob=
Object.getOwnPropertySymbols(c),bc=0;bc<Ob.length;bc++)zb=Ob[bc],0<=Za.indexOf(zb)||Object.prototype.propertyIsEnumerable.call(c,zb)&&(hb[zb]=c[zb]);c=hb}u.shared=Eh({target:M,eventOptions:ea,window:ma,enabled:xa,transform:Ma},$B);if(g){var yc=cv.get(g);u[g]=Eh(pg({shared:u.shared},c),yc)}else for(yc in c)(g=cv.get(yc))&&(u[yc]=Eh(pg({shared:u.shared},c[yc]),g));return u}function Gj(c,g){c.gestures.add(g);c.gestureEventStores[g]=new Wx(c,g);c.gestureTimeoutStores[g]=new bC}function nh(c,g,u,M,ea,
ma){if(c.has(u)&&bv.has(M)){var xa=u+"Start",Ma=u+"End";ea[M]=Za=>{let hb=void 0;if(Za.first&&xa in g)g[xa](Za);u in g&&(hb=g[u](Za));if(Za.last&&Ma in g)g[Ma](Za);return hb};ma[M]=ma[M]||{}}}function Ci(c,g={},u,M){const ea=fv.default.useMemo(()=>new cC(c),[]);ea.applyHandlers(c,M);ea.applyConfig(g,u);fv.default.useEffect(ea.effect.bind(ea));fv.default.useEffect(()=>ea.clean.bind(ea),[]);if(void 0===g.target)return ea.bind.bind(ea)}function Lh(c){c.forEach(ci);return function(g,u){u=u||{};const M=
{},ea={},ma=new Set;for(let bc in g)dC.test(bc)?(ma.add(RegExp.lastMatch),ea[bc]=g[bc]):M[bc]=g[bc];const [xa,Ma,Za]=[ea,M,ma];g={};nh(Za,xa,"onDrag","drag",g,u);nh(Za,xa,"onWheel","wheel",g,u);nh(Za,xa,"onScroll","scroll",g,u);nh(Za,xa,"onPinch","pinch",g,u);nh(Za,xa,"onMove","move",g,u);nh(Za,xa,"onHover","hover",g,u);const {handlers:hb,nativeHandlers:zb,config:Ob}={handlers:g,config:u,nativeHandlers:Ma};return Ci(hb,Ob,void 0,zb)}}function hl(c,g){return Lh([zB,uC,YB,XB,xB,Ox])(c,g||{})}function yk(c){const {viewport:g,
inputs:u,callbacks:M}=Ug(),ea=eC.useMemo(()=>({onWheel:ma=>{var xa;const {event:Ma,delta:Za}=ma;Ma.preventDefault();"pinching"===u.state||fb.isEqual(Za,[0,0])||(null==(xa=M.onWheel)?void 0:xa.call(M,{type:"canvas",order:0,delta:ma.delta,point:u.currentPoint},Ma))},onPinchStart:ma=>{var xa;const Ma=c.current,{event:Za}=ma;(Za.target===Ma||null!=Ma&&Ma.contains(Za.target))&&["idle","panning"].includes(u.state)&&(null==(xa=M.onPinchStart)?void 0:xa.call(M,{type:"canvas",order:0,delta:ma.delta,offset:ma.offset,
point:fb.sub(ma.origin,u.containerOffset)},Za))},onPinchEnd:ma=>{var xa;const Ma=c.current,{event:Za}=ma;(Za.target===Ma||null!=Ma&&Ma.contains(Za.target))&&"pinching"===u.state&&(null==(xa=M.onPinchEnd)?void 0:xa.call(M,{type:"canvas",order:0,delta:ma.delta,offset:ma.offset,point:fb.sub(ma.origin,u.containerOffset)},Za))},onPinch:ma=>{var xa;const Ma=c.current,{event:Za}=ma;(Za.target===Ma||null!=Ma&&Ma.contains(Za.target))&&"pinching"===u.state&&(null==(xa=M.onPinch)?void 0:xa.call(M,{type:"canvas",
order:0,delta:ma.delta,offset:ma.offset,point:fb.sub(ma.origin,u.containerOffset)},Za))}}),[M]);hl(ea,{target:c,eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:Jo.maxZoom,min:Jo.minZoom})}})}function Rj(c,g,u,M){gv.useLayoutEffect(()=>{c.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,u,g.rotation]);gv.useLayoutEffect(()=>{const ea=c.current;ea.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;ea.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);gv.useLayoutEffect(()=>{const ea=c.current;void 0!==M&&(ea.style.zIndex=M.toString())},[M])}function Cl(c,g){const {onPersist:u,onSave:M,onSaveAs:ea,onError:ma,onMount:xa,onCreateAssets:Ma,onCreateShapes:Za,onDeleteAssets:hb,
onDeleteShapes:zb,onDrop:Ob,onPaste:bc,onCanvasDBClick:yc}=g;Zx.useLayoutEffect(()=>{const ic=[];if(c)return c.history.reset(),window.tln=c,xa&&xa(c,null),()=>{ic.forEach(Ac=>Ac());window.tln=void 0}},[c]);Zx.useLayoutEffect(()=>{const ic=[];u&&ic.push(c.subscribe("persist",u));M&&ic.push(c.subscribe("save",M));ea&&ic.push(c.subscribe("saveAs",ea));ma&&ic.push(c.subscribe("error",ma));Za&&ic.push(c.subscribe("create-shapes",Za));Ma&&ic.push(c.subscribe("create-assets",Ma));zb&&ic.push(c.subscribe("delete-shapes",
zb));hb&&ic.push(c.subscribe("delete-assets",hb));Ob&&ic.push(c.subscribe("drop",Ob));bc&&ic.push(c.subscribe("paste",bc));yc&&ic.push(c.subscribe("canvas-dbclick",yc));return()=>ic.forEach(Ac=>Ac())},[c,u,M,ea,ma])}function Bm(c){if("app"in c)return c.app;const [g]=Yx.useState(()=>new gB(c.model,c.Shapes,c.Tools));Yx.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function zk(c,g){WB.useEffect(()=>{"model"in g&&g.model&&c.loadDocumentModel(g.model)},[g.model])}
function Di(c){const g=Ug(),{viewport:{bounds:u}}=g;fC.useEffect(()=>{const M=xa=>{xa.preventDefault()},ea=xa=>{const Ma=xa.touches[0].pageX,Za=xa.touches[0].radiusX||0;(10>Ma-Za||Ma+Za>u.width-10)&&xa.preventDefault()},ma=c.current;if(!ma)return()=>{};ma.addEventListener("touchstart",M,{passive:!0});ma.addEventListener("gestureend",M,{passive:!0});ma.addEventListener("gesturechange",M,{passive:!0});ma.addEventListener("gesturestart",M,{passive:!0});ma.addEventListener("touchstart",ea,{passive:!0});
return()=>{ma&&(ma.removeEventListener("touchstart",M),ma.removeEventListener("gestureend",M),ma.removeEventListener("gesturechange",M),ma.removeEventListener("gesturestart",M),ma.removeEventListener("touchstart",ea))}},[c,u.width])}function lk(c,g){const {inputs:u,callbacks:M}=Ug();return ZB.useMemo(()=>({onPointerDown:ea=>{var ma,xa;const {order:Ma=0}=ea;Ma||(null==(ma=ea.currentTarget)?void 0:ma.setPointerCapture(ea.pointerId));ma=c.props.handles[g];null==(xa=M.onPointerDown)?void 0:xa.call(M,
{type:"handle",shape:c,handle:ma,id:g,order:Ma},ea);ea.order=Ma+1},onPointerMove:ea=>{var ma;const {order:xa=0}=ea,Ma=c.props.handles[g];null==(ma=M.onPointerMove)?void 0:ma.call(M,{type:"handle",shape:c,handle:Ma,id:g,order:xa},ea);ea.order=xa+1},onPointerUp:ea=>{var ma,xa;const {order:Ma=0}=ea;Ma||(null==(ma=ea.currentTarget)?void 0:ma.releasePointerCapture(ea.pointerId));ma=c.props.handles[g];null==(xa=M.onPointerUp)?void 0:xa.call(M,{type:"handle",shape:c,handle:ma,id:g,order:Ma},ea);ea.order=
Ma+1},onPointerEnter:ea=>{var ma;const {order:xa=0}=ea,Ma=c.props.handles[g];null==(ma=M.onPointerEnter)?void 0:ma.call(M,{type:"handle",shape:c,handle:Ma,id:g,order:xa},ea);ea.order=xa+1},onPointerLeave:ea=>{var ma;const {order:xa=0}=ea,Ma=c.props.handles[g];null==(ma=M.onPointerLeave)?void 0:ma.call(M,{type:"handle",shape:c,handle:Ma,id:g,order:xa},ea);ea.order=xa+1},onKeyUp:ea=>{var ma;const xa=c.props.handles[g];null==(ma=M.onKeyUp)?void 0:ma.call(M,{type:"handle",shape:c,handle:xa,id:g,order:-1},
ea)},onKeyDown:ea=>{var ma;const xa=c.props.handles[g];null==(ma=M.onKeyDown)?void 0:ma.call(M,{type:"handle",shape:c,handle:xa,id:g,order:-1},ea)}}),[c.id,u,M])}function Vg(c,g,u=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${u?" scale(-1,-1) translate(0, -32)":""}'>`+c.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function mj(c,g,u=
0){UB.useEffect(()=>{const M=c.current;M&&M.style.setProperty("--tl-cursor",VB[g](Wg.radiansToDegrees(u)))},[g,u])}function Ih(c){const {viewport:g}=Ug(),u=rf();SB.useLayoutEffect(()=>$c(()=>{var M;const ea=g.camera.zoom;"pinching"!==u.inputs.state&&(null==(M=c.current)?void 0:M.style.setProperty("--tl-zoom",ea.toString()))}),[])}function aj(c,g=0){const [u,M]=(0,Ux.useState)(c);(0,Ux.useEffect)(()=>{let ea=!1;const ma=setTimeout(()=>{requestIdleCallback(()=>{ea||M(c)})},g);return()=>{ea=!0;clearTimeout(ma)}},
[c,g]);return u}function ni(){const c=rf();Vx.useEffect(()=>{$d(()=>Fe({},c.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+c.currentPageId,JSON.stringify(c.viewport.camera))})},[c.viewport.camera]);Vx.useEffect(()=>{var g;const u=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+c.currentPageId))?g:"null");u?c.viewport.update(u):c.selectedIds.size?c.api.zoomToSelection():c.api.zoomToFit()},[c])}function jl(c){c()}function Uk(c){return mc(qe(c,void 0))}
function bj(c){return{reaction:c,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+QB}}function Pg(c){var g=new Map,u=1,M=new c(function(ea){var ma=g.get(ea);ma&&(ma.reaction.dispose(),g.delete(ea))});return{addReactionToTrack:function(ea,ma,xa){var Ma=u++;M.register(xa,Ma,ea);ea.current=bj(ma);ea.current.finalizationRegistryCleanupToken=Ma;g.set(Ma,ea.current);return ea.current},recordReactionAsCommitted:function(ea){M.unregister(ea);ea.current&&ea.current.finalizationRegistryCleanupToken&&g.delete(ea.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function Aj(){function c(){void 0===M&&(M=setTimeout(g,1E4))}function g(){M=void 0;var ea=Date.now();u.forEach(function(ma){var xa=ma.current;xa&&ea>=xa.cleanAt&&(xa.reaction.dispose(),ma.current=null,u.delete(ma))});0<u.size&&c()}var u=new Set,M;return{addReactionToTrack:function(ea,ma,xa){ea.current=bj(ma);u.add(ea);c();return ea.current},recordReactionAsCommitted:function(ea){u.delete(ea)},forceCleanupTimerToRunNowForTests:function(){M&&
(clearTimeout(M),g())},resetCleanupScheduleForTests:function(){var ea;if(0<u.size){try{for(var ma=NB(u),xa=ma.next();!xa.done;xa=ma.next()){var Ma=xa.value,Za=Ma.current;Za&&(Za.reaction.dispose(),Ma.current=null)}}catch(zb){var hb={error:zb}}finally{try{xa&&!xa.done&&(ea=ma.return)&&ea.call(ma)}finally{if(hb)throw hb.error;}}u.clear()}M&&(clearTimeout(M),M=void 0)}}}function ii(){return new MB}function Hj(c,g){void 0===g&&(g="observed");var u=Rx(ws.default.useState(ii),1)[0],M=Rx(ws.default.useState(),
2)[1],ea=ws.default.useRef(null);if(!ea.current)var ma=new Da("observer".concat(g),function(){xa.mounted?M([]):xa.changedBeforeMount=!0}),xa=OB(ea,ma,u);u=ea.current.reaction;ws.default.useDebugValue(u,Uk);ws.default.useEffect(function(){PB(ea);ea.current?(ea.current.mounted=!0,ea.current.changedBeforeMount&&(ea.current.changedBeforeMount=!1,M([]))):(ea.current={reaction:new Da("observer".concat(g),function(){M([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},M([]));return function(){ea.current.reaction.dispose();
ea.current=null}},[]);var Ma,Za;u.track(function(){try{Ma=c()}catch(hb){Za=hb}});if(Za)throw Za;return Ma}function Xe(c,g){var u;if(No&&c.$$typeof===No)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(u=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==u?u:!1;var M=c,ea=c.displayName||c.name;if(Px&&c.$$typeof===Px&&(g=!0,M=c.render,"function"!==
typeof M))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");u=function(ma,xa){return Hj(function(){return M(ma,xa)},ea)};""!==ea&&(u.displayName=ea);c.contextTypes&&(u.contextTypes=c.contextTypes);g&&(u=(0,rr.forwardRef)(u));u=(0,rr.memo)(u);vi(c,u);return u}function vi(c,g){Object.keys(c).forEach(function(u){so[u]||Object.defineProperty(g,u,Object.getOwnPropertyDescriptor(c,u))})}function mk(c){var g=c.render;c=c.children||g;return"function"!==typeof c?null:Hj(c)}
function oj(c){const g=rf(),{callbacks:u}=Ug(),M=dv.useRef(!1);dv.useEffect(()=>{const ea=Za=>{var hb,zb;if(null==(hb=c.current)?0:hb.contains(document.activeElement))null==(zb=u.onKeyDown)?void 0:zb.call(u,{type:"canvas",order:-1},Za),M.current=Za.shiftKey},ma=Za=>{var hb,zb;if(null==(hb=c.current)?0:hb.contains(document.activeElement))null==(zb=u.onKeyUp)?void 0:zb.call(u,{type:"canvas",order:-1},Za),M.current=Za.shiftKey},xa=Za=>{var hb,zb,Ob;!g.editingShape&&(null==(hb=c.current)?0:hb.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(Ob=null==(zb=document.activeElement)?void 0:zb.tagName)?Ob:"")&&(Za.preventDefault(),g.paste(Za,M.current))},Ma=Za=>{var hb,zb,Ob;!g.editingShape&&0<g.selectedShapes.size&&(null==(hb=c.current)?0:hb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(Ob=null==(zb=document.activeElement)?void 0:zb.tagName)?Ob:"")&&(Za.preventDefault(),g.copy())};window.addEventListener("keydown",ea);window.addEventListener("keyup",ma);document.addEventListener("paste",
xa);document.addEventListener("copy",Ma);return()=>{window.removeEventListener("keydown",ea);window.removeEventListener("keyup",ma);document.removeEventListener("paste",xa);document.removeEventListener("copy",Ma)}},[])}function Bj(c){const {inputs:g,callbacks:u}=Ug(),M=ty.useRef(-1);return ty.useMemo(()=>({onPointerDown:ea=>{var ma,xa;const {order:Ma=0}=ea;Ma||(null==(ma=ea.currentTarget)?void 0:ma.setPointerCapture(ea.pointerId));null==(xa=u.onPointerDown)?void 0:xa.call(u,{type:"shape",shape:c,
order:Ma},ea);ea.order=Ma+1},onPointerMove:ea=>{var ma;const {order:xa=0}=ea;null==(ma=u.onPointerMove)?void 0:ma.call(u,{type:"shape",shape:c,order:xa},ea);ea.order=xa+1},onPointerUp:ea=>{var ma,xa,Ma;const {order:Za=0}=ea;Za||(null==(ma=ea.currentTarget)?void 0:ma.releasePointerCapture(ea.pointerId));null==(xa=u.onPointerUp)?void 0:xa.call(u,{type:"shape",shape:c,order:Za},ea);ma=Date.now();xa=ma-M.current;300<xa?M.current=ma:300>=xa&&(null==(Ma=u.onDoubleClick)?void 0:Ma.call(u,{type:"shape",shape:c,
order:Za},ea),M.current=-1);ea.order=Za+1},onPointerEnter:ea=>{var ma;const {order:xa=0}=ea;null==(ma=u.onPointerEnter)?void 0:ma.call(u,{type:"shape",shape:c,order:xa},ea);ea.order=xa+1},onPointerLeave:ea=>{var ma;const {order:xa=0}=ea;null==(ma=u.onPointerLeave)?void 0:ma.call(u,{type:"shape",shape:c,order:xa},ea);ea.order=xa+1},onKeyUp:ea=>{var ma;null==(ma=u.onKeyUp)?void 0:ma.call(u,{type:"shape",shape:c,order:-1},ea)},onKeyDown:ea=>{var ma;null==(ma=u.onKeyDown)?void 0:ma.call(u,{type:"shape",
shape:c,order:-1},ea)}}),[c.id,g,u])}function Tm(c){var {viewport:g,inputs:u,callbacks:M,components:ea}=c;c=hg(c,["viewport","inputs","callbacks","components"]);return(0,Rb.jsx)(lC,{id:c.id,viewport:g,inputs:u,callbacks:M,components:ea,meta:c.meta,children:(0,Rb.jsx)(jC,Fe({},c))})}function Jk(){return(0,Rb.jsx)("img",{className:"logseq-img-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAIAAACxN37FAAAcXElEQVR4nOyde2xb13nAzzmXXkk6D1GiFNN6xFQt6+HYnZTVSqWgduR4qZ1C7qoAzRYPLdJ0W4egWIdh6ApsK9YAHfLH9kdTLN6S9LV0eVhe4yaxk0ZK4lhqrdhSmtikFDmmHo6ViJTIthFJz9I9wznnXpKOX5RM3nN57veroMoOxftZ+vHjd77zuC60cQsCAFUgsgMAgEICQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNK4ZIdAHABbq/H7fHm/k1ibk5eOKUHCC2TQG1NoK56TW21z1+xtq7a7fG4vZ6LH5ZOpmam308lU5HR8cjYqZnpMzKCLQ0w3OvbYtxeT1tHe7Cpob5x/SX1vSrx2HxkbHx4YCgyNl6EAEsbENoi3F7PrZ3tza2bg43rC/Wc8dh8/4GDwwNHC/WECgBCFx2319O5Y1vHndtWlo+vSjw23/vEk5CtBSUgdFlFRX3T+jW11R6v1+cvz/x9KpmKx+YSsfmZ6fft+et0e72dO7YWT+Vc+g8c6nvuxWJfxf7YV2iR2No628sqyvN5fGTs1PEjRyNj44m5+eJHd3U6d9zR1f05C1TOEBp5u/eJJ9PJlGVXtCF2FDpQW333n/asuNYcHjja99xBiVr7/OU99+8pYK2cP8MDR3ufeNL669oHDVVVy44hi9vrueue7p779+SWFsslUFfTuWObz1/+wfRZ69NVS9vmr/zN1ysDN1l8XUGgriadTJ2JTEq5uh2wkdBr62oe+PtvNNzSXJBnC9TVdOzY5lntnT49sXh+sSDPeVW27965+8+/5Fq1yprLXZINm5qPHzmaTjm08LCL0M2tm/c8+MB1N95Q2KetrV+3ecutkbFTH/3ud4V95ovZvntnV/fOYl8lP+j4iVHZMchBvtAY47bO2+79yy8XKbF5vJ4t2zoxxkXthNjJZlQVWDP02pHFRYvel2yF/MVJa2rW3n3vnxT7Kl3dn7v73i8W6clv7Wy3j81iKLK2tgZRKjsQCcgUGmPs85fvefBr1vS2OnZsu+/BBwp+LZ+/YlfRXiorJlBXjWXHIAWZQlNKt3fvLLuGhsZyaeGVungtFeo5t1vbbM4Tt8fjxPwsV+jm1k2tne0WXzTY2NBz/320EG/HGOP6xvXW/xPyg2LkRKXlCU3p5+/tkXLlts727bt3XnuSprresWNbgYIqMGcnp9mL1nlltCShKa1varCy2PgYXd0712345LU8A0ao3F/R3Lq5cEEVkpnJaRGk05CWoaXnNjYY9bhX/O2U0ptq1xY0ooIRj8bEPhfH5WdZQnu8Hum5ze313PPVPdeSw9bW1RQwngLSt/8XwmWMHZekZQhN6ToZC3cuZsXL7TH/8OW3DNBi4tHYxOi7LD5eQDstScvJ0BvbPiXluhfT1b1zuSMnrop9x1v9+w8kYvO8B0PsGmMRsVxoSjGia2ptsYAEIRRsaqhvalje9/D+CEU0tZAsVlgr5XRodPiNQcreQTB1WrXBkZChKaXXsjq04Cw3SVMOonRmarqYcS2beDTWu/cJ/oLDRllUuPmjUkGC0B6v1+31Wn/dy7HiJB06/laxYlo+6WTy8YceZsUGJtSRKgusF5peS7OsSDS3blpuTUy5Q5HwWNGCWgbC5ji3mbc2CE/TTnTaWqHtOpZq67xtRb983Lv3h4WPZpnEo7FH/uE7ZyemmcqEIEIwYTbb8QddfKwT2kwY2IZOu72eYON6PmDNCyx6vAjFY3Mv/OSpYod3BSKh0Ue+9Z1EbA4TYiZmXnI4FeuENtYDsc+2E1qst8y/a2s8jNsz+NIrI4cHixrbJUknky/+5GePfffhdCpFMaaYYI2lZ8rqZ4emZxk7VqiOEf7s5++y9KJ5cP78+XeGjudZd7KHZZWh4WPDbq+3tuGaFocsi0ho9Ef/+m/jb580KmaiITNDGx9OxdLDGjFCFONUciGdTNqq0SE21RozJnnYQA2pCWWZkdAl+sJPn4pHY9vv2V3sf1ckNNrX+1wkNIpFgUE0VmAIm4lDW3W5WCc0znlDn5k6E2zaYNml88Hnr8jTZiEzpdSYv+Dv8YjSwUO/DB8b7urZ3bb19mJEaKrM+yqYUGYzoZm2BiFOrjQyWCd0zs8az0xO201ofuZYeWI+kc8jDfUp4iYZf4kpjcfm9u99or/3ue09X2jd2lmQqCKh0dCx4eHXB9LJJDYrCuauqJsJN5v7DTZbm6H5hDHV2deR8HjHXdstu3S+sDdvJmmeZoiMKAoP9qZPKdaZ6/Ho3L5HH+vb9/NgS1Pb1s7Aurrl1iGJaOx0aPSDyanjpse8yMmWyNSoN/jf5B2wE7AwQ/P3ZvGefjpsx1MjfJXlifl4/iWo0Ii/9WuIEqovsWxNKaI6ojgxNzd8eGDk8ABFtL6lac3NtWV+v6/K7/F6yyr9uRdJJZOJaCy1kJyZnIpHYzMTU4lY5tR+zGf+kOmxkYxZYuaXhqL5Y1g6KGRO84FhOpmKhMeCzY1WXj0f8h8Xmt+AzX8VYlojQpeWkNFtp2LdB0I4Eh47HRoVelLxQqAX7CcRX1JjoCGmRXImR4zuMuJdOW42ynYzREFf6J9EqWLtTCH/DfFfMRp541eWXjoPEtEV3c1E2G8UtRhpGtJcRh+NEPZHw0KSOy9tdtmMD5qZryYaMotjJD6zp9Ko+VRmQ4NkXnVgcy7Wr+XgmygwPnlsJJ201/LLVDJJMx25ZSGSJSHYEFFMQWs4ozX/AhtfE2Etfxg2S2FCiTlxbbwGCNUIJRp/hWhCa/ZIlE3MxfpBlDJWC41FKkI4nUoNHnrF4qtfgXQyyYZf4g8rynmi85Cd5iCEChF5wsaaRkWiJYQKxTVmPP97gjUXJiKvm9+iideDlvs6yV1GB4n5klgqdLba46OZgUOv2CdJz0xOI2qO81b0DDSz5SlbYBAjMXPLeeo1NMXccpaGTWszRQU1Xg9apvBA0JLLG0uF5sMnLNaCIcyGhgMH7ZKkI6PvmsmvMPIYPWOExUyeaBtnKgdWYGBipmFi/CdWTJNsXWF6DDbnj9UlhxgUUjNJDx56ZYVDsUJzOjQmBneFOs0i06AwPwg2W2/862z2RcbcNb7gA1gRMjbJYnMkRMi5VGrf3sclxHAhfKf0eFbB4kBzvsisOaQXXRGK42tBgtBixxtv3rF0FQm/O3jol9aHkUskPGamRrmBANeKnE2yKPtezN5q+3oPyC08+vb/wsiKkBxLHElHgV1QL5JzqfRjDz0sq+MxfHiA7y2F4lUFpJ7gj43JMIpwIjb3+HclOB2Pxvp6D2BiegxClzjShM6shKRIrOvFZ6emrXe6r/e5RGxexGDP/Y7AspB/06CccRj9feK34785sbljizV3Rhs4+PIbz7+ERWM4M2sNlDKyhTZX9mBzQ8tHicSJwaGWP2p1ry7uXqaZiekn//0HfO1E1mZYIFHqyBZawBdKixWVGOPUwkL42IjH6w2sqyvSBWcmph576OHFxSUxP8dn77CTd/8rg3yhWWqkH5+eSycXQnw5XtXaQMFT9fDrR57+/t50Om2uxtQgPSuDfKFRtreAMWF5GptMj783WtBUnU4mX/qfZ19+undxaZGv4eRrNcVqT0AJMNq4RXYMxio8zE/tQJRSfQnpFOk6QrpY+eGrrLj23dSnQ6O9jz6ebTnzdck0s1EPUAJbCJ1FHH5nbMvTka4Ly6nOBozllf6unu5gS1NZpT//p0wnk5GTowMHX46E3xWT29xjbCxzQ849Bk5JbCS0sVpadIKZypTqOj//Qs+KzlshweamYEtjsKVp7eU3VCeisfdCoxOhsfCx4VQyhXIn24mx+99c7CaNsooKj9fj9nrEgdluj+fie3gm5ub5IXrGZ3E3IOBy2EhogbEkmR/0T3VTZVZ+0Byts6suPF6vr9L/CaY1Fa2/RGwu9dFCOpUSz8dncMT+U3OVZs6pWZbtMGXWVlQE6qrX1Fb7/BVr66rLVnqLlnQyNTP9fjqZOjt1Zmb6/URsfmb6TKHjLVVsJ7R5cpzYL00xRTkZWiTsHKdpbn/k4o3URpM7uyJZ1BgEW1NplFVU1DetDzY21DetX7G++SAUPzt1Jjzyzsz0mbR4R3IkdhRaYMy0iDIjW1tTUZcYohtQJE4yMs8zMrbiGkJnkjHhh3fxhkbRKg231xOorWlp3dTStrmoEl+ByNip06PjkbFTkbFxKQFIxL5CZ8k5h5efanFBPZ3zXwVikgZnDmdBhtM5p1sUAeFxx45t9Y3r7XMv+3hsPjI2Pjww5ByzS0FoQUZZfiAv01qnRiLmdYiYFsn6ijHK1BXmBHsxjmUJNja0tG1q62i3j8cXw80+1X/gYDym+JiyZITOisg/m9tZqXncEM3Z4GpuDkQ4ewJdEQZ/t97e3trRvrJbd8oiMnbq+JGjI4NHZQdSLEpG6Fw+LjfGmS3l2e0w4o9FuLrb6+nccUfHnVvtnJKvTDw233/g4PCAglqXpNAXYzRGinzQm9vr7dyxtePObaWrci7x2Hzfcwff+tWQSttyFRHaAm69vX3Xl76ohsq5iGw9MqiI1iD0VcAYBxvXd3XvLK1aebnEY/NP/uCxmamSn6ABoS8Lxtjt9XR17+y4c6vsWCxieGCo1Dsh9lg+akvqmxq+8s2vN9zSLDsQ6wjUVTe3bk6n0qU7lw5CX5rtu3f23H+fehXzVfF4PS2tm3z+8sjYqcXzi7LDWTYg9Mfx+cv3PPi1ts522YHIJFBXs3nLreG33jmXSsuOZXmA0Bewtq7mK9/8eqAWfiYsVbd1ti+eXzwTmZQdyzIAobM0t27e8+AD1914g+xA7IJr1So+hMAT756SHUu+gNAGnTu29dx/nzXngZQWwcb1ZRXl4ZF3ZAeSFyA0Ihh37d75xz3dsgOxL4G6mpa2TW8PDdt/mAhCo67dO7u6d8qOwu5cf+MNGza1vPPmyOL587JjuRLOFVosaWrr3HL3vT2yYykNrr/xhoZbmm2epx19HsXa2uqe+/fIjqKUCNRW73nwAdlRXAknZmhxio2vwvflb/61A6dOrhGfv6LcXxEaeVt2IJfGiUKLveJ/9e2/LfPL2fNX6gTqqjGikTE79vIcV3KI9NzVfRfYfC107d5Vb8vlh44TGiHa2vHpjh13yA6j5Lnvwa+VlfvsdsKlg4QWP/qyct/27l2yY1EBt9dzz1f3IHN7sk1wkNCUUsKKjV1QbBSKYFPDZ2y2WNwpQossclN1oO12Ry+jKzjbd++yVeHhFKFZekZozzf+QnYgquH2enruv88+hYcjhBZn87d2tss6m0ttgk0NwQ2flB2FgSOEFuc7woKN4tG1exfVl+yQpNUXWqTnYON6GAsWj2BTQ31jA8oenykN9YVGPEV/BhrPRaZr9y473IlXcaExxlTXy/0VLW2bZceiOLySXi99dKi40OJeRE1/eIvsQBxB1xd2GSMWeagstDjwDlG99fbbZMfiCIKNDZ9wfwIhmUlaZaHFebo+f0WgrkZ2IE6hrfM2BBm6eFCqq30mnd1oaduML7ihgtUoLbQooFs/JTsOBxFs2uD2uEHowsMPitYRpb7KCtmxOIt1G9ZTeb0OZYWmVMcUuT0eKKAtJtjUIG5xLeXqagpt3G0T0UCdEzeYyWVtXS2W17xTU+hMN9Tnh3rDagI319DMTfcsR1mhmdG6fiMsr7Mct9fr81fgC27rax1qCm3cVpnv7pYdixPx+cuRnr1BmZWoKTRv2GFKdc9qOHZDAmUV5ZTqVMbiOwWFzmQFgokad3YqOdxej7i9uvU/fwWFzr0Dp+zFjA7Fs9qLKKK6hGyioNDmaTKI6jokaDlQvomTSMgnagrN72avSxmUABw2IocMXRhyJKap5ILcYJyJqPcogkFhIRBbYhFiZXR8NiY7HCeSXkjyrRVQchQIah7KeC6Zkh2LE4nHYnxzhYT5QjWFNsGR0KjsGJxIeiElaziuptCZtt18NJZOJmWH4zg+mJxCmWaTtagpNAcjvuQuHoUy2lLSC8nUgpFErC+jFRZaHBKBIyfDsuNwFjOTUzw3E4yQbvlKf3WF5j9HjHH4zWHZoTiLmQlRbyCEifWz32oKbfwI+XqCs5PTUEZbSSQ0auyvkIGaQgv4j5WcS6VmIlOyY3EQkfAYwtK2yaorNE/P4quBFw/JjsYpRE6GU8kFygsOBKvtCgir3vgSUopxJDQKVYc1DL/+BkYEEwIlR6HhLQ7K80Q6lRp8HpK0FURCo+Inj0RCsRxlhWZvdhhjQjDRECIjrx+RHZH6DL96OB6d4++KCGM5aikrtAnfOKFp8djcyKuHZQejOKzeIIRLJc0rpYUW40JMxBd9z+yXHZDKzEQmJ0JjmGhUTKoQyNDFALMhCqs6CIEkXVQGXziEMKFYVM8SVnEIVBZalNH8QAOWp4mmvfCjn0K7oxjEZ6Mjh4+wrMzHLQhjXZdzvxWVhRaw9IwJJUTHOJ1K9z/dKzsiBdn/g/9kpR1TWSRpaZEoLjRP0ny9PyGIFR7a4IsvzUxMyo5LKYZfff10KIwIV5mwCk9Wi0N9ocXZ2/xNkJXRIoX0PvJoegEKj8IQn432P7Mf8fYo1jRDa3moLzTiQ0OKkRgaUow/mJzufwYKj8Lw6rP7E3PzCLOKjld3WO59g5wiNHsT5CUH0njh8cKh8JvHZIdV8gy/enj4tTcQJlhzYaLpCEnsbwicITT7hxJ+kpKGiUZ5l7T3+48mZqOywypheLHRy1KyplHCht18VkXybd00VOWUI8H5ciVe4OkUUbp0/nx46Fhb11bXqlWyQys90gvJvd/+50Rsjmou/r7nwppL4ox3BsdkaLPwwJqGXS5ReMSjscf/6V+gM70Cnn/ix4nYHK/iWL0hpmOxDU7HdFaGFv9v/tBZnv59PLEQjze3f1pycCVF31P7fn3wZV5paNi1ihUbmia3uZHBQUJnwcbIhc8A4JmJycSHs+B0nvQ/va//2f2swCAEsfc6VnIQTZN/33qO44TG2UUzlP8GKKX0g4mpxOxs8xZw+ipwm/8XEYI0grVV2MVKZ0TkLH2+JI4T2txryP5HjT8yqWciE6NDxzbf3uH6AxgjXpr+p/b1PduLRdGsGbkZYYIlLay7JA4Vmm+vz2RrKu5w81Ei8fYbR1raP+1evVp2jLaD2fxML+YdOjaqJprx2U42O1RoA56oMeGTAQTz0zJROpkM/frN4KaN15eVyY7PLqQXkj/f+1+/evElrGlI07C2CokviMuGd0hwrtBYlBpiNTo1eyCU/f6GDv3Sc93q2g0NsmOUT3w2uvdb/zgRGuPzJqKt4UIuF7OZEBueJ+9coZFZfFDzcEdRVYtf0qm3fhP/cHZtcJ2Ty4/w0WM/fuh7H/3uI9GYQ5oLr1pFNT7bKnsC5XI4W2iBSDPkgkUIGKEPJiZDR98MBNf5qiplhieD9ELy5f/+2Qs//Mni0hLCRMxDYdcqXjTzTVYgtJ0xutIEI3NtjRg1/l8qdbzvtd9GowEnperIidCPv/u98d+8LZYcid4cNlvOfLOg7SqNDCC0QbbvITYR8ZYeq0MImZmYCA+96fZ6A8F1ssMsLiIxH9j7eDqdpnyZAOX9ZsSnA0WHzj4t50uC0cYtsmOwC8YwcWmJDRL1RbS4hKlOlxaRrlNdR5SWV1X+2bf+LhC8WXakRWHwFy/2P7MvtZDky0E1UWlQohGXi8nNKw3pSzWuCgh9AcJp9qEv8Q8mNGZCL2KKqK5jRNvu2Nr1pXvKFCqsIydCvY/8R3w2isUaI03TsTEKpHynIG8222g68AqA0B9HFNGUZ2VMl1jC5lojqmORv9l/VkTryIlQ/9P7Tp8IITF+MBeLY82oMZDYhGK/9tzlAKEvgZGnEeVOU1F1YKojXTfSNvuaPaB+08a2bVtbu7bKDnl5pBeSw/2vDT5/MD47y4Z9GPN+PNF5PiauVeZ+KkKNWdWSyM4IhL4sZmeaSc2+0lmeNoSmOlpaMioTvgbVV1nZ2rW17Y7PllVVyQ78KkROnAwPHT/e/+q5ZCr3WCkxBDR2qfGdlyxby452BYDQV4EXGKwEMQtrYTMz28jfui6KEEpRcGNzW9fW+ls22q0UESk5PHQscjLEV2MhVmPknKTBF80RY/DH1ySWos0g9DLAvALhSZp5jER5jVhVzcprZIwmxX1sg5tabr1jW/CWZrk5OzEbDR19Mzx07PSJk1ic0EX4phJhsxBa7DohGtKIOLCV5twXr+QAoZcFFaWzGB3ytK0bpYi4XT6rUijP6FTcR7Xipqp1Lc3rbmkJBNdZ08ZOzEbfO3Fy4kQocjKciEbFySTmuZXY6LIT7q7YAy8MFn06ebeSKBQg9DLIFNZCX5an2fhw0SiykfgjK68JeySvUvhd3MU3uld716y7uX7jxkDw5rKqykL5nZidfe9E6MPI1PzshxMnw6mFBXOyk1CjOSGqZFFjsPICaxpFOHPyjnGYRkGikQ0IvVLMESGrQNgfdWqMFEVBYiZsnqqNhXwok7lFIwXdWOn3Vfk9q68vq/J7rlt9Y6Xfu3q1+7rVmTu/+6oq52dnxeuB39By4dzCQmoh+dvZaDwWS8xG47NRkVOFw8aWBZJZZcWTrnAXm0WzKDCIqEC0Ei0tLgcIvXKMQpPqBBOdz7wwrYXfog5BOl3Subu6eKTYH8NfCLwhZhxiYSjFD+JD/KwFcSAfMj6LHb1IJHtjZzXh1tLMrpvMxgVxUhQ/pVKcK0Cz3YxclcWuBsnHaBQcl+wAShgj14q2gOYSpTPCS/yESII1Xk9rvLzmRTbBSOe6s89CZjE+o0byFtMX2FhDwl4tRMM6r9pF+UtEzSPOc+ExZJKxCEWcHczKZEJ0hIhmtCx41WF26MwlsoqpLAChr5VsCZHZR46MTp+uU+ziqVVfYjU1c5HZjEim/NAxwvyzkbMpzayKMvYfIN5VE7dIyxwVQLM7bjAW90ZC/Nm5zOIVINpwvNzBuSu/M2WPkoDQhSFHEfF2L2aSjUEhEkv5MF8NIuYrWN7VibA5I3H2bu86Qpmqw/BYWCkOCEbmsxudOPMuo/w/sWfl65Wx0VHOeakorLIAhC4KpjfG9nKsmUcKMed4DW3YiHJ7fLnfLr5T3MrLrED0zN2zxfp6w3PxLExcZLquIWy0zh3icQYQuuhkbjxOzfsYZWoMMyVTIxHnFjDCf2QU5MgcIpqDQHPDSCZniweJK5rtQhn/XMmA0FZjaoyNSpgQMUY0ZmSQ0bAzHmduC6P877OVQ+5knrojvBUAQssh45+4uU5uCY7MVgY2H5ljO734GYBcQGjbcXHVC+7mj0337gLAygChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGl+P8AAAD//zOPeTSLsacXAAAAAElFTkSuQmCC",
alt:"logseq"})}function ji(c){return(0,Rb.jsx)("button",Fe({className:"tl-button"},c))}function Uf(){Uf=Object.assign?Object.assign.bind():function(c){for(var g=1;g<arguments.length;g++){var u=arguments[g],M;for(M in u)Object.prototype.hasOwnProperty.call(u,M)&&(c[M]=u[M])}return c};return Uf.apply(this,arguments)}function Ag(c,g,{checkForDefaultPrevented:u=!0}={}){return function(M){null===c||void 0===c||c(M);if(!1===u||!M.defaultPrevented)return null===g||void 0===g?void 0:g(M)}}function Ol(...c){return g=>
c.forEach(u=>{"function"===typeof u?u(g):null!==u&&void 0!==u&&(u.current=g)})}function ki(...c){return(0,iC.useCallback)(Ol(...c),c)}function cj(c,g=[]){let u=[];const M=()=>{const ea=u.map(ma=>(0,to.createContext)(ma));return function(ma){const xa=(null===ma||void 0===ma?void 0:ma[c])||ea;return(0,to.useMemo)(()=>({[`__scope${c}`]:wf(Fe({},ma),{[c]:xa})}),[ma,xa])}};M.scopeName=c;return[function(ea,ma){function xa(hb){const {scope:zb,children:Ob}=hb,bc=hg(hb,["scope","children"]);hb=(null===zb||
void 0===zb?void 0:zb[c][Za])||Ma;const yc=(0,to.useMemo)(()=>bc,Object.values(bc));return(0,to.createElement)(hb.Provider,{value:yc},Ob)}const Ma=(0,to.createContext)(ma),Za=u.length;u=[...u,ma];xa.displayName=ea+"Provider";return[xa,function(hb,zb){if(zb=(0,to.useContext)((null===zb||void 0===zb?void 0:zb[c][Za])||Ma))return zb;if(void 0!==ma)return ma;throw Error(`\`${hb}\` must be used within \`${ea}\``);}]},bk(M,...g)]}function bk(...c){const g=c[0];if(1===c.length)return g;const u=()=>{const M=
c.map(ea=>({useScope:ea(),scopeName:ea.scopeName}));return function(ea){const ma=M.reduce((xa,{useScope:Ma,scopeName:Za})=>{Ma=Ma(ea)[`__scope${Za}`];return Fe(Fe({},xa),Ma)},{});return(0,to.useMemo)(()=>({[`__scope${g.scopeName}`]:ma}),[ma])}};u.scopeName=g.scopeName;return u}function Jj(c){const g=(0,jv.useRef)(c);(0,jv.useEffect)(()=>{g.current=c});return(0,jv.useMemo)(()=>(...u)=>{var M;return null===(M=g.current)||void 0===M?void 0:M.call(g,...u)},[])}function nj({prop:c,defaultProp:g,onChange:u=
()=>{}}){const [M,ea]=rg({defaultProp:g,onChange:u}),ma=void 0!==c;g=ma?c:M;const xa=Jj(u);u=(0,zt.useCallback)(Ma=>{ma?(Ma="function"===typeof Ma?Ma(c):Ma,Ma!==c&&xa(Ma)):ea(Ma)},[ma,c,ea,xa]);return[g,u]}function rg({defaultProp:c,onChange:g}){c=(0,zt.useState)(c);const [u]=c,M=(0,zt.useRef)(u),ea=Jj(g);(0,zt.useEffect)(()=>{M.current!==u&&(ea(u),M.current=u)},[u,M,ea]);return c}function Xl(c){return(0,um.isValidElement)(c)&&c.type===CC}function oh(c,g){const u=Fe({},g);for(const M in g){const ea=
c[M],ma=g[M];/^on[A-Z]/.test(M)?u[M]=(...xa)=>{null===ma||void 0===ma||ma(...xa);null===ea||void 0===ea||ea(...xa)}:"style"===M?u[M]=Fe(Fe({},ea),ma):"className"===M&&(u[M]=[ea,ma].filter(Boolean).join(" "))}return Fe(Fe({},c),u)}function Ki(c,g){c&&(0,BC.flushSync)(()=>c.dispatchEvent(g))}function Ak(c){var g=c+"CollectionProvider";const [u,M]=cj(g),[ea,ma]=u(g,{collectionRef:{current:null},itemMap:new Map}),xa=zb=>{const {scope:Ob,children:bc}=zb;zb=Oo.default.useRef(null);const yc=Oo.default.useRef(new Map).current;
return Oo.default.createElement(ea,{scope:Ob,itemMap:yc,collectionRef:zb},bc)};Object.assign(xa,{displayName:g});const Ma=c+"CollectionSlot";g=Oo.default.forwardRef((zb,Ob)=>{const {scope:bc,children:yc}=zb;zb=ma(Ma,bc);Ob=ki(Ob,zb.collectionRef);return Oo.default.createElement(ur,{ref:Ob},yc)});Object.assign(g,{displayName:Ma});const Za=c+"CollectionItemSlot",hb=Oo.default.forwardRef((zb,Ob)=>{const {scope:bc,children:yc}=zb,ic=hg(zb,["scope","children"]),Ac=Oo.default.useRef(null);zb=ki(Ob,Ac);
const tc=ma(Za,bc);Oo.default.useEffect(()=>{tc.itemMap.set(Ac,Fe({ref:Ac},ic));return()=>void tc.itemMap.delete(Ac)});return Oo.default.createElement(ur,{["data-radix-collection-item"]:"",ref:zb},yc)});Object.assign(hb,{displayName:Za});return[{Provider:xa,Slot:g,ItemSlot:hb},function(zb){const Ob=ma(c+"CollectionConsumer",zb);return Oo.default.useCallback(()=>{const bc=Ob.collectionRef.current;if(!bc)return[];const yc=Array.from(bc.querySelectorAll("[data-radix-collection-item]"));return Array.from(Ob.itemMap.values()).sort((ic,
Ac)=>yc.indexOf(ic.ref.current)-yc.indexOf(Ac.ref.current))},[Ob.collectionRef,Ob.itemMap])},M]}function dj(c){const g=(0,yy.useContext)(DC);return c||g||"ltr"}function ej(c){const g=Jj(c);(0,EC.useEffect)(()=>{const u=M=>{"Escape"===M.key&&g(M)};document.addEventListener("keydown",u);return()=>document.removeEventListener("keydown",u)},[g])}function Kk(c){const g=Jj(c),u=(0,on.useRef)(!1),M=(0,on.useRef)(()=>{});(0,on.useEffect)(()=>{const ea=xa=>{if(xa.target&&!u.current){let Ma=function(){fg("dismissableLayer.pointerDownOutside",
g,Za,{discrete:!0})};const Za={originalEvent:xa};"touch"===xa.pointerType?(document.removeEventListener("click",M.current),M.current=Ma,document.addEventListener("click",M.current,{once:!0})):Ma()}u.current=!1},ma=window.setTimeout(()=>{document.addEventListener("pointerdown",ea)},0);return()=>{window.clearTimeout(ma);document.removeEventListener("pointerdown",ea);document.removeEventListener("click",M.current)}},[g]);return{onPointerDownCapture:()=>u.current=!0}}function Ck(c){const g=Jj(c),u=(0,on.useRef)(!1);
(0,on.useEffect)(()=>{const M=ea=>{ea.target&&!u.current&&fg("dismissableLayer.focusOutside",g,{originalEvent:ea},{discrete:!1})};document.addEventListener("focusin",M);return()=>document.removeEventListener("focusin",M)},[g]);return{onFocusCapture:()=>u.current=!0,onBlurCapture:()=>u.current=!1}}function Ql(){const c=new CustomEvent("dismissableLayer.update");document.dispatchEvent(c)}function fg(c,g,u,{discrete:M}){const ea=u.originalEvent.target;u=new CustomEvent(c,{bubbles:!1,cancelable:!0,detail:u});
g&&ea.addEventListener(c,g,{once:!0});M?Ki(ea,u):ea.dispatchEvent(u)}function Zl(){(0,sC.useEffect)(()=>{var c,g;const u=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(c=u[0])&&void 0!==c?c:pj());document.body.insertAdjacentElement("beforeend",null!==(g=u[1])&&void 0!==g?g:pj());iv++;return()=>{1===iv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(M=>M.remove());iv--}},[])}function pj(){const c=document.createElement("span");
c.setAttribute("data-radix-focus-guard","");c.tabIndex=0;c.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return c}function Wk(c,{select:g=!1}={}){const u=document.activeElement;for(const M of c)if(Wf(M,{select:g}),document.activeElement!==u)break}function Kg(c){const g=[];for(c=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:u=>{const M="INPUT"===u.tagName&&"hidden"===u.type;return u.disabled||u.hidden||M?NodeFilter.FILTER_SKIP:0<=u.tabIndex?NodeFilter.FILTER_ACCEPT:
NodeFilter.FILTER_SKIP}});c.nextNode();)g.push(c.currentNode);return g}function Rl(c,g){for(const u of c)if(!Xk(u,{upTo:g}))return u}function Xk(c,{upTo:g}){if("hidden"===getComputedStyle(c).visibility)return!0;for(;c&&(void 0===g||c!==g);){if("none"===getComputedStyle(c).display)return!0;c=c.parentElement}return!1}function Wf(c,{select:g=!1}={}){if(c&&c.focus){const u=document.activeElement;c.focus({preventScroll:!0});c!==u&&c instanceof HTMLInputElement&&"select"in c&&g&&c.select()}}function Si(c,
g){c=[...c];g=c.indexOf(g);-1!==g&&c.splice(g,1);return c}function pl(c){return c.filter(g=>"A"!==g.tagName)}function vf(c){const [g,u]=ky.useState(qC());nn(()=>{c||u(M=>null!==M&&void 0!==M?M:String(pC++))},[c]);return c||(g?`radix-${g}`:"")}function Cj(c){return c.split("-")[0]}function Ri(c){return["top","bottom"].includes(Cj(c))?"x":"y"}function il(c){return"y"===c?"height":"width"}function Ik(c,g,u){let {reference:M,floating:ea}=c;var ma=M.x+M.width/2-ea.width/2;const xa=M.y+M.height/2-ea.height/
2;c=Ri(g);var Ma=il(c);Ma=M[Ma]/2-ea[Ma]/2;const Za="x"===c;switch(Cj(g)){case "top":ma={x:ma,y:M.y-ea.height};break;case "bottom":ma={x:ma,y:M.y+M.height};break;case "right":ma={x:M.x+M.width,y:xa};break;case "left":ma={x:M.x-ea.width,y:xa};break;default:ma={x:M.x,y:M.y}}switch(g.split("-")[1]){case "start":ma[c]-=Ma*(u&&Za?-1:1);break;case "end":ma[c]+=Ma*(u&&Za?-1:1)}return ma}function qm(c){return"number"!=typeof c?Fe({top:0,right:0,bottom:0,left:0},c):{top:c,right:c,bottom:c,left:c}}function Ei(c){return wf(Fe({},
c),{top:c.y,left:c.x,right:c.x+c.width,bottom:c.y+c.height})}function qj(c,g){return mi(this,null,function*(){var u;void 0===g&&(g={});const {x:M,y:ea,platform:ma,rects:xa,elements:Ma,strategy:Za}=c,{boundary:hb="clippingAncestors",rootBoundary:zb="viewport",elementContext:Ob="floating",altBoundary:bc=!1,padding:yc=0}=g,ic=qm(yc),Ac=Ma[bc?"floating"===Ob?"reference":"floating":Ob],tc=Ei(yield ma.getClippingRect({element:null==(u=yield null==ma.isElement?void 0:ma.isElement(Ac))||u?Ac:Ac.contextElement||
(yield null==ma.getDocumentElement?void 0:ma.getDocumentElement(Ma.floating)),boundary:hb,rootBoundary:zb,strategy:Za}));u=Ei(ma.convertOffsetParentRelativeRectToViewportRelativeRect?yield ma.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===Ob?wf(Fe({},xa.floating),{x:M,y:ea}):xa.reference,offsetParent:yield null==ma.getOffsetParent?void 0:ma.getOffsetParent(Ma.floating),strategy:Za}):xa[Ob]);return{top:tc.top-u.top+ic.top,bottom:u.bottom-tc.bottom+ic.bottom,left:tc.left-u.left+
ic.left,right:u.right-tc.right+ic.right}})}function Vk(c){return c.replace(/left|right|bottom|top/g,g=>GC[g])}function Lk(c,g,u){void 0===u&&(u=!1);const M=c.split("-")[1],ea=Ri(c);c=il(ea);u="x"===ea?M===(u?"end":"start")?"right":"left":"start"===M?"bottom":"top";return g.reference[c]>g.floating[c]&&(u=Vk(u)),{main:u,cross:Vk(u)}}function kl(c){return c.replace(/start|end/g,g=>HC[g])}function Cm(c,g){return{top:c.top-g.height,right:c.right-g.width,bottom:c.bottom-g.height,left:c.left-g.width}}function Vm(c){return Ay.some(g=>
0<=c[g])}function nk(c){return null==c?window:c&&c.document&&c.location&&c.alert&&c.setInterval?c:(c=c.ownerDocument)&&c.defaultView||window}function Pl(c){return nk(c).getComputedStyle(c)}function Ej(c){return c&&c.document&&c.location&&c.alert&&c.setInterval?"":c?(c.nodeName||"").toLowerCase():""}function Tj(){const c=navigator.userAgentData;return null!=c&&c.brands?c.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function fj(c){return c instanceof nk(c).HTMLElement}function gj(c){return c instanceof
nk(c).Element}function ql(c){return"undefined"==typeof ShadowRoot?!1:c instanceof nk(c).ShadowRoot||c instanceof ShadowRoot}function Zk(c){const {overflow:g,overflowX:u,overflowY:M}=Pl(c);return/auto|scroll|overlay|hidden/.test(g+M+u)}function Yk(c){const g=/firefox/i.test(Tj());c=Pl(c);return"none"!==c.transform||"none"!==c.perspective||"paint"===c.contain||["transform","perspective"].includes(c.willChange)||g&&"filter"===c.willChange||g&&!!c.filter&&"none"!==c.filter}function Fl(){return!/^((?!chrome|android).)*safari/i.test(Tj())}
function Uj(c,g,u){var M,ea,ma,xa;void 0===g&&(g=!1);void 0===u&&(u=!1);var Ma=c.getBoundingClientRect();let Za=1,hb=1;g&&fj(c)&&(Za=0<c.offsetWidth&&At(Ma.width)/c.offsetWidth||1,hb=0<c.offsetHeight&&At(Ma.height)/c.offsetHeight||1);c=gj(c)?nk(c):window;g=!Fl()&&u;u=(Ma.left+(g&&null!=(M=null==(ea=c.visualViewport)?void 0:ea.offsetLeft)?M:0))/Za;M=(Ma.top+(g&&null!=(ma=null==(xa=c.visualViewport)?void 0:xa.offsetTop)?ma:0))/hb;ma=Ma.width/Za;Ma=Ma.height/hb;return{width:ma,height:Ma,top:M,right:u+
ma,bottom:M+Ma,left:u,x:u,y:M}}function Dj(c){return(g=c,(g instanceof nk(g).Node?c.ownerDocument:c.document)||window.document).documentElement;var g}function Kj(c){return gj(c)?{scrollLeft:c.scrollLeft,scrollTop:c.scrollTop}:{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function im(c){return Uj(Dj(c)).left+Kj(c).scrollLeft}function Sl(c){return"html"===Ej(c)?c:c.assignedSlot||c.parentNode||(ql(c)?c.host:null)||Dj(c)}function $k(c){return fj(c)&&"fixed"!==getComputedStyle(c).position?c.offsetParent:
null}function Bk(c){for(var g=nk(c),u=$k(c);u&&["table","td","th"].includes(Ej(u))&&"static"===getComputedStyle(u).position;)u=$k(u);if(!u||"html"!==Ej(u)&&("body"!==Ej(u)||"static"!==getComputedStyle(u).position||Yk(u))){if(!u)a:{c=Sl(c);for(ql(c)&&(c=c.host);fj(c)&&!["html","body"].includes(Ej(c));){if(Yk(c)){u=c;break a}c=c.parentNode}u=null}g=u||g}return g}function rm(c){if(fj(c))return{width:c.offsetWidth,height:c.offsetHeight};c=Uj(c);return{width:c.width,height:c.height}}function Dk(c){const g=
Sl(c);return["html","body","#document"].includes(Ej(g))?c.ownerDocument.body:fj(g)&&Zk(g)?g:Dk(g)}function Vj(c,g){var u;void 0===g&&(g=[]);var M=Dk(c);c=M===(null==(u=c.ownerDocument)?void 0:u.body);u=nk(M);M=c?[u].concat(u.visualViewport||[],Zk(M)?M:[]):M;g=g.concat(M);return c?g:g.concat(Vj(M))}function Hh(c,g,u){return"viewport"===g?Ei(function(M,ea){var ma=nk(M),xa=Dj(M);ma=ma.visualViewport;M=xa.clientWidth;xa=xa.clientHeight;let Ma=0,Za=0;if(ma){M=ma.width;xa=ma.height;const hb=Fl();(hb||!hb&&
"fixed"===ea)&&(Ma=ma.offsetLeft,Za=ma.offsetTop)}return{width:M,height:xa,x:Ma,y:Za}}(c,u)):gj(g)?function(M,ea){var ma=Uj(M,!1,"fixed"===ea);ea=ma.top+M.clientTop;ma=ma.left+M.clientLeft;return{top:ea,left:ma,x:ma,y:ea,right:ma+M.clientWidth,bottom:ea+M.clientHeight,width:M.clientWidth,height:M.clientHeight}}(g,u):Ei(function(M){var ea;const ma=Dj(M);var xa=Kj(M);const Ma=null==(ea=M.ownerDocument)?void 0:ea.body;ea=zs(ma.scrollWidth,ma.clientWidth,Ma?Ma.scrollWidth:0,Ma?Ma.clientWidth:0);const Za=
zs(ma.scrollHeight,ma.clientHeight,Ma?Ma.scrollHeight:0,Ma?Ma.clientHeight:0);M=-xa.scrollLeft+im(M);xa=-xa.scrollTop;return"rtl"===Pl(Ma||ma).direction&&(M+=zs(ma.clientWidth,Ma?Ma.clientWidth:0)-ea),{width:ea,height:Za,x:M,y:xa}}(Dj(c)))}function Ij(c){const g=Vj(c),u=["absolute","fixed"].includes(Pl(c).position)&&fj(c)?Bk(c):c;return gj(u)?g.filter(M=>{var ea;if(ea=gj(M))a:if(ea=null==u.getRootNode?void 0:u.getRootNode(),M.contains(u))ea=!0;else{if(ea&&ql(ea)){ea=u;do{if(ea&&M===ea){ea=!0;break a}ea=
ea.parentNode||ea.host}while(ea)}ea=!1}return ea&&"body"!==Ej(M)}):[]}function Nk(c,g,u,M){void 0===M&&(M={});const {ancestorScroll:ea=!0,ancestorResize:ma=!0,elementResize:xa=!0,animationFrame:Ma=!1}=M,Za=ea&&!Ma,hb=ma&&!Ma,zb=Za||hb?[...(gj(c)?Vj(c):[]),...Vj(g)]:[];zb.forEach(ic=>{Za&&ic.addEventListener("scroll",u,{passive:!0});hb&&ic.addEventListener("resize",u)});let Ob,bc=null;if(xa){let ic=!0;bc=new ResizeObserver(()=>{ic||u();ic=!1});gj(c)&&!Ma&&bc.observe(c);bc.observe(g)}let yc=Ma?Uj(c):
null;return Ma&&function Ac(){const tc=Uj(c);!yc||tc.x===yc.x&&tc.y===yc.y&&tc.width===yc.width&&tc.height===yc.height||u();yc=tc;Ob=requestAnimationFrame(Ac)}(),u(),()=>{var Ac;zb.forEach(tc=>{Za&&tc.removeEventListener("scroll",u);hb&&tc.removeEventListener("resize",u)});null==(Ac=bc)||Ac.disconnect();bc=null;Ma&&cancelAnimationFrame(Ob)}}function hk(c,g){if(c===g)return!0;if(typeof c!==typeof g)return!1;if("function"===typeof c&&c.toString()===g.toString())return!0;let u,M;if(c&&g&&"object"==typeof c){if(Array.isArray(c)){var ea=
c.length;if(ea!=g.length)return!1;for(u=ea;0!==u--;)if(!hk(c[u],g[u]))return!1;return!0}M=Object.keys(c);ea=M.length;if(ea!==Object.keys(g).length)return!1;for(u=ea;0!==u--;)if(!Object.prototype.hasOwnProperty.call(g,M[u]))return!1;for(u=ea;0!==u--;)if(ea=M[u],!("_owner"===ea&&c.$$typeof||hk(c[ea],g[ea])))return!1;return!0}return c!==c&&g!==g}function Bh(c){const g=En.useRef(c);ov(()=>{g.current=c});return g}function ih(c){let {middleware:g,placement:u="bottom",strategy:M="absolute",whileElementsMounted:ea}=
void 0===c?{}:c;const ma=En.useRef(null),xa=En.useRef(null),Ma=Bh(ea),Za=En.useRef(null),[hb,zb]=En.useState({x:null,y:null,strategy:M,placement:u,middlewareData:{}}),[Ob,bc]=En.useState(g);hk(null==Ob?void 0:Ob.map(Uc=>{({options:Uc}=Uc);return Uc}),null==g?void 0:g.map(Uc=>{({options:Uc}=Uc);return Uc}))||bc(g);const yc=En.useCallback(()=>{ma.current&&xa.current&&OC(ma.current,xa.current,{middleware:Ob,placement:u,strategy:M}).then(Uc=>{ic.current&&PC.flushSync(()=>{zb(Uc)})})},[Ob,u,M]);ov(()=>
{ic.current&&yc()},[yc]);const ic=En.useRef(!1);ov(()=>{ic.current=!0;return()=>{ic.current=!1}},[]);const Ac=En.useCallback(()=>{"function"===typeof Za.current&&(Za.current(),Za.current=null);if(ma.current&&xa.current)if(Ma.current){const Uc=Ma.current(ma.current,xa.current,yc);Za.current=Uc}else yc()},[yc,Ma]),tc=En.useCallback(Uc=>{ma.current=Uc;Ac()},[Ac]),Vb=En.useCallback(Uc=>{xa.current=Uc;Ac()},[Ac]),wc=En.useMemo(()=>({reference:ma,floating:xa}),[]);return En.useMemo(()=>wf(Fe({},hb),{update:yc,
refs:wc,reference:tc,floating:Vb}),[hb,yc,wc,tc,Vb])}function Dg(c){const [g,u]=(0,RC.useState)(void 0);nn(()=>{if(c){u({width:c.offsetWidth,height:c.offsetHeight});const M=new ResizeObserver(ea=>{if(Array.isArray(ea)&&ea.length){ea=ea[0];if("borderBoxSize"in ea){ea=ea.borderBoxSize;var ma=Array.isArray(ea)?ea[0]:ea;ea=ma.inlineSize;ma=ma.blockSize}else ea=c.offsetWidth,ma=c.offsetHeight;u({width:ea,height:ma})}});M.observe(c,{box:"border-box"});return()=>M.unobserve(c)}u(void 0)},[c]);return g}function ik(c){return void 0!==
c}function Jh(c){return null!==c}function Ui(c){const [g,u="center"]=c.split("-");return[g,u]}function vg(c,g){return(0,hp.useReducer)((u,M)=>{M=g[u][M];return null!==M&&void 0!==M?M:u},c)}function Vi(c){const [g,u]=(0,hp.useState)(),M=(0,hp.useRef)({}),ea=(0,hp.useRef)(c),ma=(0,hp.useRef)("none"),[xa,Ma]=vg(c?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,hp.useEffect)(()=>
{const Za=Of(M.current);ma.current="mounted"===xa?Za:"none"},[xa]);nn(()=>{const Za=M.current,hb=ea.current;if(hb!==c){const zb=ma.current,Ob=Of(Za);c?Ma("MOUNT"):"none"===Ob||"none"===(null===Za||void 0===Za?void 0:Za.display)?Ma("UNMOUNT"):hb&&zb!==Ob?Ma("ANIMATION_OUT"):Ma("UNMOUNT");ea.current=c}},[c,Ma]);nn(()=>{if(g){const Za=zb=>{const Ob=Of(M.current).includes(zb.animationName);zb.target===g&&Ob&&(0,bD.flushSync)(()=>Ma("ANIMATION_END"))},hb=zb=>{zb.target===g&&(ma.current=Of(M.current))};
g.addEventListener("animationstart",hb);g.addEventListener("animationcancel",Za);g.addEventListener("animationend",Za);return()=>{g.removeEventListener("animationstart",hb);g.removeEventListener("animationcancel",Za);g.removeEventListener("animationend",Za)}}Ma("ANIMATION_END")},[g,Ma]);return{isPresent:["mounted","unmountSuspended"].includes(xa),ref:(0,hp.useCallback)(Za=>{Za&&(M.current=getComputedStyle(Za));u(Za)},[])}}function Of(c){return(null===c||void 0===c?void 0:c.animationName)||"none"}
function Lg(c,g,u){c=c.key;u="rtl"!==u?c:"ArrowLeft"===c?"ArrowRight":"ArrowRight"===c?"ArrowLeft":c;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(u))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(u))return iD[u]}function rj(c){const g=document.activeElement;for(const u of c){if(u===g)break;u.focus();if(document.activeElement!==g)break}}function li(c,g){return c.map((u,M)=>c[(g+M)%c.length])}function lh(c,g){var u=(0,lD.useState)(function(){return{value:c,callback:g,facade:{get current(){return u.value},
set current(M){var ea=u.value;ea!==M&&(u.value=M,u.callback(M,ea))}}}})[0];u.callback=g;return u.facade}function ng(c,g){return lh(g||null,function(u){return c.forEach(function(M){"function"===typeof M?M(u):M&&(M.current=u);return M})})}function th(c){return c}function Hl(c,g){void 0===g&&(g=th);var u=[],M=!1;return{read:function(){if(M)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return u.length?u[u.length-1]:c},useMedium:function(ea){var ma=
g(ea,M);u.push(ma);return function(){u=u.filter(function(xa){return xa!==ma})}},assignSyncMedium:function(ea){for(M=!0;u.length;){var ma=u;u=[];ma.forEach(ea)}u={push:function(xa){return ea(xa)},filter:function(){return u}}},assignMedium:function(ea){M=!0;var ma=[];if(u.length){var xa=u;u=[];xa.forEach(ea);ma=u}var Ma=function(){var Za=ma;ma=[];Za.forEach(ea)};Promise.resolve().then(Ma);u={push:function(Za){ma.push(Za);Promise.resolve().then(Ma)},filter:function(Za){ma=ma.filter(Za);return u}}}}}
function xi(c){const g=document.activeElement;for(const u of c){if(u===g)break;u.focus();if(document.activeElement!==g)break}}function Ni(c,g){return c.map((u,M)=>c[(g+M)%c.length])}function Pb(c,g,u){const M=1<g.length&&Array.from(g).every(ma=>ma===g[0])?g[0]:g,ea=u?c.indexOf(u):-1;c=Ni(c,Math.max(ea,0));1===M.length&&(c=c.filter(ma=>ma!==u));c=c.find(ma=>ma.toLowerCase().startsWith(M.toLowerCase()));return c!==u?c:void 0}function cc(c){return g=>"mouse"===g.pointerType?c(g):void 0}function ac(c){var {value:g,
onChange:u}=c;c=hg(c,["value","onChange"]);const M=zv.useRef(null),[ea,ma]=zv.useState(g);zv.useEffect(()=>{var xa,Ma,Za;if((null==g?0:g.toString().startsWith("var"))&&M.current){const hb=null==(xa=/var\((.*)\)/.exec(g.toString()))?void 0:xa[1];if(hb){const [zb,Ob]=hb.split(",").map(bc=>bc.trim());ma(null!=(Za=null!=(Ma=getComputedStyle(M.current).getPropertyValue(zb).trim())?Ma:Ob)?Za:"#000")}}},[g]);return(0,Rb.jsx)("div",{className:"input",ref:M,children:(0,Rb.jsx)("div",{className:"color-input-wrapper",
children:(0,Rb.jsx)("input",Fe({className:"color-input",type:"color",value:ea,onChange:xa=>{ma(xa.target.value);null==u?void 0:u(xa)}},c))})})}function ka(c,[g,u]){return Math.min(u,Math.max(g,c))}function Db(c){const g=(0,hz.useRef)({value:c,previous:c});return(0,hz.useMemo)(()=>{g.current.value!==c&&(g.current.previous=g.current.value,g.current.value=c);return g.current.previous},[c])}function Sb(c){const g=Jj(c),u=(0,Bf.useRef)(""),M=(0,Bf.useRef)(0);c=(0,Bf.useCallback)(ma=>{ma=u.current+ma;g(ma);
(function Za(Ma){u.current=Ma;window.clearTimeout(M.current);""!==Ma&&(M.current=window.setTimeout(()=>Za(""),1E3))})(ma)},[g]);const ea=(0,Bf.useCallback)(()=>{u.current="";window.clearTimeout(M.current)},[]);(0,Bf.useEffect)(()=>()=>window.clearTimeout(M.current),[]);return[u,c,ea]}function tb(c,g,u){const M=1<g.length&&Array.from(g).every(ma=>ma===g[0])?g[0]:g,ea=u?c.indexOf(u):-1;c=vb(c,Math.max(ea,0));1===M.length&&(c=c.filter(ma=>ma!==u));c=c.find(ma=>ma.textValue.toLowerCase().startsWith(M.toLowerCase()));
return c!==u?c:void 0}function vb(c,g){return c.map((u,M)=>c[(g+M)%c.length])}function Nb(c){var {options:g,value:u,onValueChange:M}=c;c=hg(c,["options","value","onValueChange"]);const [ea,ma]=TD.useState(!1);return(0,Rb.jsx)("div",wf(Fe({},c),{className:"tl-select-input",children:(0,Rb.jsxs)(Iq,{open:ea,onOpenChange:ma,value:u,onValueChange:M,children:[(0,Rb.jsxs)(pE,{className:"tl-select-input-trigger",children:[(0,Rb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Rb.jsx)(qE,
{})}),(0,Rb.jsx)(rE,{style:{lineHeight:1},children:(0,Rb.jsx)(zi,{name:ea?"chevron-up":"chevron-down"})})]}),(0,Rb.jsx)(sE,{className:"tl-select-input-portal",children:(0,Rb.jsxs)(tE,{className:"tl-select-input-content",children:[(0,Rb.jsx)(xE,{}),(0,Rb.jsx)(uE,{className:"tl-select-input-viewport",children:g.map(xa=>(0,Rb.jsx)(vE,{className:"tl-select-input-select-item",value:xa.value,children:(0,Rb.jsx)(wE,{children:xa.label})},xa.value))}),(0,Rb.jsx)(yE,{})]})})]})}))}function rb({options:c,value:g,
onValueChange:u}){return(0,Rb.jsx)(uz,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:u,children:c.map(M=>(0,Rb.jsx)(vz,{className:"tl-toggle-group-input-button",value:M.value,disabled:M.value===g,children:(0,Rb.jsx)(zi,{name:M.icon})},M.value))})}function Kb({options:c,value:g,onValueChange:u}){return(0,Rb.jsx)(uz,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:u,children:c.map(M=>(0,Rb.jsx)(vz,{className:"tl-toggle-group-input-button",value:M.value,
children:(0,Rb.jsx)(zi,{name:M.icon})},M.value))})}function Zb(c){var {toggle:g=!0,pressed:u,onPressedChange:M,className:ea}=c;c=hg(c,["toggle","pressed","onPressedChange","className"]);return(0,Rb.jsx)(AE,wf(Fe({},c),{"data-toggle":g,className:"tl-toggle-input"+(ea?" "+ea:""),pressed:u,onPressedChange:M}))}function zc(c,g){return c.filter(u=>{var M;return null==(M=Cv[u.props.type])?void 0:M.includes(g)})}function Mc(c){return g=>"mouse"!==g.pointerType?c(g):void 0}function Rc(c,g){Rc=Object.setPrototypeOf?
Object.setPrototypeOf.bind():function(u,M){u.__proto__=M;return u};return Rc(c,g)}function vd(c,g){c.prototype=Object.create(g.prototype);c.prototype.constructor=c;Rc(c,g)}function Rd(c){Rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)};return Rd(c)}function Ed(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(c){return!1}}function Ad(c,g,u){Ad=Ed()?Reflect.construct.bind():function(M,ea,ma){var xa=[null];xa.push.apply(xa,ea);M=new (Function.bind.apply(M,xa));ma&&Rc(M,ma.prototype);return M};return Ad.apply(null,arguments)}function Fd(c){var g="function"===typeof Map?new Map:void 0;Fd=function(u){function M(){return Ad(u,arguments,Rd(this).constructor)}if(null===u||-1===Function.toString.call(u).indexOf("[native code]"))return u;if("function"!==typeof u)throw new TypeError("Super expression must either be null or a function");
if("undefined"!==typeof g){if(g.has(u))return g.get(u);g.set(u,M)}M.prototype=Object.create(u.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}});return Rc(M,u)};return Fd(c)}function ze(c,g,u){return Math.round(255*c)+","+Math.round(255*g)+","+Math.round(255*u)}function Nf(c,g,u,M){void 0===M&&(M=ze);if(0===g)return M(u,u,u);c=(c%360+360)%360/60;var ea=(1-Math.abs(2*u-1))*g,ma=ea*(1-Math.abs(c%2-1)),xa=g=0,Ma=0;0<=c&&1>c?(g=ea,xa=ma):1<=c&&2>c?(g=ma,xa=ea):2<=c&&3>c?(xa=
ea,Ma=ma):3<=c&&4>c?(xa=ma,Ma=ea):4<=c&&5>c?(g=ma,Ma=ea):5<=c&&6>c&&(g=ea,Ma=ma);u-=ea/2;return M(g+u,xa+u,Ma+u)}function xe(c){if("string"!==typeof c)throw new Qo(3);if("string"===typeof c){var g=c.toLowerCase();c=Bz[g]?"#"+Bz[g]:c}if(c.match(dF))return{red:parseInt(""+c[1]+c[2],16),green:parseInt(""+c[3]+c[4],16),blue:parseInt(""+c[5]+c[6],16)};if(c.match(eF))return g=parseFloat((parseInt(""+c[7]+c[8],16)/255).toFixed(2)),{red:parseInt(""+c[1]+c[2],16),green:parseInt(""+c[3]+c[4],16),blue:parseInt(""+
c[5]+c[6],16),alpha:g};if(c.match(fF))return{red:parseInt(""+c[1]+c[1],16),green:parseInt(""+c[2]+c[2],16),blue:parseInt(""+c[3]+c[3],16)};if(c.match(gF))return g=parseFloat((parseInt(""+c[4]+c[4],16)/255).toFixed(2)),{red:parseInt(""+c[1]+c[1],16),green:parseInt(""+c[2]+c[2],16),blue:parseInt(""+c[3]+c[3],16),alpha:g};if(g=Dv.exec(c))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10)};if(g=hF.exec(c.substring(0,50)))return{red:parseInt(""+g[1],10),green:parseInt(""+
g[2],10),blue:parseInt(""+g[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])};var u=iF.exec(c);if(u){g=parseInt(""+u[1],10);var M=parseInt(""+u[2],10)/100;u=parseInt(""+u[3],10)/100;g="rgb("+Nf(g,M,u)+")";M=Dv.exec(g);if(!M)throw new Qo(4,c,g);return{red:parseInt(""+M[1],10),green:parseInt(""+M[2],10),blue:parseInt(""+M[3],10)}}if(g=jF.exec(c.substring(0,50))){M=parseInt(""+g[1],10);u=parseInt(""+g[2],10)/100;var ea=parseInt(""+g[3],10)/100;M="rgb("+Nf(M,u,ea)+")";u=
Dv.exec(M);if(!u)throw new Qo(4,c,M);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])}}throw new Qo(5);}function Qe(c){c=c.toString(16);return 1===c.length?"0"+c:c}function Oe(c,g,u){return Ev("#"+Qe(Math.round(255*c))+Qe(Math.round(255*g))+Qe(Math.round(255*u)))}function Te(c,g,u){if("number"===typeof c&&"number"===typeof g&&"number"===typeof u)return Ev("#"+Qe(c)+Qe(g)+Qe(u));if("object"===
typeof c&&void 0===g&&void 0===u)return Ev("#"+Qe(c.red)+Qe(c.green)+Qe(c.blue));throw new Qo(6);}function og(c){if("object"!==typeof c)throw new Qo(8);if("number"===typeof c.red&&"number"===typeof c.green&&"number"===typeof c.blue&&"number"===typeof c.alpha){if("object"===typeof c)c=1<=c.alpha?Te(c.red,c.green,c.blue):"rgba("+c.red+","+c.green+","+c.blue+","+c.alpha+")";else throw new Qo(7);return c}if("number"===typeof c.red&&"number"===typeof c.green&&"number"===typeof c.blue&&("number"!==typeof c.alpha||
"undefined"===typeof c.alpha))return Te(c);if("number"===typeof c.hue&&"number"===typeof c.saturation&&"number"===typeof c.lightness&&"number"===typeof c.alpha){if("object"===typeof c)c=1<=c.alpha?Nf(c.hue,c.saturation,c.lightness,Oe):"rgba("+Nf(c.hue,c.saturation,c.lightness)+","+c.alpha+")";else throw new Qo(2);return c}if("number"===typeof c.hue&&"number"===typeof c.saturation&&"number"===typeof c.lightness&&("number"!==typeof c.alpha||"undefined"===typeof c.alpha)){if("object"===typeof c)c=Nf(c.hue,
c.saturation,c.lightness,Oe);else throw new Qo(1);return c}throw new Qo(8);}function Rf(c,g,u){return function(){var M=u.concat(Array.prototype.slice.call(arguments));return M.length>=g?c.apply(this,M):Rf(c,g,M)}}function Li(c,g){if("transparent"===g)return g;g=xe(g);var u=g.red/255,M=g.green/255,ea=g.blue/255,ma=Math.max(u,M,ea),xa=Math.min(u,M,ea),Ma=(ma+xa)/2;if(ma===xa)g=void 0!==g.alpha?{hue:0,saturation:0,lightness:Ma,alpha:g.alpha}:{hue:0,saturation:0,lightness:Ma};else{var Za=ma-xa;xa=.5<
Ma?Za/(2-ma-xa):Za/(ma+xa);switch(ma){case u:u=(M-ea)/Za+(M<ea?6:0);break;case M:u=(ea-u)/Za+2;break;default:u=(u-M)/Za+4}u*=60;g=void 0!==g.alpha?{hue:u,saturation:xa,lightness:Ma,alpha:g.alpha}:{hue:u,saturation:xa,lightness:Ma}}Ma=Uf;c=g.lightness-parseFloat(c);return og(Ma({},g,{lightness:Math.max(0,Math.min(1,c))}))}function Pf(){var c;null==(c=document.getElementById("__colorMeasure"))?void 0:c.remove();c=document.createElement("div");c.id="__colorMeasure";c.tabIndex=-1;document.body.appendChild(c);
return c}function dg(c){var g,u,M;if(null==c?0:c.toString().startsWith("var")){const ea=null==(g=/var\((.*)\)/.exec(c.toString()))?void 0:g[1];if(ea){const [ma,xa]=ea.split(",").map(Ma=>Ma.trim());return null!=(M=null!=(u=getComputedStyle(Pf()).getPropertyValue(ma).trim())?u:xa)?M:"#000"}}return c}function Fg(c,g){var u;void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=Math.min(1,Math.max(g.opacity,0)));let M=null!=(u=g.fill)?u:c.props.fill;void 0!==
M&&!g.noFill&&IE.includes(c.props.type)&&(M=dg(M),c=kF(.3,M),g.stroke=c);return g}function Mg({strokeWidth:c,size:g,mode:u}){return"svg"===u?(0,Rb.jsx)("rect",{className:"tl-binding-indicator",x:c,y:c,rx:2,ry:2,width:Math.max(0,g[0]-2*c),height:Math.max(0,g[1]-2*c),strokeWidth:4*c}):(0,Rb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Ng(){const c=rf();return"panning"===c.inputs.state||
"pinching"===c.inputs.state}function gh({left:c,middle:g,right:u,stroke:M,strokeWidth:ea}){return(0,Rb.jsxs)("g",{children:[(0,Rb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${c} L ${g} ${u}`}),(0,Rb.jsx)("path",{d:`M ${c} L ${g} ${u}`,fill:"none",stroke:M,strokeWidth:ea,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function sg(c,g,u){g=a(c,g,c,u).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:c,right:c};g=(u=g[0])?fb.rotWith(u,
c,Math.PI/6):c;c=u?fb.rotWith(u,c,-Math.PI/6):c;return{left:g,right:c}}function eg(c,g,u){const {left:M,right:ea}=sg(c,g,u);return`M ${M} L ${c} ${ea}`}function bh(c,g,u,M,ea){c=c.strokeWidth;var ma=fb.dist(g,u);c=Math.min(ma/3,16*c);ma=[];ma.push(`M ${g} L ${u}`);M&&ma.push(eg(g,u,c));ea&&ma.push(eg(u,g,c));return ma.join(" ")}function Jf({id:c,bounds:g,labelSize:u,offset:M,scale:ea=1}){return(0,Rb.jsx)("defs",{children:(0,Rb.jsxs)("mask",{id:c+"_clip",children:[(0,Rb.jsx)("rect",{x:-100,y:-100,
width:g.width+200,height:g.height+200,fill:"white"}),(0,Rb.jsx)("rect",{x:g.width/2-u[0]/2*ea+((null==M?void 0:M[0])||0),y:g.height/2-u[1]/2*ea+((null==M?void 0:M[1])||0),width:u[0]*ea,height:u[1]*ea,rx:4*ea,ry:4*ea,fill:"black"})]})})}function oi(c,g){return function(u){return c(g(u))}}function vh(c,g){return g(c)}function ai(c,g){return function(u){return c(g,u)}}function Yj(c,g){return function(){return c(g)}}function fi(c,g){g(c);return c}function wh(){for(var c=arguments.length,g=Array(c),u=
0;u<c;u++)g[u]=arguments[u];return g}function xl(c){c()}function Lj(c){return function(){return c}}function fm(){for(var c=arguments.length,g=Array(c),u=0;u<c;u++)g[u]=arguments[u];return function(){g.map(xl)}}function fl(){}function xf(c,g){return c(1,g)}function nm(c,g){c(0,g)}function Om(c){c(2)}function Vl(c){return c(4)}function gg(c,g){return xf(c,ai(g,0))}function Oi(c,g){var u=c(1,function(M){u();g(M)});return u}function Yf(){var c=[];return function(g,u){switch(g){case 2:c.splice(0,c.length);
break;case 1:return c.push(u),function(){var M=c.indexOf(u);-1<M&&c.splice(M,1)};case 0:c.slice().forEach(function(M){M(u)});break;default:throw Error("unrecognized action "+g);}}}function bf(c){var g=c,u=Yf();return function(M,ea){switch(M){case 1:ea(g);break;case 0:g=ea;break;case 4:return g}return u(M,ea)}}function Bi(c){var g,u;return function(M,ea){switch(M){case 1:if(ea){if(u===ea)break;g&&g();u=ea;return g=c(1,ea)}g&&g();return fl;case 2:g&&g();u=null;break;default:throw Error("unrecognized action "+
M);}}}function wj(c){return fi(Yf(),function(g){return gg(c,g)})}function kj(c,g){return fi(bf(g),function(u){return gg(c,u)})}function Pi(){for(var c=arguments.length,g=Array(c),u=0;u<c;u++)g[u]=arguments[u];return function(M){return g.reduceRight(vh,M)}}function pf(c){for(var g=arguments.length,u=Array(1<g?g-1:0),M=1;M<g;M++)u[M-1]=arguments[M];var ea=Pi.apply(void 0,u);return function(ma,xa){switch(ma){case 1:return xf(c,ea(xa));case 2:c(2);break;default:throw Error("unrecognized action "+ma);
}}}function De(c,g){return c===g}function df(c){void 0===c&&(c=De);var g;return function(u){return function(M){c(g,M)||(g=M,u(M))}}}function re(c){return function(g){return function(u){c(u)&&g(u)}}}function ie(c){return function(g){return oi(g,c)}}function qi(c){return function(g){return function(){return g(c)}}}function Ig(c,g){return function(u){return function(M){return u(g=c(g,M))}}}function Ji(c){return function(g){return function(u){0<c?c--:g(u)}}}function jh(c){var g,u;return function(M){return function(ea){g=
ea;u||=setTimeout(function(){u=void 0;M(g)},c)}}}function ll(c){var g,u;return function(M){return function(ea){g=ea;u&&clearTimeout(u);u=setTimeout(function(){M(g)},c)}}}function le(){for(var c=arguments.length,g=Array(c),u=0;u<c;u++)g[u]=arguments[u];var M=Array(g.length),ea=0,ma=null,xa=Math.pow(2,g.length)-1;g.forEach(function(Ma,Za){var hb=Math.pow(2,Za);xf(Ma,function(zb){var Ob=ea;ea|=hb;M[Za]=zb;Ob!==xa&&ea===xa&&ma&&(ma(),ma=null)})});return function(Ma){return function(Za){var hb=function(){return Ma([Za].concat(M))};
ea===xa?hb():ma=hb}}}function Ve(){for(var c=arguments.length,g=Array(c),u=0;u<c;u++)g[u]=arguments[u];return function(M,ea){switch(M){case 1:return fm.apply(void 0,g.map(function(ma){return ma(1,ea)}));case 2:break;default:throw Error("unrecognized action "+M);}}}function kg(c,g){void 0===g&&(g=De);return pf(c,df(g))}function se(){for(var c=Yf(),g=arguments.length,u=Array(g),M=0;M<g;M++)u[M]=arguments[M];var ea=Array(u.length),ma=0,xa=Math.pow(2,u.length)-1;u.forEach(function(Ma,Za){var hb=Math.pow(2,
Za);xf(Ma,function(zb){ea[Za]=zb;ma|=hb;ma===xa&&c(0,ea)})});return function(Ma,Za){switch(Ma){case 1:return ma===xa&&Za(ea),c(1,Za);case 2:c(2);break;default:throw Error("unrecognized action "+Ma);}}}function mh(c,g,u){void 0===g&&(g=[]);u=(void 0===u?{singleton:!0}:u).singleton;return{id:Symbol(),constructor:c,dependencies:g,singleton:u}}function Nl(c){var g=new Map;return function ea(M){var ma=M.id,xa=M.constructor,Ma=M.dependencies;if((M=M.singleton)&&g.has(ma))return g.get(ma);xa=xa(Ma.map(function(Za){return ea(Za)}));
M&&g.set(ma,xa);return xa}(c)}function wl(c,g){if(null==c)return{};var u={},M=Object.keys(c),ea;for(ea=0;ea<M.length;ea++){var ma=M[ea];0<=g.indexOf(ma)||(u[ma]=c[ma])}return u}function pi(c,g){if(c){if("string"===typeof c)return qh(c,g);var u=Object.prototype.toString.call(c).slice(8,-1);"Object"===u&&c.constructor&&(u=c.constructor.name);if("Map"===u||"Set"===u)return Array.from(c);if("Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return qh(c,g)}}function qh(c,g){if(null==g||
g>c.length)g=c.length;for(var u=0,M=Array(g);u<g;u++)M[u]=c[u];return M}function Df(c,g){var u="undefined"!==typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(u)return(u=u.call(c)).next.bind(u);if(Array.isArray(c)||(u=pi(c))||g&&c&&"number"===typeof c.length){u&&(c=u);var M=0;return function(){return M>=c.length?{done:!0}:{done:!1,value:c[M++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function fh(c,g){for(var u={},M={},ea=0,ma=c.length;ea<ma;)M[c[ea]]=1,ea+=1;for(var xa in g)M.hasOwnProperty(xa)||(u[xa]=g[xa]);return u}function rl(c,g,u){function M(Ob,bc){Ob.propsReady&&(0,Ob.propsReady)(0,!1);for(var yc=Df(xa),ic;!(ic=yc()).done;)ic=ic.value,(0,Ob[g.required[ic]])(0,bc[ic]);for(yc=Df(Ma);!(ic=yc()).done;)if(ic=ic.value,ic in bc)(0,Ob[g.optional[ic]])(0,bc[ic]);Ob.propsReady&&(0,Ob.propsReady)(0,!0)}function ea(Ob){return Za.reduce(function(bc,yc){bc[yc]=function(ic){(0,Ob[g.methods[yc]])(0,
ic)};return bc},{})}function ma(Ob){return hb.reduce(function(bc,yc){bc[yc]=Bi(Ob[g.events[yc]]);return bc},{})}var xa=Object.keys(g.required||{}),Ma=Object.keys(g.optional||{}),Za=Object.keys(g.methods||{}),hb=Object.keys(g.events||{}),zb=(0,pn.createContext)({});return{Component:(0,pn.forwardRef)(function(Ob,bc){var yc=Ob.children,ic=wl(Ob,pF),Ac=(0,pn.useState)(function(){return fi(Nl(c),function(Vb){return M(Vb,ic)})})[0],tc=(0,pn.useState)(Yj(ma,Ac))[0];Ut(function(){for(var Vb=Df(hb),wc;!(wc=
Vb()).done;)if(wc=wc.value,wc in ic)(0,tc[wc])(1,ic[wc]);return function(){Object.values(tc).map(Om)}},[ic,tc,Ac]);Ut(function(){M(Ac,ic)});(0,pn.useImperativeHandle)(bc,Lj(ea(Ac)));return(0,pn.createElement)(zb.Provider,{value:Ac},u?(0,pn.createElement)(u,fh([].concat(xa,Ma,hb),ic),yc):yc)}),usePublisher:function(Ob){return(0,pn.useCallback)(ai(nm,(0,pn.useContext)(zb)[Ob]),[Ob])},useEmitterValue:function(Ob){var bc=(0,pn.useContext)(zb)[Ob];Ob=(0,pn.useState)(Yj(Vl,bc));var yc=Ob[0],ic=Ob[1];Ut(function(){return xf(bc,
function(Ac){Ac!==yc&&ic(Lj(Ac))})},[bc,yc]);return yc},useEmitter:function(Ob,bc){var yc=(0,pn.useContext)(zb)[Ob];Ut(function(){return yc(1,bc)},[bc,yc])}}}function Gg(){return Gg=Object.assign||function(c){for(var g=1;g<arguments.length;g++){var u=arguments[g],M;for(M in u)Object.prototype.hasOwnProperty.call(u,M)&&(c[M]=u[M])}return c},Gg.apply(this,arguments)}function Lf(c,g){if(null==c)return{};var u,M,ea={},ma=Object.keys(c);for(M=0;M<ma.length;M++)0<=g.indexOf(u=ma[M])||(ea[u]=c[u]);return ea}
function wm(c,g){(null==g||g>c.length)&&(g=c.length);for(var u=0,M=Array(g);u<g;u++)M[u]=c[u];return M}function dk(c,g){var u="undefined"!=typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(u)return(u=u.call(c)).next.bind(u);if(Array.isArray(c)||(u=function(ea,ma){if(ea){if("string"==typeof ea)return wm(ea,ma);var xa=Object.prototype.toString.call(ea).slice(8,-1);return"Object"===xa&&ea.constructor&&(xa=ea.constructor.name),"Map"===xa||"Set"===xa?Array.from(ea):"Arguments"===xa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xa)?
wm(ea,ma):void 0}}(c))||g&&c&&"number"==typeof c.length){u&&(c=u);var M=0;return function(){return M>=c.length?{done:!0}:{done:!1,value:c[M++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Hf(c,g){void 0===g&&(g=!0);var u=(0,Zh.useRef)(null),M=function(ma){};if("undefined"!=typeof ResizeObserver){var ea=new ResizeObserver(function(ma){ma=ma[0].target;null!==ma.offsetParent&&c(ma)});
M=function(ma){ma&&g?(ea.observe(ma),u.current=ma):(u.current&&ea.unobserve(u.current),u.current=null)}}return{ref:u,callbackRef:M}}function Mj(c,g){return void 0===g&&(g=!0),Hf(c,g).callbackRef}function Fh(c,g,u,M,ea,ma,xa){return Hf(function(Ma){for(var Za=function(Ob,bc,yc,ic){yc=Ob.length;if(0===yc)return null;for(var Ac=[],tc=0;tc<yc;tc++){var Vb=Ob.item(tc);if(Vb&&void 0!==Vb.dataset.index){var wc=parseInt(Vb.dataset.index),Uc=parseFloat(Vb.dataset.knownSize),Nc=bc(Vb,"offsetHeight");if(0===
Nc&&ic("Zero-sized element, this should not happen",{child:Vb},cm.ERROR),Nc!==Uc)Vb=Ac[Ac.length-1],0===Ac.length||Vb.size!==Nc||Vb.endIndex!==wc-1?Ac.push({startIndex:wc,endIndex:wc,size:Nc}):Ac[Ac.length-1].endIndex++}}return Ac}(Ma.children,g,0,ea),hb=Ma.parentElement;!hb.dataset.virtuosoScroller;)hb=hb.parentElement;var zb="window"===hb.firstElementChild.dataset.viewportType;M({scrollTop:Math.max(xa?xa.scrollTop:zb?window.pageYOffset||document.documentElement.scrollTop:hb.scrollTop,0),scrollHeight:xa?
xa.scrollHeight:zb?document.documentElement.scrollHeight:hb.scrollHeight,viewportHeight:xa?xa.offsetHeight:zb?window.innerHeight:hb.offsetHeight});null==ma||ma(function(Ob,bc,yc){return"normal"===bc||null!=bc&&bc.endsWith("px")||yc("row-gap was not resolved to pixel value correctly",bc,cm.WARN),"normal"===bc?0:parseInt(null!=bc?bc:"0",10)}(0,getComputedStyle(Ma).rowGap,ea));null!==Za&&c(Za)},u)}function rh(c,g){return Math.round(c.getBoundingClientRect()[g])}function Xm(c,g,u,M,ea){void 0===M&&(M=
fl);var ma=(0,Zh.useRef)(null),xa=(0,Zh.useRef)(null),Ma=(0,Zh.useRef)(null),Za=(0,Zh.useRef)(!1),hb=(0,Zh.useCallback)(function(zb){zb=zb.target;var Ob=zb===window||zb===document,bc=Ob?window.pageYOffset||document.documentElement.scrollTop:zb.scrollTop,yc=Ob?document.documentElement.scrollHeight:zb.scrollHeight,ic=Ob?window.innerHeight:zb.offsetHeight;zb=function(){c({scrollTop:Math.max(bc,0),scrollHeight:yc,viewportHeight:ic})};Za.current?(0,qF.flushSync)(zb):zb();Za.current=!1;null!==xa.current&&
(bc===xa.current||0>=bc||bc===yc-ic)&&(xa.current=null,g(!0),Ma.current&&(clearTimeout(Ma.current),Ma.current=null))},[c,g]);return(0,Zh.useEffect)(function(){var zb=ea||ma.current;return M(ea||ma.current),hb({target:zb}),zb.addEventListener("scroll",hb,{passive:!0}),function(){M(null);zb.removeEventListener("scroll",hb)}},[ma,hb,u,M,ea]),{scrollerRef:ma,scrollByCallback:function(zb){Za.current=!0;ma.current.scrollBy(zb)},scrollToCallback:function(zb){var Ob=ma.current;if(Ob&&!("offsetHeight"in Ob&&
0===Ob.offsetHeight)){var bc,yc,ic,Ac="smooth"===zb.behavior;if(Ob===window?(yc=Math.max(rh(document.documentElement,"height"),document.documentElement.scrollHeight),bc=window.innerHeight,ic=document.documentElement.scrollTop):(yc=Ob.scrollHeight,bc=rh(Ob,"height"),ic=Ob.scrollTop),zb.top=Math.ceil(Math.max(Math.min(yc-bc,zb.top),0)),1.01>Math.abs(bc-yc)||zb.top===ic)return c({scrollTop:ic,scrollHeight:yc,viewportHeight:bc}),void(Ac&&g(!0));Ac?(xa.current=zb.top,Ma.current&&clearTimeout(Ma.current),
Ma.current=setTimeout(function(){Ma.current=null;xa.current=null;g(!0)},1E3)):xa.current=null;Ob.scrollTo(zb)}}}}function yl(c,g,u,M,ea){return void 0===M&&(M=Hi),void 0===ea&&(ea=Hi),{k:c,v:g,lvl:u,l:M,r:ea}}function al(c,g){if(c===Hi)return Hi;var u=c.k,M=c.l,ea=c.r;if(g===u){if(M===Hi)return ea;if(ea===Hi)return M;g=zl(M);return Fi(yj(c,{k:g[0],v:g[1],l:Vh(M)}))}return Fi(yj(c,g<u?{l:al(M,g)}:{r:al(ea,g)}))}function Oj(c,g,u){return(void 0===u&&(u="k"),c===Hi)?[-Infinity,void 0]:c[u]===g?[c.k,
c.v]:c[u]<g?(g=Oj(c.r,g,u),-Infinity===g[0]?[c.k,c.v]:g):Oj(c.l,g,u)}function ek(c,g,u){return c===Hi?yl(g,u,1):g===c.k?yj(c,{k:g,v:u}):Fj(bg(yj(c,g<c.k?{l:ek(c.l,g,u)}:{r:ek(c.r,g,u)})))}function xj(c,g,u){if(c===Hi)return[];var M=c.k,ea=c.v,ma=c.r,xa=[];return M>g&&(xa=xa.concat(xj(c.l,g,u))),M>=g&&M<=u&&xa.push({k:M,v:ea}),M<=u&&(xa=xa.concat(xj(ma,g,u))),xa}function Ym(c){return c===Hi?[]:[].concat(Ym(c.l),[{k:c.k,v:c.v}],Ym(c.r))}function zl(c){return c.r===Hi?[c.k,c.v]:zl(c.r)}function Vh(c){return c.r===
Hi?c.l:Fi(yj(c,{r:Vh(c.r)}))}function yj(c,g){return yl(void 0!==g.k?g.k:c.k,void 0!==g.v?g.v:c.v,void 0!==g.lvl?g.lvl:c.lvl,void 0!==g.l?g.l:c.l,void 0!==g.r?g.r:c.r)}function Wi(c){return c===Hi||c.lvl>c.r.lvl}function Fi(c){var g=c.l,u=c.r,M=c.lvl;if(u.lvl>=M-1&&g.lvl>=M-1)return c;if(M>u.lvl+1){if(Wi(g))return bg(yj(c,{lvl:M-1}));if(g===Hi||g.r===Hi)throw Error("Unexpected empty nodes");return yj(g.r,{l:yj(g,{r:g.r.l}),r:yj(c,{l:g.r.r,lvl:M-1}),lvl:M})}if(Wi(c))return Fj(yj(c,{lvl:M-1}));if(u===
Hi||u.l===Hi)throw Error("Unexpected empty nodes");g=u.l;var ea=Wi(g)?u.lvl-1:u.lvl;return yj(g,{l:yj(c,{r:g.l,lvl:M-1}),r:Fj(yj(u,{l:g.r,lvl:ea})),lvl:g.lvl+1})}function om(c,g,u){return c===Hi?[]:Dm(xj(c,Oj(c,g)[0],u),function(M){return{index:M.k,value:M.v}})}function Dm(c,g){var u=c.length;if(0===u)return[];var M=g(c[0]),ea=M.index;M=M.value;for(var ma=[],xa=1;xa<u;xa++){var Ma=g(c[xa]),Za=Ma.index;Ma=Ma.value;ma.push({start:ea,end:Za-1,value:M});ea=Za;M=Ma}return ma.push({start:ea,end:Infinity,
value:M}),ma}function Fj(c){var g=c.r,u=c.lvl;return g===Hi||g.r===Hi||g.lvl!==u||g.r.lvl!==u?c:yj(g,{l:yj(c,{r:g.l}),lvl:u+1})}function bg(c){var g=c.l;return g===Hi||g.lvl!==c.lvl?c:yj(g,{r:yj(c,{l:g.r})})}function ri(c,g,u,M){void 0===M&&(M=0);for(var ea=c.length-1;M<=ea;){var ma=Math.floor((M+ea)/2),xa=u(c[ma],g);if(0===xa)return ma;if(-1===xa){if(2>ea-M)return ma-1;ea=ma-1}else{if(ea===M)return ma;M=ma+1}}throw Error("Failed binary finding record in array - "+c.join(",")+", searched for "+g);
}function hn(c){var g=c.size,u=c.startIndex,M=c.endIndex;return function(ea){return ea.start===u&&(ea.end===M||Infinity===ea.end)&&ea.value===g}}function Wl(c,g){c=c.index;return g===c?0:g<c?-1:1}function C(c,g){c=c.offset;return g===c?0:g<c?-1:1}function X(c){return{index:c.index,value:c}}function wa(c,g,u,M){var ea=0,ma=0,xa=0,Ma;0!==g?(xa=c[Ma=ri(c,g-1,Wl)].offset,ma=Oj(u,g-1),ea=ma[0],ma=ma[1],c.length&&c[Ma].size===Oj(u,g)[1]&&--Ma,c=c.slice(0,Ma+1)):c=[];for(g=dk(om(u,g,Infinity));!(u=g()).done;)Ma=
u.value,u=Ma.start,Ma=Ma.value,ea=u-ea,xa=ea*ma+xa+ea*M,c.push({offset:xa,size:Ma,index:u}),ea=u,ma=Ma;return{offsetTree:c,lastIndex:ea,lastOffset:xa,lastSize:ma}}function ua(c,g){var u=g[0],M=g[1],ea=g[3];0<u.length&&(0,g[2])("received item sizes",u,cm.DEBUG);var ma=c.sizeTree;g=ma;var xa=0;if(0<M.length&&ma===Hi&&2===u.length){var Ma=u[0].size,Za=u[1].size;g=M.reduce(function(zb,Ob){return ek(ek(zb,Ob,Ma),Ob+1,Za)},g)}else u=function(zb,Ob){var bc,yc=zb===Hi?0:Infinity;for(Ob=dk(Ob);!(bc=Ob()).done;){var ic=
bc.value;bc=ic.size;var Ac=ic.startIndex,tc=ic.endIndex;if(yc=Math.min(yc,Ac),zb===Hi)zb=ek(zb,0,bc);else{var Vb=om(zb,Ac-1,tc+1);if(!Vb.some(hn(ic))){var wc,Uc=ic=!1;for(Vb=dk(Vb);!(wc=Vb()).done;){var Nc=wc.value;wc=Nc.start;var ed=Nc.end;Nc=Nc.value;ic?(tc>=wc||bc===Nc)&&(zb=al(zb,wc)):(Uc=Nc!==bc,ic=!0);ed>tc&&tc>=wc&&Nc!==bc&&(zb=ek(zb,tc+1,Nc))}Uc&&(zb=ek(zb,Ac,bc))}}}return[zb,yc]}(g,u),g=u[0],xa=u[1];if(g===ma)return c;c=wa(c.offsetTree,xa,g,ea);var hb=c.offsetTree;return{sizeTree:g,offsetTree:hb,
lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:M.reduce(function(zb,Ob){return ek(zb,Ob,Fa(Ob,hb,ea))},Hi),groupIndices:M}}function Fa(c,g,u){if(0===g.length)return 0;g=g[ri(g,c,Wl)];c-=g.index;c=g.size*c+(c-1)*u+g.offset;return 0<c?c+u:c}function $a(c,g,u){if(void 0!==c.groupIndex)return g.groupIndices[c.groupIndex]+1;c=pb("LAST"===c.index?u:c.index,g);return Math.max(0,c,Math.min(u,c))}function pb(c,g){if(g.groupOffsetTree===Hi)return c;for(var u=0;g.groupIndices[u]<=
c+u;)u++;return c+u}function sb(c){c="number"==typeof c?{index:c}:c;return c.align||(c.align="start"),c.behavior&&uF||(c.behavior="auto"),c.offset||(c.offset=0),c}function Yb(c){return!!c&&("smooth"===c?"smooth":"auto")}function Bc(c){return c.reduce(function(g,u){return g.groupIndices.push(g.totalCount),g.totalCount+=u+1,g},{totalCount:0,groupIndices:[]})}function Dc(c,g){return!(!c||c[0]!==g[0]||c[1]!==g[1])}function Id(c,g){return!(!c||c.startIndex!==g.startIndex||c.endIndex!==g.endIndex)}function Md(c,
g,u){return"number"==typeof c?"up"===u&&"top"===g||"down"===u&&"bottom"===g?c:0:"up"===u?"top"===g?c.main:c.reverse:"bottom"===g?c.main:c.reverse}function rd(c,g,u){if(0===c.length)return[];if(g.groupOffsetTree===Hi)return c.map(function(Za){return Gg({},Za,{index:Za.index+u,originalIndex:Za.index})});var M,ea=[],ma=om(g.groupOffsetTree,c[0].index,c[c.length-1].index),xa=void 0,Ma=0;for(c=dk(c);!(M=c()).done;)M=M.value,(!xa||xa.end<M.index)&&(xa=ma.shift(),Ma=g.groupIndices.indexOf(xa.start)),ea.push(Gg({},
M.index===xa.start?{type:"group",index:Ma}:{index:M.index-(Ma+1)+u,groupIndex:Ma},{size:M.size,offset:M.offset,originalIndex:M.index,data:M.data}));return ea}function Be(c,g,u,M,ea,ma){var xa=0,Ma=0;0<c.length&&(xa=c[0].offset,Ma=c[c.length-1],Ma=Ma.offset+Ma.size);var Za=u-ea.lastIndex,hb=xa;M=ea.lastOffset+Za*ea.lastSize+(Za-1)*M-Ma;return{items:rd(c,ea,ma),topItems:rd(g,ea,ma),topListHeight:g.reduce(function(zb,Ob){return Ob.size+zb},0),offsetTop:xa,offsetBottom:M,top:hb,bottom:Ma,totalCount:u,
firstItemIndex:ma}}function zf(c){var g,u=!1;return function(){return u||(u=!0,g=c()),g}}function Bg(c,g){var u=(0,Zh.useRef)(null),M=(0,Zh.useCallback)(function(Za){if(null!==Za&&Za.offsetParent){var hb=Za.getBoundingClientRect();Za=hb.width;if(g){var zb=g.getBoundingClientRect();hb=hb.top-zb.top;zb=zb.height-Math.max(0,hb);hb+=g.scrollTop}else zb=window.innerHeight-Math.max(0,hb.top),hb=hb.top+window.pageYOffset;u.current={offsetTop:hb,visibleHeight:zb,visibleWidth:Za};c(u.current)}},[c,g]),ea=
Hf(M),ma=ea.callbackRef,xa=ea.ref,Ma=(0,Zh.useCallback)(function(){M(xa.current)},[M,xa]);return(0,Zh.useEffect)(function(){if(g){g.addEventListener("scroll",Ma);var Za=new ResizeObserver(Ma);return Za.observe(g),function(){g.removeEventListener("scroll",Ma);Za.unobserve(g)}}return window.addEventListener("scroll",Ma),window.addEventListener("resize",Ma),function(){window.removeEventListener("scroll",Ma);window.removeEventListener("resize",Ma)}},[Ma,g]),ma}function sj(c){return c}function $f(c,g){var u=
Yf();return xf(u,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),gg(u,c),u}function lg(c,g){if("string"!=typeof c)return{context:g}}function Qh(c){var g=c.usePublisher,u=c.useEmitter,M=c.useEmitterValue;return eh.memo(function(ea){var ma=ea.style,xa=ea.children;ea=Lf(ea,IF);var Ma=g("scrollContainerState"),Za=M("ScrollerComponent"),hb=g("smoothScrollTargetReached"),zb=M("scrollerRef"),Ob=M("context");Ma=Xm(Ma,
hb,Za,zb);hb=Ma.scrollerRef;zb=Ma.scrollByCallback;return u("scrollTo",Ma.scrollToCallback),u("scrollBy",zb),(0,Zh.createElement)(Za,Gg({ref:hb,style:Gg({},PF,ma),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},ea,lg(Za,Ob)),xa)})}function gi(c){var g=c.usePublisher,u=c.useEmitter,M=c.useEmitterValue;return eh.memo(function(ea){var ma=ea.style,xa=ea.children;ea=Lf(ea,JF);var Ma=g("windowScrollContainerState"),Za=M("ScrollerComponent"),hb=g("smoothScrollTargetReached"),zb=
M("totalListHeight"),Ob=M("deviation"),bc=M("customScrollParent"),yc=M("context");hb=Xm(Ma,hb,Za,fl,bc);var ic=hb.scrollerRef;Ma=hb.scrollByCallback;hb=hb.scrollToCallback;return rF(function(){return ic.current=bc||window,function(){ic.current=null}},[ic,bc]),u("windowScrollTo",hb),u("scrollBy",Ma),(0,Zh.createElement)(Za,Gg({style:Gg({position:"relative"},ma,0!==zb?{height:zb+Ob}:{}),"data-virtuoso-scroller":!0},ea,lg(Za,yc)),xa)})}function Rh(c,g,u){return Array.from({length:g-c+1}).map(function(M,
ea){return{index:ea+c,data:null==u?void 0:u[ea+c]}})}function ag(c,g){return c&&c.column===g.column&&c.row===g.row}function Kf(c,g,u,M){var ea=u.height;return void 0===ea||0===M.length?{top:0,bottom:0}:{top:xh(c,g,u,M[0].index),bottom:xh(c,g,u,M[M.length-1].index)+ea}}function xh(c,g,u,M){var ea=g.column;c=Dr(1,Xt((c.width+ea)/(u.width+ea)));M=Xt(M/c);u=M*u.height+Dr(0,M-1)*g.row;return 0<u?u+g.row:u}function hh(c,g,u){return"normal"===g||null!=g&&g.endsWith("px")||u(c+" was not resolved to pixel value correctly",
g,cm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function tj(c,g,u,M=ea=>ea){return c*M(.5-g*(.5-u))}function wi(c){return[-c[0],-c[1]]}function ti(c,g){return[c[0]+g[0],c[1]+g[1]]}function lj(c,g){return[c[0]-g[0],c[1]-g[1]]}function Ti(c,g){return[c[0]*g,c[1]*g]}function Gl(c){return[c[1],-c[0]]}function Xo(c,g){return c[0]===g[0]&&c[1]===g[1]}function Wm(c){return c[0]*c[0]+c[1]*c[1]}function ch(c){var g=Math.hypot(c[0],c[1]);return[c[0]/g,c[1]/g]}function jn(c,g){return Math.hypot(c[1]-g[1],
c[0]-g[0])}function tk(c,g,u){let M=Math.sin(u);u=Math.cos(u);let ea=c[0]-g[0];c=c[1]-g[1];return[ea*u-c*M+g[0],ea*M+c*u+g[1]]}function vn(c,g,u){return ti(c,Ti(lj(g,c),u))}function Pm(c,g,u){return ti(c,Ti(g,u))}function fo(c,g={}){let {size:u=16,smoothing:M=.5,thinning:ea=.5,simulatePressure:ma=!0,easing:xa=td=>td,start:Ma={},end:Za={},last:hb=!1}=g,{cap:zb=!0,easing:Ob=td=>td*(2-td)}=Ma,{cap:bc=!0,easing:yc=td=>--td*td*td+1}=Za;if(0===c.length||0>=u)return[];var ic=c[c.length-1].runningLength;
let Ac=!1===Ma.taper?0:!0===Ma.taper?Math.max(u,ic):Ma.taper,tc=!1===Za.taper?0:!0===Za.taper?Math.max(u,ic):Za.taper;var Vb=Math.pow(u*M,2);g=[];let wc=[];var Uc=c.slice(0,10).reduce((td,zd)=>{var Kd=zd.pressure;ma&&(zd=Er(1,zd.distance/u),Kd=Er(1,1-zd),Kd=Er(1,td+.275*(Kd-td)*zd));return(td+Kd)/2},c[0].pressure),Nc=tj(u,ea,c[c.length-1].pressure,xa),ed;let ge=c[0].vector;var Pd=c[0].point;let we=Pd;var mf=Pd;let Le=we;var hf=!1;for(var ue=0;ue<c.length;ue++){var {pressure:Nd}=c[ue];let {point:td,
vector:zd,distance:Kd,runningLength:Ce}=c[ue];if(ue<c.length-1&&3>ic-Ce)continue;ea?(ma&&(Nc=Er(1,Kd/u),Nd=Er(1,1-Nc),Nd=Er(1,Uc+.275*(Nd-Uc)*Nc)),Nc=tj(u,ea,Nd,xa)):Nc=u/2;void 0===ed&&(ed=Nc);var kd=Ce<Ac?Ob(Ce/Ac):1,hd=ic-Ce<tc?yc((ic-Ce)/tc):1;Nc=Math.max(.01,Nc*Math.min(kd,hd));hd=(ue<c.length-1?c[ue+1]:c[ue]).vector;let Ee=ue<c.length-1?zd[0]*hd[0]+zd[1]*hd[1]:1;kd=null!==Ee&&0>Ee;if(0>zd[0]*ge[0]+zd[1]*ge[1]&&!hf||kd){Pd=Ti(Gl(ge),Nc);for(let He=1/13,Ff=0;1>=Ff;Ff+=He)mf=tk(lj(td,Pd),td,Ls*
Ff),g.push(mf),Le=tk(ti(td,Pd),td,Ls*-Ff),wc.push(Le);Pd=mf;we=Le;kd&&(hf=!0)}else(hf=!1,ue===c.length-1)?(Nd=Ti(Gl(zd),Nc),g.push(lj(td,Nd)),wc.push(ti(td,Nd))):(Uc=Ti(Gl(vn(hd,zd,Ee)),Nc),mf=lj(td,Uc),(1>=ue||Wm(lj(Pd,mf))>Vb)&&(g.push(mf),Pd=mf),Le=ti(td,Uc),(1>=ue||Wm(lj(we,Le))>Vb)&&(wc.push(Le),we=Le),Uc=Nd,ge=zd)}ic=c[0].point.slice(0,2);Vb=1<c.length?c[c.length-1].point.slice(0,2):ti(c[0].point,[1,1]);mf=[];hf=[];if(1===c.length){if(!Ac&&!tc||hb){c=Pm(ic,ch(Gl(lj(ic,Vb))),-(ed||Nc));g=[];
for(let td=1/13,zd=td;1>=zd;zd+=td)g.push(tk(c,ic,2*Ls*zd));return g}}else{if(!(Ac||tc&&1===c.length))if(zb)for(let td=1/13,zd=td;1>=zd;zd+=td)ed=tk(wc[0],ic,Ls*zd),mf.push(ed);else ue=lj(g[0],wc[0]),ed=Ti(ue,.5),ue=Ti(ue,.51),mf.push(lj(ic,ed),lj(ic,ue),ti(ic,ue),ti(ic,ed));ed=Gl(wi(c[c.length-1].vector));if(tc||Ac&&1===c.length)hf.push(Vb);else if(bc){c=Pm(Vb,ed,Nc);for(let td=1/29,zd=td;1>zd;zd+=td)hf.push(tk(c,Vb,3*Ls*zd))}else hf.push(ti(Vb,Ti(ed,Nc)),ti(Vb,Ti(ed,.99*Nc)),lj(Vb,Ti(ed,.99*Nc)),
lj(Vb,Ti(ed,Nc)))}return g.concat(hf,wc.reverse(),mf)}function go(c,g={}){var u;let {streamline:M=.5,size:ea=16,last:ma=!1}=g;if(0===c.length)return[];g=.15+.85*(1-M);c=Array.isArray(c[0])?c:c.map(({x:Ob,y:bc,pressure:yc=.5})=>[Ob,bc,yc]);if(2===c.length){var xa=c[1];c=c.slice(0,-1);for(var Ma=1;5>Ma;Ma++)c.push(vn(c[0],xa,Ma/4))}1===c.length&&(c=[...c,[...ti(c[0],[1,1]),...c[0].slice(2)]]);xa=[{point:[c[0][0],c[0][1]],pressure:0<=c[0][2]?c[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ma=!1;
let Za=0,hb=xa[0],zb=c.length-1;for(let Ob=1;Ob<c.length;Ob++){let bc=ma&&Ob===zb?c[Ob].slice(0,2):vn(hb.point,c[Ob],g);if(Xo(hb.point,bc))continue;let yc=jn(bc,hb.point);if(Za+=yc,Ob<zb&&!Ma){if(Za<ea)continue;Ma=!0}hb={point:bc,pressure:0<=c[Ob][2]?c[Ob][2]:.5,vector:ch(lj(hb.point,bc)),distance:yc,runningLength:Za};xa.push(hb)}return xa[0].vector=(null==(u=xa[1])?void 0:u.vector)||[0,0],xa}function gm(c){return(new Yv(c)).exportAsSVG()}function Qm(c){return(new Yv(c)).generatePreviewJsx()}function Rk(c){c=
c.match(/\.[0-9a-z]+$/i);if(!c)return"unknown";c=c[0].toLowerCase();return BG.includes(c)?"image":CG.includes(c)?"video":"unknown"}function Hk(...c){return(...g)=>mi(this,null,function*(){for(const u of c){const M=yield u(...g);if(M&&0<M.length)return M}return null})}function xm(c,g){return mi(this,null,function*(){return c.types.includes(g)?c instanceof DataTransfer?c.getData(g):yield(yield c.getType(g)).text():null})}function gn(){const {handlers:c}=Az.useContext(jp);return Az.useCallback((g,u)=>
mi(this,[g,u],function*(M,{point:ea,shiftKey:ma,dataTransfer:xa,fromDrop:Ma}){function Za(ue,Nd){return mi(this,null,function*(){const kd=Object.values(M.assets).find(hd=>hd.src===ue);return kd?kd:{id:ca(),type:Nd?"video":"image",src:ue,size:yield ye(c.makeAssetUrl(ue),Nd)}})}function hb(ue){return mi(this,null,function*(){const Nd=ue.filter(kd=>"unknown"!==Rk(kd.name)).map(kd=>mi(this,null,function*(){try{const hd=yield c.saveAsset(kd);return yield Za(hd,"video"===Rk(kd.name))}catch(hd){console.error(hd)}return null}));
return(yield Promise.all(Nd)).filter(zg)})}function zb(ue){return[wf(Fe({},Op.defaultProps),{html:ue,point:[ea[0],ea[1]]})]}function Ob(ue){return mi(this,null,function*(){return Hk(yc,ic,tc,Ac)(ue)})}function bc(){return mi(this,null,function*(){const ue=yield navigator.clipboard.read(),Nd=Hk(ic,tc);return(yield Promise.all(ue.map(kd=>Nd(kd)))).flat().filter(zg)})}function yc(ue){return mi(this,null,function*(){var Nd=Array.from(ue.files);return 0<Nd.length?(Pd=Nd=yield hb(Nd),Nd.map((kd,hd)=>{const td=
wf(Fe({},"video"===kd.type?Rt.defaultProps:Qt.defaultProps),{assetId:kd.id,opacity:1});kd.size&&Object.assign(td,{point:[ea[0]-kd.size[0]/4+16*hd,ea[1]-kd.size[1]/4+16*hd],size:fb.div(kd.size,2)});return td})):null})}function ic(ue){return mi(this,null,function*(){if(ue.types.includes("text/plain")&&(ma||Ma))return null;const Nd=yield xm(ue,"text/html");return Nd?Hk(Vb,zb)(Nd):null})}function Ac(ue){return mi(this,null,function*(){var Nd,kd,hd,td,zd,Kd,Ce=ue.getData("block-uuid");if(Ce){Ce=Ce.trim();
const Ee=null==(hd=null==(kd=null==(Nd=window.logseq)?void 0:Nd.api)?void 0:kd.get_selected_blocks)?void 0:hd.call(kd);Nd=Ee&&1<(null==Ee?void 0:Ee.length)?Ee.map(He=>He.uuid):[Ce];null==(Kd=null==(zd=null==(td=window.logseq)?void 0:td.api)?void 0:zd.set_blocks_id)?void 0:Kd.call(zd,Nd);td=Nd.map(He=>Nc(`((${He}))`));return(yield Promise.all(td)).flat().filter(zg).map((He,Ff)=>wf(Fe({},He),{point:[ea[0]+(Im.defaultProps.size[0]+16)*Ff,ea[1]]}))}return null})}function tc(ue){return mi(this,null,function*(){var Nd=
yield xm(ue,"text/plain");return Nd?(Nd=Nd.trim(),Hk(wc,Uc,Nc)(Nd)):null})}function Vb(ue){ue=AG(ue);try{if(ue){const Nd=ue.shapes;we=ue.assets;const kd=Ib.getCommonBounds(Nd.map(zd=>{var Kd,Ce,Ee,He,Ff,sf,Xg,Rg,di,fk,sk,rn,lp,bA,cA,dA;return{minX:null!=(Ce=null==(Kd=zd.point)?void 0:Kd[0])?Ce:ea[0],minY:null!=(He=null==(Ee=zd.point)?void 0:Ee[1])?He:ea[1],width:null!=(sf=null==(Ff=zd.size)?void 0:Ff[0])?sf:4,height:null!=(Rg=null==(Xg=zd.size)?void 0:Xg[1])?Rg:4,maxX:(null!=(fk=null==(di=zd.point)?
void 0:di[0])?fk:ea[0])+(null!=(rn=null==(sk=zd.size)?void 0:sk[0])?rn:4),maxY:(null!=(bA=null==(lp=zd.point)?void 0:lp[1])?bA:ea[1])+(null!=(dA=null==(cA=zd.size)?void 0:cA[1])?dA:4)}})),hd=ue.bindings,td=Nd.map(zd=>wf(Fe({},zd),{id:ca(),point:[ea[0]+zd.point[0]-kd.minX,ea[1]+zd.point[1]-kd.minY]}));td.flatMap(zd=>{var Kd;return Object.values(null!=(Kd=zd.handles)?Kd:{})}).forEach(zd=>{if(zd.bindingId){var Kd=hd[zd.bindingId];if(Kd){var Ce=Nd.findIndex(He=>He.id===Kd.fromId);const Ee=Nd.findIndex(He=>
He.id===Kd.toId);Kd&&-1!==Ce&&-1!==Ee?(Ce=wf(Fe({},Kd),{id:ca(),fromId:td[Ce].id,toId:td[Ee].id}),mf.push(Ce),zd.bindingId=Ce.id):zd.bindingId=void 0}else console.warn("binding not found",zd.bindingId)}});return td}}catch(Nd){console.error(Nd)}return null}function wc(ue){return mi(this,null,function*(){try{new URL(ue);var Nd=!0}catch(kd){Nd=!1}return!Nd||ma||Ma?null:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(ue)?[wf(Fe({},
Nq.defaultProps),{url:ue,point:[ea[0],ea[1]]})]:[wf(Fe({},Jq.defaultProps),{url:ue,point:[ea[0],ea[1]]})]})}function Uc(ue){return ue.startsWith("\x3ciframe")?[wf(Fe({},Op.defaultProps),{html:ue,point:[ea[0],ea[1]]})]:null}function Nc(ue){return mi(this,null,function*(){if(/^\(\(.*\)\)$/.test(ue)&&40===ue.length){var Nd=ue.slice(2,-2);if(Zf(Nd))return[wf(Fe({},Im.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:Nd,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ue))return Nd=ue.slice(2,-2),[wf(Fe({},
Im.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:Nd,blockType:"P"})];return(Nd=null==c?void 0:c.addNewBlock(ue))?[wf(Fe({},Im.defaultProps),{size:[400,0],point:[ea[0],ea[1]],pageId:Nd,blockType:"B",compact:!0})]:null})}var ed,ge;let Pd=[],we=[];const mf=[];M.cursors.setCursor("progress");let Le=[];try{xa?Le.push(...(null!=(ed=yield Ob(xa))?ed:[])):Le.push(...(null!=(ge=yield bc())?ge:[]))}catch(ue){console.error(ue)}const hf=Le.map(ue=>wf(Fe({},ue),{parentId:M.currentPageId,id:Zf(ue.id)?
ue.id:ca()}));M.wrapUpdate(()=>{var ue=[...Pd,...we];0<ue.length&&M.createAssets(ue);0<hf.length&&M.createShapes(hf);if(1===M.selectedShapesArray.length&&1===hf.length&&!Ma){ue=M.selectedShapesArray[0];const Nd=M.getShapeById(hf[0].id);M.createNewLineBinding(ue,Nd)}M.currentPage.updateBindings(Object.fromEntries(mf.map(Nd=>[Nd.id,Nd])));M.setSelectedShapes(hf.map(Nd=>Nd.id));M.selectedTool.transition("idle");M.cursors.setCursor("default")})}),[])}function Um(){const c=gn();return cF.useCallback((g,
u)=>mi(this,[g,u],function*(M,{dataTransfer:ea,point:ma}){c(M,{point:ma,shiftKey:!1,dataTransfer:ea,fromDrop:!0})}),[])}function Uo(){return DG.default.useCallback(c=>mi(this,null,function*(){c.selectTool("logseq-portal").selectedTool.transition("creating")}),[])}var io=Object.create,Sm=Object.defineProperty,El=Object.defineProperties,Ho=Object.getOwnPropertyDescriptor,Io=Object.getOwnPropertyDescriptors,ym=Object.getOwnPropertyNames,Rm=Object.getOwnPropertySymbols,en=Object.getPrototypeOf,Nn=Object.prototype.hasOwnProperty,
ho=Object.prototype.propertyIsEnumerable,On=(c,g,u)=>g in c?Sm(c,g,{enumerable:!0,configurable:!0,writable:!0,value:u}):c[g]=u,Fe=(c,g)=>{for(var u in g||={})Nn.call(g,u)&&On(c,u,g[u]);if(Rm)for(u of Rm(g))ho.call(g,u)&&On(c,u,g[u]);return c},wf=(c,g)=>El(c,Io(g)),hg=(c,g)=>{var u={},M;for(M in c)Nn.call(c,M)&&0>g.indexOf(M)&&(u[M]=c[M]);if(null!=c&&Rm)for(M of Rm(c))0>g.indexOf(M)&&ho.call(c,M)&&(u[M]=c[M]);return u},zm=(c,g)=>function(){return g||(0,c[ym(c)[0]])((g={exports:{}}).exports,g),g.exports},
jo=(c,g,u,M)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let ea of ym(g))Nn.call(c,ea)||ea===u||Sm(c,ea,{get:()=>g[ea],enumerable:!(M=Ho(g,ea))||M.enumerable});return c},Mf=(c,g,u)=>(u=null!=c?io(en(c)):{},jo(!g&&c&&c.__esModule?u:Sm(u,"default",{value:c,enumerable:!0}),c)),je=(c,g,u,M)=>{for(var ea=1<M?void 0:M?Ho(g,u):g,ma=c.length-1,xa;0<=ma;ma--)if(xa=c[ma])ea=(M?xa(g,u,ea):xa(ea))||ea;M&&ea&&Sm(g,u,ea);return ea},kb=(c,g,u)=>{On(c,"symbol"!==typeof g?g+"":g,u);return u},mi=(c,g,u)=>
new Promise((M,ea)=>{var ma=Za=>{try{Ma(u.next(Za))}catch(hb){ea(hb)}},xa=Za=>{try{Ma(u.throw(Za))}catch(hb){ea(hb)}},Ma=Za=>Za.done?M(Za.value):Promise.resolve(Za.value).then(ma,xa);Ma((u=u.apply(c,g)).next())}),Pn=zm({["../../node_modules/mousetrap/mousetrap.js"](c,g){(function(u,M,ea){function ma(tc,Vb,wc){tc.addEventListener?tc.addEventListener(Vb,wc,!1):tc.attachEvent("on"+Vb,wc)}function xa(tc){if("keypress"==tc.type){var Vb=String.fromCharCode(tc.which);tc.shiftKey||(Vb=Vb.toLowerCase());return Vb}return Ob[tc.which]?
Ob[tc.which]:bc[tc.which]?bc[tc.which]:String.fromCharCode(tc.which).toLowerCase()}function Ma(tc){return"shift"==tc||"ctrl"==tc||"alt"==tc||"meta"==tc}function Za(tc,Vb){var wc,Uc=[];"+"===tc?tc=["+"]:(tc=tc.replace(/\+{2}/g,"+plus"),tc=tc.split("+"));for(wc=0;wc<tc.length;++wc){var Nc=tc[wc];ic[Nc]&&(Nc=ic[Nc]);Vb&&"keypress"!=Vb&&yc[Nc]&&(Nc=yc[Nc],Uc.push("shift"));Ma(Nc)&&Uc.push(Nc)}tc=Nc;if(!Vb){if(!Ac){Ac={};for(var ed in Ob)95<ed&&112>ed||Ob.hasOwnProperty(ed)&&(Ac[Ob[ed]]=ed)}Vb=Ac[tc]?
"keydown":"keypress"}"keypress"==Vb&&Uc.length&&(Vb="keydown");return{key:Nc,modifiers:Uc,action:Vb}}function hb(tc,Vb){return null===tc||tc===M?!1:tc===Vb?!0:hb(tc.parentNode,Vb)}function zb(tc){function Vb(Nd){Nd=Nd||{};var kd=!1,hd;for(hd in we)Nd[hd]?kd=!0:we[hd]=0;kd||(ue=!1)}function wc(Nd,kd,hd,td,zd,Kd){var Ce,Ee=[],He=hd.type;if(!Pd._callbacks[Nd])return[];"keyup"==He&&Ma(Nd)&&(kd=[Nd]);for(Ce=0;Ce<Pd._callbacks[Nd].length;++Ce){var Ff=Pd._callbacks[Nd][Ce];if((td||!Ff.seq||we[Ff.seq]==Ff.level)&&
He==Ff.action){var sf;(sf="keypress"==He&&!hd.metaKey&&!hd.ctrlKey)||(sf=Ff.modifiers,sf=kd.sort().join(",")===sf.sort().join(","));sf&&(sf=td&&Ff.seq==td&&Ff.level==Kd,(!td&&Ff.combo==zd||sf)&&Pd._callbacks[Nd].splice(Ce,1),Ee.push(Ff))}}return Ee}function Uc(Nd,kd,hd,td){Pd.stopCallback(kd,kd.target||kd.srcElement,hd,td)||!1!==Nd(kd,hd)||(kd.preventDefault?kd.preventDefault():kd.returnValue=!1,kd.stopPropagation?kd.stopPropagation():kd.cancelBubble=!0)}function Nc(Nd){"number"!==typeof Nd.which&&
(Nd.which=Nd.keyCode);var kd=xa(Nd);if(kd)if("keyup"==Nd.type&&Le===kd)Le=!1;else{var hd=Pd,td=hd.handleKey,zd=[];Nd.shiftKey&&zd.push("shift");Nd.altKey&&zd.push("alt");Nd.ctrlKey&&zd.push("ctrl");Nd.metaKey&&zd.push("meta");td.call(hd,kd,zd,Nd)}}function ed(Nd,kd,hd,td){function zd(He){return function(){ue=He;++we[Nd];clearTimeout(mf);mf=setTimeout(Vb,1E3)}}function Kd(He){Uc(hd,He,Nd);"keyup"!==td&&(Le=xa(He));setTimeout(Vb,10)}for(var Ce=we[Nd]=0;Ce<kd.length;++Ce){var Ee=Ce+1===kd.length?Kd:
zd(td||Za(kd[Ce+1]).action);ge(kd[Ce],Ee,td,Nd,Ce)}}function ge(Nd,kd,hd,td,zd){Pd._directMap[Nd+":"+hd]=kd;Nd=Nd.replace(/\s+/g," ");var Kd=Nd.split(" ");1<Kd.length?ed(Nd,Kd,kd,hd):(hd=Za(Nd,hd),Pd._callbacks[hd.key]=Pd._callbacks[hd.key]||[],wc(hd.key,hd.modifiers,{type:hd.action},td,Nd,zd),Pd._callbacks[hd.key][td?"unshift":"push"]({callback:kd,modifiers:hd.modifiers,action:hd.action,seq:td,level:zd,combo:Nd}))}var Pd=this;tc=tc||M;if(!(Pd instanceof zb))return new zb(tc);Pd.target=tc;Pd._callbacks=
{};Pd._directMap={};var we={},mf,Le=!1,hf=!1,ue=!1;Pd._handleKey=function(Nd,kd,hd){var td=wc(Nd,kd,hd),zd;kd={};var Kd=0,Ce=!1;for(zd=0;zd<td.length;++zd)td[zd].seq&&(Kd=Math.max(Kd,td[zd].level));for(zd=0;zd<td.length;++zd)td[zd].seq?td[zd].level==Kd&&(Ce=!0,kd[td[zd].seq]=1,Uc(td[zd].callback,hd,td[zd].combo,td[zd].seq)):Ce||Uc(td[zd].callback,hd,td[zd].combo);td="keypress"==hd.type&&hf;hd.type!=ue||Ma(Nd)||td||Vb(kd);hf=Ce&&"keydown"==hd.type};Pd._bindMultiple=function(Nd,kd,hd){for(var td=0;td<
Nd.length;++td)ge(Nd[td],kd,hd)};ma(tc,"keypress",Nc);ma(tc,"keydown",Nc);ma(tc,"keyup",Nc)}if(u){var Ob={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},bc={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yc={"~":"`","!":"1","@":"2",
"#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},ic={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},Ac;for(ea=1;20>ea;++ea)Ob[111+ea]="f"+ea;for(ea=0;9>=ea;++ea)Ob[ea+96]=ea.toString();zb.prototype.bind=function(tc,Vb,wc){tc=tc instanceof Array?tc:[tc];this._bindMultiple.call(this,tc,Vb,wc);return this};zb.prototype.unbind=
function(tc,Vb){return this.bind.call(this,tc,function(){},Vb)};zb.prototype.trigger=function(tc,Vb){if(this._directMap[tc+":"+Vb])this._directMap[tc+":"+Vb]({},tc);return this};zb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};zb.prototype.stopCallback=function(tc,Vb){if(-1<(" "+Vb.className+" ").indexOf(" mousetrap ")||hb(Vb,this.target))return!1;if("composedPath"in tc&&"function"===typeof tc.composedPath){var wc=tc.composedPath()[0];wc!==tc.target&&(Vb=wc)}return"INPUT"==
Vb.tagName||"SELECT"==Vb.tagName||"TEXTAREA"==Vb.tagName||Vb.isContentEditable};zb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};zb.addKeycodes=function(tc){for(var Vb in tc)tc.hasOwnProperty(Vb)&&(Ob[Vb]=tc[Vb]);Ac=null};zb.init=function(){var tc=zb(M),Vb;for(Vb in tc)"_"!==Vb.charAt(0)&&(zb[Vb]=function(wc){return function(){return tc[wc].apply(tc,arguments)}}(Vb))};zb.init();u.Mousetrap=zb;"undefined"!==typeof g&&g.exports&&(g.exports=zb);"function"===typeof define&&
define.amd&&define(function(){return zb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),fn=zm({["../../node_modules/rbush/rbush.min.js"](c,g){!function(u,M){"object"==typeof c&&"undefined"!=typeof g?g.exports=M():"function"==typeof define&&define.amd?define(M):(u=u||self).RBush=M()}(c,function(){function u(Vb,wc,Uc,Nc,ed){!function ue(Pd,we,mf,Le,hf){for(;Le>mf;){if(600<Le-mf){var Nd=Le-mf+1,kd=we-mf+1,hd=Math.log(Nd),td=.5*Math.exp(2*hd/3);hd=.5*Math.sqrt(hd*
td*(Nd-td)/Nd)*(0>kd-Nd/2?-1:1);ue(Pd,we,Math.max(mf,Math.floor(we-kd*td/Nd+hd)),Math.min(Le,Math.floor(we+(Nd-kd)*td/Nd+hd)),hf)}Nd=Pd[we];kd=mf;td=Le;M(Pd,mf,we);for(0<hf(Pd[Le],Nd)&&M(Pd,mf,Le);kd<td;){M(Pd,kd,td);kd++;for(td--;0>hf(Pd[kd],Nd);)kd++;for(;0<hf(Pd[td],Nd);)td--}0===hf(Pd[mf],Nd)?M(Pd,mf,td):M(Pd,++td,Le);td<=we&&(mf=td+1);we<=td&&(Le=td-1)}}(Vb,wc,Uc||0,Nc||Vb.length-1,ed||ea)}function M(Vb,wc,Uc){var Nc=Vb[wc];Vb[wc]=Vb[Uc];Vb[Uc]=Nc}function ea(Vb,wc){return Vb<wc?-1:Vb>wc?1:0}
function ma(Vb,wc){xa(Vb,0,Vb.children.length,wc,Vb)}function xa(Vb,wc,Uc,Nc,ed){ed||=ic(null);ed.minX=1/0;ed.minY=1/0;ed.maxX=-1/0;for(ed.maxY=-1/0;wc<Uc;wc++){var ge=Vb.children[wc];Ma(ed,Vb.leaf?Nc(ge):ge)}return ed}function Ma(Vb,wc){return Vb.minX=Math.min(Vb.minX,wc.minX),Vb.minY=Math.min(Vb.minY,wc.minY),Vb.maxX=Math.max(Vb.maxX,wc.maxX),Vb.maxY=Math.max(Vb.maxY,wc.maxY),Vb}function Za(Vb,wc){return Vb.minX-wc.minX}function hb(Vb,wc){return Vb.minY-wc.minY}function zb(Vb){return(Vb.maxX-Vb.minX)*
(Vb.maxY-Vb.minY)}function Ob(Vb){return Vb.maxX-Vb.minX+(Vb.maxY-Vb.minY)}function bc(Vb,wc){return Vb.minX<=wc.minX&&Vb.minY<=wc.minY&&wc.maxX<=Vb.maxX&&wc.maxY<=Vb.maxY}function yc(Vb,wc){return wc.minX<=Vb.maxX&&wc.minY<=Vb.maxY&&wc.maxX>=Vb.minX&&wc.maxY>=Vb.minY}function ic(Vb){return{children:Vb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ac(Vb,wc,Uc,Nc,ed){for(var ge=[wc,Uc];ge.length;)if(!((Uc=ge.pop())-(wc=ge.pop())<=Nc)){var Pd=wc+Math.ceil((Uc-wc)/Nc/2)*Nc;u(Vb,Pd,
wc,Uc,ed);ge.push(wc,Pd,Pd,Uc)}}var tc=function(Vb){void 0===Vb&&(Vb=9);this._maxEntries=Math.max(4,Vb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return tc.prototype.all=function(){return this._all(this.data,[])},tc.prototype.search=function(Vb){var wc=this.data,Uc=[];if(!yc(Vb,wc))return Uc;for(var Nc=this.toBBox,ed=[];wc;){for(var ge=0;ge<wc.children.length;ge++){var Pd=wc.children[ge],we=wc.leaf?Nc(Pd):Pd;yc(Vb,we)&&(wc.leaf?Uc.push(Pd):bc(Vb,we)?this._all(Pd,Uc):
ed.push(Pd))}wc=ed.pop()}return Uc},tc.prototype.collides=function(Vb){var wc=this.data;if(!yc(Vb,wc))return!1;for(var Uc=[];wc;){for(var Nc=0;Nc<wc.children.length;Nc++){var ed=wc.children[Nc],ge=wc.leaf?this.toBBox(ed):ed;if(yc(Vb,ge)){if(wc.leaf||bc(Vb,ge))return!0;Uc.push(ed)}}wc=Uc.pop()}return!1},tc.prototype.load=function(Vb){if(!Vb||!Vb.length)return this;if(Vb.length<this._minEntries){for(var wc=0;wc<Vb.length;wc++)this.insert(Vb[wc]);return this}Vb=this._build(Vb.slice(),0,Vb.length-1,0);
this.data.children.length?this.data.height===Vb.height?this._splitRoot(this.data,Vb):(this.data.height<Vb.height&&(wc=this.data,this.data=Vb,Vb=wc),this._insert(Vb,this.data.height-Vb.height-1,!0)):this.data=Vb;return this},tc.prototype.insert=function(Vb){return Vb&&this._insert(Vb,this.data.height-1),this},tc.prototype.clear=function(){return this.data=ic([]),this},tc.prototype.remove=function(Vb,wc){if(!Vb)return this;for(var Uc,Nc,ed,ge=this.data,Pd=this.toBBox(Vb),we=[],mf=[];ge||we.length;){if(ge||
(ge=we.pop(),Nc=we[we.length-1],Uc=mf.pop(),ed=!0),ge.leaf){a:{var Le=Vb;var hf=ge.children,ue=wc;if(ue){for(var Nd=0;Nd<hf.length;Nd++)if(ue(Le,hf[Nd])){Le=Nd;break a}Le=-1}else Le=hf.indexOf(Le)}if(-1!==Le)return ge.children.splice(Le,1),we.push(ge),this._condense(we),this}ed||ge.leaf||!bc(ge,Pd)?Nc?(Uc++,ge=Nc.children[Uc],ed=!1):ge=null:(we.push(ge),mf.push(Uc),Uc=0,Nc=ge,ge=ge.children[0])}return this},tc.prototype.toBBox=function(Vb){return Vb},tc.prototype.compareMinX=function(Vb,wc){return Vb.minX-
wc.minX},tc.prototype.compareMinY=function(Vb,wc){return Vb.minY-wc.minY},tc.prototype.toJSON=function(){return this.data},tc.prototype.fromJSON=function(Vb){return this.data=Vb,this},tc.prototype._all=function(Vb,wc){for(var Uc=[];Vb;)Vb.leaf?wc.push.apply(wc,Vb.children):Uc.push.apply(Uc,Vb.children),Vb=Uc.pop();return wc},tc.prototype._build=function(Vb,wc,Uc,Nc){var ed,ge=Uc-wc+1,Pd=this._maxEntries;if(ge<=Pd)return ma(ed=ic(Vb.slice(wc,Uc+1)),this.toBBox),ed;Nc||(Nc=Math.ceil(Math.log(ge)/Math.log(Pd)),
Pd=Math.ceil(ge/Math.pow(Pd,Nc-1)));(ed=ic([])).leaf=!1;ed.height=Nc;ge=Math.ceil(ge/Pd);Pd=ge*Math.ceil(Math.sqrt(Pd));for(Ac(Vb,wc,Uc,Pd,this.compareMinX);wc<=Uc;wc+=Pd){var we=Math.min(wc+Pd-1,Uc);Ac(Vb,wc,we,ge,this.compareMinY);for(var mf=wc;mf<=we;mf+=ge)ed.children.push(this._build(Vb,mf,Math.min(mf+ge-1,we),Nc-1))}return ma(ed,this.toBBox),ed},tc.prototype._chooseSubtree=function(Vb,wc,Uc,Nc){for(;Nc.push(wc),!wc.leaf&&Nc.length-1!==Uc;){for(var ed=1/0,ge=1/0,Pd=void 0,we=0;we<wc.children.length;we++){var mf=
wc.children[we],Le=zb(mf),hf=(ue=Vb,Nd=mf,(Math.max(Nd.maxX,ue.maxX)-Math.min(Nd.minX,ue.minX))*(Math.max(Nd.maxY,ue.maxY)-Math.min(Nd.minY,ue.minY))-Le);hf<ge?(ge=hf,ed=Le<ed?Le:ed,Pd=mf):hf===ge&&Le<ed&&(ed=Le,Pd=mf)}wc=Pd||wc.children[0]}var ue,Nd;return wc},tc.prototype._insert=function(Vb,wc,Uc){Uc=Uc?Vb:this.toBBox(Vb);var Nc=[],ed=this._chooseSubtree(Uc,this.data,wc,Nc);ed.children.push(Vb);for(Ma(ed,Uc);0<=wc&&Nc[wc].children.length>this._maxEntries;)this._split(Nc,wc),wc--;this._adjustParentBBoxes(Uc,
Nc,wc)},tc.prototype._split=function(Vb,wc){var Uc=Vb[wc],Nc=Uc.children.length,ed=this._minEntries;this._chooseSplitAxis(Uc,ed,Nc);Nc=this._chooseSplitIndex(Uc,ed,Nc);Nc=ic(Uc.children.splice(Nc,Uc.children.length-Nc));Nc.height=Uc.height;Nc.leaf=Uc.leaf;ma(Uc,this.toBBox);ma(Nc,this.toBBox);wc?Vb[wc-1].children.push(Nc):this._splitRoot(Uc,Nc)},tc.prototype._splitRoot=function(Vb,wc){this.data=ic([Vb,wc]);this.data.height=Vb.height+1;this.data.leaf=!1;ma(this.data,this.toBBox)},tc.prototype._chooseSplitIndex=
function(Vb,wc,Uc){for(var Nc,ed,ge,Pd,we,mf,Le,hf=1/0,ue=1/0,Nd=wc;Nd<=Uc-wc;Nd++){var kd=xa(Vb,0,Nd,this.toBBox),hd=xa(Vb,Nd,Uc,this.toBBox),td=(ed=kd,ge=hd,Pd=void 0,we=void 0,mf=void 0,Le=void 0,Pd=Math.max(ed.minX,ge.minX),we=Math.max(ed.minY,ge.minY),mf=Math.min(ed.maxX,ge.maxX),Le=Math.min(ed.maxY,ge.maxY),Math.max(0,mf-Pd)*Math.max(0,Le-we));kd=zb(kd)+zb(hd);td<hf?(hf=td,Nc=Nd,ue=kd<ue?kd:ue):td===hf&&kd<ue&&(ue=kd,Nc=Nd)}return Nc||Uc-wc},tc.prototype._chooseSplitAxis=function(Vb,wc,Uc){var Nc=
Vb.leaf?this.compareMinX:Za,ed=Vb.leaf?this.compareMinY:hb;this._allDistMargin(Vb,wc,Uc,Nc)<this._allDistMargin(Vb,wc,Uc,ed)&&Vb.children.sort(Nc)},tc.prototype._allDistMargin=function(Vb,wc,Uc,Nc){Vb.children.sort(Nc);Nc=this.toBBox;for(var ed=xa(Vb,0,wc,Nc),ge=xa(Vb,Uc-wc,Uc,Nc),Pd=Ob(ed)+Ob(ge),we=wc;we<Uc-wc;we++){var mf=Vb.children[we];Ma(ed,Vb.leaf?Nc(mf):mf);Pd+=Ob(ed)}for(Uc=Uc-wc-1;Uc>=wc;Uc--)ed=Vb.children[Uc],Ma(ge,Vb.leaf?Nc(ed):ed),Pd+=Ob(ge);return Pd},tc.prototype._adjustParentBBoxes=
function(Vb,wc,Uc){for(;0<=Uc;Uc--)Ma(wc[Uc],Vb)},tc.prototype._condense=function(Vb){for(var wc=Vb.length-1,Uc=void 0;0<=wc;wc--)0===Vb[wc].children.length?0<wc?(Uc=Vb[wc-1].children).splice(Uc.indexOf(Vb[wc]),1):this.clear():ma(Vb[wc],this.toBBox)},tc})}}),Qn=zm({["../../node_modules/fast-copy/dist/fast-copy.js"](c,g){(function(u,M){"object"===typeof c&&"undefined"!==typeof g?g.exports=M():"function"===typeof define&&define.amd?define(M):(u="undefined"!==typeof globalThis?globalThis:u||self,u["fast-copy"]=
M())})(c,function(){function u(Pd,we){var mf=!(!we||!we.isStrict),Le=we&&we.realm||ge,hf=mf?wc:Vb,ue=function(Nd,kd){if(!Nd||"object"!==typeof Nd)return Nd;if(kd.has(Nd))return kd.get(Nd);var hd=Nd.__proto__||ed(Nd);hd=hd&&hd.constructor;if(!hd||hd===Le.Object)return hf(Nd,Le,ue,kd);if(Nc(Nd)){if(mf)return wc(Nd,Le,ue,kd);var td=new hd;kd.set(Nd,td);hd=0;for(var zd=Nd.length;hd<zd;++hd)td[hd]=ue(Nd[hd],kd);return td}if(Nd instanceof Le.Date)return new hd(Nd.getTime());if(Nd instanceof Le.RegExp)return td=
new hd(Nd.source,Nd.flags||Uc(Nd)),td.lastIndex=Nd.lastIndex,td;if(Le.Map&&Nd instanceof Le.Map)return td=new hd,kd.set(Nd,td),Nd.forEach(function(Kd,Ce){td.set(Ce,ue(Kd,kd))}),td;if(Le.Set&&Nd instanceof Le.Set)return td=new hd,kd.set(Nd,td),Nd.forEach(function(Kd){td.add(ue(Kd,kd))}),td;if(Le.Blob&&Nd instanceof Le.Blob)return Nd.slice(0,Nd.size,Nd.type);if(Le.Buffer&&Le.Buffer.isBuffer(Nd))return td=Le.Buffer.allocUnsafe?Le.Buffer.allocUnsafe(Nd.length):new hd(Nd.length),kd.set(Nd,td),Nd.copy(td),
td;if(Le.ArrayBuffer){if(Le.ArrayBuffer.isView(Nd))return td=new hd(Nd.buffer.slice(0)),kd.set(Nd,td),td;if(Nd instanceof Le.ArrayBuffer)return td=Nd.slice(0),kd.set(Nd,td),td}return"function"===typeof Nd.then||Nd instanceof Error||Le.WeakMap&&Nd instanceof Le.WeakMap||Le.WeakSet&&Nd instanceof Le.WeakSet?Nd:hf(Nd,Le,ue,kd)};return ue(Pd,Ac())}var M=Function.prototype.toString,ea=Object.create,ma=Object.defineProperty,xa=Object.getOwnPropertyDescriptor,Ma=Object.getOwnPropertyNames,Za=Object.getOwnPropertySymbols,
hb=Object.getPrototypeOf,zb=Object.prototype,Ob=zb.hasOwnProperty,bc=zb.propertyIsEnumerable,yc="function"===typeof Za,ic="function"===typeof WeakMap,Ac=function(){if(ic)return function(){return new WeakMap};var Pd=function(){function we(){this._keys=[];this._values=[]}we.prototype.has=function(mf){return!!~this._keys.indexOf(mf)};we.prototype.get=function(mf){return this._values[this._keys.indexOf(mf)]};we.prototype.set=function(mf,Le){this._keys.push(mf);this._values.push(Le)};return we}();return function(){return new Pd}}(),
tc=function(Pd,we){Pd=Pd.__proto__||hb(Pd);if(!Pd)return ea(null);var mf=Pd.constructor;if(mf===we.Object)return Pd===we.Object.prototype?{}:ea(Pd);if(~M.call(mf).indexOf("[native code]"))try{return new mf}catch(Le){}return ea(Pd)},Vb=function(Pd,we,mf,Le){we=tc(Pd,we);Le.set(Pd,we);for(var hf in Pd)Ob.call(Pd,hf)&&(we[hf]=mf(Pd[hf],Le));if(yc){hf=Za(Pd);for(var ue=0,Nd=hf.length,kd;ue<Nd;++ue)kd=hf[ue],bc.call(Pd,kd)&&(we[kd]=mf(Pd[kd],Le))}return we},wc=function(Pd,we,mf,Le){we=tc(Pd,we);Le.set(Pd,
we);for(var hf=yc?Ma(Pd).concat(Za(Pd)):Ma(Pd),ue=0,Nd=hf.length,kd,hd;ue<Nd;++ue)if(kd=hf[ue],"callee"!==kd&&"caller"!==kd)if(hd=xa(Pd,kd)){hd.get||hd.set||(hd.value=mf(Pd[kd],Le));try{ma(we,kd,hd)}catch(td){we[kd]=hd.value}}else we[kd]=mf(Pd[kd],Le);return we},Uc=function(Pd){var we="";Pd.global&&(we+="g");Pd.ignoreCase&&(we+="i");Pd.multiline&&(we+="m");Pd.unicode&&(we+="u");Pd.sticky&&(we+="y");return we},Nc=Array.isArray,ed=Object.getPrototypeOf,ge=function(){if("undefined"!==typeof globalThis)return globalThis;
if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof qa)return qa;console&&console.error&&console.error('Unable to locate global object, returning "this".');return this}();u.default=u;u.strict=function(Pd,we){return u(Pd,{isStrict:!0,realm:we?we.realm:void 0})};return u})}}),Am=zm({["../../node_modules/fast-deep-equal/index.js"](c,g){g.exports=function ma(M,ea){if(M===ea)return!0;if(M&&ea&&"object"==typeof M&&"object"==typeof ea){if(M.constructor!==
ea.constructor)return!1;var xa;if(Array.isArray(M)){var Ma=M.length;if(Ma!=ea.length)return!1;for(xa=Ma;0!==xa--;)if(!ma(M[xa],ea[xa]))return!1;return!0}if(M.constructor===RegExp)return M.source===ea.source&&M.flags===ea.flags;if(M.valueOf!==Object.prototype.valueOf)return M.valueOf()===ea.valueOf();if(M.toString!==Object.prototype.toString)return M.toString()===ea.toString();var Za=Object.keys(M);Ma=Za.length;if(Ma!==Object.keys(ea).length)return!1;for(xa=Ma;0!==xa--;)if(!Object.prototype.hasOwnProperty.call(ea,
Za[xa]))return!1;for(xa=Ma;0!==xa--;)if(Ma=Za[xa],!ma(M[Ma],ea[Ma]))return!1;return!0}return M!==M&&ea!==ea}}}),vp=zm({["../../../node_modules/deepmerge/dist/cjs.js"](c,g){function u(Ob,bc){return!1!==bc.clone&&bc.isMergeableObject(Ob)?Za(Array.isArray(Ob)?[]:{},Ob,bc):Ob}function M(Ob,bc,yc){return Ob.concat(bc).map(function(ic){return u(ic,yc)})}function ea(Ob){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(Ob).filter(function(bc){return Ob.propertyIsEnumerable(bc)}):[]}function ma(Ob){return Object.keys(Ob).concat(ea(Ob))}
function xa(Ob,bc){try{return bc in Ob}catch(yc){return!1}}function Ma(Ob,bc,yc){var ic={};yc.isMergeableObject(Ob)&&ma(Ob).forEach(function(Ac){ic[Ac]=u(Ob[Ac],yc)});ma(bc).forEach(function(Ac){if(!xa(Ob,Ac)||Object.hasOwnProperty.call(Ob,Ac)&&Object.propertyIsEnumerable.call(Ob,Ac))if(xa(Ob,Ac)&&yc.isMergeableObject(bc[Ac])){if(yc.customMerge){var tc=yc.customMerge(Ac);tc="function"===typeof tc?tc:Za}else tc=Za;ic[Ac]=tc(Ob[Ac],bc[Ac],yc)}else ic[Ac]=u(bc[Ac],yc)});return ic}function Za(Ob,bc,yc){yc=
yc||{};yc.arrayMerge=yc.arrayMerge||M;yc.isMergeableObject=yc.isMergeableObject||hb;yc.cloneUnlessOtherwiseSpecified=u;var ic=Array.isArray(bc),Ac=Array.isArray(Ob);return ic!==Ac?u(bc,yc):ic?yc.arrayMerge(Ob,bc,yc):Ma(Ob,bc,yc)}var hb=function(Ob){var bc;if(bc=!!Ob&&"object"===typeof Ob)bc=Object.prototype.toString.call(Ob),bc=!("[object RegExp]"===bc||"[object Date]"===bc||Ob.$$typeof===zb);return bc},zb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Za.all=function(Ob,
bc){if(!Array.isArray(Ob))throw Error("first argument should be an array");return Ob.reduce(function(yc,ic){return Za(yc,ic,bc)},{})};g.exports=Za}}),Co=zm({["../../node_modules/tslib/tslib.js"](c,g){var u,M,ea,ma,xa,Ma,Za,hb,zb,Ob,bc,yc,ic,Ac,tc,Vb,wc,Uc,Nc,ed,ge,Pd,we,mf,Le;(function(hf){function ue(kd,hd){kd!==Nd&&("function"===typeof Object.create?Object.defineProperty(kd,"__esModule",{value:!0}):kd.__esModule=!0);return function(td,zd){return kd[td]=hd?hd(td,zd):zd}}var Nd="object"===typeof qa?
qa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(kd){hf(ue(Nd,ue(kd)))}):"object"===typeof g&&"object"===typeof g.exports?hf(ue(Nd,ue(g.exports))):hf(ue(Nd))})(function(hf){var ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kd,hd){kd.__proto__=hd}||function(kd,hd){for(var td in hd)Object.prototype.hasOwnProperty.call(hd,td)&&(kd[td]=hd[td])};u=function(kd,hd){function td(){this.constructor=
kd}if("function"!==typeof hd&&null!==hd)throw new TypeError("Class extends value "+String(hd)+" is not a constructor or null");ue(kd,hd);kd.prototype=null===hd?Object.create(hd):(td.prototype=hd.prototype,new td)};M=Object.assign||function(kd){for(var hd,td=1,zd=arguments.length;td<zd;td++){hd=arguments[td];for(var Kd in hd)Object.prototype.hasOwnProperty.call(hd,Kd)&&(kd[Kd]=hd[Kd])}return kd};ea=function(kd,hd){var td={},zd;for(zd in kd)Object.prototype.hasOwnProperty.call(kd,zd)&&0>hd.indexOf(zd)&&
(td[zd]=kd[zd]);if(null!=kd&&"function"===typeof Object.getOwnPropertySymbols){var Kd=0;for(zd=Object.getOwnPropertySymbols(kd);Kd<zd.length;Kd++)0>hd.indexOf(zd[Kd])&&Object.prototype.propertyIsEnumerable.call(kd,zd[Kd])&&(td[zd[Kd]]=kd[zd[Kd]])}return td};ma=function(kd,hd,td,zd){var Kd=arguments.length,Ce=3>Kd?hd:null===zd?zd=Object.getOwnPropertyDescriptor(hd,td):zd,Ee;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Ce=Reflect.decorate(kd,hd,td,zd);else for(var He=kd.length-
1;0<=He;He--)if(Ee=kd[He])Ce=(3>Kd?Ee(Ce):3<Kd?Ee(hd,td,Ce):Ee(hd,td))||Ce;return 3<Kd&&Ce&&Object.defineProperty(hd,td,Ce),Ce};xa=function(kd,hd){return function(td,zd){hd(td,zd,kd)}};Ma=function(kd,hd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(kd,hd)};Za=function(kd,hd,td,zd){function Kd(Ce){return Ce instanceof td?Ce:new td(function(Ee){Ee(Ce)})}return new (td||=Promise)(function(Ce,Ee){function He(Xg){try{sf(zd.next(Xg))}catch(Rg){Ee(Rg)}}function Ff(Xg){try{sf(zd["throw"](Xg))}catch(Rg){Ee(Rg)}}
function sf(Xg){Xg.done?Ce(Xg.value):Kd(Xg.value).then(He,Ff)}sf((zd=zd.apply(kd,hd||[])).next())})};hb=function(kd,hd){function td(sf){return function(Xg){return zd([sf,Xg])}}function zd(sf){if(Ce)throw new TypeError("Generator is already executing.");for(;Kd;)try{if(Ce=1,Ee&&(He=sf[0]&2?Ee["return"]:sf[0]?Ee["throw"]||((He=Ee["return"])&&He.call(Ee),0):Ee.next)&&!(He=He.call(Ee,sf[1])).done)return He;if(Ee=0,He)sf=[sf[0]&2,He.value];switch(sf[0]){case 0:case 1:He=sf;break;case 4:return Kd.label++,
{value:sf[1],done:!1};case 5:Kd.label++;Ee=sf[1];sf=[0];continue;case 7:sf=Kd.ops.pop();Kd.trys.pop();continue;default:if(!(He=Kd.trys,He=0<He.length&&He[He.length-1])&&(6===sf[0]||2===sf[0])){Kd=0;continue}if(3===sf[0]&&(!He||sf[1]>He[0]&&sf[1]<He[3]))Kd.label=sf[1];else if(6===sf[0]&&Kd.label<He[1])Kd.label=He[1],He=sf;else if(He&&Kd.label<He[2])Kd.label=He[2],Kd.ops.push(sf);else{He[2]&&Kd.ops.pop();Kd.trys.pop();continue}}sf=hd.call(kd,Kd)}catch(Xg){sf=[6,Xg],Ee=0}finally{Ce=He=0}if(sf[0]&5)throw sf[1];
return{value:sf[0]?sf[1]:void 0,done:!0}}var Kd={label:0,sent:function(){if(He[0]&1)throw He[1];return He[1]},trys:[],ops:[]},Ce,Ee,He,Ff;return Ff={next:td(0),"throw":td(1),"return":td(2)},"function"===typeof Symbol&&(Ff[Symbol.iterator]=function(){return this}),Ff};zb=function(kd,hd){for(var td in kd)"default"===td||Object.prototype.hasOwnProperty.call(hd,td)||Le(hd,kd,td)};Le=Object.create?function(kd,hd,td,zd){void 0===zd&&(zd=td);var Kd=Object.getOwnPropertyDescriptor(hd,td);if(!Kd||("get"in
Kd?!hd.__esModule:Kd.writable||Kd.configurable))Kd={enumerable:!0,get:function(){return hd[td]}};Object.defineProperty(kd,zd,Kd)}:function(kd,hd,td,zd){void 0===zd&&(zd=td);kd[zd]=hd[td]};Ob=function(kd){var hd="function"===typeof Symbol&&Symbol.iterator,td=hd&&kd[hd],zd=0;if(td)return td.call(kd);if(kd&&"number"===typeof kd.length)return{next:function(){kd&&zd>=kd.length&&(kd=void 0);return{value:kd&&kd[zd++],done:!kd}}};throw new TypeError(hd?"Object is not iterable.":"Symbol.iterator is not defined.");
};bc=function(kd,hd){var td="function"===typeof Symbol&&kd[Symbol.iterator];if(!td)return kd;kd=td.call(kd);var zd,Kd=[];try{for(;(void 0===hd||0<hd--)&&!(zd=kd.next()).done;)Kd.push(zd.value)}catch(Ee){var Ce={error:Ee}}finally{try{zd&&!zd.done&&(td=kd["return"])&&td.call(kd)}finally{if(Ce)throw Ce.error;}}return Kd};yc=function(){for(var kd=[],hd=0;hd<arguments.length;hd++)kd=kd.concat(bc(arguments[hd]));return kd};ic=function(){for(var kd=0,hd=0,td=arguments.length;hd<td;hd++)kd+=arguments[hd].length;
kd=Array(kd);var zd=0;for(hd=0;hd<td;hd++)for(var Kd=arguments[hd],Ce=0,Ee=Kd.length;Ce<Ee;Ce++,zd++)kd[zd]=Kd[Ce];return kd};Ac=function(kd,hd,td){if(td||2===arguments.length)for(var zd=0,Kd=hd.length,Ce;zd<Kd;zd++)!Ce&&zd in hd||(Ce||=Array.prototype.slice.call(hd,0,zd),Ce[zd]=hd[zd]);return kd.concat(Ce||Array.prototype.slice.call(hd))};tc=function(kd){return this instanceof tc?(this.v=kd,this):new tc(kd)};Vb=function(kd,hd,td){function zd(Rg){Ff[Rg]&&(sf[Rg]=function(di){return new Promise(function(fk,
sk){1<Xg.push([Rg,di,fk,sk])||Kd(Rg,di)})})}function Kd(Rg,di){try{var fk=Ff[Rg](di);fk.value instanceof tc?Promise.resolve(fk.value.v).then(Ce,Ee):He(Xg[0][2],fk)}catch(sk){He(Xg[0][3],sk)}}function Ce(Rg){Kd("next",Rg)}function Ee(Rg){Kd("throw",Rg)}function He(Rg,di){(Rg(di),Xg.shift(),Xg.length)&&Kd(Xg[0][0],Xg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ff=td.apply(kd,hd||[]),sf,Xg=[];return sf={},zd("next"),zd("throw"),zd("return"),sf[Symbol.asyncIterator]=
function(){return this},sf};wc=function(kd){function hd(Kd,Ce){td[Kd]=kd[Kd]?function(Ee){return(zd=!zd)?{value:tc(kd[Kd](Ee)),done:"return"===Kd}:Ce?Ce(Ee):Ee}:Ce}var td,zd;return td={},hd("next"),hd("throw",function(Kd){throw Kd;}),hd("return"),td[Symbol.iterator]=function(){return this},td};Uc=function(kd){function hd(Ce){Kd[Ce]=kd[Ce]&&function(Ee){return new Promise(function(He,Ff){Ee=kd[Ce](Ee);td(He,Ff,Ee.done,Ee.value)})}}function td(Ce,Ee,He,Ff){Promise.resolve(Ff).then(function(sf){Ce({value:sf,
done:He})},Ee)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var zd=kd[Symbol.asyncIterator],Kd;return zd?zd.call(kd):(kd="function"===typeof Ob?Ob(kd):kd[Symbol.iterator](),Kd={},hd("next"),hd("throw"),hd("return"),Kd[Symbol.asyncIterator]=function(){return this},Kd)};Nc=function(kd,hd){Object.defineProperty?Object.defineProperty(kd,"raw",{value:hd}):kd.raw=hd;return kd};var Nd=Object.create?function(kd,hd){Object.defineProperty(kd,"default",{enumerable:!0,
value:hd})}:function(kd,hd){kd["default"]=hd};ed=function(kd){if(kd&&kd.__esModule)return kd;var hd={};if(null!=kd)for(var td in kd)"default"!==td&&Object.prototype.hasOwnProperty.call(kd,td)&&Le(hd,kd,td);Nd(hd,kd);return hd};ge=function(kd){return kd&&kd.__esModule?kd:{"default":kd}};Pd=function(kd,hd,td,zd){if("a"===td&&!zd)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof hd?kd!==hd||!zd:!hd.has(kd))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===td?zd:"a"===td?zd.call(kd):zd?zd.value:hd.get(kd)};we=function(kd,hd,td,zd,Kd){if("m"===zd)throw new TypeError("Private method is not writable");if("a"===zd&&!Kd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof hd?kd!==hd||!Kd:!hd.has(kd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===zd?Kd.call(kd,td):Kd?Kd.value=td:hd.set(kd,td),td};mf=function(kd,hd){if(null===hd||"object"!==typeof hd&&
"function"!==typeof hd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof kd?hd===kd:kd.has(hd)};hf("__extends",u);hf("__assign",M);hf("__rest",ea);hf("__decorate",ma);hf("__param",xa);hf("__metadata",Ma);hf("__awaiter",Za);hf("__generator",hb);hf("__exportStar",zb);hf("__createBinding",Le);hf("__values",Ob);hf("__read",bc);hf("__spread",yc);hf("__spreadArrays",ic);hf("__spreadArray",Ac);hf("__await",tc);hf("__asyncGenerator",Vb);hf("__asyncDelegator",wc);hf("__asyncValues",
Uc);hf("__makeTemplateObject",Nc);hf("__importStar",ed);hf("__importDefault",ge);hf("__classPrivateFieldGet",Pd);hf("__classPrivateFieldSet",we);hf("__classPrivateFieldIn",mf)})}}),ko={};((c,g)=>{for(var u in g)Sm(c,u,{get:g[u],enumerable:!0})})(ko,{App:()=>HG,PreviewManager:()=>Yv,generateJSXFromApp:()=>Qm,generateSVGFromApp:()=>gm});Ra.exports=(c=>jo(Sm({},"__esModule",{value:!0}),c))(ko);var La,Xa=new Uint8Array(16),Ka=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,
eb=[];for(Hb=0;256>Hb;++Hb)eb.push((Hb+256).toString(16).substr(1));var Hb,pc=function(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;g=(eb[c[g+0]]+eb[c[g+1]]+eb[c[g+2]]+eb[c[g+3]]+"-"+eb[c[g+4]]+eb[c[g+5]]+"-"+eb[c[g+6]]+eb[c[g+7]]+"-"+eb[c[g+8]]+eb[c[g+9]]+"-"+eb[c[g+10]]+eb[c[g+11]]+eb[c[g+12]]+eb[c[g+13]]+eb[c[g+14]]+eb[c[g+15]]).toLowerCase();if("string"!==typeof g||!Ka.test(g))throw TypeError("Stringified UUID is invalid");return g},Zc,Ld,ce=0,Ie=0,ca=function(c,g,u){u=g&&
u||0;var M=g||Array(16);c=c||{};var ea=c.node||Zc,ma=void 0!==c.clockseq?c.clockseq:Ld;if(null==ea||null==ma){var xa=c.random||(c.rng||n)();null==ea&&(ea=Zc=[xa[0]|1,xa[1],xa[2],xa[3],xa[4],xa[5]]);null==ma&&(ma=Ld=(xa[6]<<8|xa[7])&16383)}xa=void 0!==c.msecs?c.msecs:Date.now();var Ma=void 0!==c.nsecs?c.nsecs:Ie+1,Za=xa-ce+(Ma-Ie)/1E4;0>Za&&void 0===c.clockseq&&(ma=ma+1&16383);(0>Za||xa>ce)&&void 0===c.nsecs&&(Ma=0);if(1E4<=Ma)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");ce=xa;Ie=
Ma;Ld=ma;xa+=122192928E5;c=(1E4*(xa&268435455)+Ma)%4294967296;M[u++]=c>>>24&255;M[u++]=c>>>16&255;M[u++]=c>>>8&255;M[u++]=c&255;c=xa/4294967296*1E4&268435455;M[u++]=c>>>8&255;M[u++]=c&255;M[u++]=c>>>24&15|16;M[u++]=c>>>16&255;M[u++]=ma>>>8|128;M[u++]=ma&255;for(ma=0;6>ma;++ma)M[u+ma]=ea[ma];return g||pc(M)},va=class{static clamp(c,g,u){return Math.max(g,"undefined"!==typeof u?Math.min(c,u):c)}static clampV(c,g,u){return c.map(M=>u?va.clamp(M,g,u):va.clamp(M,g))}static cross(c,g,u){return(g[0]-c[0])*
(u[1]-c[1])-(u[0]-c[0])*(g[1]-c[1])}static snap(c,g=1){return[Math.round(c[0]/g)*g,Math.round(c[1]/g)*g]}},Ja=va;Ja.neg=c=>[-c[0],-c[1]];Ja.add=(c,g)=>[c[0]+g[0],c[1]+g[1]];Ja.addScalar=(c,g)=>[c[0]+g,c[1]+g];Ja.sub=(c,g)=>[c[0]-g[0],c[1]-g[1]];Ja.subScalar=(c,g)=>[c[0]-g,c[1]-g];Ja.vec=(c,g)=>[g[0]-c[0],g[1]-c[1]];Ja.mul=(c,g)=>[c[0]*g,c[1]*g];Ja.mulV=(c,g)=>[c[0]*g[0],c[1]*g[1]];Ja.div=(c,g)=>[c[0]/g,c[1]/g];Ja.divV=(c,g)=>[c[0]/g[0],c[1]/g[1]];Ja.per=c=>[c[1],-c[0]];Ja.dpr=(c,g)=>c[0]*g[0]+c[1]*
g[1];Ja.cpr=(c,g)=>c[0]*g[1]-g[0]*c[1];Ja.len2=c=>c[0]*c[0]+c[1]*c[1];Ja.len=c=>Math.hypot(c[0],c[1]);Ja.pry=(c,g)=>va.dpr(c,g)/va.len(g);Ja.uni=c=>va.div(c,va.len(c));Ja.normalize=c=>va.uni(c);Ja.tangent=(c,g)=>va.uni(va.sub(c,g));Ja.dist2=(c,g)=>va.len2(va.sub(c,g));Ja.dist=(c,g)=>Math.hypot(c[1]-g[1],c[0]-g[0]);Ja.fastDist=(c,g)=>{c=[g[0]-c[0],g[1]-c[1]];g=[Math.abs(c[0]),Math.abs(c[1])];let u=1/Math.max(g[0],g[1]);u*=1.29289-(g[0]+g[1])*u*.29289;return[c[0]*u,c[1]*u]};Ja.ang=(c,g)=>Math.atan2(va.cpr(c,
g),va.dpr(c,g));Ja.angle=(c,g)=>Math.atan2(g[1]-c[1],g[0]-c[0]);Ja.med=(c,g)=>va.mul(va.add(c,g),.5);Ja.rot=(c,g=0)=>[c[0]*Math.cos(g)-c[1]*Math.sin(g),c[0]*Math.sin(g)+c[1]*Math.cos(g)];Ja.rotWith=(c,g,u=0)=>{if(0===u)return c;const M=Math.sin(u);u=Math.cos(u);const ea=c[0]-g[0];c=c[1]-g[1];return[ea*u-c*M+g[0],ea*M+c*u+g[1]]};Ja.isEqual=(c,g)=>c[0]===g[0]&&c[1]===g[1];Ja.lrp=(c,g,u)=>va.add(c,va.mul(va.sub(g,c),u));Ja.int=(c,g,u,M,ea=1)=>{u=(va.clamp(u,M)-u)/(M-u);return va.add(va.mul(c,1-u),va.mul(g,
ea))};Ja.ang3=(c,g,u)=>{c=va.vec(g,c);g=va.vec(g,u);return va.ang(c,g)};Ja.abs=c=>[Math.abs(c[0]),Math.abs(c[1])];Ja.rescale=(c,g)=>{const u=va.len(c);return[g*c[0]/u,g*c[1]/u]};Ja.isLeft=(c,g,u)=>(g[0]-c[0])*(u[1]-c[1])-(u[0]-c[0])*(g[1]-c[1]);Ja.clockwise=(c,g,u)=>0<va.isLeft(c,g,u);Ja.toFixed=c=>c.map(g=>Math.round(100*g)/100);Ja.nearestPointOnLineThroughPoint=(c,g,u)=>va.add(c,va.mul(g,va.pry(va.sub(u,c),g)));Ja.distanceToLineThroughPoint=(c,g,u)=>va.dist(u,va.nearestPointOnLineThroughPoint(c,
g,u));Ja.nearestPointOnLineSegment=(c,g,u,M=!0)=>{const ea=va.uni(va.sub(g,c));u=va.add(c,va.mul(ea,va.pry(va.sub(u,c),ea)));if(M){if(u[0]<Math.min(c[0],g[0]))return c[0]<g[0]?c:g;if(u[0]>Math.max(c[0],g[0]))return c[0]>g[0]?c:g;if(u[1]<Math.min(c[1],g[1]))return c[1]<g[1]?c:g;if(u[1]>Math.max(c[1],g[1]))return c[1]>g[1]?c:g}return u};Ja.distanceToLineSegment=(c,g,u,M=!0)=>va.dist(u,va.nearestPointOnLineSegment(c,g,u,M));Ja.nudge=(c,g,u)=>va.isEqual(c,g)?c:va.add(c,va.mul(va.uni(va.sub(g,c)),u));
Ja.nudgeAtAngle=(c,g,u)=>[Math.cos(g)*u+c[0],Math.sin(g)*u+c[1]];Ja.toPrecision=(c,g=4)=>[+c[0].toPrecision(g),+c[1].toPrecision(g)];Ja.pointsBetween=(c,g,u=6)=>Array.from(Array(u)).map((M,ea)=>{M=ea/(u-1);ea=Math.min(1,.5+Math.abs(.5-M));return[...va.lrp(c,g,M),ea]});Ja.slope=(c,g)=>c[0]===g[0]?NaN:(c[1]-g[1])/(c[0]-g[0]);Ja.toAngle=c=>{c=Math.atan2(c[1],c[0]);return 0>c?c+2*Math.PI:c};Ja.max=(...c)=>[Math.max(...c.map(g=>g[0])),Math.max(...c.map(g=>g[1]))];Ja.min=(...c)=>[Math.min(...c.map(g=>g[0])),
Math.min(...c.map(g=>g[1]))];var fb=Ja,Ib=class{static getRectangleSides(c,g,u=0){const M=[c[0]+g[0]/2,c[1]+g[1]/2],ea=Ja.rotWith(c,M,u),ma=Ja.rotWith(Ja.add(c,[g[0],0]),M,u),xa=Ja.rotWith(Ja.add(c,g),M,u);c=Ja.rotWith(Ja.add(c,[0,g[1]]),M,u);return[["top",[ea,ma]],["right",[ma,xa]],["bottom",[xa,c]],["left",[c,ea]]]}static getBoundsSides(c){return Ib.getRectangleSides([c.minX,c.minY],[c.width,c.height])}static expandBounds(c,g){return{minX:c.minX-g,minY:c.minY-g,maxX:c.maxX+g,maxY:c.maxY+g,width:c.width+
2*g,height:c.height+2*g}}static boundsCollide(c,g){return!(c.maxX<g.minX||c.minX>g.maxX||c.maxY<g.minY||c.minY>g.maxY)}static boundsContain(c,g){return c.minX<g.minX&&c.minY<g.minY&&c.maxY>g.maxY&&c.maxX>g.maxX}static boundsContained(c,g){return Ib.boundsContain(g,c)}static boundsAreEqual(c,g){return!(g.maxX!==c.maxX||g.minX!==c.minX||g.maxY!==c.maxY||g.minY!==c.minY)}static getBoundsFromPoints(c,g=0){let u=Infinity,M=Infinity,ea=-Infinity,ma=-Infinity;if(2>c.length)M=u=0,ma=ea=1;else for(const xa of c)u=
Math.min(xa[0],u),M=Math.min(xa[1],M),ea=Math.max(xa[0],ea),ma=Math.max(xa[1],ma);return 0!==g?Ib.getBoundsFromPoints(c.map(xa=>Ja.rotWith(xa,[(u+ea)/2,(M+ma)/2],g))):{minX:u,minY:M,maxX:ea,maxY:ma,width:Math.max(1,ea-u),height:Math.max(1,ma-M)}}static centerBounds(c,g){const u=Ib.getBoundsCenter(c);return Ib.translateBounds(c,[g[0]-u[0],g[1]-u[1]])}static snapBoundsToGrid(c,g){const u=Math.round(c.minX/g)*g,M=Math.round(c.minY/g)*g,ea=Math.round(c.maxX/g)*g;c=Math.round(c.maxY/g)*g;return{minX:u,
minY:M,maxX:ea,maxY:c,width:Math.max(1,ea-u),height:Math.max(1,c-M)}}static translateBounds(c,g){return{minX:c.minX+g[0],minY:c.minY+g[1],maxX:c.maxX+g[0],maxY:c.maxY+g[1],width:c.width,height:c.height}}static multiplyBounds(c,g){const u=Ib.getBoundsCenter(c);return Ib.centerBounds({minX:c.minX*g,minY:c.minY*g,maxX:c.maxX*g,maxY:c.maxY*g,width:c.width*g,height:c.height*g},[u[0]*g,u[1]*g])}static divideBounds(c,g){const u=Ib.getBoundsCenter(c);return Ib.centerBounds({minX:c.minX/g,minY:c.minY/g,maxX:c.maxX/
g,maxY:c.maxY/g,width:c.width/g,height:c.height/g},[u[0]/g,u[1]/g])}static getRotatedBounds(c,g=0){c=Ib.getRotatedCorners(c,g);let u=g=Infinity,M=-Infinity,ea=-Infinity;for(const ma of c)g=Math.min(ma[0],g),u=Math.min(ma[1],u),M=Math.max(ma[0],M),ea=Math.max(ma[1],ea);return{minX:g,minY:u,maxX:M,maxY:ea,width:Math.max(1,M-g),height:Math.max(1,ea-u),rotation:0}}static getRotatedEllipseBounds(c,g,u,M,ea=0){var ma=Math.cos(ea);const xa=Math.sin(ea);ea=Math.hypot(u*ma,M*xa);ma=Math.hypot(u*xa,M*ma);return{minX:c+
u-ea,minY:g+M-ma,maxX:c+u+ea,maxY:g+M+ma,width:2*ea,height:2*ma}}static getExpandedBounds(c,g){const u=Math.min(c.minX,g.minX),M=Math.min(c.minY,g.minY),ea=Math.max(c.maxX,g.maxX);c=Math.max(c.maxY,g.maxY);return{minX:u,minY:M,maxX:ea,maxY:c,width:Math.abs(ea-u),height:Math.abs(c-M)}}static getCommonBounds(c){if(2>c.length)return c[0];let g=c[0];for(let u=1;u<c.length;u++)g=Ib.getExpandedBounds(g,c[u]);return g}static getRotatedCorners(c,g=0){const u=[c.minX+c.width/2,c.minY+c.height/2];c=[[c.minX,
c.minY],[c.maxX,c.minY],[c.maxX,c.maxY],[c.minX,c.maxY]];return g?c.map(M=>Ja.rotWith(M,u,g)):c}static getTransformedBoundingBox(c,g,u,M=0,ea=!1){const [ma,xa]=[c.minX,c.minY],[Ma,Za]=[c.maxX,c.maxY];let [hb,zb]=[c.minX,c.minY],[Ob,bc]=[c.maxX,c.maxY];if("center"===g)return{minX:hb+u[0],minY:zb+u[1],maxX:Ob+u[0],maxY:bc+u[1],width:Ob-hb,height:bc-zb,scaleX:1,scaleY:1};const [yc,ic]=Ja.rot(u,-M);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":zb+=ic;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":bc+=
ic}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":hb+=yc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":Ob+=yc}var Ac=Ma-ma;const tc=Za-xa;var Vb=(Ob-hb)/Ac,wc=(bc-zb)/tc;c=0>Vb;u=0>wc;var Uc=Math.abs(Ob-hb),Nc=Math.abs(bc-zb);if(ea)switch(ea=Ac/tc,Ac=ea<Uc/Nc,wc=1/ea*(0>wc?1:-1)*Uc,Vb=Nc*(0>Vb?1:-1)*ea,g){case "top_left_corner":Ac?zb=bc+wc:hb=Ob+Vb;break;case "top_right_corner":Ac?zb=bc+wc:Ob=hb-Vb;break;case "bottom_right_corner":Ac?bc=zb-
wc:Ob=hb-Vb;break;case "bottom_left_corner":Ac?bc=zb-wc:hb=Ob+Vb;break;case "bottom_edge":case "top_edge":Uc=(hb+Ob)/2;Nc*=ea;hb=Uc-Nc/2;Ob=Uc+Nc/2;break;case "left_edge":case "right_edge":Nc=(zb+bc)/2,Uc/=ea,zb=Nc-Uc/2,bc=Nc+Uc/2}if(0!==M%(2*Math.PI)){Uc=[0,0];Nc=Ja.med([ma,xa],[Ma,Za]);Vb=Ja.med([hb,zb],[Ob,bc]);switch(g){case "top_left_corner":Uc=Ja.sub(Ja.rotWith([Ob,bc],Vb,M),Ja.rotWith([Ma,Za],Nc,M));break;case "top_right_corner":Uc=Ja.sub(Ja.rotWith([hb,bc],Vb,M),Ja.rotWith([ma,Za],Nc,M));
break;case "bottom_right_corner":Uc=Ja.sub(Ja.rotWith([hb,zb],Vb,M),Ja.rotWith([ma,xa],Nc,M));break;case "bottom_left_corner":Uc=Ja.sub(Ja.rotWith([Ob,zb],Vb,M),Ja.rotWith([Ma,xa],Nc,M));break;case "top_edge":Uc=Ja.sub(Ja.rotWith(Ja.med([hb,bc],[Ob,bc]),Vb,M),Ja.rotWith(Ja.med([ma,Za],[Ma,Za]),Nc,M));break;case "left_edge":Uc=Ja.sub(Ja.rotWith(Ja.med([Ob,zb],[Ob,bc]),Vb,M),Ja.rotWith(Ja.med([Ma,xa],[Ma,Za]),Nc,M));break;case "bottom_edge":Uc=Ja.sub(Ja.rotWith(Ja.med([hb,zb],[Ob,zb]),Vb,M),Ja.rotWith(Ja.med([ma,
xa],[Ma,xa]),Nc,M));break;case "right_edge":Uc=Ja.sub(Ja.rotWith(Ja.med([hb,zb],[hb,bc]),Vb,M),Ja.rotWith(Ja.med([ma,xa],[ma,Za]),Nc,M))}[hb,zb]=Ja.sub([hb,zb],Uc);[Ob,bc]=Ja.sub([Ob,bc],Uc)}Ob<hb&&([Ob,hb]=[hb,Ob]);bc<zb&&([bc,zb]=[zb,bc]);return{minX:hb,minY:zb,maxX:Ob,maxY:bc,width:Ob-hb,height:bc-zb,scaleX:(Ob-hb)/(Ma-ma||1)*(c?-1:1),scaleY:(bc-zb)/(Za-xa||1)*(u?-1:1)}}static getTransformAnchor(c,g,u){let M=c;switch(c){case "top_left_corner":M=g&&u?"bottom_right_corner":g?"top_right_corner":u?
"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":M=g&&u?"bottom_left_corner":g?"top_left_corner":u?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":M=g&&u?"top_left_corner":g?"bottom_left_corner":u?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":M=g&&u?"top_right_corner":g?"bottom_right_corner":u?"top_left_corner":"top_right_corner"}return M}static getRelativeTransformedBoundingBox(c,g,u,M,ea){M=c.minX+(M?g.maxX-u.maxX:u.minX-
g.minX)/g.width*c.width;ea=c.minY+(ea?g.maxY-u.maxY:u.minY-g.minY)/g.height*c.height;const ma=u.width/g.width*c.width;c=u.height/g.height*c.height;return{minX:M,minY:ea,maxX:M+ma,maxY:ea+c,width:ma,height:c}}static getRotatedSize(c,g){const u=Ja.div(c,2);c=[[0,0],[c[0],0],c,[0,c[1]]].map(M=>Ja.rotWith(M,u,g));c=Ib.getBoundsFromPoints(c);return[c.width,c.height]}static getBoundsCenter(c){return[c.minX+c.width/2,c.minY+c.height/2]}static getBoundsWithCenter(c){const g=Ib.getBoundsCenter(c);return wf(Fe({},
c),{midX:g[0],midY:g[1]})}static getCommonTopLeft(c){const g=[Infinity,Infinity];c.forEach(u=>{g[0]=Math.min(g[0],u[0]);g[1]=Math.min(g[1],u[1])});return g}static getTLSnapPoints(c,g,u){const M=Fe({},c);c=[0,0];const ea=[],ma={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},xa=["midX","minX","maxX"],Ma=["midY","minY","maxY"];g=g.map(bc=>{const yc=xa.flatMap((Ac,tc)=>
xa.map((Vb,wc)=>{const Uc=M[Ac]-bc[Vb];return{f:Ac,t:Vb,gap:Uc,distance:Math.abs(Uc),isCareful:0===tc||3===tc+wc}})),ic=Ma.flatMap((Ac,tc)=>Ma.map((Vb,wc)=>{const Uc=M[Ac]-bc[Vb];return{f:Ac,t:Vb,gap:Uc,distance:Math.abs(Uc),isCareful:0===tc||3===tc+wc}}));return[bc,yc,ic]});let Za=Infinity,hb=Infinity,zb=Infinity,Ob=Infinity;g.forEach(([,bc,yc])=>{bc.forEach(ic=>{ic.distance<u&&ic.distance<zb&&(zb=ic.distance,Za=ic.gap)});yc.forEach(ic=>{ic.distance<u&&ic.distance<Ob&&(Ob=ic.distance,hb=ic.gap)})});
g.forEach(([bc,yc,ic])=>{Infinity!==Za&&yc.forEach(Ac=>{2>Math.abs(Ac.gap-Za)&&(ma[Ac.f]=wf(Fe({},ma[Ac.f]),{isSnapped:!0,to:bc[Ac.t],B:bc,distance:Ac.distance}))});Infinity!==hb&&ic.forEach(Ac=>{2>Math.abs(Ac.gap-hb)&&(ma[Ac.f]=wf(Fe({},ma[Ac.f]),{isSnapped:!0,to:bc[Ac.t],B:bc,distance:Ac.distance}))})});c[0]=Infinity===Za?0:Za;c[1]=Infinity===hb?0:hb;M.minX-=c[0];M.midX-=c[0];M.maxX-=c[0];M.minY-=c[1];M.midY-=c[1];M.maxY-=c[1];xa.forEach(bc=>{bc=ma[bc];if(bc.isSnapped){var {id:yc,B:ic}=bc;bc=M[yc];
ea.push("minX"===yc?[[bc,M.midY],[bc,ic.minY],[bc,ic.maxY]]:[[bc,M.minY],[bc,M.maxY],[bc,ic.minY],[bc,ic.maxY]])}});Ma.forEach(bc=>{bc=ma[bc];if(bc.isSnapped){var {id:yc,B:ic}=bc;bc=M[yc];ea.push("midY"===yc?[[M.midX,bc],[ic.minX,bc],[ic.maxX,bc]]:[[M.minX,bc],[M.maxX,bc],[ic.minX,bc],[ic.maxX,bc]])}});return{offset:c,snapLines:ea}}static ensureRatio(c,g){const {width:u,height:M}=c,ea=Fe({},c);u/M<g?(ea.width=M*g,ea.maxX+=u-c.width):(ea.height=u/g,ea.maxY+=M-c.height);return ea}static getDistributions(c,
g){var u=c.map(ma=>{const xa=ma.getBounds();return{id:ma.id,point:[xa.minX,xa.minY],bounds:xa,center:ma.getCenter()}});c=u.length;var M=Ib.getCommonBounds(u.map(({bounds:ma})=>ma));const ea=[];switch(g){case "horizontal":g=u.reduce((ma,xa)=>ma+xa.bounds.width,0);if(g>M.width){const ma=u.sort((hb,zb)=>hb.bounds.minX-zb.bounds.minX)[0],xa=u.sort((hb,zb)=>zb.bounds.maxX-hb.bounds.maxX)[0];M=u.filter(hb=>hb!==ma&&hb!==xa).sort((hb,zb)=>hb.center[0]-zb.center[0]);const Ma=(xa.center[0]-ma.center[0])/(c-
1),Za=ma.center[0]+Ma;M.forEach(({id:hb,point:zb,bounds:Ob},bc)=>{ea.push({id:hb,prev:zb,next:[Za+Ma*bc-Ob.width/2,Ob.minY]})})}else{u=u.sort((Ma,Za)=>Ma.center[0]-Za.center[0]);let ma=M.minX;const xa=(M.width-g)/(c-1);u.forEach(({id:Ma,point:Za,bounds:hb})=>{ea.push({id:Ma,prev:Za,next:[ma,hb.minY]});ma+=hb.width+xa})}break;case "vertical":if(g=u.reduce((ma,xa)=>ma+xa.bounds.height,0),g>M.height){const ma=u.sort((hb,zb)=>hb.bounds.minY-zb.bounds.minY)[0],xa=u.sort((hb,zb)=>zb.bounds.maxY-hb.bounds.maxY)[0];
M=u.filter(hb=>hb!==ma&&hb!==xa).sort((hb,zb)=>hb.center[1]-zb.center[1]);const Ma=(xa.center[1]-ma.center[1])/(c-1),Za=ma.center[1]+Ma;M.forEach(({id:hb,point:zb,bounds:Ob},bc)=>{ea.push({id:hb,prev:zb,next:[Ob.minX,Za+Ma*bc-Ob.height/2]})})}else{u=u.sort((Ma,Za)=>Ma.center[1]-Za.center[1]);let ma=M.minY;const xa=(M.height-g)/(c-1);u.forEach(({id:Ma,point:Za,bounds:hb})=>{ea.push({id:Ma,prev:Za,next:[hb.minX,ma]});ma+=hb.height+xa})}}return ea}static getPackedDistributions(c){const g=Ib.getCommonBounds(c.map(({bounds:ea})=>
ea)),u=[g.minX,g.minY],M=Object.fromEntries(c.map(ea=>[ea.id,[ea.bounds.minX,ea.bounds.minY]]));c=c.filter(ea=>{var ma,xa,Ma,Za;return!((null==(xa=null==(ma=ea.props.handles)?void 0:ma.start)?0:xa.bindingId)||(null==(Za=null==(Ma=ea.props.handles)?void 0:Ma.end)?0:Za.bindingId))}).map(ea=>{const ma=ea.getBounds();return{id:ea.id,w:ma.width+16,h:ma.height+16,x:ma.minX,y:ma.minY}});R(c);return c.map(({id:ea,x:ma,y:xa})=>({id:ea,prev:M[ea],next:[ma+u[0],xa+u[1]]}))}},sc=class{static pointInCircle(c,
g,u){return Ja.dist(c,g)<=u}static pointInEllipse(c,g,u,M,ea=0){ea=ea||0;var ma=Math.cos(ea);ea=Math.sin(ea);g=Ja.sub(c,g);c=ma*g[0]+ea*g[1];ma=ea*g[0]-ma*g[1];return 1>=c*c/(u*u)+ma*ma/(M*M)}static pointInRect(c,g){return!(c[0]<g[0]||c[0]>c[0]+g[0]||c[1]<g[1]||c[1]>c[1]+g[1])}static pointInPolygon(c,g){let u=0;g.forEach((M,ea)=>{ea=g[(ea+1)%g.length];M[1]<=c[1]?ea[1]>c[1]&&0<Ja.cross(M,ea,c)&&(u+=1):ea[1]<=c[1]&&0>Ja.cross(M,ea,c)&&--u});return 0!==u}static pointInBounds(c,g){return!(c[0]<g.minX||
c[0]>g.maxX||c[1]<g.minY||c[1]>g.maxY)}static pointInPolyline(c,g,u=3){for(let M=1;M<g.length;M++)if(Ja.distanceToLineSegment(g[M-1],g[M],c)<u)return!0;return!1}static _getSqSegDist(c,g,u){let M=g[0];g=g[1];let ea=u[0]-M,ma=u[1]-g;if(0!==ea||0!==ma){const xa=((c[0]-M)*ea+(c[1]-g)*ma)/(ea*ea+ma*ma);1<xa?(M=u[0],g=u[1]):0<xa&&(M+=ea*xa,g+=ma*xa)}ea=c[0]-M;ma=c[1]-g;return ea*ea+ma*ma}static _simplifyStep(c,g,u,M,ea){let ma=M,xa=-1;for(let Ma=g+1;Ma<u;Ma++){const Za=sc._getSqSegDist(c[Ma],c[g],c[u]);
Za>ma&&(xa=Ma,ma=Za)}-1<xa&&ma>M&&(1<xa-g&&sc._simplifyStep(c,g,xa,M,ea),ea.push(c[xa]),1<u-xa&&sc._simplifyStep(c,xa,u,M,ea))}static simplify2(c,g=1){if(2>=c.length)return c;g*=g;var u=c[0],M=c[1];const ea=[u];for(let ma=1,xa=c.length;ma<xa;ma++)M=c[ma],(M[0]-u[0])*(M[0]-u[0])+(M[1]-u[1])*(M[1]-u[1])>g&&(ea.push(M),u=M);u!==M&&ea.push(M);u=ea.length-1;M=[ea[0]];sc._simplifyStep(ea,0,u,g,M);M.push(ea[u],c[c.length-1]);return M}static pointNearToPolyline(c,g,u=8){const M=g.length;for(let ea=1;ea<M;ea++)if(Ja.distanceToLineSegment(g[ea-
1],g[ea],c)<u)return!0;return!1}},Sc=sc;kb(Sc,"simplify",(c,g=1)=>{var u=c.length;const M=c[0],ea=c[u-1],[ma,xa]=M,[Ma,Za]=ea;if(2<u){let hb=0,zb=0;const Ob=Ja.len2([Za-xa,Ma-ma]);for(let bc=1;bc<u-1;bc++){const [yc,ic]=c[bc],Ac=Math.pow(yc*(Za-xa)+ma*(ic-Za)+Ma*(xa-ic),2)/Ob;hb>Ac||(hb=Ac,zb=bc)}if(hb>g)return u=sc.simplify(c.slice(0,zb+1),g),c=sc.simplify(c.slice(zb+1),g),u.concat(c.slice(1))}return[M,ea]});var pd=Mf(Pn()),Bd=({target:c},g)=>{c=c&&c.tagName;return!!(c&&g&&g.includes(c))},Td=class{static registerShortcut(c,
g){pd.default.bind(c,(u,M)=>{var ea;u.preventDefault();Bd(u,["INPUT","TEXTAREA","SELECT"])||(null==(ea=u.target)?0:ea.isContentEditable)||g(u,M)},"keydown");return()=>{pd.default.unbind(c,"keydown")}}},ve=Math.PI,Pe=ve/2,af=2*ve,qg={},yg={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",
top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Wg=class{static circleFromThreePoints(c,g,u){const [M,ea]=c,[ma,xa]=g,[Ma,Za]=u;g=M*(xa-Za)-ea*(ma-Ma)+ma*Za-Ma*xa;c=-((M*M+ea*ea)*(Za-xa)+(ma*ma+xa*xa)*(ea-Za)+(Ma*Ma+Za*Za)*(xa-ea))/(2*g);g=-((M*M+ea*ea)*(ma-Ma)+(ma*ma+xa*xa)*(Ma-M)+(Ma*Ma+Za*Za)*(M-ma))/(2*g);return[c,g,Math.hypot(c-M,g-ea)]}static perimeterOfEllipse(c,g){const u=Math.pow(c-g,2)/Math.pow(c+g,2);return ve*
(c+g)*(1+3*u/(10+Math.sqrt(4-3*u)))}static shortAngleDist(c,g){c=(g-c)%af;return 2*c%af-c}static longAngleDist(c,g){return af-Wg.shortAngleDist(c,g)}static lerpAngles(c,g,u){return c+Wg.shortAngleDist(c,g)*u}static angleDelta(c,g){return Wg.shortAngleDist(c,g)}static getSweep(c,g,u){return Wg.angleDelta(fb.angle(c,g),fb.angle(c,u))}static clampRadians(c){return(af+c)%af}static snapAngleToSegments(c,g){g=af/g;c=Math.floor((Wg.clampRadians(c)+g/2)/g)*g%af;c<ve&&(c+=af);c>ve&&(c-=af);return c}static isAngleBetween(c,
g,u){if(u===c||u===g)return!0;g=(g-c+Pe)%Pe;return g<=ve!==(u-c+Pe)%Pe>g}static degreesToRadians(c){return c*ve/180}static radiansToDegrees(c){return 180*c/ve}static getArcLength(c,g,u,M){c=Wg.getSweep(c,u,M);return c/af*af*g}static getSweepFlag(c,g,u){u=fb.angle(c,u);return 0<(fb.angle(c,g)-u+3*ve)%af-ve?0:1}static getLargeArcFlag(c,g,u){c=fb.angle(u,c);g=(fb.angle(u,g)-c+3*ve)%af-ve;return Math.abs(g)>Pe?0:1}static getArcDashOffset(c,g,u,M,ea){const ma=Wg.getSweepFlag(c,u,M);g=Wg.getArcLength(c,
g,u,M);return-(0>ma?g:af*c[2]-g)/2+ea}static getEllipseDashOffset(c,g){return-(af*c[2])/2+-g}static radiansToCardinalDirection(c){return c<.25*Math.PI?"north":c<.75*Math.PI?"east":c<1.25*Math.PI?"south":c<1.75*Math.PI?"west":"north"}},Nh=class{static getPolygonCentroid(c){var g=c.map(u=>u[0]);c=c.map(u=>u[1]);g=Math.min(...g)+Math.max(...g);c=Math.min(...c)+Math.max(...c);return[g?g/2:0,c?c/2:0]}};kb(Nh,"getEdges",c=>{const g=c.length;return c.map((u,M)=>[u,c[(M+1)%g]])});kb(Nh,"getEdgeOutwardNormal",
(c,g)=>fb.per(fb.uni(fb.sub(g,c))));kb(Nh,"getEdgeInwardNormal",(c,g)=>fb.neg(Nh.getEdgeOutwardNormal(c,g)));kb(Nh,"getOffsetEdge",(c,g,u)=>{u=fb.mul(fb.per(fb.uni(fb.sub(g,c))),u);return[fb.add(c,u),fb.add(g,u)]});kb(Nh,"getOffsetEdges",(c,g)=>c.map(([u,M])=>Nh.getOffsetEdge(u,M,g)));kb(Nh,"getOffsetPolygon",(c,g)=>{if(1>c.length)throw Error("Expected at least one point.");if(1===c.length)return c=c[0],[fb.add(c,[-g,-g]),fb.add(c,[g,-g]),fb.add(c,[g,g]),fb.add(c,[-g,g])];if(2===c.length){const [u,
M]=c;return[...Nh.getOffsetEdge(u,M,g),...Nh.getOffsetEdge(M,u,g)]}return Nh.getOffsetEdges(Nh.getEdges(c),g).flatMap((u,M,ea)=>{{M=ea[(M+1)%ea.length];const ma=Ja.slope(u[0],u[1]);ea=Ja.slope(M[0],M[1]);ma!==ea?Number.isNaN(ma)&&!Number.isNaN(ea)?u=[u[0][0],(u[0][0]-M[0][0])*ea+M[0][1]]:Number.isNaN(ea)&&!Number.isNaN(ma)?u=[M[0][0],(M[0][0]-u[0][0])*ma+u[0][1]]:(u=(ma*u[0][0]-ea*M[0][0]+M[0][1]-u[0][1])/(ma-ea),u=[u,ea*(u-M[0][0])+M[0][1]]):u=void 0}if(void 0===u)throw Error("Expected an intersection");
return u})});kb(Nh,"getPolygonVertices",(c,g,u=0,M=1)=>{c=fb.div(c,2);const [ea,ma]=[Math.max(1,c[0]-u),Math.max(1,c[1]-u)];u=[];for(let hb=0,zb=af/g;hb<g;hb++){var xa=(-Pe+hb*zb)%af,Ma=(-Pe+(hb+1)*zb)%af;xa=fb.add(c,[ea*Math.cos(xa),ma*Math.sin(xa)]);Ma=fb.add(c,[ea*Math.cos(Ma),ma*Math.sin(Ma)]);var Za=fb.med(xa,Ma);Za=fb.nudge(Za,c,fb.dist(c,Za)*(1-M));u.push(xa,Za,Ma)}return u});kb(Nh,"getTriangleVertices",(c,g=0,u=1)=>{const [M,ea]=c;var ma=1-u;c=[M/2,g/2];u=[M-g,ea-g];g=[g/2,ea-g];const xa=
Nh.getPolygonCentroid([c,u,g]),Ma=fb.med(c,u),Za=fb.med(u,g),hb=fb.med(g,c),zb=fb.dist(Ma,xa)*ma,Ob=fb.dist(Za,xa)*ma;ma*=fb.dist(hb,xa);return[c,zb?fb.nudge(Ma,xa,zb):Ma,u,Ob?fb.nudge(Za,xa,Ob):Za,g,ma?fb.nudge(hb,xa,ma):hb]});kb(Nh,"getStarVertices",(c,g,u,M=1)=>{const ea=fb.div(g,2),ma=fb.mul(ea,M/2),xa=af/u/2;return Array.from(Array(2*u)).map((Ma,Za)=>{Ma=-Pe+Za*xa;const [hb,zb]=Za%2?ma:ea;return fb.add(c,[hb*Math.cos(Ma),zb*Math.sin(Ma)])})});var ok=class{static getCurvedPathForPolygon(c){if(3>
c.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...c[0].slice(0,2),"Q"],u=c.length;for(let M=1;M<u;M++){const [ea,ma]=c[M],[xa,Ma]=c[(M+1)%u];g.push(ea,ma,(ea+xa)/2,(ma+Ma)/2)}g.push("Z");return g.join(" ")}static getCurvedPathForPoints(c){if(3>c.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...c[0].slice(0,2),"Q"],u=c.length;for(let M=1;M<u-1;M++){const [ea,ma]=c[M],[xa,Ma]=c[M+1];g.push(ea,ma,(ea+xa)/2,(ma+Ma)/2)}return g.join(" ")}static getSvgPathFromStroke(c,
g=!0){const u=c.length;if(4>u)return"";let M=c[0],ea=c[1];var ma=c[2];ma=`M${M[0].toFixed(2)},${M[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ma[0])/2).toFixed(2)},${((ea[1]+ma[1])/2).toFixed(2)} T`;for(let xa=2,Ma=u-1;xa<Ma;xa++)M=c[xa],ea=c[xa+1],ma+=`${((M[0]+ea[0])/2).toFixed(2)},${((M[1]+ea[1])/2).toFixed(2)} `;g&&(ma+="Z");return ma}static getSvgPathFromStrokePoints(c,g=!1){const u=c.length;if(4>u)return"";let M=c[0].point,ea=c[1].point;var ma=c[2].point;ma=`M${M[0].toFixed(2)},${M[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+
ma[0])/2).toFixed(2)},${((ea[1]+ma[1])/2).toFixed(2)} T`;for(let xa=2,Ma=u-1;xa<Ma;xa++)M=c[xa].point,ea=c[xa+1].point,ma+=`${((M[0]+ea[0])/2).toFixed(2)},${((M[1]+ea[1])/2).toFixed(2)} `;g&&(ma+="Z");return ma}};kb(ok,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Mh={},ck=Object.assign,Mk=Object.getOwnPropertyDescriptor,Dl=Object.defineProperty,mo=Object.prototype,Eo=[];Object.freeze(Eo);var Fo={};Object.freeze(Fo);var Ah="undefined"!==typeof Proxy,pm=Object.toString(),Ek=
function(){},Yl="undefined"!==typeof Object.getOwnPropertySymbols,Tn="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Yl?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:Object.getOwnPropertyNames,es=Object.getOwnPropertyDescriptors||function(c){var g={};Tn(c).forEach(function(u){g[u]=Mk(c,u)});return g},Sj=Symbol("mobx-stored-annotations"),$g=Symbol("mobx administration"),Rn=function(){function c(u){void 0===u&&(u="Atom");this.name_=void 0;this.isBeingObserved_=
this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Zi.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=u}var g=c.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(u){return u()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(u){return u()})};g.reportObserved=function(){return Vd(this)};g.reportChanged=function(){Hd();Mb(this);nd()};g.toString=function(){return this.name_};return c}(),Vo=O("Atom",
Rn),wn={identity:function(c,g){return c===g},structural:function(c,g){return of(c,g)},"default":function(c,g){return Object.is?Object.is(c,g):c===g?0!==c||1/c===1/g:c!==c&&g!==g},shallow:function(c,g){return of(c,g,1)}},ds="override",cs=Qa(),Wo={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Wo);var Wq=Lb("observable"),mg=Lb("observable.ref",{enhancer:Na}),Xq=Lb("observable.shallow",{enhancer:function(c,g,u){if(void 0===c||null===c||Cd(c)||Cb(c)||Bp(c)||pq(c))return c;if(Array.isArray(c))return ug.array(c,
{name:u,deep:!1});if(aa(c))return ug.object(c,void 0,{name:u,deep:!1});if(D(c))return ug.map(c,{name:u,deep:!1});if(N(c))return ug.set(c,{name:u,deep:!1})}}),bs=Lb("observable.struct",{enhancer:function(c,g){return of(c,g)?g:c}}),xn=Ga(Wq);Object.assign(Ic,xn);var Go={box:function(c,g){g=g||Wo;return new Un(c,Xb(g),g.name,!0,g.equals)},array:function(c,g){g=g||Wo;return(!1===ia.useProxies||!1===g.proxy?$e:qf)(c,Xb(g),g.name)},map:function(c,g){g=g||Wo;return new yx(c,Xb(g),g.name)},set:function(c,
g){g=g||Wo;return new xx(c,Xb(g),g.name)},object:function(c,g,u){if(!1===ia.useProxies||!1===(null==u?void 0:u.proxy))u=jb({},u);else{var M={},ea,ma;S();M=jb(M,u);u=null!=(ma=(ea=M[$g]).proxy_)?ma:ea.proxy_=new Proxy(M,jf)}return Me(u,c,g)},ref:Ga(mg),shallow:Ga(Xq),deep:xn,struct:Ga(bs)},ug=ck(Ic,Go),yp=Ta("computed"),fs=Ta("computed.struct",{equals:wn.structural}),ah=function(c,g){if(la(g))return Ua(c,g,yp);if(aa(c))return Ga(Ta("computed",c));g=aa(g)?g:{};g.get=c;g.name||(g.name=c.name||"");return new up(g)};
Object.assign(ah,yp);ah.struct=Ga(fs);var Sn,wp,xp=0,Yq=1,lo=null!=(Sn=null==(wp=Mk(function(){},"name"))?void 0:wp.configurable)?Sn:!1,lq={value:"action",configurable:!0,writable:!1,enumerable:!1};var mq=Symbol.toPrimitive;var Un=function(c){function g(M,ea,ma,xa,Ma){void 0===ma&&(ma="ObservableValue");void 0===Ma&&(Ma=wn["default"]);xa=c.call(this,ma)||this;xa.enhancer=void 0;xa.hasUnreportedChange_=!1;xa.interceptors_=void 0;xa.changeListeners_=void 0;xa.value_=void 0;xa.dehancer=void 0;xa.enhancer=
ea;xa.name_=ma;xa.equals=Ma;xa.value_=ea(M,void 0,ma);return xa}ba(g,c);var u=g.prototype;u.dehanceValue=function(M){return void 0!==this.dehancer?this.dehancer(M):M};u.set=function(M){M=this.prepareNewValue_(M);M!==ia.UNCHANGED&&this.setNewValue_(M)};u.prepareNewValue_=function(M){if(xb(this)){M=ae(this,{object:this,type:Zg,newValue:M});if(!M)return ia.UNCHANGED;M=M.newValue}M=this.enhancer(M,this.value_,this.name_);return this.equals(this.value_,M)?ia.UNCHANGED:M};u.setNewValue_=function(M){var ea=
this.value_;this.value_=M;this.reportChanged();od(this)&&Ne(this,{type:Zg,object:this,newValue:M,oldValue:ea})};u.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};u.intercept_=function(M){return Qd(this,M)};u.observe_=function(M,ea){ea&&M({observableKind:"value",debugObjectName:this.name_,object:this,type:Zg,newValue:this.value_,oldValue:void 0});return nc(this,M)};u.raw=function(){return this.value_};u.toJSON=function(){return this.get()};u.toString=function(){return this.name_+
"["+this.value_+"]"};u.valueOf=function(){return Z(this.get())};u[mq]=function(){return this.valueOf()};return g}(Rn),Mu=O("ObservableValue",Un);var Ku=Symbol.toPrimitive;var up=function(){function c(u){this.dependenciesState_=Zi.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Zi.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new yn(null);
this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=zp.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;u.get||v(31);this.derivation=u.get;this.name_=u.name||"ComputedValue";u.set&&(this.setter_=Yc("ComputedValue-setter",u.set));this.equals_=u.equals||(u.compareStructural||u.struct?wn.structural:wn["default"]);this.scope_=u.context;this.requiresReaction_=u.requiresReaction;
this.keepAlive_=!!u.keepAlive}var g=c.prototype;g.onBecomeStale_=function(){Wb(this)};g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(u){return u()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(u){return u()})};g.get=function(){this.isComputing_&&v(32,this.name_,this.derivation);if(0!==ia.inBatch||0!==this.observers_.size||this.keepAlive_){if(Vd(this),uc(this)){var u=ia.trackingContext;this.keepAlive_&&!u&&(ia.trackingContext=this);this.trackAndCompute()&&dc(this);ia.trackingContext=
u}}else uc(this)&&(this.warnAboutUntrackedRead_(),Hd(),this.value_=this.computeValue_(!1),nd());u=this.value_;if(u instanceof yn)throw u.cause;return u};g.set=function(u){if(this.setter_){this.isRunningSetter_&&v(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,u)}finally{this.isRunningSetter_=!1}}else v(34,this.name_)};g.trackAndCompute=function(){var u=this.value_,M=this.dependenciesState_===Zi.NOT_TRACKING_,ea=this.computeValue_(!0);if(u=M||u instanceof yn||ea instanceof
yn||!this.equals_(u,ea))this.value_=ea;return u};g.computeValue_=function(u){this.isComputing_=!0;var M=Bb(!1);if(u)var ea=Vc(this,this.derivation,this.scope_);else if(!0===ia.disableErrorBoundaries)ea=this.derivation.call(this.scope_);else try{ea=this.derivation.call(this.scope_)}catch(ma){ea=new yn(ma)}ia.allowStateChanges=M;this.isComputing_=!1;return ea};g.suspend_=function(){this.keepAlive_||(id(this),this.value_=void 0)};g.observe_=function(u,M){var ea=this,ma=!0,xa=void 0;return $c(function(){var Ma=
ea.get();if(!ma||M){var Za=Gd();u({observableKind:"computed",debugObjectName:ea.name_,type:Zg,object:ea,newValue:Ma,oldValue:xa});ia.trackingDerivation=Za}ma=!1;xa=Ma})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return Z(this.get())};g[Ku]=function(){return this.valueOf()};return c}(),kq=O("ComputedValue",up),Zi;(function(c){c[c.NOT_TRACKING_=-1]="NOT_TRACKING_";c[c.UP_TO_DATE_=0]="UP_TO_DATE_";c[c.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";c[c.STALE_=2]="STALE_"})(Zi||={});var zp;(function(c){c[c.NONE=0]="NONE";c[c.LOG=1]="LOG";c[c.BREAK=2]="BREAK"})(zp||={});var yn=function(c){this.cause=void 0;this.cause=c},Zq=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];
this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Yo=!0,V=!1,ia=function(){var c=m();0<c.__mobxInstanceCount&&!c.__mobxGlobals&&(Yo=!1);c.__mobxGlobals&&c.__mobxGlobals.version!==(new Zq).version&&(Yo=!1);if(Yo){if(c.__mobxGlobals)return c.__mobxInstanceCount+=1,c.__mobxGlobals.UNCHANGED||(c.__mobxGlobals.UNCHANGED=
{}),c.__mobxGlobals;c.__mobxInstanceCount=1;return c.__mobxGlobals=new Zq}setTimeout(function(){V||v(35)},1);return new Zq}(),Da=function(){function c(u,M,ea,ma){void 0===u&&(u="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Zi.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=zp.NONE;
this.name_=u;this.onInvalidate_=M;this.errorHandler_=ea;this.requiresObservable_=ma}var g=c.prototype;g.onBecomeStale_=function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ia.pendingReactions.push(this),0<ia.inBatch||ia.isRunningReactions||Fb(qb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){Hd();this.isScheduled_=!1;var u=ia.trackingContext;ia.trackingContext=this;if(uc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(M){this.reportExceptionInDerivation_(M)}}ia.trackingContext=
u;nd()}};g.track=function(u){if(!this.isDisposed_){Hd();this.isRunning_=!0;var M=ia.trackingContext;ia.trackingContext=this;u=Vc(this,u,void 0);ia.trackingContext=M;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&id(this);u instanceof yn&&this.reportExceptionInDerivation_(u.cause);nd()}};g.reportExceptionInDerivation_=function(u){var M=this;if(this.errorHandler_)this.errorHandler_(u,this);else{if(ia.disableErrorBoundaries)throw u;ia.suppressReactionErrors||console.error("[mobx] uncaught error in '"+
this+"'",u);ia.globalReactionErrorHandlers.forEach(function(ea){return ea(u,M)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Hd(),id(this),nd()))};g.getDisposer_=function(){var u=this.dispose.bind(this);u[$g]=this;return u};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(u){void 0===u&&(u=!1);ne(this,u)};return c}(),gb=100,Fb=function(c){return c()},lc=O("Reaction",Da),Hc="action",fd=db(Hc),Ud=db("action.bound",{bound:!0}),Ge=db("autoAction",
{autoAction:!0}),ig=db("autoAction.bound",{autoAction:!0,bound:!0}),cf=qc(!1);Object.assign(cf,fd);var gf=qc(!0);Object.assign(gf,Ge);cf.bound=Ga(Ud);gf.bound=Ga(ig);var Hg=function(c){return c()},yh="onBO",kh="onBUO",oe=0;Ke.prototype=Object.create(Error.prototype);var Wd=Ca("flow"),ke=Ca("flow.bound",{bound:!0}),Ze=Object.assign(function(c,g){if(la(g))return Ua(c,g,Wd);var u=c.name||"\x3cunnamed flow\x3e";g=function(){var M=arguments,ea=++oe,ma=cf(u+" - runid: "+ea+" - init",c).apply(this,M),xa,
Ma=void 0;M=new Promise(function(Za,hb){function zb(ic){Ma=void 0;try{var Ac=cf(u+" - runid: "+ea+" - yield "+yc++,ma.next).call(ma,ic)}catch(tc){return hb(tc)}bc(Ac)}function Ob(ic){Ma=void 0;try{var Ac=cf(u+" - runid: "+ea+" - yield "+yc++,ma["throw"]).call(ma,ic)}catch(tc){return hb(tc)}bc(Ac)}function bc(ic){if(K(null==ic?void 0:ic.then))ic.then(bc,hb);else{if(ic.done)return Za(ic.value);Ma=Promise.resolve(ic.value);return Ma.then(zb,Ob)}}var yc=0;xa=hb;zb(void 0)});M.cancel=cf(u+" - runid: "+
ea+" - cancel",function(){try{if(Ma){var Za=Ma;K(Za.cancel)&&Za.cancel()}var hb=ma["return"](void 0),zb=Promise.resolve(hb.value);zb.then(Ek,Ek);K(zb.cancel)&&zb.cancel();xa(new Ke)}catch(Ob){xa(Ob)}});return M};g.isMobXFlow=!0;return g},Wd);Ze.bound=Ga(ke);var jf={has:function(c,g){return c[$g].has_(g)},get:function(c,g){return c[$g].get_(g)},set:function(c,g,u){var M;return la(g)?null!=(M=c[$g].set_(g,u,!0))?M:!0:!1},deleteProperty:function(c,g){var u;return la(g)?null!=(u=c[$g].delete_(g,!0))?
u:!0:!1},defineProperty:function(c,g,u){var M;return null!=(M=c[$g].defineProperty_(g,u))?M:!0},ownKeys:function(c){return c[$g].ownKeys_()},preventExtensions:function(c){v(13)}},Zg="update",xg={get:function(c,g){var u=c[$g];return g===$g?u:"length"===g?u.getArrayLength_():"string"!==typeof g||isNaN(g)?Y(Sh,g)?Sh[g]:c[g]:u.get_(parseInt(g))},set:function(c,g,u){var M=c[$g];"length"===g&&M.setArrayLength_(u);"symbol"===typeof g||isNaN(g)?c[g]=u:M.set_(parseInt(g),u);return!0},preventExtensions:function(){v(15)}},
zh=function(){function c(u,M,ea,ma){void 0===u&&(u="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ea;this.legacyMode_=ma;this.atom_=new Rn(u);this.enhancer_=function(xa,Ma){return M(xa,Ma,"ObservableArray[..]")}}var g=c.prototype;g.dehanceValue_=function(u){return void 0!==this.dehancer?this.dehancer(u):u};g.dehanceValues_=function(u){return void 0!==
this.dehancer&&0<u.length?u.map(this.dehancer):u};g.intercept_=function(u){return Qd(this,u)};g.observe_=function(u,M){void 0===M&&(M=!1);M&&u({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return nc(this,u)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(u){("number"!==typeof u||isNaN(u)||0>u)&&v("Out of range: "+
u);var M=this.values_.length;if(u!==M)if(u>M){for(var ea=Array(u-M),ma=0;ma<u-M;ma++)ea[ma]=void 0;this.spliceWithArray_(M,0,ea)}else this.spliceWithArray_(u,M-u)};g.updateArrayLength_=function(u,M){u!==this.lastKnownLength_&&v(16);this.lastKnownLength_+=M;this.legacyMode_&&0<M&&Zd(u+M+1)};g.spliceWithArray_=function(u,M,ea){var ma=this,xa=this.values_.length;void 0===u?u=0:u>xa?u=xa:0>u&&(u=Math.max(0,xa+u));M=1===arguments.length?xa-u:void 0===M||null===M?0:Math.max(0,Math.min(M,xa-u));void 0===
ea&&(ea=Eo);if(xb(this)){var Ma=ae(this,{object:this.proxy_,type:"splice",index:u,removedCount:M,added:ea});if(!Ma)return Eo;M=Ma.removedCount;ea=Ma.added}ea=0===ea.length?ea:ea.map(function(Za){return ma.enhancer_(Za,void 0)});this.legacyMode_&&this.updateArrayLength_(xa,ea.length-M);xa=this.spliceItemsIntoValues_(u,M,ea);0===M&&0===ea.length||this.notifyArraySplice_(u,ea,xa);return this.dehanceValues_(xa)};g.spliceItemsIntoValues_=function(u,M,ea){if(1E4>ea.length){var ma;return(ma=this.values_).splice.apply(ma,
[u,M].concat(ea))}ma=this.values_.slice(u,u+M);var xa=this.values_.slice(u+M);this.values_.length+=ea.length-M;for(M=0;M<ea.length;M++)this.values_[u+M]=ea[M];for(M=0;M<xa.length;M++)this.values_[u+ea.length+M]=xa[M];return ma};g.notifyArrayChildUpdate_=function(u,M,ea){var ma=!this.owned_&&!1,xa=od(this);u=xa||ma?{observableKind:"array",object:this.proxy_,type:Zg,debugObjectName:this.atom_.name_,index:u,newValue:M,oldValue:ea}:null;this.atom_.reportChanged();xa&&Ne(this,u)};g.notifyArraySplice_=
function(u,M,ea){var ma=!this.owned_&&!1,xa=od(this);u=xa||ma?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:u,removed:ea,added:M,removedCount:ea.length,addedCount:M.length}:null;this.atom_.reportChanged();xa&&Ne(this,u)};g.get_=function(u){if(u<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[u]);console.warn("[mobx.array] Attempt to read an array index ("+u+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")};
g.set_=function(u,M){var ea=this.values_;if(u<ea.length){var ma=ea[u];if(xb(this)){M=ae(this,{type:Zg,object:this.proxy_,index:u,newValue:M});if(!M)return;M=M.newValue}M=this.enhancer_(M,ma);M!==ma&&(ea[u]=M,this.notifyArrayChildUpdate_(u,M,ma))}else u===ea.length?this.spliceWithArray_(u,0,[M]):v(17,u,ea.length)};return c}(),Sh={clear:function(){return this.splice(0)},replace:function(c){var g=this[$g];return g.spliceWithArray_(0,g.values_.length,c)},toJSON:function(){return this.slice()},splice:function(c,
g){for(var u=arguments.length,M=Array(2<u?u-2:0),ea=2;ea<u;ea++)M[ea-2]=arguments[ea];u=this[$g];switch(arguments.length){case 0:return[];case 1:return u.spliceWithArray_(c);case 2:return u.spliceWithArray_(c,g)}return u.spliceWithArray_(c,g,M)},spliceWithArray:function(c,g,u){return this[$g].spliceWithArray_(c,g,u)},push:function(){for(var c=this[$g],g=arguments.length,u=Array(g),M=0;M<g;M++)u[M]=arguments[M];c.spliceWithArray_(c.values_.length,0,u);return c.values_.length},pop:function(){return this.splice(Math.max(this[$g].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var c=this[$g],g=arguments.length,u=Array(g),M=0;M<g;M++)u[M]=arguments[M];c.spliceWithArray_(0,0,u);return c.values_.length},reverse:function(){ia.trackingDerivation&&v(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){ia.trackingDerivation&&v(37,"sort");var c=this.slice();c.sort.apply(c,arguments);this.replace(c);return this},remove:function(c){var g=this[$g];c=g.dehanceValues_(g.values_).indexOf(c);
return-1<c?(this.splice(c,1),!0):!1}};wg("concat",Ya);wg("flat",Ya);wg("includes",Ya);wg("indexOf",Ya);wg("join",Ya);wg("lastIndexOf",Ya);wg("slice",Ya);wg("toString",Ya);wg("toLocaleString",Ya);wg("every",Ab);wg("filter",Ab);wg("find",Ab);wg("findIndex",Ab);wg("flatMap",Ab);wg("forEach",Ab);wg("map",Ab);wg("some",Ab);wg("reduce",bb);wg("reduceRight",bb);var Kh=O("ObservableArrayAdministration",zh),Do={};var Lu=Symbol.iterator;var oB=Symbol.toStringTag;var yx=function(){function c(u,M,ea){var ma=
this;void 0===M&&(M=Wa);void 0===ea&&(ea="ObservableMap");this.name_=this.enhancer_=void 0;this[$g]=Do;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=M;this.name_=ea;K(Map)||v(18);this.keysAtom_=Pa("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Oc(!0,function(){ma.merge(u)})}var g=c.prototype;g.has_=function(u){return this.data_.has(u)};g.has=function(u){var M=this;if(!ia.trackingDerivation)return this.has_(u);var ea=
this.hasMap_.get(u);if(!ea){var ma=ea=new Un(this.has_(u),Na,"ObservableMap.key?",!1);this.hasMap_.set(u,ma);sd(ma,function(){return M.hasMap_["delete"](u)})}return ea.get()};g.set=function(u,M){var ea=this.has_(u);if(xb(this)){M=ae(this,{type:ea?Zg:"add",object:this,newValue:M,name:u});if(!M)return this;M=M.newValue}ea?this.updateValue_(u,M):this.addValue_(u,M);return this};g["delete"]=function(u){var M=this;if(xb(this)&&!ae(this,{type:"delete",object:this,name:u}))return!1;if(this.has_(u)){var ea=
od(this),ma=ea?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(u).value_,name:u}:null;Cc(function(){var xa;M.keysAtom_.reportChanged();null==(xa=M.hasMap_.get(u))?void 0:xa.setNewValue_(!1);M.data_.get(u).setNewValue_(void 0);M.data_["delete"](u)});ea&&Ne(this,ma);return!0}return!1};g.updateValue_=function(u,M){var ea=this.data_.get(u);M=ea.prepareNewValue_(M);if(M!==ia.UNCHANGED){var ma=od(this);u=ma?{observableKind:"map",debugObjectName:this.name_,
type:Zg,object:this,oldValue:ea.value_,name:u,newValue:M}:null;ea.setNewValue_(M);ma&&Ne(this,u)}};g.addValue_=function(u,M){var ea=this;Cc(function(){var Ma,Za=new Un(M,ea.enhancer_,"ObservableMap.key",!1);ea.data_.set(u,Za);M=Za.value_;null==(Ma=ea.hasMap_.get(u))?void 0:Ma.setNewValue_(!0);ea.keysAtom_.reportChanged()});var ma=od(this),xa=ma?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:u,newValue:M}:null;ma&&Ne(this,xa)};g.get=function(u){return this.has(u)?this.dehanceValue_(this.data_.get(u).get()):
this.dehanceValue_(void 0)};g.dehanceValue_=function(u){return void 0!==this.dehancer?this.dehancer(u):u};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var u=this,M=this.keys();return ra({next:function(){var ea=M.next(),ma=ea.done;ea=ea.value;return{done:ma,value:ma?void 0:u.get(ea)}}})};g.entries=function(){var u=this,M=this.keys();return ra({next:function(){var ea=M.next(),ma=ea.done;ea=ea.value;return{done:ma,value:ma?void 0:[ea,u.get(ea)]}}})};
g[Lu]=function(){return this.entries()};g.forEach=function(u,M){for(var ea=ya(this),ma;!(ma=ea()).done;)ma=ma.value,u.call(M,ma[1],ma[0],this)};g.merge=function(u){var M=this;Bp(u)&&(u=new Map(u));Cc(function(){aa(u)?P(u).forEach(function(ea){return M.set(ea,u[ea])}):Array.isArray(u)?u.forEach(function(ea){return M.set(ea[0],ea[1])}):D(u)?(u.constructor!==Map&&v(19,u),u.forEach(function(ea,ma){return M.set(ma,ea)})):null!==u&&void 0!==u&&v(20,u)});return this};g.clear=function(){var u=this;Cc(function(){Jd(function(){for(var M=
ya(u.keys()),ea;!(ea=M()).done;)u["delete"](ea.value)})})};g.replace=function(u){var M=this;Cc(function(){for(var ea=ec(u),ma=new Map,xa=!1,Ma=ya(M.data_.keys()),Za;!(Za=Ma()).done;)if(Za=Za.value,!ea.has(Za))if(M["delete"](Za))xa=!0;else{var hb=M.data_.get(Za);ma.set(Za,hb)}for(ea=ya(ea.entries());!(Ma=ea()).done;)Za=Ma.value,Ma=Za[0],hb=Za[1],Za=M.data_.has(Ma),M.set(Ma,hb),M.data_.has(Ma)&&(hb=M.data_.get(Ma),ma.set(Ma,hb),Za||(xa=!0));if(!xa)if(M.data_.size!==ma.size)M.keysAtom_.reportChanged();
else for(xa=M.data_.keys(),ea=ma.keys(),Ma=xa.next(),Za=ea.next();!Ma.done;){if(Ma.value!==Za.value){M.keysAtom_.reportChanged();break}Ma=xa.next();Za=ea.next()}M.data_=ma});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(u,M){return nc(this,u)};g.intercept_=function(u){return Qd(this,u)};ha(c,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:oB,get:function(){return"Map"}}]);
return c}(),Bp=O("ObservableMap",yx),mB={};var nB=Symbol.iterator;var lB=Symbol.toStringTag;var xx=function(){function c(u,M,ea){void 0===M&&(M=Wa);void 0===ea&&(ea="ObservableSet");this.name_=void 0;this[$g]=mB;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=ea;K(Set)||v(22);this.atom_=Pa(this.name_);this.enhancer_=function(ma,xa){return M(ma,xa,ea)};u&&this.replace(u)}var g=c.prototype;g.dehanceValue_=function(u){return void 0!==
this.dehancer?this.dehancer(u):u};g.clear=function(){var u=this;Cc(function(){Jd(function(){for(var M=ya(u.data_.values()),ea;!(ea=M()).done;)u["delete"](ea.value)})})};g.forEach=function(u,M){for(var ea=ya(this),ma;!(ma=ea()).done;)ma=ma.value,u.call(M,ma,ma,this)};g.add=function(u){var M=this;if(xb(this)&&!ae(this,{type:"add",object:this,newValue:u}))return this;if(!this.has(u)){Cc(function(){M.data_.add(M.enhancer_(u,void 0));M.atom_.reportChanged()});var ea=od(this),ma=ea?{observableKind:"set",
debugObjectName:this.name_,type:"add",object:this,newValue:u}:null;ea&&Ne(this,ma)}return this};g["delete"]=function(u){var M=this;if(xb(this)&&!ae(this,{type:"delete",object:this,oldValue:u}))return!1;if(this.has(u)){var ea=od(this),ma=ea?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:u}:null;Cc(function(){M.atom_.reportChanged();M.data_["delete"](u)});ea&&Ne(this,ma);return!0}return!1};g.has=function(u){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(u))};
g.entries=function(){var u=0,M=Array.from(this.keys()),ea=Array.from(this.values());return ra({next:function(){var ma=u;u+=1;return ma<ea.length?{value:[M[ma],ea[ma]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var u=this,M=0,ea=Array.from(this.data_.values());return ra({next:function(){return M<ea.length?{value:u.dehanceValue_(ea[M++]),done:!1}:{done:!0}}})};g.replace=function(u){var M=this;pq(u)&&(u=new Set(u));Cc(function(){Array.isArray(u)?
(M.clear(),u.forEach(function(ea){return M.add(ea)})):N(u)?(M.clear(),u.forEach(function(ea){return M.add(ea)})):null!==u&&void 0!==u&&v("Cannot initialize set from "+u)});return this};g.observe_=function(u,M){return nc(this,u)};g.intercept_=function(u){return Qd(this,u)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[nB]=function(){return this.values()};ha(c,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:lB,
get:function(){return"Set"}}]);return c}(),pq=O("ObservableSet",xx),Ax=Object.create(null),Dx=function(){function c(u,M,ea,ma){void 0===M&&(M=new Map);void 0===ma&&(ma=cs);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=u;this.values_=M;this.name_=ea;this.defaultAnnotation_=ma;this.keysAtom_=new Rn("ObservableObject.keys");this.isPlainObject_=aa(this.target_)}
var g=c.prototype;g.getObservablePropValue_=function(u){return this.values_.get(u).get()};g.setObservablePropValue_=function(u,M){var ea=this.values_.get(u);if(ea instanceof up)return ea.set(M),!0;if(xb(this)){M=ae(this,{type:Zg,object:this.proxy_||this.target_,name:u,newValue:M});if(!M)return null;M=M.newValue}M=ea.prepareNewValue_(M);if(M!==ia.UNCHANGED){var ma=od(this);u=ma?{type:Zg,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ea.value_,name:u,newValue:M}:
null;ea.setNewValue_(M);ma&&Ne(this,u)}return!0};g.get_=function(u){ia.trackingDerivation&&!Y(this.target_,u)&&this.has_(u);return this.target_[u]};g.set_=function(u,M,ea){void 0===ea&&(ea=!1);if(Y(this.target_,u)){if(this.values_.has(u))return this.setObservablePropValue_(u,M);if(ea)return Reflect.set(this.target_,u,M);this.target_[u]=M;return!0}return this.extend_(u,{value:M,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ea)};g.has_=function(u){if(!ia.trackingDerivation)return u in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var M=this.pendingKeys_.get(u);M||(M=new Un(u in this.target_,Na,"ObservableObject.key?",!1),this.pendingKeys_.set(u,M));return M.get()};g.make_=function(u,M){!0===M&&(M=this.defaultAnnotation_);if(!1!==M){if(!(u in this.target_)){var ea;if(null!=(ea=this.target_[Sj])&&ea[u])return;v(1,M.annotationType_,this.name_+"."+u.toString())}for(ea=this.target_;ea&&ea!==mo;){var ma=Mk(ea,u);if(ma){ma=M.make_(this,u,ma,ea);if(0===ma)return;if(1===ma)break}ea=
Object.getPrototypeOf(ea)}var xa;null==(xa=this.target_[Sj])?!0:delete xa[u]}};g.extend_=function(u,M,ea,ma){void 0===ma&&(ma=!1);!0===ea&&(ea=this.defaultAnnotation_);if(!1===ea)return this.defineProperty_(u,M,ma);if(M=ea.extend_(this,u,M,ma)){var xa;null==(xa=this.target_[Sj])?!0:delete xa[u]}return M};g.defineProperty_=function(u,M,ea){void 0===ea&&(ea=!1);try{Hd();var ma=this.delete_(u);if(!ma)return ma;if(xb(this)){var xa=ae(this,{object:this.proxy_||this.target_,name:u,type:"add",newValue:M.value});
if(!xa)return null;var Ma=xa.newValue;M.value!==Ma&&(M=L({},M,{value:Ma}))}if(ea){if(!Reflect.defineProperty(this.target_,u,M))return!1}else Dl(this.target_,u,M);this.notifyPropertyAddition_(u,M.value)}finally{nd()}return!0};g.defineObservableProperty_=function(u,M,ea,ma){void 0===ma&&(ma=!1);try{Hd();var xa=this.delete_(u);if(!xa)return xa;if(xb(this)){var Ma=ae(this,{object:this.proxy_||this.target_,name:u,type:"add",newValue:M});if(!Ma)return null;M=Ma.newValue}var Za=gd(u),hb={configurable:ia.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:Za.get,set:Za.set};if(ma){if(!Reflect.defineProperty(this.target_,u,hb))return!1}else Dl(this.target_,u,hb);var zb=new Un(M,ea,"ObservableObject.key",!1);this.values_.set(u,zb);this.notifyPropertyAddition_(u,zb.value_)}finally{nd()}return!0};g.defineComputedProperty_=function(u,M,ea){void 0===ea&&(ea=!1);try{Hd();var ma=this.delete_(u);if(!ma)return ma;if(xb(this)&&!ae(this,{object:this.proxy_||this.target_,name:u,type:"add",newValue:void 0}))return null;M.name||
(M.name="ObservableObject.key");M.context=this.proxy_||this.target_;var xa=gd(u),Ma={configurable:ia.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:xa.get,set:xa.set};if(ea){if(!Reflect.defineProperty(this.target_,u,Ma))return!1}else Dl(this.target_,u,Ma);this.values_.set(u,new up(M));this.notifyPropertyAddition_(u,void 0)}finally{nd()}return!0};g.delete_=function(u,M){void 0===M&&(M=!1);if(!Y(this.target_,u))return!0;if(xb(this)&&!ae(this,{object:this.proxy_||this.target_,name:u,type:"remove"}))return null;
try{var ea,ma;Hd();var xa=od(this),Ma=this.values_.get(u),Za=void 0;if(!Ma&&xa){var hb;Za=null==(hb=Mk(this.target_,u))?void 0:hb.value}if(M){if(!Reflect.deleteProperty(this.target_,u))return!1}else delete this.target_[u];Ma&&(this.values_["delete"](u),Ma instanceof Un&&(Za=Ma.value_),Mb(Ma));this.keysAtom_.reportChanged();null==(ea=this.pendingKeys_)?void 0:null==(ma=ea.get(u))?void 0:ma.set(u in this.target_);if(xa){var zb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:Za,name:u};xa&&Ne(this,zb)}}finally{nd()}return!0};g.observe_=function(u,M){return nc(this,u)};g.intercept_=function(u){return Qd(this,u)};g.notifyPropertyAddition_=function(u,M){var ea,ma,xa=od(this);xa&&(M=xa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:u,newValue:M}:null,xa&&Ne(this,M));null==(ea=this.pendingKeys_)?void 0:null==(ma=ea.get(u))?void 0:ma.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=
function(){this.keysAtom_.reportObserved();return Tn(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return c}(),pB=O("ObservableObjectAdministration",Dx),qB=he(0),Wu=0,Ex=function(){};(function(c,g){Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,g):void 0!==c.prototype.__proto__?c.prototype.__proto__=g:c.prototype=g})(Ex,Array.prototype);var Xu=function(c,g,u){function M(ma,xa,Ma,Za){void 0===Ma&&(Ma="ObservableArray");void 0===Za&&(Za=
!1);var hb=c.call(this)||this;xa=new zh(Ma,xa,Za,!0);xa.proxy_=da(hb);J(da(hb),$g,xa);ma&&ma.length&&(xa=Bb(!0),hb.spliceWithArray(0,0,ma),ia.allowStateChanges=xa);Object.defineProperty(da(hb),"0",qB);return hb}ba(M,c);var ea=M.prototype;ea.concat=function(){this[$g].atom_.reportObserved();for(var ma=arguments.length,xa=Array(ma),Ma=0;Ma<ma;Ma++)xa[Ma]=arguments[Ma];return Array.prototype.concat.apply(this.slice(),xa.map(function(Za){return Cb(Za)?Za.slice():Za}))};ea[u]=function(){var ma=this,xa=
0;return ra({next:function(){return xa<ma.length?{value:ma[xa++],done:!1}:{done:!0,value:void 0}}})};ha(M,[{key:"length",get:function(){return this[$g].getArrayLength_()},set:function(ma){this[$g].setArrayLength_(ma)}},{key:g,get:function(){return"Array"}}]);return M}(Ex,Symbol.toStringTag,Symbol.iterator);Object.entries(Sh).forEach(function(c){var g=c[0];c=c[1];"concat"!==g&&U(Xu.prototype,g,c)});Zd(1E3);var Fx=mo.toString;["Symbol","Map","Set"].forEach(function(c){"undefined"===typeof m()[c]&&v("MobX requires global '"+
c+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:$b,extras:{getDebugName:Jg},$mobx:$g});var Rb=T(611),Tl=class{constructor(c){kb(this,"props");kb(this,"aspectRatio");kb(this,"type");kb(this,"hideCloneHandles",!1);kb(this,"hideResizeHandles",!1);kb(this,"hideRotateHandle",!1);kb(this,"hideContextBar",!1);kb(this,"hideSelectionDetail",!1);kb(this,"hideSelection",!1);kb(this,"canChangeAspectRatio",!0);kb(this,"canUnmount",
!0);kb(this,"canResize",[!0,!0]);kb(this,"canScale",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!1);kb(this,"canBind",!1);kb(this,"nonce");kb(this,"bindingDistance",4);kb(this,"isDirty",!1);kb(this,"lastSerialized");kb(this,"getCenter",()=>Ib.getBoundsCenter(this.bounds));kb(this,"getRotatedBounds",()=>{const {bounds:ma,props:{rotation:xa}}=this;return xa?Ib.getBoundsFromPoints(Ib.getRotatedCorners(ma,xa)):ma});kb(this,"hitTestPoint",ma=>{var xa=this.rotatedBounds;if(!this.props.rotation)return Sc.pointInBounds(ma,
xa);xa=Ib.getRotatedCorners(xa,this.props.rotation);return Sc.pointInPolygon(ma,xa)});kb(this,"hitTestLineSegment",(ma,xa)=>{const Ma=Ib.getBoundsFromPoints([ma,xa]),{rotatedBounds:Za,props:{rotation:hb=0}}=this;return Ib.boundsContain(Za,Ma)||hb?t(ma,xa,Ib.getRotatedCorners(this.bounds)).didIntersect:0<w(Za,ma,xa).length});kb(this,"hitTestBounds",ma=>{const {rotatedBounds:xa,props:{rotation:Ma=0}}=this,Za=Ib.getRotatedCorners(this.bounds,Ma);return Ib.boundsContain(ma,xa)||0<H([ma.minX,ma.minY],
[ma.width,ma.height],Za).length});kb(this,"getExpandedBounds",()=>Ib.expandBounds(this.getBounds(),this.bindingDistance));kb(this,"getBindingPoint",(ma,xa,Ma,Za)=>{var hb=this.getBounds(),zb=this.getExpandedBounds();if(Sc.pointInBounds(ma,zb)){var Ob=B(xa,Ma,zb).filter(bc=>bc.didIntersect).map(bc=>bc.points[0]);if(Ob.length)return Ma=this.getCenter(),Ob=Ob.sort((bc,yc)=>fb.dist(yc,xa)-fb.dist(bc,xa))[0],Ob=fb.med(ma,Ob),Za?(Za=2>fb.dist(ma,Ma)?Ma:ma,hb=0):(Za=2>fb.distanceToLineSegment(ma,Ob,Ma)?
Ma:Ob,hb=Sc.pointInBounds(ma,hb)?this.bindingDistance:Math.max(this.bindingDistance,Ib.getBoundsSides(hb).map(bc=>fb.distanceToLineSegment(bc[1][0],bc[1][1],ma)).sort((bc,yc)=>bc-yc)[0])),zb=fb.divV(fb.sub(Za,[zb.minX,zb.minY]),[zb.width,zb.height]),{point:fb.clampV(zb,0,1),distance:hb}}});kb(this,"getSerialized",()=>{var ma=wf(Fe({},this.props),{type:this.type,nonce:this.nonce});return me(ma,new Map)});kb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Cc(()=>{this.setIsDirty(!1);
this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});kb(this,"validateProps",ma=>ma);kb(this,"update",(ma,xa=!1,Ma=!1)=>{xa||this.isDirty||this.setIsDirty(!0);xa||Ma||this.incNonce();Object.assign(this.props,this.validateProps(ma));return this});kb(this,"clone",()=>new this.constructor(this.serialized));kb(this,"onResetBounds",ma=>this);kb(this,"scale",[1,1]);kb(this,"onResizeStart",ma=>{var xa;
this.scale=[...(null!=(xa=this.props.scale)?xa:[1,1])];return this});kb(this,"onResize",(ma,xa)=>{const {bounds:Ma,rotation:Za,scale:[hb,zb]}=xa;ma=[...this.scale];0>hb&&(ma[0]*=-1);0>zb&&(ma[1]*=-1);this.update({point:[Ma.minX,Ma.minY],scale:ma,rotation:Za});return this});kb(this,"onHandleChange",(ma,{id:xa,delta:Ma})=>{if(void 0!==ma.handles){var Za=nq(ma.handles);Za[xa]=wf(Fe({},Za[xa]),{point:fb.add(Ma,ma.handles[xa].point)});var hb=Ib.getCommonTopLeft(Object.values(Za).map(zb=>zb.point));Object.values(Za).forEach(zb=>
{zb.point=fb.sub(zb.point,hb)});this.update({point:fb.add(ma.point,hb),handles:Za})}});var g,u;const M=this.constructor.id,ea=null!=(g=this.constructor.defaultProps)?g:{};this.type=M;this.props=Fe(Fe({scale:[1,1]},ea),c);this.nonce=null!=(u=c.nonce)?u:Date.now();yf(this)}get id(){return this.props.id}setNonce(c){this.nonce=c}incNonce(){this.nonce++}setIsDirty(c){this.isDirty=c}setLastSerialized(c){this.lastSerialized=c}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(c){c=
this.getBounds();const {stroke:g,strokeWidth:u,strokeType:M,opacity:ea,fill:ma,noFill:xa,borderRadius:Ma}=this.props;return(0,Rb.jsx)("rect",{fill:xa?"none":ma,stroke:xa?ma:g,strokeWidth:null!=u?u:2,strokeDasharray:"dashed"===M?"8 2":void 0,fillOpacity:null!=ea?ea:.2,width:c.width,height:c.height,rx:Ma,ry:Ma})}};kb(Tl,"type");je([ug],Tl.prototype,"props",2);je([ug],Tl.prototype,"canResize",2);je([ug],Tl.prototype,"nonce",2);je([ug],Tl.prototype,"isDirty",2);je([ug],Tl.prototype,"lastSerialized",2);
je([ah],Tl.prototype,"id",1);je([cf],Tl.prototype,"setNonce",1);je([cf],Tl.prototype,"incNonce",1);je([cf],Tl.prototype,"setIsDirty",1);je([cf],Tl.prototype,"setLastSerialized",1);je([ah],Tl.prototype,"center",1);je([ah],Tl.prototype,"bounds",1);je([ah],Tl.prototype,"rotatedBounds",1);je([ah],Tl.prototype,"serialized",1);je([cf],Tl.prototype,"update",2);var Dn=class extends Tl{constructor(c={}){super(c);kb(this,"canBind",!0);kb(this,"getBounds",()=>{const [g,u]=this.props.point,[M,ea]=this.props.size;
return{minX:g,minY:u,maxX:g+M,maxY:u+ea,width:M,height:ea}});kb(this,"getRotatedBounds",()=>Ib.getBoundsFromPoints(Ib.getRotatedCorners(this.bounds,this.props.rotation)));kb(this,"onResize",(g,u)=>{const {bounds:M,rotation:ea,scale:[ma,xa]}=u;g=[...this.scale];0>ma&&(g[0]*=-1);0>xa&&(g[1]*=-1);this.update({point:[M.minX,M.minY],scale:g,rotation:ea});return this.update({rotation:ea,point:[M.minX,M.minY],size:[Math.max(1,M.width),Math.max(1,M.height)],scale:g})});kb(this,"validateProps",g=>{void 0!==
g.size&&(g.size[0]=Math.max(g.size[0],1),g.size[1]=Math.max(g.size[1],1));return g});yf(this)}};kb(Dn,"id","box");kb(Dn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var qr=class extends Tl{constructor(c={}){super(c);kb(this,"getBounds",()=>{const {pointBounds:g,props:{point:u}}=this;return Ib.translateBounds(g,u)});kb(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:u},bounds:M,rotatedPoints:ea}=this;return g?Ib.translateBounds(Ib.getBoundsFromPoints(ea),
u):M});kb(this,"normalizedPoints",[]);kb(this,"isResizeFlippedX",!1);kb(this,"isResizeFlippedY",!1);kb(this,"onResizeStart",()=>{var g;const {bounds:u,props:{points:M}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const ea=[u.width,u.height];this.normalizedPoints=M.map(ma=>Ja.divV(ma,ea));return this});kb(this,"onResize",(g,u)=>{const {bounds:M,scale:[ea,ma]}=u,xa=[M.width,M.height];g=[...this.scale];0>ea&&(g[0]*=-1);0>ma&&(g[1]*=-1);return this.update(ea||ma?{point:[M.minX,M.minY],points:this.normalizedPoints.map(Ma=>
Ja.mulV(Ma,xa).concat(Ma[2])),scale:g}:{point:[M.minX,M.minY],points:this.normalizedPoints.map(Ma=>Ja.mulV(Ma,xa).concat(Ma[2]))})});kb(this,"hitTestPoint",g=>{const {props:{points:u,point:M}}=this;return Sc.pointNearToPolyline(Ja.sub(g,M),u)});kb(this,"hitTestLineSegment",(g,u)=>{const {bounds:M,props:{points:ea,point:ma}}=this;if(Sc.pointInBounds(g,M)||Sc.pointInBounds(u,M)||0<w(M,g,u).length){const xa=Ja.sub(g,ma),Ma=Ja.sub(u,ma);return t(xa,Ma,ea).didIntersect||!!ea.find(Za=>5>Ja.dist(xa,Za)||
5>Ja.dist(Ma,Za))}return!1});kb(this,"hitTestBounds",g=>{const {rotatedBounds:u,props:{points:M,point:ea}}=this,ma=Ib.translateBounds(g,Ja.neg(ea));return Ib.boundsContain(g,u)||M.every(xa=>Sc.pointInBounds(xa,ma))||Ib.boundsCollide(g,u)&&0<x([ma.minX,ma.minY],[ma.width,ma.height],M).length});yf(this)}get pointBounds(){const {props:{points:c}}=this;return Ib.getBoundsFromPoints(c)}get rotatedPoints(){const {props:{point:c,points:g,rotation:u},center:M}=this;if(!u)return g;const ea=Ja.sub(M,c);return g.map(ma=>
Ja.rotWith(ma,ea,u))}};kb(qr,"id","draw");kb(qr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});je([ah],qr.prototype,"pointBounds",1);je([ah],qr.prototype,"rotatedPoints",1);var Yu=class extends Tl{constructor(c={}){super(c);kb(this,"hideSelection",!0);kb(this,"hideResizeHandles",!0);kb(this,"hideRotateHandle",!0);kb(this,"hideSelectionDetail",!0);kb(this,"getBounds",()=>{const {props:{point:[g,u],radius:M=0}}=this;return{minX:g,minY:u,maxX:g+2*M,maxY:u+
2*M,width:2*M,height:2*M}});kb(this,"getRotatedBounds",()=>Ib.getBoundsFromPoints(Ib.getRotatedCorners(this.bounds,this.props.rotation)));kb(this,"onResize",(g,u)=>{({props:{radius:g=0}}=this);return this.update({point:[u.bounds.minX+u.bounds.width/2-g,u.bounds.minY+u.bounds.height/2-g]})});yf(this)}};kb(Yu,"id","dot");kb(Yu,"defaultProps",{id:"dot",type:"dot",parentId:"page",point:[0,0],radius:6});var Zu=class extends Dn{constructor(c={}){super(c);kb(this,"getBounds",()=>{const {props:{point:[g,
u],size:[M,ea]}}=this;return Ib.getRotatedEllipseBounds(g,u,M/2,ea/2,0)});kb(this,"getRotatedBounds",()=>{const {props:{point:[g,u],size:[M,ea],rotation:ma}}=this;return Ib.getRotatedEllipseBounds(g,u,M/2,ea/2,ma)});kb(this,"hitTestPoint",g=>{const {props:{size:u,rotation:M},center:ea}=this;return Sc.pointInEllipse(g,ea,u[0],u[1],M||0)});kb(this,"hitTestLineSegment",(g,u)=>{const {props:{size:[M,ea],rotation:ma=0},center:xa}=this;return G(g,u,xa,M,ea,ma).didIntersect});kb(this,"hitTestBounds",g=>
{const {props:{size:[u,M],rotation:ea=0},rotatedBounds:ma}=this;var xa;if(!(xa=Ib.boundsContain(g,ma))){const {minX:Ma,minY:Za,width:hb,height:zb}=g;xa=0<y(this.center,u/2,M/2,ea,[Ma,Za],[hb,zb]).length}return xa});yf(this)}};kb(Zu,"id","ellipse");kb(Zu,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var $u=class extends Dn{constructor(c={}){super(c);kb(this,"onResetBounds",g=>{const {clipping:u,size:M,point:ea}=this.props;if(u){const [ma,xa,Ma,Za]=Array.isArray(u)?
u:[u,u,u,u];return this.update({clipping:0,point:[ea[0]-Za,ea[1]-ma],size:[M[0]+(Za-xa),M[1]+(ma-Ma)]})}if(g.asset){const {size:[ma,xa]}=g.asset;this.update({clipping:0,point:[ea[0]+M[0]/2-ma/2,ea[1]+M[1]/2-xa/2],size:[ma,xa]})}return this});kb(this,"onResize",(g,u)=>{const {bounds:M,clip:ea,scale:ma}=u;({clipping:u}=this.props);const {clipping:xa}=g;if(ea){const {point:[Ma,Za],size:[hb,zb]}=g,[Ob,bc,yc,ic]=xa?Array.isArray(xa)?xa:[xa,xa,xa,xa]:[0,0,0,0];u=[Ob+(M.minY-Za),bc+(M.maxX-(Ma+hb)),yc+(M.maxY-
(Za+zb)),ic+(M.minX-Ma)]}else void 0!==xa&&(u=Array.isArray(xa)?xa:[xa,xa,xa,xa],u=[u[0]*ma[1],u[1]*ma[0],u[2]*ma[1],u[3]*ma[0]]);if(u&&Array.isArray(u)){const Ma=u;Ma.every((Za,hb)=>0===hb||Za===Ma[hb-1])&&(u=Ma[0])}return this.update({point:[M.minX,M.minY],size:[Math.max(1,M.width),Math.max(1,M.height)],clipping:u})});yf(this)}};kb($u,"id","ellipse");kb($u,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Gx=class extends Tl{constructor(c=
{}){super(c);kb(this,"getBounds",()=>{const {points:g,props:{point:u}}=this;return Ib.translateBounds(Ib.getBoundsFromPoints(g),u)});kb(this,"getRotatedBounds",()=>{const {rotatedPoints:g,props:{point:u}}=this;return Ib.translateBounds(Ib.getBoundsFromPoints(g),u)});kb(this,"normalizedHandles",[]);kb(this,"onResizeStart",()=>{var g;const {props:{handles:u},bounds:M}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const ea=[M.width,M.height];this.normalizedHandles=Object.values(u).map(ma=>
Ja.divV(ma.point,ea));return this});kb(this,"onResize",(g,u)=>{const {bounds:M,scale:[ea,ma]}=u,{props:{handles:xa},normalizedHandles:Ma}=this,Za=[M.width,M.height];g=[...this.scale];0>ea&&(g[0]*=-1);0>ma&&(g[1]*=-1);return this.update({point:[M.minX,M.minY],handles:Object.values(xa).map((hb,zb)=>wf(Fe({},hb),{point:Ja.mulV(Ma[zb],Za)})),scale:g})});kb(this,"hitTestPoint",g=>{const {points:u}=this;return Sc.pointNearToPolyline(Ja.sub(g,this.props.point),u)});kb(this,"hitTestLineSegment",(g,u)=>{const {bounds:M,
points:ea,props:{point:ma}}=this;if(Sc.pointInBounds(g,M)||Sc.pointInBounds(u,M)||0<w(M,g,u).length){const xa=Ja.sub(g,ma),Ma=Ja.sub(u,ma);return t(xa,Ma,ea).didIntersect||!!ea.find(Za=>5>Ja.dist(xa,Za)||5>Ja.dist(Ma,Za))}return!1});kb(this,"hitTestBounds",g=>{const {rotatedBounds:u,points:M,props:{point:ea}}=this,ma=Ib.translateBounds(g,Ja.neg(ea));return Ib.boundsContain(g,u)||M.every(xa=>Sc.pointInBounds(xa,ma))||Ib.boundsCollide(g,u)&&0<x([ma.minX,ma.minY],[ma.width,ma.height],M).length});kb(this,
"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=Gx.defaultProps.handles);return g});yf(this)}get points(){return Object.values(this.props.handles).map(c=>c.point)}get centroid(){const {points:c}=this;return Nh.getPolygonCentroid(c)}get rotatedPoints(){const {centroid:c,props:{handles:g,rotation:u}}=this;return u?Object.values(g).map(M=>Ja.rotWith(M.point,c,u)):this.points}},er=Gx;kb(er,"id","polyline");kb(er,"defaultProps",{id:"polyline",
type:"polyline",parentId:"page",point:[0,0],handles:{}});je([ah],er.prototype,"points",1);je([ah],er.prototype,"centroid",1);je([ah],er.prototype,"rotatedPoints",1);var tx=class extends er{constructor(c={}){super(c);kb(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=tx.defaultProps.handles);return g});kb(this,"getHandlesChange",(g,u)=>{var M=Qc(g.handles,u);M=Qc(M,{start:{point:fb.toFixed(M.start.point)},end:{point:fb.toFixed(M.end.point)}});
if(!fb.isEqual(M.start.point,M.end.point)){u={point:g.point,handles:nq(M)};g=g.point;M=Ib.translateBounds(Ib.getBoundsFromPoints(Object.values(M).map(ma=>ma.point)),u.point);var ea=fb.sub([M.minX,M.minY],g);fb.isEqual(ea,[0,0])||(Object.values(u.handles).forEach(ma=>{ma.point=fb.toFixed(fb.sub(ma.point,ea))}),u.point=fb.toFixed(fb.add(u.point,ea)));return u}});yf(this)}},is=tx;kb(is,"id","line");kb(is,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,
point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Ap=class extends Dn{constructor(c={}){super(c);kb(this,"getRotatedBounds",()=>{const {rotatedVertices:g,props:{point:u},offset:M}=this;return Ib.translateBounds(Ib.getBoundsFromPoints(g),Ja.add(u,M))});kb(this,"hitTestPoint",g=>{const {vertices:u}=this;return Sc.pointInPolygon(Ja.add(g,this.props.point),u)});kb(this,"hitTestLineSegment",(g,u)=>{const {vertices:M,props:{point:ea}}=this;return t(Ja.sub(g,ea),Ja.sub(u,ea),M).didIntersect});kb(this,
"hitTestBounds",g=>{const {rotatedBounds:u,offset:M,rotatedVertices:ea,props:{point:ma}}=this,xa=Ib.translateBounds(g,Ja.neg(Ja.add(ma,M)));return Ib.boundsContain(g,u)||ea.every(Ma=>Sc.pointInBounds(Ma,xa))||0<H([xa.minX,xa.minY],[xa.width,xa.height],ea).length});kb(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});yf(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:c},vertices:g}=this;return g.map(u=>Ja.add(u,
c))}get centroid(){const {vertices:c}=this;return Nh.getPolygonCentroid(c)}get rotatedVertices(){const {vertices:c,centroid:g,props:{rotation:u}}=this;return u?c.map(M=>Ja.rotWith(M,g,u)):c}get offset(){const {props:{size:[c,g]}}=this,u=Ib.getBoundsCenter(Ib.getBoundsFromPoints(this.vertices));return Ja.sub(Ja.div([c,g],2),u)}getVertices(c=0){const {ratio:g,sides:u,size:M}=this.props;return 3===u?Nh.getTriangleVertices(M,c,g):Nh.getPolygonVertices(M,u,c,g)}};kb(Ap,"id","polygon");kb(Ap,"defaultProps",
{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});je([ah],Ap.prototype,"vertices",1);je([ah],Ap.prototype,"pageVertices",1);je([ah],Ap.prototype,"centroid",1);je([ah],Ap.prototype,"rotatedVertices",1);je([ah],Ap.prototype,"offset",1);var Uu=class extends Dn{constructor(c={}){super(c);kb(this,"canEdit",!0);kb(this,"canFlip",!1);yf(this)}};kb(Uu,"id","text");kb(Uu,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],
size:[16,32],text:""});var dr=class{constructor(){kb(this,"_id");kb(this,"_initial");kb(this,"_states");kb(this,"_isActive",!1);kb(this,"cursor");kb(this,"_disposables",[]);kb(this,"children",new Map([]));kb(this,"registerStates",u=>{u.forEach(M=>this.children.set(M.id,new M(this,this)));return this});kb(this,"deregisterStates",u=>{u.forEach(M=>{var ea;null==(ea=this.children.get(M.id))?void 0:ea.dispose();this.children.delete(M.id)});return this});kb(this,"currentState",{});kb(this,"transition",
(u,M={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${u}.`);const ea=this.children.get(u),ma=this.currentState;if(!ea)throw Error(`Could not find a state named ${u}.`);Cc(()=>{this.currentState?(ma._events.onExit(wf(Fe({},M),{toId:u})),ma.dispose(),ea.registerKeyboardShortcuts(),this.setCurrentState(ea),this._events.onTransition(wf(Fe({},M),{fromId:ma.id,toId:u})),ea._events.onEnter(wf(Fe({},M),{fromId:ma.id}))):(this.currentState=ea,ea._events.onEnter(wf(Fe({},
M),{fromId:""})))});return this});kb(this,"isIn",u=>{u=u.split(".").reverse();let M=this;for(;0<u.length;){const ea=u.pop();if(!ea)return!0;if(M.currentState.id===ea){if(0===u.length)return!0;M=M.currentState}else break}return!1});kb(this,"isInAny",(...u)=>u.some(this.isIn));kb(this,"forwardEvent",(u,...M)=>{var ea,ma;(null==(ma=null==(ea=this.currentState)?void 0:ea._events)?0:ma[u])&&Cc(()=>{var xa;return null==(xa=this.currentState._events)?void 0:xa[u](...M)})});kb(this,"_events",{onTransition:u=>
{var M;null==(M=this.onTransition)?void 0:M.call(this,u)},onEnter:u=>{var M;this._isActive=!0;this.initial&&this.transition(this.initial,u);null==(M=this.onEnter)?void 0:M.call(this,u)},onExit:u=>{var M,ea,ma;this._isActive=!1;null==(ea=null==(M=this.currentState)?void 0:M.onExit)?void 0:ea.call(M,{toId:"parent"});null==(ma=this.onExit)?void 0:ma.call(this,u)},onWheel:(u,M)=>{var ea;null==(ea=this.onWheel)?void 0:ea.call(this,u,M);this.forwardEvent("onWheel",u,M)},onPointerDown:(u,M)=>{var ea;null==
(ea=this.onPointerDown)?void 0:ea.call(this,u,M);this.forwardEvent("onPointerDown",u,M)},onPointerUp:(u,M)=>{var ea;null==(ea=this.onPointerUp)?void 0:ea.call(this,u,M);this.forwardEvent("onPointerUp",u,M)},onPointerMove:(u,M)=>{var ea;null==(ea=this.onPointerMove)?void 0:ea.call(this,u,M);this.forwardEvent("onPointerMove",u,M)},onPointerEnter:(u,M)=>{var ea;null==(ea=this.onPointerEnter)?void 0:ea.call(this,u,M);this.forwardEvent("onPointerEnter",u,M)},onPointerLeave:(u,M)=>{var ea;null==(ea=this.onPointerLeave)?
void 0:ea.call(this,u,M);this.forwardEvent("onPointerLeave",u,M)},onDoubleClick:(u,M)=>{var ea;null==(ea=this.onDoubleClick)?void 0:ea.call(this,u,M);this.forwardEvent("onDoubleClick",u,M)},onKeyDown:(u,M)=>{var ea;this._events.onModifierKey(u,M);null==(ea=this.onKeyDown)?void 0:ea.call(this,u,M);this.forwardEvent("onKeyDown",u,M)},onKeyUp:(u,M)=>{var ea;this._events.onModifierKey(u,M);null==(ea=this.onKeyUp)?void 0:ea.call(this,u,M);this.forwardEvent("onKeyUp",u,M)},onPinchStart:(u,M)=>{var ea;null==
(ea=this.onPinchStart)?void 0:ea.call(this,u,M);this.forwardEvent("onPinchStart",u,M)},onPinch:(u,M)=>{var ea;null==(ea=this.onPinch)?void 0:ea.call(this,u,M);this.forwardEvent("onPinch",u,M)},onPinchEnd:(u,M)=>{var ea;null==(ea=this.onPinchEnd)?void 0:ea.call(this,u,M);this.forwardEvent("onPinchEnd",u,M)},onModifierKey:(u,M)=>{switch(M.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(u,M)}}});kb(this,"onEnter");kb(this,"onExit");kb(this,"onTransition");kb(this,"onWheel");
kb(this,"onPointerDown");kb(this,"onPointerUp");kb(this,"onPointerMove");kb(this,"onPointerEnter");kb(this,"onPointerLeave");kb(this,"onDoubleClick");kb(this,"onKeyDown");kb(this,"onKeyUp");kb(this,"onPinchStart");kb(this,"onPinch");kb(this,"onPinchEnd");const c=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=c;this._states=g}dispose(){this._disposables.forEach(c=>c());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(c=>
[c,...c.descendants])}setCurrentState(c){this.currentState=c}};kb(dr,"id");kb(dr,"shortcuts");je([ug],dr.prototype,"currentState",2);je([cf],dr.prototype,"setCurrentState",1);var Vu=class extends dr{constructor(c,g){var u,M;super();kb(this,"registerKeyboardShortcuts",()=>{var ea;null!=(ea=this._shortcuts)&&ea.length&&this._disposables.push(...this._shortcuts.map(({keys:ma,fn:xa})=>Td.registerShortcut(ma,Ma=>{this.isActive&&xa(this.root,this,Ma)})))});kb(this,"_root");kb(this,"_parent");kb(this,"_shortcuts",
[]);kb(this,"children",new Map([]));kb(this,"registerStates",ea=>{ea.forEach(ma=>this.children.set(ma.id,new ma(this,this._root)));return this});kb(this,"deregisterStates",ea=>{ea.forEach(ma=>{var xa;null==(xa=this.children.get(ma.id))?void 0:xa.dispose();this.children.delete(ma.id)});return this});this._parent=c;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),c=null!=(u=this.initial)?u:this.states[0].id,u=this.children.get(c))&&(this.setCurrentState(u),null==(M=
this.currentState)?void 0:M._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;yf(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};kb(Vu,"cursor");var Hp=class extends Vu{constructor(){super(...arguments);kb(this,"isLocked",!1);kb(this,"previous");kb(this,"onEnter",({fromId:c})=>{this.previous=c;this.cursor&&this.app.cursors.setCursor(this.cursor)});
kb(this,"onTransition",c=>{({toId:c}=c);c=this.children.get(c);this.app.cursors.reset();c.cursor?this.app.cursors.setCursor(c.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},yi=class extends Vu{get app(){return this.root}get tool(){return this.parent}},ux=class extends yi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",{});kb(this,"onEnter",()=>{const {currentPage:c,
inputs:{originPoint:g,currentPoint:u}}=this.app;var {Shape:M}=this.tool;M=new M({id:ca(),type:M.id,parentId:c.id,point:[...g],size:fb.abs(fb.sub(u,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};M.canChangeAspectRatio||(M.aspectRatio?(this.aspectRatio=M.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=M;this.app.currentPage.addShapes(M);this.app.setSelectedShapes([M])});kb(this,"onPointerMove",c=>{if(!c.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:c}=this);var {currentPoint:g,originPoint:u,shiftKey:M}=this.app.inputs;c=Ib.getTransformedBoundingBox(c,"bottom_right_corner",fb.sub(g,u),0,M||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[c.minX,c.minY],size:[c.width,
c.height]})}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.settings.isToolLocked||this.app.transition("select");this.app.persist()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};kb(ux,"id","creating");var vx=
class extends yi{constructor(){super(...arguments);kb(this,"onPointerDown",(c,g)=>{c.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...c)=>{var g,u;this.app.transition("select",{returnTo:this.app.currentState.id});null==(u=(g=this.app._events).onPinchStart)?void 0:u.call(g,...c)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};kb(vx,"id","idle");var wx=class extends yi{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:c,
originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(wx,"id","pointing");var $o=class extends Hp{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb($o,"id","box");kb($o,"states",[vx,wx,ux]);kb($o,"initial","idle");var Bx=class extends yi{constructor(){super(...arguments);kb(this,"shape",{});kb(this,"points",[[0,0,.5]]);kb(this,"onEnter",
()=>{var c;const {Shape:g,previousShape:u}=this.tool;var {originPoint:M}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&u){this.shape=u;var {shape:ea}=this;var ma=ea.props.points[ea.props.points.length-1];const Ma=Ja.sub(M,ea.props.point).concat(null!=(c=M[2])?c:.5);this.points=[...ea.props.points,ma,ma];const Za=Math.ceil(Ja.dist(ma,M)/16);for(let hb=0,zb=hb/(Za-1);hb<Za;hb++){c=this.points;M=c.push;ea=Ja.lrp(ma,Ma,zb);var xa=ma[2];M.call(c,ea.concat.call(ea,xa+(Ma[2]-xa)*
zb))}this.addNextPoint(Ma)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ma=M[2])?ma:.5]],this.shape=new g({id:ca(),type:g.id,parentId:this.app.currentPage.id,point:M.slice(0,2),points:this.points,isComplete:!1}),this.app.currentPage.addShapes(this.shape)});kb(this,"onPointerMove",()=>{const {shape:c}=this,{currentPoint:g,previousPoint:u}=this.app.inputs;Ja.isEqual(u,g)||this.addNextPoint(Ja.sub(g,c.props.point).concat(g[2]))});kb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");
this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?Sc.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");this.app.persist()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(c){const {shape:g}=
this,u=Ja.min(c,[0,0]);this.points.push(c);0>u[0]||0>u[1]?(this.points=this.points.map(M=>Ja.sub(M,u).concat(M[2])),g.update({point:Ja.add(g.props.point,u),points:this.points})):g.update({points:this.points})}};kb(Bx,"id","creating");var Cx=class extends yi{constructor(){super(...arguments);kb(this,"onPointerDown",(c,g)=>{c.order||this.tool.transition("creating")});kb(this,"onPinchStart",(...c)=>{var g,u;this.app.transition("select",{returnTo:this.app.currentState.id});null==(u=(g=this.app._events).onPinchStart)?
void 0:u.call(g,...c)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};kb(Cx,"id","idle");var js=class extends Hp{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"simplify",!0);kb(this,"simplifyTolerance",1);kb(this,"previousShape")}};kb(js,"id","draw");kb(js,"states",[Cx,Bx]);kb(js,"initial","idle");var sx=class extends yi{constructor(){super(...arguments);kb(this,"points",[[0,0,.5]]);kb(this,"hitShapes",new Set);kb(this,"onEnter",
()=>{const {originPoint:c}=this.app.inputs;this.points=[c];this.hitShapes.clear()});kb(this,"onPointerMove",()=>{const {currentPoint:c,previousPoint:g}=this.app.inputs;Ja.isEqual(g,c)||(this.points.push(c),this.app.shapesInViewport.filter(u=>u.hitTestLineSegment(g,c)).forEach(u=>this.hitShapes.add(u)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});kb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});kb(this,"onWheel",
(c,g)=>{this.onPointerMove(c,g)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};kb(sx,"id","erasing");var rx=class extends yi{constructor(){super(...arguments);kb(this,"onPointerDown",(c,g)=>{c.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...c)=>{var g,u;this.app.transition("select",{returnTo:this.app.currentState.id});null==(u=(g=this.app._events).onPinchStart)?void 0:u.call(g,...c)});kb(this,"onKeyDown",
(c,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};kb(rx,"id","idle");var zx=class extends yi{constructor(){super(...arguments);kb(this,"onEnter",()=>{const {currentPoint:c}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(c)))});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});kb(this,"onPointerUp",()=>{const c=[...this.app.erasingShapes];
this.app.setErasingShapes([]);this.app.deleteShapes(c);this.tool.transition("idle")})}};kb(zx,"id","pointing");var qt=class extends Hp{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(qt,"id","erase");kb(qt,"states",[rx,zx,sx]);kb(qt,"initial","idle");var Tu=class extends yi{constructor(){super(...arguments);kb(this,"handle",{});kb(this,"handleId","end");kb(this,"currentShape",{});kb(this,"initialShape",{});kb(this,"bindableShapeIds",[]);kb(this,"startBindingShapeId");kb(this,
"newStartBindingId","");kb(this,"draggedBindingId","");kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:c,previousPoint:g,originPoint:u,currentPoint:M,modKey:ea,altKey:ma}}=this.app;var xa=this.app.getShapeById(this.initialShape.id),{handles:Ma}=this.initialShape,Za=this.handleId,hb="start"===this.handleId?"end":"start";if(!fb.isEqual(g,M)){var zb=fb.sub(M,u);if(c){var Ob=Ma[hb].point,bc=fb.add(Ma[Za].point,zb),yc=fb.angle(Ob,bc);Ob=fb.rotWith(bc,Ob,Wg.snapAngleToSegments(yc,24)-yc);zb=fb.add(zb,
fb.sub(Ob,bc))}zb=fb.add(Ma[Za].point,zb);Ma={[Za]:wf(Fe({},Ma[Za]),{point:fb.toFixed(zb),bindingId:void 0})};var ic=this.currentShape.getHandlesChange(this.initialShape,Ma);if(ic){Ma=Qc(xa.props,ic);var Ac={},tc;Za=Ma.handles[Za];hb=Ma.handles[hb];if(this.startBindingShapeId){var Vb;if(zb=this.app.getShapeById(this.startBindingShapeId)){bc=zb.getCenter();Ob=Ma.handles.end;var wc=fb.add(Ma.handles.start.point,Ma.point);fb.isEqual(wc,bc)&&wc[1]++;yc=zb.hitTestPoint(M);wc=fb.uni(fb.sub(wc,bc));const Uc=
void 0!==this.app.currentPage.bindings[this.newStartBindingId];ea||zb.hitTestPoint(fb.add(Ma.point,Ob.point))||(Vb=Gb(xa.props,zb,"start",this.newStartBindingId,bc,bc,wc,yc));Vb&&!Uc?(Ac[this.newStartBindingId]=Vb,Ma.handles.start.bindingId=Vb.id):!Vb&&Uc&&(console.log("removing start binding"),delete Ac[this.newStartBindingId],Ma.handles.start.bindingId=void 0)}}if(!ea){Vb=fb.add(hb.point,Ma.point);hb=fb.add(Za.point,Ma.point);Za=fb.uni(fb.sub(hb,Vb));const Uc=fb.add(Ma.point,Ma.handles.start.point),
Nc=fb.add(Ma.point,Ma.handles.end.point);zb=this.bindableShapeIds.map(ed=>this.app.getShapeById(ed)).sort((ed,ge)=>ge.nonce-ed.nonce).filter(ed=>![Uc,Nc].every(ge=>ed.hitTestPoint(ge)));for(const ed of zb)if(tc=Gb(xa.props,ed,this.handleId,this.draggedBindingId,hb,Vb,Za,ma))break}tc?(Ac[this.draggedBindingId]=tc,Ma=Qc(Ma,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(xa=xa.props.handles[this.handleId].bindingId,void 0!==xa&&(delete Ac[xa],Ma=Qc(Ma,{handles:{[this.handleId]:{bindingId:void 0}}})));
ic=this.currentShape.getHandlesChange(Ma,Ma.handles);Cc(()=>{var Uc;if(ic){this.currentShape.update(ic);this.app.currentPage.updateBindings(Ac);const Nc=Object.values(null!=(Uc=ic.handles)?Uc:{}).map(ed=>ed.bindingId).map(ed=>this.app.currentPage.bindings[ed]).filter(Boolean).flatMap(ed=>[ed.toId,ed.fromId].filter(Boolean));this.app.setBindingShapes(Nc)}})}}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.settings.isToolLocked||
this.app.transition("select");this.app.persist()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};kb(Tu,"id","creating");var qx=class extends Tu{constructor(){super(...arguments);kb(this,"onEnter",()=>{var c;this.app.history.pause();this.newStartBindingId=ca();this.draggedBindingId=
ca();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:u}=this.app.inputs;g=new g(wf(Fe({},g.defaultProps),{id:ca(),type:g.id,parentId:this.app.currentPage.id,point:u}));this.initialShape=me(g.props,new Map);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(c=this.bindableShapeIds.map(M=>this.app.getShapeById(M)).filter(M=>Sc.pointInBounds(u,M.bounds))[0])?void 0:c.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),
1),this.app.setBindingShapes([this.startBindingShapeId])})}};kb(qx,"id","creating");var ox=class extends yi{constructor(){super(...arguments);kb(this,"onPointerDown",(c,g)=>{c.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...c)=>{var g,u;this.app.transition("select",{returnTo:this.app.currentState.id});null==(u=(g=this.app._events).onPinchStart)?void 0:u.call(g,...c)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});kb(this,"onPointerEnter",
c=>{if(!c.order)switch(c.type){case "shape":this.app.setHoveredShape(c.shape.id);break;case "selection":"background"!==c.handle&&"center"!==c.handle&&this.tool.transition("hoveringSelectionHandle",c)}});kb(this,"onPointerLeave",c=>{c.order||"shape"===c.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};kb(ox,"id","idle");var px=class extends yi{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&(this.tool.transition("creating"),
this.app.setSelectedShapes(this.app.currentPage.shapes))})}};kb(px,"id","pointing");var pt=class extends Hp{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(pt,"id","line");kb(pt,"states",[ox,px,qx]);kb(pt,"initial","idle");var ax=class extends yi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",{});kb(this,"onEnter",()=>{const {currentPage:c,inputs:{originPoint:g}}=this.app,{Shape:u}=this.tool,
M=new u({id:ca(),type:u.id,parentId:c.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0});this.creatingShape=M;Cc(()=>{this.app.currentPage.addShapes(M);const {bounds:ea}=M;M.update({point:fb.sub(g,[ea.width/2,ea.height/2])});this.app.transition("select");this.app.setSelectedShapes([M]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};kb(ax,"id","creating");var bx=class extends yi{constructor(){super(...arguments);kb(this,"onPointerDown",(c,
g)=>{c.order||this.tool.transition("creating")});kb(this,"onPinchStart",(...c)=>{var g,u;this.app.transition("select",{returnTo:this.app.currentState.id});null==(u=(g=this.app._events).onPinchStart)?void 0:u.call(g,...c)});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};kb(bx,"id","idle");var nt=class extends Hp{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(nt,"id","box");kb(nt,"states",[bx,ax]);kb(nt,"initial","idle");var hB=Mf(fn()),
iB=class extends hB.default{constructor(){super(...arguments);kb(this,"toBBox",c=>c.rotatedBounds)}},cx=class extends yi{constructor(){super(...arguments);kb(this,"initialSelectedIds",[]);kb(this,"initialSelectedShapes",[]);kb(this,"tree",new iB);kb(this,"onEnter",()=>{const {selectedShapes:c,currentPage:g,selectedIds:u}=this.app;this.initialSelectedIds=Array.from(u.values());this.initialSelectedShapes=Array.from(c.values());this.tree.load(g.shapes)});kb(this,"onExit",()=>{this.initialSelectedIds=
[];this.tree.clear()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:c,ctrlKey:g,originPoint:u,currentPoint:M}}=this.app,ea=Ib.getBoundsFromPoints([M,u],0);this.app.setBrush(ea);const ma=this.tree.search(ea).filter(xa=>g?Ib.boundsContain(ea,xa.rotatedBounds):xa.hitTestBounds(ea));c?ma.every(xa=>this.initialSelectedShapes.includes(xa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(xa=>!ma.includes(xa))):this.app.setSelectedShapes(Array.from((new Set([...this.initialSelectedShapes,
...ma])).values())):this.app.setSelectedShapes(ma)});kb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});kb(this,"handleModifierKey",(c,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};kb(cx,"id","brushing");var dx=class extends yi{constructor(){super(...arguments);kb(this,"onEnter",c=>{const {selectedIds:g,selectedShapes:u,inputs:{shiftKey:M}}=this.app;"shape"!==c.type||
u.has(c.shape)||(M?this.app.setSelectedShapes([...Array.from(g.values()),c.shape.id]):this.app.setSelectedShapes([c.shape]))});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};kb(dx,"id","contextMenu");var ex=class extends yi{constructor(){super(...arguments);kb(this,"onEnter",c=>{"pinching"===c.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});kb(this,"onExit",()=>{this.app.setHoveredShape(void 0)});kb(this,"onPointerEnter",c=>{if(!c.order)switch(c.type){case "shape":this.app.setHoveredShape(c.shape.id);
break;case "selection":"background"!==c.handle&&"center"!==c.handle&&this.tool.transition("hoveringSelectionHandle",c)}});kb(this,"onPointerDown",(c,g)=>{const {selectedShapes:u,inputs:{ctrlKey:M}}=this.app;if(2===g.button)this.tool.transition("contextMenu",c);else if(M)this.tool.transition("pointingCanvas");else switch(c.type){case "selection":switch(c.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");
break;default:this.tool.transition("pointingResizeHandle",c)}break;case "shape":if(u.has(c.shape))this.tool.transition("pointingSelectedShape",c);else{const {selectionBounds:ea,inputs:ma}=this.app;ea&&Sc.pointInBounds(ma.currentPoint,ea)?this.tool.transition("pointingShapeBehindBounds",c):this.tool.transition("pointingShape",c)}break;case "handle":this.tool.transition("pointingHandle",c);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",
Fe(Fe({},g),c))}});kb(this,"onPointerLeave",c=>{c.order||"shape"===c.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})});kb(this,"onDoubleClick",c=>{if(!c.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit&&Sc.pointInBounds(this.app.inputs.currentPoint,g.bounds))switch(c.type){case "shape":this.tool.transition("editingShape",c);break;case "selection":1===this.app.selectedShapesArray.length&&
this.tool.transition("editingShape",{type:"shape",target:g})}}});kb(this,"onKeyDown",(c,g)=>{({selectedShapesArray:c}=this.app);switch(g.key){case "Enter":1===c.length&&c[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:c[0],order:0});break;case "Escape":c.length&&this.app.setSelectedShapes([])}})}};kb(ex,"id","idle");var fx=class extends yi{constructor(){super(...arguments);kb(this,"onEnter",c=>{const {selectedIds:g,inputs:{shiftKey:u}}=this.app;u?this.app.setSelectedShapes([...Array.from(g.values()),
c.shape.id]):this.app.setSelectedShapes([c.shape])});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}};kb(fx,"id","pointingShape");var gx=class extends yi{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,
"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}};kb(gx,"id","pointingBoundsBackground");var hx=class extends yi{constructor(){super(...arguments);kb(this,"onEnter",()=>{var c;const {shiftKey:g}=this.app.inputs;
g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(c=window.getSelection())?void 0:c.removeAllRanges())});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("brushing")});kb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})});
kb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};kb(hx,"id","pointingCanvas");var ix=class extends yi{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,"isCloning",!1);kb(this,"didClone",!1);kb(this,"initialPoints",{});kb(this,"initialShapePoints",{});kb(this,"initialClonePoints",{});kb(this,"clones",[]);kb(this,"onEnter",()=>{var c;this.app.history.pause();const {selectedShapesArray:g,inputs:u}=this.app;this.initialPoints=this.initialShapePoints=
Object.fromEntries(g.map(({id:M,props:{point:ea}})=>[M,ea.slice()]));document.querySelectorAll("input,textarea").forEach(M=>M.blur());null==(c=document.getSelection())?void 0:c.empty();u.altKey?this.startCloning():this.moveSelectedShapesToPointer()});kb(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,
"onPointerMove",()=>{this.moveSelectedShapesToPointer()});kb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.selectedShapes.forEach(u=>{u.update({point:this.initialPoints[u.id]})}),this.tool.transition("idle")}});kb(this,"onKeyUp",(c,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");
const {currentPage:u,selectedShapes:M}=this.app;u.removeShapes(...M);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {selectedShapes:c,inputs:{shiftKey:g,originPoint:u,currentPoint:M}}=this.app,{initialPoints:ea}=this,ma=Ja.sub(M,u);g&&(Math.abs(ma[0])<Math.abs(ma[1])?ma[0]=0:ma[1]=0);Cc(()=>{c.forEach(xa=>xa.update({point:Ja.add(ea[xa.id],ma)}))})}startCloning(){this.didClone||
(this.clones=this.app.selectedShapesArray.map(c=>{const g=this.app.getShapeClass(c.type);if(!g)throw Error("Could not find that shape class.");return new g(wf(Fe({},c.serialized),{id:ca(),type:c.type,point:this.initialPoints[c.id],rotation:c.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:c,props:{point:g}})=>[c,g.slice()])),this.didClone=!0);this.app.selectedShapes.forEach(c=>{c.update({point:this.initialPoints[c.id]})});this.initialPoints=this.initialClonePoints;
this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0;this.moveSelectedShapesToPointer()}};kb(ix,"id","translating");var jx=class extends yi{constructor(){super(...arguments);kb(this,"pointedSelectedShape");kb(this,"onEnter",c=>{this.pointedSelectedShape=c.shape});kb(this,"onExit",()=>{this.pointedSelectedShape=void 0});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",
()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{const {shiftKey:c,currentPoint:g}=this.app.inputs;var {selectedShapesArray:u}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(c)({selectedIds:u}=this.app),u=Array.from(u.values()),u.splice(u.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(u);else{if(1===u.length&&this.pointedSelectedShape.canEdit&&
this.pointedSelectedShape instanceof Dn&&Sc.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}};kb(jx,"id","pointingSelectedShape");var Rw=class extends yi{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",c=>
{this.info=c;this.updateCursor()});kb(this,"onExit",()=>{this.app.cursors.reset()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("resizing",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}updateCursor(){this.app.cursors.setCursor(yg[this.info.handle],
this.app.selectionBounds.rotation)}};kb(Rw,"id","pointingResizeHandle");var Sw=class extends yi{constructor(){super(...arguments);kb(this,"isSingle",!1);kb(this,"handle","bottom_right_corner");kb(this,"snapshots",{});kb(this,"initialCommonBounds",{});kb(this,"selectionRotation",0);kb(this,"resizeType","corner");kb(this,"onEnter",c=>{var g,u;const {history:M,selectedShapesArray:ea,selectionBounds:ma}=this.app;if(!ma)throw Error("Expected a selected bounds.");this.handle=c.handle;this.resizeType="left_edge"===
c.handle||"right_edge"===c.handle?"horizontal-edge":"top_edge"===c.handle||"bottom_edge"===c.handle?"vertical-edge":"corner";this.app.cursors.setCursor(Sw.CURSORS[c.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);M.pause();const xa=Ib.getBoundsFromPoints(ea.map(Ma=>Ib.getBoundsCenter(Ma.bounds)));this.selectionRotation=(this.isSingle=1===ea.length)?null!=(u=ea[0].props.rotation)?u:0:0;this.initialCommonBounds=Fe({},ma);this.snapshots=Object.fromEntries(ea.map(Ma=>{const Za=Fe({},Ma.bounds),
[hb,zb]=Ib.getBoundsCenter(Za);return[Ma.id,{props:Ma.serialized,bounds:Za,transformOrigin:[(hb-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(zb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(hb-xa.minX)/xa.width,(zb-xa.minY)/xa.height],isAspectRatioLocked:Ma.props.isAspectRatioLocked||!(Ma.canChangeAspectRatio&&!Ma.props.rotation)}]}));ea.forEach(Ma=>{var Za;null==(Za=Ma.onResizeStart)?void 0:Za.call(Ma,{isSingle:this.isSingle})})});kb(this,
"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {inputs:{altKey:c,shiftKey:g,ctrlKey:u,originPoint:M,currentPoint:ea}}=this.app,{handle:ma,snapshots:xa,initialCommonBounds:Ma}=this;let Za=Ja.sub(ea,M);c&&(Za=Ja.mul(Za,2));const hb=this.app.selectedShapes.values().next().value;let zb=Ib.getTransformedBoundingBox(Ma,ma,Za,this.selectionRotation,
g||this.isSingle&&(u?!("clipping"in hb.props):!hb.canChangeAspectRatio||hb.props.isAspectRatioLocked));c&&(zb=Fe(Fe({},zb),Ib.centerBounds(zb,Ib.getBoundsCenter(Ma))));const {scaleX:Ob,scaleY:bc}=zb;this.app.selectedShapes.forEach(yc=>{var ic,Ac;const {props:tc,bounds:Vb,transformOrigin:wc}=xa[yc.id];let Uc=Ib.getRelativeTransformedBoundingBox(zb,Ma,Vb,0>Ob,0>bc);if(yc.canResize.some(ge=>ge)||yc.props.isSizeLocked||!this.isSingle){var Nc=[Ob,bc],ed=null!=(ic=tc.rotation)?ic:0;ic=Ib.getBoundsCenter(Uc);
yc.canFlip||(Nc=Ja.abs(Nc));yc.canScale||(Nc=null!=(Ac=tc.scale)?Ac:[1,1]);if(ed&&0>Ob&&0<=bc||0>bc&&0<=Ob)ed*=-1;yc.onResize(tc,{center:ic,rotation:ed,scale:Nc,bounds:Uc,type:ma,clip:u,transformOrigin:wc})}});this.updateCursor(Ob,bc)});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(u=>{u.update(Fe({},this.snapshots[u.id].props))}),this.tool.transition("idle")}})}updateCursor(c,
g){var u,M,ea,ma;const xa=0>c&&0<=g;c=0>g&&0<=c;switch(this.handle){case "top_left_corner":case "bottom_right_corner":xa||c?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(u=this.app.selectionBounds)?void 0:u.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(M=this.app.selectionBounds)?void 0:M.rotation);break;case "top_right_corner":case "bottom_left_corner":xa||c?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(ea=this.app.selectionBounds)?void 0:ea.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ma=this.app.selectionBounds)?void 0:ma.rotation)}}},Ru=Sw;kb(Ru,"id","resizing");kb(Ru,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var Tw=class extends yi{constructor(){super(...arguments);
kb(this,"cursor","rotate");kb(this,"handle","");kb(this,"onEnter",c=>{this.app.history.pause();this.handle=c.handle;this.updateCursor()});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("rotating",{handle:this.handle})});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",
{info:c,event:g})})}updateCursor(){this.app.cursors.setCursor(yg[this.handle],this.app.selectionRotation)}};kb(Tw,"id","pointingRotateHandle");var Uw=class extends yi{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",c=>{this.info=c});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{const {selectedIds:c,inputs:{shiftKey:g}}=
this.app;g?this.app.setSelectedShapes([...Array.from(c.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}};kb(Uw,"id","pointingShapeBehindBounds");var Su=class extends yi{constructor(){super(...arguments);kb(this,"cursor","rotate");kb(this,"snapshot",{});kb(this,"initialCommonCenter",[0,0]);kb(this,"initialCommonBounds",{});kb(this,"initialAngle",0);kb(this,
"initialSelectionRotation",0);kb(this,"handle","");kb(this,"onEnter",c=>{const {history:g,selectedShapesArray:u,selectionBounds:M}=this.app;if(!M)throw Error("Expected selected bounds.");g.pause();this.handle=c.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Fe({},M);this.initialCommonCenter=Ib.getBoundsCenter(M);this.initialAngle=Ja.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(u.map(ea=>[ea.id,{point:[...ea.props.point],
center:[...ea.center],rotation:ea.props.rotation,handles:"handles"in ea?nq(ea.handles):void 0}]));this.updateCursor()});kb(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",()=>{const {selectedShapes:c,inputs:{shiftKey:g,currentPoint:u}}=this.app,{snapshot:M,initialCommonCenter:ea,initialAngle:ma,initialSelectionRotation:xa}=this;let Ma=Ja.angle(ea,u)-ma;g&&(Ma=Wg.snapAngleToSegments(Ma,24));c.forEach(hb=>{var zb=
M[hb.id];let Ob=0;if(g){var {rotation:bc=0}=zb;Ob=Wg.snapAngleToSegments(bc,24)-bc}const yc=Ja.sub(zb.center,zb.point);bc=Ja.rotWith(zb.center,ea,Ma);if("handles"in hb){zb=zb.handles;const ic=zb.map(tc=>Ja.rotWith(tc.point,yc,Ma)),Ac=Ib.getCommonTopLeft(ic);hb.update({point:Ja.add(Ac,Ja.sub(bc,yc)),handles:zb.map((tc,Vb)=>wf(Fe({},tc),{point:Ja.sub(ic[Vb],Ac)}))})}else hb.update({point:Ja.sub(bc,yc),rotation:Wg.clampRadians((zb.rotation||0)+Ma+Ob)})});const Za=Wg.clampRadians(xa+Ma);this.app.setSelectionRotation(g?
Wg.snapAngleToSegments(Za,24):Za);this.updateCursor()});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(u=>{u.update(this.snapshot[u.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(yg[this.handle],this.app.selectionRotation)}};kb(Su,"id","rotating");var Vw=class extends yi{constructor(){super(...arguments);kb(this,"onPinch",
(c,g)=>{const {camera:u}=this.app.viewport;var {deltaY:M}=g,ea=0;if(g.ctrlKey||g.metaKey)ea=Math.sign(g.deltaY),10<Math.abs(g.deltaY)&&(M=10*ea),ea=M;g=.01*ea;0!==g&&this.app.viewport.pinchCamera(c.point,[0,0],u.zoom-g*u.zoom)});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};kb(Vw,"id","pinching");var Ww=class extends Tu{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"onEnter",c=>{this.app.history.pause();
this.newStartBindingId=ca();this.draggedBindingId=ca();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=c.id;this.currentShape=c.shape;this.initialShape=me(this.currentShape.props,new Map);this.app.setSelectedShapes([this.currentShape])})}};kb(Ww,"id","translatingHandle");var Xw=class extends yi{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"info",{});kb(this,"onEnter",c=>{this.info=c});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,
"onPointerMove",()=>{const {currentPoint:c,originPoint:g}=this.app.inputs;5<Ja.dist(c,g)&&this.tool.transition("translatingHandle",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}};kb(Xw,"id","pointingHandle");var Yw=class extends yi{constructor(){super(...arguments);kb(this,"handle");kb(this,"onEnter",c=>{var g;this.app.cursors.setCursor(yg[c.handle],null!=(g=this.app.selectionBounds.rotation)?
g:0);this.handle=c.handle});kb(this,"onExit",()=>{this.app.cursors.reset()});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})});kb(this,"onPointerDown",c=>{switch(c.type){case "selection":switch(c.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",c);break;default:this.tool.transition("pointingResizeHandle",
c)}}});kb(this,"onPointerLeave",()=>{this.tool.transition("idle")});kb(this,"onDoubleClick",c=>{var g;if(!c.order&&1===this.app.selectedShapes.size){var u=this.app.selectedShapes.values().next().value;if(u.canEdit)switch(c.type){case "shape":this.tool.transition("editingShape",c);break;case "selection":null==(g=u.onResetBounds)?void 0:g.call(u,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:u})}else u.onResetBounds({asset:u.props.assetId?
this.app.assets[u.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};kb(Yw,"id","hoveringSelectionHandle");var Zw=class extends yi{constructor(){super(...arguments);kb(this,"editingShape",{});kb(this,"onEnter",c=>{this.editingShape=c.shape;this.app.setEditingShape(c.shape)});kb(this,"onExit",()=>{var c;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):
(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(c=document.querySelector(".tl-canvas"))?void 0:c.focus()});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})});kb(this,"onPointerDown",c=>{switch(c.type){case "shape":if(c.shape===this.editingShape)break;this.tool.transition("idle",c);break;case "canvas":c.order||this.tool.transition("idle",c)}});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":Cc(()=>
{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};kb(Zw,"id","editingShape");var $w=class extends yi{constructor(){super(...arguments);kb(this,"minimapZoom",1);kb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});kb(this,"getCameraPoint",c=>{const g=document.querySelector(".tl-preview-minimap svg");var u=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&u){const M=g.getBoundingClientRect();this.minimapRect.height=
M.height;this.minimapRect.width=M.width;this.minimapRect.minX=M.left;this.minimapRect.minY=M.top;this.minimapRect.maxX=M.right;this.minimapRect.maxY=M.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;c=Ja.sub(c,[this.minimapRect.minX,this.minimapRect.minY]);u=u.getBoundingClientRect();u=Ja.mul(Ja.sub(c,[u.left+u.width/2,u.top+u.height/2]),this.minimapZoom);return Ja.sub(this.app.viewport.camera.point,u)}});kb(this,"onEnter",c=>{(c=this.getCameraPoint([c.clientX,c.clientY]))?
this.app.viewport.update({point:c}):this.tool.transition("idle")});kb(this,"onWheel",(c,g)=>{this.onPointerMove(c,g)});kb(this,"onPointerMove",(c,g)=>{(c=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:c})});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb($w,"id","pointingMinimap");var ar=class extends Hp{constructor(){super(...arguments);kb(this,"returnTo","");kb(this,"onEnter",c=>{this.returnTo=null==c?void 0:c.returnTo})}};kb(ar,"id","select");kb(ar,
"initial","idle");kb(ar,"shortcut",["1"]);kb(ar,"states",[ex,cx,dx,hx,fx,Uw,jx,gx,Yw,Rw,Tw,$w,Xw,Ww,ix,Ru,Su,Su,Vw,Zw]);var kx=class extends yi{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"originalScreenPoint",[]);kb(this,"originalCameraPoint",[]);kb(this,"prevState","idle");kb(this,"onEnter",c=>{this.prevState=null==c?void 0:c.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});kb(this,"onPointerMove",
(c,g)=>{c=fb.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:fb.sub(this.originalCameraPoint,fb.div(c,this.app.viewport.camera.zoom))})});kb(this,"onPointerUp",()=>{var c;this.tool.transition(null!=(c=this.prevState)?c:"idle")})}};kb(kx,"id","panning");var lx=class extends yi{constructor(){super(...arguments);kb(this,"onEnter",c=>{this.parent.prevTool&&c.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();
this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})});kb(this,"onPointerDown",(c,g)=>{c.order||this.tool.transition("panning")})}};kb(lx,"id","idle");var mx=class extends yi{constructor(){super(...arguments);kb(this,"onPointerDown",(c,g)=>{c.order||this.tool.transition("panning",{prevState:"idleHold"})});kb(this,"onPinchStart",(c,g)=>{this.tool.transition("pinching",{info:c,event:g})})}};kb(mx,"id","idleHold");
var nx=class extends yi{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",c=>{this.prevDelta=c.info.delta;this.origin=c.info.point});kb(this,"onPinch",c=>{this.app.viewport.pinchCamera(c.point,[0,0],c.offset[0])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(nx,"id","pinching");var br=class extends Hp{constructor(){super(...arguments);kb(this,"cursor","grab");kb(this,"prevTool",null);kb(this,"onEnter",c=>{this.prevTool=null==c?
void 0:c.prevTool});kb(this,"onKeyDown",(c,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};kb(br,"id","move");kb(br,"shortcut",["2"]);kb(br,"states",[lx,mx,kx,nx]);kb(br,"initial","idle");var jm=class{constructor(c,g={}){kb(this,"lastShapesNounces",null);kb(this,"app");kb(this,"id");kb(this,"name");kb(this,"shapes",[]);kb(this,"bindings",{});kb(this,"nonce",0);kb(this,"bump",()=>{this.nonce++});kb(this,"bringForward",Ma=>{const Za=this.parseShapesArg(Ma);Za.sort((hb,zb)=>this.shapes.indexOf(zb)-
this.shapes.indexOf(hb)).map(hb=>this.shapes.indexOf(hb)).forEach(hb=>{if(hb!==this.shapes.length-1&&!Za.includes(this.shapes[hb+1])){var zb=this.shapes[hb];this.shapes[hb]=this.shapes[hb+1];this.shapes[hb+1]=zb}});this.app.persist();return this});kb(this,"sendBackward",Ma=>{const Za=this.parseShapesArg(Ma);Za.sort((hb,zb)=>this.shapes.indexOf(hb)-this.shapes.indexOf(zb)).map(hb=>this.shapes.indexOf(hb)).forEach(hb=>{if(0!==hb&&!Za.includes(this.shapes[hb-1])){var zb=this.shapes[hb];this.shapes[hb]=
this.shapes[hb-1];this.shapes[hb-1]=zb}});this.app.persist();return this});kb(this,"bringToFront",Ma=>{const Za=this.parseShapesArg(Ma);this.shapes=this.shapes.filter(hb=>!Za.includes(hb)).concat(Za);this.app.persist();return this});kb(this,"sendToBack",Ma=>{const Za=this.parseShapesArg(Ma);this.shapes=Za.concat(this.shapes.filter(hb=>!Za.includes(hb)));this.app.persist();return this});kb(this,"flip",(Ma,Za)=>{Ma=this.parseShapesArg(Ma);const hb=Ib.getCommonBounds(Ma.map(zb=>zb.bounds));Ma.forEach(zb=>
{var Ob;const bc=Ib.getRelativeTransformedBoundingBox(hb,hb,zb.bounds,"horizontal"===Za,"vertical"===Za);if(zb.serialized)zb.onResize(zb.serialized,{bounds:bc,center:Ib.getBoundsCenter(bc),rotation:null!=(Ob=zb.props.rotation)?Ob:-0,type:"top_left_corner",scale:zb.canFlip&&zb.props.scale?"horizontal"===Za?[-zb.props.scale[0],1]:[1,-zb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});kb(this,"getShapeById",Ma=>this.shapes.find(Za=>Za.id===Ma));kb(this,"cleanup",
Ma=>{Ma=ab(this.bindings,Ma);const Za=new Set;let hb=!1,zb=!1;const Ob=nq(this.bindings);Ma.forEach(bc=>{var yc;if(this.bindings[bc.id]){var ic=this.getShapeById(bc.toId),Ac=this.getShapeById(bc.fromId);ic&&Ac?Za.has(Ac.id)||(bc=this.updateArrowBindings(Ac),Za.add(Ac.id),bc&&(Ac=Fe(Fe({},Ac.props),bc),hb=!0,null==(yc=this.getShapeById(Ac.id))?void 0:yc.update(Ac,!1,!0))):(delete Ob[bc.id],zb=!0)}});Object.keys(Ob).forEach(bc=>{const yc=this.bindings[bc];0===this.shapes.filter(ic=>ic.id===yc.fromId||
ic.id===yc.toId).length&&(delete Ob[bc],zb=!0)});zb&&this.update({bindings:Ob});(hb||zb)&&this.app.persist(!0)});kb(this,"updateArrowBindings",Ma=>{var Za,hb,zb,Ob={start:nq(Ma.props.handles.start),end:nq(Ma.props.handles.end)},bc={isBound:!1,handle:Ma.props.handles.start,point:fb.add(Ma.props.handles.start.point,Ma.props.point)},yc={isBound:!1,handle:Ma.props.handles.end,point:fb.add(Ma.props.handles.end.point,Ma.props.point)};if(Ma.props.handles.start.bindingId){var ic=void 0!==(null==(Za=Ma.props.decorations)?
void 0:Za.start);Za=Ma.props.handles.start;var Ac=this.bindings[Ma.props.handles.start.bindingId],tc=this.getShapeById(null==Ac?void 0:Ac.toId);if(tc){bc=tc.getBounds();var Vb=tc.getExpandedBounds(),wc=Ib.expandBounds(bc,ic?Ac.distance:1);const {minX:Uc,minY:Nc,width:ed,height:ge}=Vb,Pd=fb.add([Uc,Nc],fb.mulV([ed,ge],fb.rotWith(Ac.point,[.5,.5],tc.props.rotation||0)));bc={isBound:!0,hasDecoration:ic,binding:Ac,handle:Za,point:Pd,target:tc,bounds:bc,expandedBounds:Vb,intersectBounds:wc,center:tc.getCenter()}}}if(Ma.props.handles.end.bindingId&&
(ic=void 0!==(null==(hb=Ma.props.decorations)?void 0:hb.end),hb=Ma.props.handles.end,Za=this.bindings[Ma.props.handles.end.bindingId],Ac=this.getShapeById(null==Za?void 0:Za.toId))){yc=Ac.getBounds();tc=Ac.getExpandedBounds();Vb=ic?Ib.expandBounds(yc,Za.distance):yc;const {minX:Uc,minY:Nc,width:ed,height:ge}=tc;wc=fb.add([Uc,Nc],fb.mulV([ed,ge],fb.rotWith(Za.point,[.5,.5],Ac.props.rotation||0)));yc={isBound:!0,hasDecoration:ic,binding:Za,handle:hb,point:wc,target:Ac,bounds:yc,expandedBounds:tc,intersectBounds:Vb,
center:Ac.getCenter()}}for(const Uc of["end","start"]){hb="start"===Uc?bc:yc;const Nc="start"===Uc?yc:bc;if(hb.isBound)if(hb.binding.distance){if(ic=fb.uni(fb.sub(hb.point,Nc.point)),Za=B(Nc.point,ic,hb.intersectBounds,hb.target.props.rotation).filter(ed=>ed.didIntersect).map(ed=>ed.points[0]).sort((ed,ge)=>fb.dist(ed,Nc.point)-fb.dist(ge,Nc.point)),Za[0])if(Ac=void 0,Nc.isBound&&(Ac=B(Nc.point,ic,Nc.intersectBounds,Nc.target.props.rotation).filter(ed=>ed.didIntersect).map(ed=>ed.points[0]).sort((ed,
ge)=>fb.dist(ed,Nc.point)-fb.dist(ge,Nc.point))[0]),Nc.isBound&&(2>Za.length||Ac&&Za[0]&&10>Math.ceil(fb.dist(Za[0],Ac))||Ib.boundsContain(hb.expandedBounds,Nc.expandedBounds)||Ib.boundsCollide(hb.expandedBounds,Nc.expandedBounds)))ic=fb.uni(fb.sub(Nc.point,hb.point)),Za=B(hb.point,ic,hb.bounds,hb.target.props.rotation).filter(ed=>ed.didIntersect).map(ed=>ed.points[0]),Za[0]&&(Ob[Uc].point=fb.toFixed(fb.sub(Za[0],Ma.props.point)),Ob["start"===Uc?"end":"start"].point=fb.toFixed(fb.add(fb.sub(Za[0],
Ma.props.point),fb.mul(ic,Math.min(fb.dist(Za[0],Nc.point),10*(Ib.boundsContain(Nc.bounds,hb.intersectBounds)?-1:1))))));else{if(!Nc.isBound&&(Za[0]&&10>fb.dist(Za[0],Nc.point)||Sc.pointInBounds(Nc.point,hb.intersectBounds)))return Ob=fb.uni(fb.sub(hb.center,Nc.point)),null==(zb=Ma.getHandlesChange)?void 0:zb.call(Ma,Ma.props,{[Uc]:wf(Fe({},Ma.props.handles[Uc]),{point:fb.toFixed(fb.add(fb.sub(Nc.point,Ma.props.point),fb.mul(Ob,10)))})});Za[0]&&(Ob[Uc].point=fb.toFixed(fb.sub(Za[0],Ma.props.point)))}}else Ob[Uc].point=
fb.sub(hb.point,Ma.props.point)}return Ma.getHandlesChange(Ma.props,Ob)});const {id:u,name:M,shapes:ea=[],bindings:ma={},nonce:xa}=g;this.id=u;this.name=M;this.bindings=Object.assign({},ma);this.app=c;this.nonce=xa||0;this.addShapes(...ea);yf(this);$c(()=>{const Ma=0<this.shapes.length?Object.fromEntries(this.shapes.map(Za=>[Za.id,Za.nonce])):null;if(this.lastShapesNounces&&Ma){const Za=this.lastShapesNounces,hb=[...(new Set([...Object.keys(Ma),...Object.keys(Za)]))].filter(zb=>Za[zb]!==Ma[zb]);requestAnimationFrame(()=>
{this.cleanup(hb)})}Ma&&(this.lastShapesNounces=Ma)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(c=>c.serialized).filter(c=>!!c).map(c=>me(c,new Map)),bindings:nq(this.bindings),nonce:this.nonce}}update(c){Object.assign(this,c);return this}updateBindings(c){Object.assign(this.bindings,c);return this}addShapes(...c){if(0!==c.length)return c="getBounds"in c[0]?c:c.map(g=>new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...c),this.bump(),c}parseShapesArg(c){return"string"===
typeof c[0]?this.shapes.filter(g=>c.includes(g.id)):c}removeShapes(...c){const g=this.parseShapesArg(c);this.shapes=this.shapes.filter(u=>!g.includes(u));return g}getBindableShapes(){return this.shapes.filter(c=>c.canBind).sort((c,g)=>g.nonce-c.nonce).map(c=>c.id)}};je([ug],jm.prototype,"id",2);je([ug],jm.prototype,"name",2);je([ug],jm.prototype,"shapes",2);je([ug],jm.prototype,"bindings",2);je([ah],jm.prototype,"serialized",1);je([ug],jm.prototype,"nonce",2);je([cf],jm.prototype,"bump",2);je([cf],
jm.prototype,"update",1);je([cf],jm.prototype,"updateBindings",1);je([cf],jm.prototype,"addShapes",1);je([cf],jm.prototype,"removeShapes",1);je([cf],jm.prototype,"bringForward",2);je([cf],jm.prototype,"sendBackward",2);je([cf],jm.prototype,"bringToFront",2);je([cf],jm.prototype,"sendToBack",2);je([cf],jm.prototype,"cleanup",2);var Fk=class{constructor(){kb(this,"shiftKey",!1);kb(this,"ctrlKey",!1);kb(this,"modKey",!1);kb(this,"altKey",!1);kb(this,"spaceKey",!1);kb(this,"isPinching",!1);kb(this,"currentScreenPoint",
[0,0]);kb(this,"currentPoint",[0,0]);kb(this,"previousScreenPoint",[0,0]);kb(this,"previousPoint",[0,0]);kb(this,"originScreenPoint",[0,0]);kb(this,"originPoint",[0,0]);kb(this,"pointerIds",new Set);kb(this,"state","idle");kb(this,"containerOffset",[0,0]);kb(this,"onWheel",(c,g)=>{this.updateModifiers(g);this.previousPoint=this.currentPoint;this.currentPoint=c;this.state="panning"});kb(this,"onPointerDown",(c,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;
this.originPoint=c;this.state="pointing"});kb(this,"onPointerMove",(c,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=c)});kb(this,"onPointerUp",(c,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});kb(this,"onKeyDown",c=>{this.updateModifiers(c);switch(c.key){case " ":this.spaceKey=!0}});kb(this,"onKeyUp",c=>{this.updateModifiers(c);switch(c.key){case " ":this.spaceKey=
!1}});kb(this,"onPinchStart",(c,g)=>{this.updateModifiers(g);this.state="pinching"});kb(this,"onPinch",(c,g)=>{"pinching"===this.state&&this.updateModifiers(g)});kb(this,"onPinchEnd",(c,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});yf(this)}updateContainerOffset(c){Object.assign(this.containerOffset,c)}updateModifiers(c){"clientX"in c&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=fb.sub([c.clientX,c.clientY],this.containerOffset));"shiftKey"in
c&&(this.shiftKey=c.shiftKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.modKey=Qf()?c.metaKey:c.ctrlKey)}};je([ug],Fk.prototype,"shiftKey",2);je([ug],Fk.prototype,"ctrlKey",2);je([ug],Fk.prototype,"modKey",2);je([ug],Fk.prototype,"altKey",2);je([ug],Fk.prototype,"spaceKey",2);je([ug],Fk.prototype,"isPinching",2);je([ug],Fk.prototype,"currentScreenPoint",2);je([ug],Fk.prototype,"currentPoint",2);je([ug],Fk.prototype,"previousScreenPoint",2);je([ug],Fk.prototype,"previousPoint",2);je([ug],Fk.prototype,
"originScreenPoint",2);je([ug],Fk.prototype,"originPoint",2);je([ug],Fk.prototype,"state",2);je([ug],Fk.prototype,"containerOffset",2);je([cf],Fk.prototype,"updateContainerOffset",1);je([cf],Fk.prototype,"updateModifiers",1);je([cf],Fk.prototype,"onWheel",2);je([cf],Fk.prototype,"onPointerDown",2);je([cf],Fk.prototype,"onPointerMove",2);je([cf],Fk.prototype,"onPointerUp",2);je([cf],Fk.prototype,"onKeyDown",2);je([cf],Fk.prototype,"onKeyUp",2);je([cf],Fk.prototype,"onPinchStart",2);je([cf],Fk.prototype,
"onPinch",2);je([cf],Fk.prototype,"onPinchEnd",2);var ot=class{constructor(){kb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});kb(this,"camera",{point:[0,0],zoom:1});kb(this,"updateBounds",c=>{this.bounds=c;return this});kb(this,"panCamera",c=>this.update({point:Ja.sub(this.camera.point,Ja.div(c,this.camera.zoom))}));kb(this,"update",({point:c,zoom:g})=>{void 0!==c&&(this.camera.point=c);void 0!==g&&(this.camera.zoom=g);return this});kb(this,"_currentView",{minX:0,minY:0,
maxX:1,maxY:1,width:1,height:1});kb(this,"getPagePoint",c=>{const {camera:g,bounds:u}=this;return Ja.sub(Ja.div(Ja.sub(c,[u.minX,u.minY]),g.zoom),g.point)});kb(this,"getScreenPoint",c=>{const {camera:g}=this;return Ja.mul(Ja.add(c,g.point),g.zoom)});kb(this,"pinchCamera",(c,g,u)=>{var {camera:M}=this;u=Math.max(ot.minZoom,Math.min(ot.maxZoom,u));g=Ja.sub(M.point,Ja.div(g,M.zoom));M=Ja.sub(Ja.div(c,M.zoom),g);c=Ja.sub(Ja.div(c,u),g);return this.update({point:Ja.toFixed(Ja.add(g,Ja.sub(c,M))),zoom:u})});
kb(this,"setZoom",c=>{const {bounds:g}=this;this.pinchCamera([g.width/2,g.height/2],[0,0],c)});kb(this,"zoomIn",()=>{const {camera:c}=this;this.setZoom(c.zoom/.8)});kb(this,"zoomOut",()=>{const {camera:c}=this;this.setZoom(.8*c.zoom)});kb(this,"resetZoom",()=>{const {bounds:c,camera:{zoom:g,point:u}}=this;var M=[c.width/2,c.height/2];const ea=Ja.sub(Ja.div(M,g),u);M=Ja.sub(Ja.div(M,1),u);return this.update({point:Ja.toFixed(Ja.add(u,Ja.sub(M,ea))),zoom:1})});kb(this,"zoomToBounds",({width:c,height:g,
minX:u,minY:M})=>{const {bounds:ea,camera:ma}=this;let xa=Math.min((ea.width-100)/c,(ea.height-100)/g);xa=Math.min(1,Math.max(ot.minZoom,ma.zoom===xa||1>ma.zoom?Math.min(1,xa):xa));return this.update({point:Ja.add([-u,-M],[(ea.width-c*xa)/2/xa,(ea.height-g*xa)/2/xa]),zoom:xa})});yf(this)}get currentView(){const {bounds:c,camera:{point:g,zoom:u}}=this,M=c.width/u,ea=c.height/u;return{minX:-g[0],minY:-g[1],maxX:M-g[0],maxY:ea-g[1],width:M,height:ea}}},Jo=ot;kb(Jo,"minZoom",.1);kb(Jo,"maxZoom",4);je([ug],
Jo.prototype,"bounds",2);je([ug],Jo.prototype,"camera",2);je([cf],Jo.prototype,"updateBounds",2);je([cf],Jo.prototype,"update",2);je([ah],Jo.prototype,"currentView",1);var jB=class{constructor(c){kb(this,"app");kb(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});kb(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});kb(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});kb(this,"updateShapes",(...g)=>{this.app.updateShapes(g);
return this});kb(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});kb(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});kb(this,"deselectShapes",(...g)=>{const u="string"===typeof g[0]?g:g.map(M=>M.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(M=>!u.includes(M.id)));return this});kb(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});kb(this,"flipVertical",(...g)=>{this.app.flipVertical(g);
return this});kb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes);return this});kb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});kb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});kb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});kb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});kb(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=Ib.getCommonBounds(g.map(u=>u.bounds));
this.app.viewport.zoomToBounds(g);return this});kb(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=Ib.getCommonBounds(g.map(u=>u.bounds));this.app.viewport.update({point:fb.add(fb.neg(Ib.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});kb(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});kb(this,"resetZoomToCursor",
()=>{this.app.viewport.update({zoom:1,point:fb.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});kb(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});kb(this,"toggleToolLock",()=>{const {settings:g}=this.app;g.update({showGrid:!g.isToolLocked});return this});kb(this,"save",()=>{this.app.save();return this});kb(this,"saveAs",()=>{this.app.save();return this});kb(this,"undo",()=>{this.app.undo();return this});kb(this,"redo",
()=>{this.app.redo();return this});kb(this,"createNewLineBinding",(g,u)=>this.app.createNewLineBinding(g,u));this.app=c}},cr=class{constructor(){kb(this,"cursor","default");kb(this,"rotation",0);kb(this,"reset",()=>{this.cursor="default"});kb(this,"setCursor",(c,g=0)=>{if(c!==this.cursor||g!==this.rotation)this.cursor=c,this.rotation=g});kb(this,"setRotation",c=>{c!==this.rotation&&(this.rotation=c)});yf(this)}};je([ug],cr.prototype,"cursor",2);je([ug],cr.prototype,"rotation",2);je([cf],cr.prototype,
"reset",2);je([cf],cr.prototype,"setCursor",2);je([cf],cr.prototype,"setRotation",2);var kB=(c,g)=>{c=uf(c.pages[0],"nonce");g=uf(g.pages[0],"nonce");return!(0,Pw.default)(c,g)},no=class{constructor(c){kb(this,"app");kb(this,"stack",[]);kb(this,"pointer",0);kb(this,"isPaused",!0);kb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});kb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});kb(this,"reset",()=>{this.stack=[this.app.serialized];this.pointer=0;this.resume();this.app.notify("persist",
null)});kb(this,"persist",(g=!1)=>{if(!this.isPaused&&!this.creating){var {serialized:u}=this.app;0<this.stack.length&&!kB(this.stack[this.pointer],u)||(g?this.stack[this.pointer]=u:(this.pointer<this.stack.length&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(u),this.pointer=this.stack.length-1),this.app.pages.forEach(M=>M.bump()),this.app.notify("persist",null))}});kb(this,"setPointer",g=>{this.pointer=g;this.deserialize(this.stack[this.pointer]);this.app.notify("persist",null)});
kb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canUndo&&this.setPointer(this.pointer-1)});kb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canRedo&&this.setPointer(this.pointer+1)});kb(this,"deserialize",g=>{Cc(()=>{var u,{pages:M}=g;const ea=this.isPaused;this.pause();const ma=[...this.app.selectedIds];try{const xa=new Map(this.app.pages),Ma=[];for(const Za of M){const hb=xa.get(Za.id);if(void 0!==hb){const zb=new Map(hb.shapes.map(Ob=>
[Ob.props.id,Ob]));M=[];for(const Ob of Za.shapes){const bc=zb.get(Ob.id);if(void 0!==bc)bc.nonce!==Ob.nonce&&(bc.update(Ob,!0),bc.nonce=Ob.nonce,bc.setLastSerialized(Ob)),zb.delete(Ob.id);else{const yc=new (this.app.getShapeClass(Ob.type))(Ob);M.push(yc)}}0<zb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&hb.removeShapes(...zb.values());0<M.length&&hb.addShapes(...M);xa.delete(Za.id);hb.updateBindings(Za.bindings);hb.nonce=null!=(u=Za.nonce)?u:0}else{const {id:zb,name:Ob,shapes:bc,
bindings:yc,nonce:ic}=Za;Ma.push(new jm(this.app,{id:zb,name:Ob,nonce:ic,bindings:yc,shapes:bc.map(Ac=>new (this.app.getShapeClass(Ac.type))(Ac))}))}}0<Ma.length&&this.app.addPages(Ma);0<xa.size&&this.app.removePages(Array.from(xa.values()));this.app.setSelectedShapes(ma).setErasingShapes([])}catch(xa){console.warn(xa)}ea||this.resume()})});this.app=c;yf(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}get canUndo(){return 0<this.pointer}get canRedo(){return this.pointer<
this.stack.length-1}};je([ug],no.prototype,"stack",2);je([ug],no.prototype,"pointer",2);je([ah],no.prototype,"canUndo",1);je([ah],no.prototype,"canRedo",1);je([cf],no.prototype,"reset",2);je([cf],no.prototype,"persist",2);je([cf],no.prototype,"setPointer",2);je([cf],no.prototype,"undo",2);je([cf],no.prototype,"redo",2);je([cf],no.prototype,"deserialize",2);var hs=class{constructor(){kb(this,"mode","light");kb(this,"showGrid",!0);kb(this,"isToolLocked",!1);yf(this)}update(c){Object.assign(this,c)}};
je([ug],hs.prototype,"mode",2);je([ug],hs.prototype,"showGrid",2);je([ug],hs.prototype,"isToolLocked",2);je([cf],hs.prototype,"update",1);var ph=class extends dr{constructor(c,g,u){var M,ea;super();kb(this,"keybindingRegistered",!1);kb(this,"api");kb(this,"inputs",new Fk);kb(this,"cursors",new cr);kb(this,"viewport",new Jo);kb(this,"settings",new hs);kb(this,"Tools",[]);kb(this,"history",new no(this));kb(this,"persist",this.history.persist);kb(this,"undo",this.history.undo);kb(this,"redo",this.history.redo);
kb(this,"saving",!1);kb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});kb(this,"load",()=>{this.notify("load",null);return this});kb(this,"save",()=>{this.notify("save",null);return this});kb(this,"saveAs",()=>{this.notify("saveAs",null);return this});kb(this,"pages",new Map([["page",new jm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));kb(this,"getPageById",ma=>{const xa=this.pages.get(ma);if(!xa)throw Error(`Could not find a page named ${ma}.`);
return xa});kb(this,"getShapeById",(ma,xa=this.currentPage.id)=>{var Ma;return null==(Ma=this.getPageById(xa))?void 0:Ma.shapes.find(Za=>Za.id===ma)});kb(this,"createShapes",ma=>{(ma=this.currentPage.addShapes(...ma))&&this.notify("create-shapes",ma);this.persist();return this});kb(this,"updateShapes",ma=>{ma.forEach(xa=>{var Ma;return null==(Ma=this.getShapeById(xa.id))?void 0:Ma.update(xa)});this.persist();return this});kb(this,"deleteShapes",ma=>{if(0===ma.length)return this;let xa;xa="string"===
typeof ma[0]?new Set(ma):new Set(ma.map(Ma=>Ma.id));this.setSelectedShapes(this.selectedShapesArray.filter(Ma=>!xa.has(Ma.id)));(ma=this.currentPage.removeShapes(...ma))&&this.notify("delete-shapes",ma);this.persist();return this});kb(this,"bringForward",(ma=this.selectedShapesArray)=>{0<ma.length&&this.currentPage.bringForward(ma);return this});kb(this,"sendBackward",(ma=this.selectedShapesArray)=>{0<ma.length&&this.currentPage.sendBackward(ma);return this});kb(this,"sendToBack",(ma=this.selectedShapesArray)=>
{0<ma.length&&this.currentPage.sendToBack(ma);return this});kb(this,"bringToFront",(ma=this.selectedShapesArray)=>{0<ma.length&&this.currentPage.bringToFront(ma);return this});kb(this,"flipHorizontal",(ma=this.selectedShapesArray)=>{this.currentPage.flip(ma,"horizontal");return this});kb(this,"flipVertical",(ma=this.selectedShapesArray)=>{this.currentPage.flip(ma,"vertical");return this});kb(this,"align",(ma,xa=this.selectedShapesArray)=>{if(2>xa.length)return this;const Ma=xa.map(bc=>{const yc=bc.getBounds();
return{id:bc.id,point:[yc.minX,yc.minY],bounds:yc}}),Za=Ib.getCommonBounds(Ma.map(({bounds:bc})=>bc)),hb=Za.minX+Za.width/2,zb=Za.minY+Za.height/2,Ob=Object.fromEntries(Ma.map(({id:bc,point:yc,bounds:ic})=>[bc,{prev:yc,next:{top:[yc[0],Za.minY],centerVertical:[yc[0],zb-ic.height/2],bottom:[yc[0],Za.maxY-ic.height],left:[Za.minX,yc[1]],centerHorizontal:[hb-ic.width/2,yc[1]],right:[Za.maxX-ic.width,yc[1]]}[ma]}]));xa.forEach(bc=>{Ob[bc.id]&&bc.update({point:Ob[bc.id].next})});this.persist();return this});
kb(this,"distribute",(ma,xa=this.selectedShapesArray)=>{if(2>xa.length)return this;const Ma=Object.fromEntries(Ib.getDistributions(xa,ma).map(Za=>[Za.id,Za]));xa.forEach(Za=>{Ma[Za.id]&&Za.update({point:Ma[Za.id].next})});this.persist();return this});kb(this,"packIntoRectangle",(ma=this.selectedShapesArray)=>{if(2>ma.length)return this;const xa=Object.fromEntries(Ib.getPackedDistributions(ma).map(Ma=>[Ma.id,Ma]));ma.forEach(Ma=>{xa[Ma.id]&&Ma.update({point:xa[Ma.id].next})});this.persist();return this});
kb(this,"assets",{});kb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){var ma=JSON.stringify({shapes:this.selectedShapesArray.map(xa=>xa.serialized),assets:this.getCleanUpAssets().filter(xa=>this.selectedShapesArray.some(Ma=>Ma.props.assetId===xa.id)),bindings:me(this.currentPage.bindings,new Map)});ma=`<whiteboard-tldr>${encodeURIComponent(ma)}</whiteboard-tldr>`;navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([ma],{type:"text/html"})})])}});kb(this,
"paste",(ma,xa)=>{var Ma;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!xa,dataTransfer:null!=(Ma=null==ma?void 0:ma.clipboardData)?Ma:void 0})});kb(this,"cut",()=>{this.copy();this.api.deleteShapes()});kb(this,"drop",(ma,xa)=>{this.notify("drop",{dataTransfer:ma,point:xa?this.viewport.getPagePoint(xa):Ib.getBoundsCenter(this.viewport.currentView)})});kb(this,"selectTool",this.transition);kb(this,"editingId");kb(this,"setEditingShape",ma=>{this.editingId="string"===
typeof ma?ma:null==ma?void 0:ma.id;return this});kb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});kb(this,"hoveredId");kb(this,"setHoveredShape",ma=>{this.hoveredId="string"===typeof ma?ma:null==ma?void 0:ma.id;return this});kb(this,"selectedIds",new Set);kb(this,"selectedShapes",new Set);kb(this,"selectionRotation",0);kb(this,"setSelectedShapes",ma=>{var xa;const {selectedIds:Ma,selectedShapes:Za}=this;Ma.clear();Za.clear();ma[0]&&"string"===typeof ma[0]?
ma.forEach(zb=>Ma.add(zb)):ma.forEach(zb=>Ma.add(zb.id));const hb=this.currentPage.shapes.filter(zb=>Ma.has(zb.id));hb.forEach(zb=>Za.add(zb));this.selectionRotation=1===hb.length?null!=(xa=hb[0].props.rotation)?xa:0:0;0===ma.length&&this.setEditingShape();return this});kb(this,"erasingIds",new Set);kb(this,"erasingShapes",new Set);kb(this,"setErasingShapes",ma=>{const {erasingIds:xa,erasingShapes:Ma}=this;xa.clear();Ma.clear();ma[0]&&"string"===typeof ma[0]?ma.forEach(Za=>xa.add(Za)):ma.forEach(Za=>
xa.add(Za.id));this.currentPage.shapes.filter(Za=>xa.has(Za.id)).forEach(Za=>Ma.add(Za));return this});kb(this,"bindingIds");kb(this,"setBindingShapes",ma=>{this.bindingIds=ma;return this});kb(this,"clearBindingShape",()=>this.setBindingShapes());kb(this,"createNewLineBinding",(ma,xa)=>{ma="string"===typeof ma?this.getShapeById(ma):ma;xa="string"===typeof xa?this.getShapeById(xa):xa;if((null==ma?0:ma.canBind)&&(null==xa?0:xa.canBind)&&(xa=jc(ma,xa))){const [Ma,Za]=xa;this.createShapes([Ma]);this.currentPage.updateBindings(Object.fromEntries(Za.map(hb=>
[hb.id,hb])));this.persist();return!0}return!1});kb(this,"brush");kb(this,"setBrush",ma=>{this.brush=ma;return this});kb(this,"setCamera",(ma,xa)=>{this.viewport.update({point:ma,zoom:xa});return this});kb(this,"getPagePoint",ma=>{const {camera:xa}=this.viewport;return Ja.sub(Ja.div(ma,xa.zoom),xa.point)});kb(this,"getScreenPoint",ma=>{const {camera:xa}=this.viewport;return Ja.mul(Ja.add(ma,xa.point),xa.zoom)});kb(this,"Shapes",new Map);kb(this,"registerShapes",ma=>{ma.forEach(xa=>this.Shapes.set(xa.id,
xa))});kb(this,"deregisterShapes",ma=>{ma.forEach(xa=>this.Shapes.delete(xa.id))});kb(this,"getShapeClass",ma=>{if(!ma)throw Error("No shape type provided.");const xa=this.Shapes.get(ma);if(!xa)throw Error(`Could not find shape class for ${ma}`);return xa});kb(this,"wrapUpdate",ma=>{Cc(()=>{const xa=!this.history.isPaused;xa&&this.history.pause();ma();xa&&(this.history.resume(),this.persist())})});kb(this,"subscriptions",new Set([]));kb(this,"subscribe",(ma,xa)=>{if(void 0===xa)throw Error("Callback is required.");
const Ma={event:ma,callback:xa};this.subscriptions.add(Ma);return()=>this.unsubscribe(Ma)});kb(this,"unsubscribe",ma=>{this.subscriptions.delete(ma);return this});kb(this,"notify",(ma,xa)=>{this.subscriptions.forEach(Ma=>{Ma.event===ma&&Ma.callback(this,xa)});return this});kb(this,"onTransition",()=>{this.settings.update({isToolLocked:!1})});kb(this,"onWheel",(ma,xa)=>{xa.ctrlKey||xa.metaKey||this.isIn("select.contextMenu")||(this.viewport.panCamera(ma.delta),this.inputs.onWheel([...this.viewport.getPagePoint([xa.clientX,
xa.clientY]),.5],xa))});kb(this,"onPointerDown",(ma,xa)=>{if(!this.editingShape&&1===xa.button&&!this.isIn("move"))this.temporaryTransitionToMove(xa);else if(2===xa.button)this.transition("select");else if("clientX"in xa)this.inputs.onPointerDown([...this.viewport.getPagePoint([xa.clientX,xa.clientY]),.5],xa)});kb(this,"onPointerUp",(ma,xa)=>{if(!this.editingShape&&1===xa.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),xa.stopPropagation(),xa.preventDefault();else if("clientX"in
xa)this.inputs.onPointerUp([...this.viewport.getPagePoint([xa.clientX,xa.clientY]),.5],xa)});kb(this,"onPointerMove",(ma,xa)=>{if("clientX"in xa)this.inputs.onPointerMove([...this.viewport.getPagePoint([xa.clientX,xa.clientY]),.5],xa)});kb(this,"onKeyDown",(ma,xa)=>{if(this.editingShape||" "!==xa.key||this.isIn("move"))this.inputs.onKeyDown(xa);else this.temporaryTransitionToMove(xa)});kb(this,"onKeyUp",(ma,xa)=>{if(!this.editingShape&&" "===xa.key&&this.isIn("move"))this.selectedTool.transition("idle",
{exit:!0}),xa.stopPropagation(),xa.preventDefault();else this.inputs.onKeyUp(xa)});kb(this,"onPinchStart",(ma,xa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ma.point),.5],xa)});kb(this,"onPinch",(ma,xa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ma.point),.5],xa)});kb(this,"onPinchEnd",(ma,xa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ma.point),.5],xa)});this._states=[ar,br];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);
const ma=null!=(M=this.initial)?M:this.states[0].id;if(M=this.children.get(ma))this.currentState=M,null==(ea=this.currentState)?void 0:ea._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);u&&this.registerTools(u);this.history.resume();c&&this.history.deserialize(c);this.api=new jB(this);yf(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var c=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(u=>
u.constructor.shortcut).map(u=>({keys:u.constructor.shortcut,fn:(M,ea,ma)=>{this.transition(u.id);ma.stopPropagation()}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+z",fn:()=>this.undo()},{keys:"mod+x",fn:()=>this.cut()},{keys:"mod+shift+z",fn:()=>this.redo()},{keys:"[",fn:()=>
this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:u}=this;"select"!==u.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(u,M,ea)=>{this.editingShape||(ea.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.api.deleteShapes()}},...c,...g].map(({keys:u,
fn:M})=>Td.registerShortcut(u,ea=>{M(this,this,ea)})));this.keybindingRegistered=!0}}loadDocumentModel(c){this.history.deserialize(c);c.assets&&0<c.assets.length&&this.addAssets(c.assets);return this}get serialized(){return{selectedIds:Array.from(this.selectedIds.values()),pages:Array.from(this.pages.values()).map(c=>c.serialized),assets:this.getCleanUpAssets()}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(c){c.forEach(g=>
this.pages.set(g.id,g));this.persist();return this}removePages(c){c.forEach(g=>this.pages.delete(g.id));this.persist();return this}addAssets(c){c.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(c){"string"===typeof c[0]?c.forEach(g=>delete this.assets[g]):c.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const c=new Set;this.pages.forEach(g=>g.shapes.forEach(u=>{u.props.assetId&&this.assets[u.props.assetId]&&c.add(this.assets[u.props.assetId])}));
return Array.from(c)}createAssets(c){this.addAssets(c);this.notify("create-assets",{assets:c});this.persist();return this}get selectedTool(){return this.currentState}registerTools(c){this.Tools=c;return this.registerStates(c)}get editingShape(){const {editingId:c,currentPage:g}=this;return c?g.shapes.find(u=>u.id===c):void 0}get hoveredShape(){const {hoveredId:c,currentPage:g}=this;return c?g.shapes.find(u=>u.id===c):void 0}get selectedShapesArray(){const {selectedShapes:c,selectedTool:g}=this;return"select"!==
g.id?[]:Array.from(c.values())}setSelectionRotation(c){this.selectionRotation=c}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var c;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(M=>{var ea;return Object.values(null!=(ea=M.props.handles)?ea:{})}).flatMap(M=>M.bindingId).filter(zg).flatMap(M=>{var ea,ma;return[null==(ea=this.currentPage.bindings[M])?void 0:ea.fromId,null==(ma=this.currentPage.bindings[M])?void 0:ma.toId]}).filter(zg):
[],u=[...(null!=(c=this.bindingIds)?c:[]),...g];return u?this.currentPage.shapes.filter(M=>null==u?void 0:u.includes(M.id)):void 0}get currentGrid(){const {zoom:c}=this.viewport.camera;return.15>c?128:1>c?32:8}get shapes(){const {currentPage:{shapes:c}}=this;return Array.from(c.values())}get shapesInViewport(){const {selectedShapes:c,currentPage:g,viewport:{currentView:u}}=this;return g.shapes.filter(M=>!M.canUnmount||c.has(M)||Ib.boundsContain(u,M.rotatedBounds)||Ib.boundsCollide(u,M.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:c,
viewport:{currentView:g}}=this;if(c&&!Ib.boundsContain(g,c)&&!Ib.boundsCollide(g,c)){var u=Ib.getBoundsCenter(c);return Ja.clampV([(u[0]-g.minX-g.width/2)/g.width,(u[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:c}=this;if(0!==c.length)return 1===c.length?wf(Fe({},c[0].bounds),{rotation:c[0].props.rotation}):Ib.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var c;const {selectedShapesArray:g}=this;return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===g.length&&!(null==(c=g[0])?0:c.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(c=>c.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:c}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<c.length&&!c.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<c.length&&!c.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle",
"select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===c.length&&!c.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(c){c.stopPropagation();c.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};kb(ph,"id","app");kb(ph,"initial","select");je([ah],ph.prototype,"serialized",1);je([ug],ph.prototype,"pages",2);je([ah],ph.prototype,"currentPageId",1);je([ah],ph.prototype,
"currentPage",1);je([cf],ph.prototype,"addPages",1);je([cf],ph.prototype,"removePages",1);je([cf],ph.prototype,"createShapes",2);je([cf],ph.prototype,"updateShapes",2);je([cf],ph.prototype,"deleteShapes",2);je([ug],ph.prototype,"assets",2);je([cf],ph.prototype,"addAssets",1);je([cf],ph.prototype,"removeAssets",1);je([ah],ph.prototype,"selectedTool",1);je([ug],ph.prototype,"editingId",2);je([ah],ph.prototype,"editingShape",1);je([cf],ph.prototype,"setEditingShape",2);je([ug],ph.prototype,"hoveredId",
2);je([ah],ph.prototype,"hoveredShape",1);je([cf],ph.prototype,"setHoveredShape",2);je([ug],ph.prototype,"selectedIds",2);je([ug],ph.prototype,"selectedShapes",2);je([ug],ph.prototype,"selectionRotation",2);je([ah],ph.prototype,"selectedShapesArray",1);je([cf],ph.prototype,"setSelectedShapes",2);je([cf],ph.prototype,"setSelectionRotation",1);je([ug],ph.prototype,"erasingIds",2);je([ug],ph.prototype,"erasingShapes",2);je([ah],ph.prototype,"erasingShapesArray",1);je([cf],ph.prototype,"setErasingShapes",
2);je([ug],ph.prototype,"bindingIds",2);je([ah],ph.prototype,"bindingShapes",1);je([cf],ph.prototype,"setBindingShapes",2);je([cf],ph.prototype,"createNewLineBinding",2);je([ug],ph.prototype,"brush",2);je([cf],ph.prototype,"setBrush",2);je([cf],ph.prototype,"setCamera",2);je([ah],ph.prototype,"currentGrid",1);je([ah],ph.prototype,"shapes",1);je([ah],ph.prototype,"shapesInViewport",1);je([ah],ph.prototype,"selectionDirectionHint",1);je([ah],ph.prototype,"selectionBounds",1);je([ah],ph.prototype,"showSelection",
1);je([ah],ph.prototype,"showSelectionDetail",1);je([ah],ph.prototype,"showSelectionRotation",1);je([ah],ph.prototype,"showContextBar",1);je([ah],ph.prototype,"showRotateHandles",1);je([ah],ph.prototype,"showResizeHandles",1);var eB=Mf(Qn()),Pw=Mf(Am()),fB=Mf(vp()),nq=eB.default,zn=class{static insertTextFirefox(c,g){c.setRangeText(g,c.selectionStart||0,c.selectionEnd||0,"end");c.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(c,g){const u=c.ownerDocument,
M=u.activeElement;M!==c&&c.focus();u.execCommand("insertText",!1,g)||zn.insertTextFirefox(c,g);M===u.body?c.blur():M instanceof HTMLElement&&M!==c&&M.focus()}static set(c,g){c.select();zn.insert(c,g)}static getSelection(c){const {selectionStart:g,selectionEnd:u}=c;return c.value.slice(g?g:void 0,u?u:void 0)}static wrapSelection(c,g,u){const {selectionStart:M,selectionEnd:ea}=c,ma=zn.getSelection(c);zn.insert(c,g+ma+(null!=u?u:g));c.selectionStart=(M||0)+g.length;c.selectionEnd=(ea||0)+g.length}static replace(c,
g,u){let M=0;c.value.replace(g,(...ea)=>{const ma=M+ea[ea.length-2],xa=ea[0].length;c.selectionStart=ma;c.selectionEnd=ma+xa;ea="string"===typeof u?u:u(...ea);zn.insert(c,ea);c.selectionStart=ma;M+=ea.length-xa;return ea})}static findLineEnd(c,g){const u=c.lastIndexOf("\n",g-1)+1;return"\t"!==c.charAt(u)?g:u+1}static indent(c){var g;const {selectionStart:u,selectionEnd:M,value:ea}=c;var ma=ea.slice(u,M);if((ma=null==(g=/\n/g.exec(ma))?void 0:g.length)&&0<ma){g=ea.lastIndexOf("\n",u-1)+1;var xa=c.value.slice(g,
M-1);ma=xa.replace(/^|\n/g,`$&${zn.INDENT}`);xa=ma.length-xa.length;c.setSelectionRange(g,M-1);zn.insert(c,ma);c.setSelectionRange(u+1,M+xa)}else zn.insert(c,zn.INDENT)}static unindent(c){const {selectionStart:g,selectionEnd:u,value:M}=c;var ea=M.lastIndexOf("\n",g-1)+1;const ma=zn.findLineEnd(M,u);var xa=c.value.slice(ea,ma);const Ma=xa.replace(/(^|\n)(\t| {1,2})/g,"$1");xa=xa.length-Ma.length;c.setSelectionRange(ea,ma);zn.insert(c,Ma);ea=(ea=/\t| {1,2}/.exec(M.slice(ea,g)))?ea[0].length:0;c.setSelectionRange(g-
ea,Math.max(g-ea,u-xa))}static normalizeText(c){return c.replace(zn.fixNewLines,"\n")}},$q=zn;kb($q,"fixNewLines",/\r?\n|\r/g);kb($q,"INDENT","  ");var Zo;"undefined"!==typeof window&&(Zo=We());var Qu=new Map,oq=Qf()?"⌘":"Ctrl",gB=class extends ph{},Qw=Mf(T(16)),bB=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Ow=Mf(T(16)),Nu={},gs=Mf(T(16)),cB=c=>{for(c=c.parentElement;c&&c!==document.body;){const {overflowY:g}=window.getComputedStyle(c);if(c.scrollHeight>c.clientHeight&&
("auto"===g||"scroll"===g||"overlay"===g))return c;c=c.parentElement}return document},Ou=Mf(T(16)),Pu=new Map,dB={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},
aB=((c,...g)=>c.reduce((u,M,ea)=>u+M+(ea<g.length?g[ea]:""),""))`
  .tl-container {
    --tl-cursor: inherit;
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: var(--tl-cursor) !important;
    box-sizing: border-box;
    color: var(--tl-foreground);
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,ny=Mf(T(16)),Ix=Mf(T(16)),av={},Qk={toVector(c,g){void 0===c&&(c=g);return Array.isArray(c)?c:[c,c]},add(c,g){return[c[0]+g[0],c[1]+g[1]]},sub(c,g){return[c[0]-g[0],c[1]-g[1]]},addTo(c,g){c[0]+=g[0];c[1]+=g[1]},subTo(c,g){c[0]-=g[0];c[1]-=g[1]}},Jx={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},tB=["enter","leave"],uB=["gotpointercapture","lostpointercapture"],
Kx=class{constructor(c,g,u){this.ctrl=c;this.args=g;this.key=u;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(c){this.ctrl.state[this.key]=c}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:c,
shared:g,ingKey:u,args:M}=this;g[u]=c._active=c.active=c._blocked=c._force=!1;c._step=[!1,!1];c.intentional=!1;c._movement=[0,0];c._distance=[0,0];c._direction=[0,0];c._delta=[0,0];c._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];c.args=M;c.axis=void 0;c.memo=void 0;c.elapsedTime=0;c.direction=[0,0];c.distance=[0,0];c.overflow=[0,0];c._movementBound=[!1,!1];c.velocity=[0,0];c.movement=[0,0];c.delta=[0,0];c.timeStamp=0}start(c){const g=this.state,u=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=c.target,g.currentTarget=c.currentTarget,g.lastOffset=u.from?Qi(u.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=c.timeStamp}computeValues(c){const g=this.state;g._values=c;g.values=this.config.transform(c)}computeInitial(){const c=this.state;c._initial=c._values;c.initial=c.values}compute(c){const {state:g,config:u,shared:M}=this;g.args=this.args;var ea=0;if(c){g.event=c;u.preventDefault&&c.cancelable&&g.event.preventDefault();g.type=c.type;M.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;M.locked=!!document.pointerLockElement;ea=Object;var ma=ea.assign,xa={};"buttons"in c&&(xa.buttons=c.buttons);if("shiftKey"in c){const {shiftKey:Nc,altKey:ed,metaKey:ge,ctrlKey:Pd}=c;Object.assign(xa,{shiftKey:Nc,altKey:ed,metaKey:ge,ctrlKey:Pd})}ma.call(ea,M,xa);M.down=M.pressed=1===M.buttons%2||0<M.touches;ea=c.timeStamp-g.timeStamp;g.timeStamp=c.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ma=g._delta.map(Math.abs),Qk.addTo(g._distance,ma));this.axisIntent&&
this.axisIntent(c);const [Ma,Za]=g._movement,[hb,zb]=u.threshold,{_step:Ob,values:bc}=g;u.hasCustomTransform?(!1===Ob[0]&&(Ob[0]=Math.abs(Ma)>=hb&&bc[0]),!1===Ob[1]&&(Ob[1]=Math.abs(Za)>=zb&&bc[1])):(!1===Ob[0]&&(Ob[0]=Math.abs(Ma)>=hb&&Math.sign(Ma)*hb),!1===Ob[1]&&(Ob[1]=Math.abs(Za)>=zb&&Math.sign(Za)*zb));g.intentional=!1!==Ob[0]||!1!==Ob[1];if(g.intentional){ma=[0,0];if(u.hasCustomTransform){const [Nc,ed]=bc;ma[0]=!1!==Ob[0]?Nc-Ob[0]:0;ma[1]=!1!==Ob[1]?ed-Ob[1]:0}else ma[0]=!1!==Ob[0]?Ma-Ob[0]:
0,ma[1]=!1!==Ob[1]?Za-Ob[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ma);xa=g.offset;var yc=g._active&&!g._blocked||g.active;yc&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=M[this.ingKey]=g._active,c&&(g.first&&("bounds"in u&&(g._bounds=Qi(u.bounds,g)),this.setup&&this.setup()),g.movement=ma,this.computeOffset()));var [ic,Ac]=g.offset,[[tc,Vb],[wc,Uc]]=g._bounds;g.overflow=[ic<tc?-1:ic>Vb?1:0,Ac<wc?-1:Ac>Uc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?
g._movement[0]:g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Bl(g._bounds,g.offset,g._active?u.rubberband||[0,0]:[0,0]);g.delta=Qk.sub(g.offset,xa);this.computeMovement();yc&&(!g.last||32<ea)&&(g.delta=Qk.sub(g.offset,xa),c=g.delta.map(Math.abs),Qk.addTo(g.distance,c),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<ea&&(g.velocity=[c[0]/ea,c[1]/ea]))}}emit(){const c=this.state;var g=
this.shared;const u=this.config;c._active||this.clean();if(!c._blocked&&c.intentional||c._force||u.triggerAllEvents)g=this.handler(pg(pg(pg({},g),c),{},{[this.aliasKey]:c.values})),void 0!==g&&(c.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},us=class extends Kx{constructor(...c){super(...c);Uh(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Qk.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=Qk.sub(this.state.offset,this.state.lastOffset)}axisIntent(c){const g=this.state,u=this.config;!g.axis&&c&&(c="object"===typeof u.axisThreshold?u.axisThreshold[Qj(c)]:u.axisThreshold,g.axis=wk(g._movement,c));g._blocked=(u.lockDirection||!!u.axis)&&!g.axis||!!u.axis&&u.axis!==g.axis}restrictToAxis(c){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":c[1]=0;break;case "y":c[0]=0}}},vB=c=>c,Lx={enabled(c=!0){return c},
eventOptions(c,g,u){return pg(pg({},u.shared.eventOptions),c)},preventDefault(c=!1){return c},triggerAllEvents(c=!1){return c},rubberband(c=0){switch(c){case !0:return[.15,.15];case !1:return[0,0];default:return Qk.toVector(c)}},from(c){if("function"===typeof c)return c;if(null!=c)return Qk.toVector(c)},transform(c,g,u){c=c||u.shared.transform;this.hasCustomTransform=!!c;return c||vB},threshold(c){return Qk.toVector(c,0)}},Fq=pg(pg({},Lx),{},{axis(c,g,{axis:u}){this.lockDirection="lock"===u;if(!this.lockDirection)return u},
axisThreshold(c=0){return c},bounds(c={}){if("function"===typeof c)return ma=>Fq.bounds(c(ma));if("current"in c)return()=>c.current;if("function"===typeof HTMLElement&&c instanceof HTMLElement)return c;const {left:g=-Infinity,right:u=Infinity,top:M=-Infinity,bottom:ea=Infinity}=c;return[[g,u],[M,ea]]}}),Hx={ArrowRight:(c=1)=>[10*c,0],ArrowLeft:(c=1)=>[-10*c,0],ArrowUp:(c=1)=>[0,-10*c],ArrowDown:(c=1)=>[0,10*c]},rB=class extends us{constructor(...c){super(...c);Uh(this,"ingKey","dragging")}reset(){super.reset();
const c=this.state;c._pointerId=void 0;c._pointerActive=!1;c._keyboardActive=!1;c._preventScroll=!1;c._delayed=!1;c.swipe=[0,0];c.tap=!1;c.canceled=!1;c.cancel=this.cancel.bind(this)}setup(){const c=this.state;if(c._bounds instanceof HTMLElement){const g=c._bounds.getBoundingClientRect(),u=c.currentTarget.getBoundingClientRect();c._bounds=Fq.bounds({left:g.left-u.left+c.offset[0],right:g.right-u.right+c.offset[0],top:g.top-u.top+c.offset[1],bottom:g.bottom-u.bottom+c.offset[1]})}}cancel(){const c=
this.state;c.canceled||(c.canceled=!0,c._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(c){const g=this.config,u=this.state;if(null==c.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(c.buttons):-1===g.pointerButtons||g.pointerButtons===c.buttons)){var M=this.ctrl.setEventIds(c);
g.pointerCapture&&c.target.setPointerCapture(c.pointerId);M&&1<M.size&&u._pointerActive||(this.start(c),this.setupPointer(c),u._pointerId=kk(c),u._pointerActive=!0,this.computeValues(Vf(c)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==Qj(c)?(u._active=!1,this.setupScrollPrevention(c)):0<g.delay?(this.setupDelayTrigger(c),g.triggerAllEvents&&(this.compute(c),this.emit())):this.startPointerDrag(c))}}startPointerDrag(c){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(c);
this.emit()}pointerMove(c){const g=this.state,u=this.config;if(g._pointerActive&&(g.type!==c.type||c.timeStamp!==g.timeStamp)){var M=kk(c);if(void 0===g._pointerId||M===g._pointerId)M=Vf(c),document.pointerLockElement===c.target?g._delta=[c.movementX,c.movementY]:(g._delta=Qk.sub(M,g._values),this.computeValues(M)),Qk.addTo(g._movement,g._delta),this.compute(c),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(c)):u.preventScrollAxis&&!g._preventScroll?
g.axis&&(g.axis===u.preventScrollAxis||"xy"===u.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(c))):this.emit()}}pointerUp(c){this.ctrl.setEventIds(c);try{this.config.pointerCapture&&c.target.hasPointerCapture(c.pointerId)&&c.target.releasePointerCapture(c.pointerId)}catch(xa){}const g=this.state,u=this.config;if(g._active&&g._pointerActive){var M=kk(c);if(void 0===g._pointerId||M===g._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(c);var [ea,ma]=g._distance;g.tap=ea<=u.tapsThreshold&&ma<=u.tapsThreshold;if(g.tap&&u.filterTaps)g._force=!0;else{const [xa,Ma]=g.direction,[Za,hb]=g.velocity,[zb,Ob]=g.movement,[bc,yc]=u.swipe.velocity,[ic,Ac]=u.swipe.distance;g.elapsedTime<u.swipe.duration&&(Math.abs(Za)>bc&&Math.abs(zb)>ic&&(g.swipe[0]=xa),Math.abs(hb)>yc&&Math.abs(Ob)>Ac&&(g.swipe[1]=Ma))}this.emit()}}}pointerClick(c){!this.state.tap&&0<c.detail&&(c.preventDefault(),c.stopPropagation())}setupPointer(c){const g=this.config,
u=g.device;g.pointerLock&&c.currentTarget.requestPointerLock();g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,u,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,u,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,u,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(c){this.state._preventScroll&&c.cancelable&&
c.preventDefault()}setupScrollPrevention(c){this.state._preventScroll=!1;"persist"in c&&"function"===typeof c.persist&&c.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,c)}setupDelayTrigger(c){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(c)},this.config.delay)}keyDown(c){const g=Hx[c.key];if(g){const u=this.state,M=c.shiftKey?10:c.altKey?.1:1;this.start(c);u._delta=g(M);u._keyboardActive=!0;Qk.addTo(u._movement,u._delta);this.compute(c);this.emit()}}keyUp(c){c.key in Hx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(c),this.emit())}bind(c){const g=this.config.device;c(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(c(g,"change",this.pointerMove.bind(this)),c(g,"end",this.pointerUp.bind(this)),c(g,"cancel",this.pointerUp.bind(this)),c("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(c("key","down",this.keyDown.bind(this)),c("key","up",this.keyUp.bind(this)));this.config.filterTaps&&c("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Eq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var oy="constructor"in GestureEvent}catch(c){oy=!1}var wB=
oy,vs=Eq&&"ontouchstart"in window||Eq&&1<window.navigator.maxTouchPoints,Nx=Eq&&"ontouchstart"in window||Eq&&1<window.navigator.maxTouchPoints,py=Eq&&"onpointerdown"in window,tC=Eq&&"exitPointerLock"in window.document,qy={mouse:0,touch:0,pen:8},HB=pg(pg({},Fq),{},{device(c,g,{pointer:{touch:u=!1,lock:M=!1,mouse:ea=!1}={}}){this.pointerLock=M&&tC;return vs&&u?"touch":this.pointerLock?"mouse":py&&!ea?"pointer":vs?"touch":"mouse"},preventScrollAxis(c,g,{preventScroll:u}){this.preventScrollDelay="number"===
typeof u?u:u||void 0===u&&c?250:void 0;if(Nx&&!1!==u)return c?c:void 0!==u?"y":void 0},pointerCapture(c,g,{pointer:{capture:u=!0,buttons:M=1}={}}){this.pointerButtons=M;return!this.pointerLock&&"pointer"===this.device&&u},keys(c=!0){return c},threshold(c,g,{filterTaps:u=!1,tapsThreshold:M=3,axis:ea}){c=Qk.toVector(c,u?M:ea?1:0);this.filterTaps=u;this.tapsThreshold=M;return c},swipe({velocity:c=.5,distance:g=50,duration:u=250}={}){return{velocity:this.transform(Qk.toVector(c)),distance:this.transform(Qk.toVector(g)),
duration:u}},delay(c=0){switch(c){case !0:return 180;case !1:return 0;default:return c}},axisThreshold(c){return c?pg(pg({},qy),c):qy}}),IB=class extends Kx{constructor(...c){super(...c);Uh(this,"ingKey","pinching");Uh(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const c=this.state;c._touchIds=[];c.canceled=!1;c.cancel=this.cancel.bind(this);c.turns=0}computeOffset(){const {type:c,movement:g,lastOffset:u}=
this.state;this.state.offset="wheel"===c?Qk.add(g,u):[(1+g[0])*u[0],g[1]+u[1]]}computeMovement(){const {offset:c,lastOffset:g}=this.state;this.state.movement=[c[0]/g[0],c[1]-g[1]]}axisIntent(){const c=this.state,[g,u]=c._movement;if(!c.axis){const M=30*Math.abs(g)-Math.abs(u);0>M?c.axis="angle":0<M&&(c.axis="scale")}}restrictToAxis(c){this.config.lockDirection&&("scale"===this.state.axis?c[1]=0:"angle"===this.state.axis&&(c[0]=0))}cancel(){const c=this.state;c.canceled||setTimeout(()=>{c.canceled=
!0;c._active=!1;this.compute();this.emit()},0)}touchStart(c){this.ctrl.setEventIds(c);var g=this.state;const u=this.ctrl.touchIds;g._active&&g._touchIds.every(M=>u.has(M))||2>u.size||(this.start(c),g._touchIds=Array.from(u).slice(0,2),g=ak(c,g._touchIds),this.pinchStart(c,g))}pointerStart(c){if(null==c.buttons||1===c.buttons%2){this.ctrl.setEventIds(c);c.target.setPointerCapture(c.pointerId);var g=this.state,u=g._pointerEvents,M=this.ctrl.pointerIds;g._active&&Array.from(u.keys()).every(ea=>M.has(ea))||
(2>u.size&&u.set(c.pointerId,c),2>g._pointerEvents.size||(this.start(c),g=gl(...Array.from(u.values())),this.pinchStart(c,g)))}}pinchStart(c,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(c);this.emit()}touchMove(c){if(this.state._active){var g=ak(c,this.state._touchIds);this.pinchMove(c,g)}}pointerMove(c){var g=this.state._pointerEvents;g.has(c.pointerId)&&g.set(c.pointerId,c);this.state._active&&(g=gl(...Array.from(g.values())),this.pinchMove(c,
g))}pinchMove(c,g){const u=this.state,M=g.angle-u._values[1];let ea=0;270<Math.abs(M)&&(ea+=Math.sign(M));this.computeValues([g.distance,g.angle-360*ea]);u.origin=g.origin;u.turns=ea;u._movement=[u._values[0]/u._initial[0]-1,u._values[1]-u._initial[1]];this.compute(c);this.emit()}touchEnd(c){this.ctrl.setEventIds(c);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(c),this.emit())}pointerEnd(c){const g=this.state;this.ctrl.setEventIds(c);
try{c.target.releasePointerCapture(c.pointerId)}catch(u){}g._pointerEvents.has(c.pointerId)&&g._pointerEvents.delete(c.pointerId);g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(c),this.emit())}gestureStart(c){c.cancelable&&c.preventDefault();const g=this.state;g._active||(this.start(c),this.computeValues([c.scale,c.rotation]),g.origin=[c.clientX,c.clientY],this.compute(c),this.emit())}gestureMove(c){c.cancelable&&c.preventDefault();if(this.state._active){var g=this.state;this.computeValues([c.scale,
c.rotation]);g.origin=[c.clientX,c.clientY];var u=g._movement;g._movement=[c.scale-1,c.rotation];g._delta=Qk.sub(g._movement,u);this.compute(c);this.emit()}}gestureEnd(c){this.state._active&&(this.state._active=!1,this.compute(c),this.emit())}wheel(c){const g=this.config.modifierKey;if(!g||c[g])this.state._active?this.wheelChange(c):this.wheelStart(c),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(c){this.start(c);this.wheelChange(c)}wheelChange(c){"uv"in c||c.cancelable&&c.preventDefault();
const g=this.state;g._delta=[-jg(c)[1]/100*g.offset[0],0];Qk.addTo(g._movement,g._delta);this.state.origin=[c.clientX,c.clientY];this.compute(c);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){const g=this.config.device;g&&(c(g,"start",this[g+"Start"].bind(this)),c(g,"change",this[g+"Move"].bind(this)),c(g,"end",this[g+"End"].bind(this)),c(g,"cancel",this[g+"End"].bind(this)));c("wheel","",this.wheel.bind(this),{passive:!1})}},FB=pg(pg({},Lx),
{},{device(c,g,{shared:u,pointer:{touch:M=!1}={}}){if(u.target&&!vs&&wB)return"gesture";if(vs&&M)return"touch";if(Nx){if(py)return"pointer";if(vs)return"touch"}},bounds(c,g,{scaleBounds:u={},angleBounds:M={}}){const ea=xa=>{xa=Qi(u,xa);xa=Object.assign({},{min:-Infinity,max:Infinity},xa||{});return[xa.min,xa.max]},ma=xa=>{xa=Qi(M,xa);xa=Object.assign({},{min:-Infinity,max:Infinity},xa||{});return[xa.min,xa.max]};return"function"!==typeof u&&"function"!==typeof M?[ea(),ma()]:xa=>[ea(xa),ma(xa)]},threshold(c,
g,u){this.lockDirection="lock"===u.axis;return Qk.toVector(c,this.lockDirection?[.1,3]:0)},modifierKey(c){return void 0===c?"ctrlKey":c}}),EB=class extends us{constructor(...c){super(...c);Uh(this,"ingKey","moving")}move(c){this.config.mouseOnly&&"mouse"!==c.pointerType||(this.state._active?this.moveChange(c):this.moveStart(c),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(c){this.start(c);this.computeValues(Vf(c));this.compute(c);this.computeInitial();this.emit()}moveChange(c){if(this.state._active){var g=
Vf(c),u=this.state;u._delta=Qk.sub(g,u._values);Qk.addTo(u._movement,u._delta);this.computeValues(g);this.compute(c);this.emit()}}moveEnd(c){this.state._active&&(this.state._active=!1,this.compute(c),this.emit())}bind(c){c("pointer","change",this.move.bind(this));c("pointer","leave",this.moveEnd.bind(this))}},GB=pg(pg({},Fq),{},{mouseOnly:(c=!0)=>c}),CB=class extends us{constructor(...c){super(...c);Uh(this,"ingKey","scrolling")}scroll(c){this.state._active||this.start(c);this.scrollChange(c);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(c){c.cancelable&&c.preventDefault();const g=this.state;var u,M;const {scrollX:ea,scrollY:ma,scrollLeft:xa,scrollTop:Ma}=c.currentTarget;var Za=[null!==(u=null!==ea&&void 0!==ea?ea:xa)&&void 0!==u?u:0,null!==(M=null!==ma&&void 0!==ma?ma:Ma)&&void 0!==M?M:0];g._delta=Qk.sub(Za,g._values);Qk.addTo(g._movement,g._delta);this.computeValues(Za);this.compute(c);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){c("scroll",
"",this.scroll.bind(this))}},BB=Fq,DB=class extends us{constructor(...c){super(...c);Uh(this,"ingKey","wheeling")}wheel(c){this.state._active||this.start(c);this.wheelChange(c);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(c){const g=this.state;g._delta=jg(c);Qk.addTo(g._movement,g._delta);const [u,M]=g.overflow,[ea,ma]=g._delta,[xa,Ma]=g._direction;if(0>u&&0<ea&&0>xa||0<u&&0>ea&&0<xa)g._movement[0]=g._movementBound[0];if(0>M&&0<ma&&0>Ma||0<M&&0>ma&&0<Ma)g._movement[1]=g._movementBound[1];
this.compute(c);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){c("wheel","",this.wheel.bind(this))}},JB=Fq,AB=class extends us{constructor(...c){super(...c);Uh(this,"ingKey","hovering")}enter(c){this.config.mouseOnly&&"mouse"!==c.pointerType||(this.start(c),this.computeValues(Vf(c)),this.compute(c),this.emit())}leave(c){if(!this.config.mouseOnly||"mouse"===c.pointerType){var g=this.state;if(g._active){g._active=!1;var u=Vf(c);g._movement=g._delta=
Qk.sub(u,g._values);this.computeValues(u);this.compute(c);g.delta=g.movement;this.emit()}}}bind(c){c("pointer","enter",this.enter.bind(this));c("pointer","leave",this.leave.bind(this))}},yB=pg(pg({},Fq),{},{mouseOnly:(c=!0)=>c}),bv=new Map,cv=new Map,zB={key:"drag",engine:rB,resolver:HB},Ox={key:"hover",engine:AB,resolver:yB},xB={key:"move",engine:EB,resolver:GB},uC={key:"pinch",engine:IB,resolver:FB},YB={key:"scroll",engine:CB,resolver:BB},XB={key:"wheel",engine:DB,resolver:JB},fv=Mf(T(16)),$B={target(c){if(c)return()=>
"current"in c?c.current:c},enabled(c=!0){return c},window(c=Eq?window:void 0){return c},eventOptions({passive:c=!0,capture:g=!1}={}){return{passive:c,capture:g}},transform(c){return c}},aC=["target","eventOptions","window","enabled","transform"],Wx=class{constructor(c,g){Uh(this,"_listeners",new Set);this._ctrl=c;this._gestureKey=g}add(c,g,u,M,ea){const ma=this._listeners,xa=vk(g,u),Ma=pg(pg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ea);c.addEventListener(xa,M,Ma);const Za=
()=>{c.removeEventListener(xa,M,Ma);ma.delete(Za)};ma.add(Za);return Za}clean(){this._listeners.forEach(c=>c());this._listeners.clear()}},bC=class{constructor(){Uh(this,"_timeouts",new Map)}add(c,g,u=140,...M){this.remove(c);this._timeouts.set(c,window.setTimeout(g,u,...M))}remove(c){(c=this._timeouts.get(c))&&window.clearTimeout(c)}clean(){this._timeouts.forEach(c=>void window.clearTimeout(c));this._timeouts.clear()}},cC=class{constructor(c){Uh(this,"gestures",new Set);Uh(this,"_targetEventStore",
new Wx(this));Uh(this,"gestureEventStores",{});Uh(this,"gestureTimeoutStores",{});Uh(this,"handlers",{});Uh(this,"config",{});Uh(this,"pointerIds",new Set);Uh(this,"touchIds",new Set);Uh(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});c.drag&&Gj(this,"drag");c.wheel&&Gj(this,"wheel");c.scroll&&Gj(this,"scroll");c.move&&Gj(this,"move");c.pinch&&Gj(this,"pinch");c.hover&&Gj(this,"hover")}setEventIds(c){if("touches"in c)return this.touchIds=new Set(jk(c));if("pointerId"in c)return"pointerup"===
c.type||"pointercancel"===c.type?this.pointerIds.delete(c.pointerId):"pointerdown"===c.type&&this.pointerIds.add(c.pointerId),this.pointerIds}applyHandlers(c,g){this.handlers=c;this.nativeHandlers=g}applyConfig(c,g){this.config=xk(c,g,this.config)}clean(){this._targetEventStore.clean();for(const c of this.gestures)this.gestureEventStores[c].clean(),this.gestureTimeoutStores[c].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...c){var g=this.config.shared;
const u={};let M;if(g.target&&(M=g.target(),!M))return;if(g.enabled){for(const ea of this.gestures){const ma=this.config[ea],xa=Xx(u,ma.eventOptions,!!M);ma.enabled&&(new (bv.get(ea))(this,c,ea)).bind(xa)}g=Xx(u,g.eventOptions,!!M);for(const ea in this.nativeHandlers)g(ea,"",ma=>this.nativeHandlers[ea](pg(pg({},this.state.shared),{},{event:ma,args:c})),void 0,!0)}for(const ea in u)u[ea]=ui(...u[ea]);if(!M)return u;for(const ea in u){const {device:ma,capture:xa,passive:Ma}=nl(ea);this._targetEventStore.add(M,
ma,"",u[ea],{capture:xa,passive:Ma})}}},Xx=(c,g,u)=>(M,ea,ma,xa={},Ma=!1)=>{var Za,hb;const zb=null!==(Za=xa.capture)&&void 0!==Za?Za:g.capture;xa=null!==(hb=xa.passive)&&void 0!==hb?hb:g.passive;M=Ma?M:hm(M,ea,zb);u&&xa&&(M+="Passive");c[M]=c[M]||[];c[M].push(ma)},dC=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,eC=Mf(T(16)),gv=Mf(T(16)),Zx=Mf(T(16)),Yx=Mf(T(16)),WB=Mf(T(16)),fC=Mf(T(16)),ZB=Mf(T(16)),UB=Mf(T(16)),VB={none:(c,g)=>"none",["default"]:(c,g)=>"default",pointer:(c,g)=>"pointer",crosshair:(c,
g)=>"crosshair",move:(c,g)=>"move",wait:(c,g)=>"wait",progress:(c,g)=>"progress",grab:(c,g)=>Vg('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
c,g),grabbing:(c,g)=>Vg("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
c,g),text:(c,g)=>Vg("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
c,g),["resize-edge"]:(c,g)=>Vg("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",c,g),["resize-corner"]:(c,g)=>Vg("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
c,g),["ew-resize"]:(c,g)=>Vg("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",c,g),["ns-resize"]:(c,g)=>Vg("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
c+90,g),["nesw-resize"]:(c,g)=>Vg("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",c,g),["nwse-resize"]:(c,g)=>Vg("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
c+90,g),rotate:(c,g)=>Vg('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+45,g),["nwse-rotate"]:(c,g)=>Vg('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c,g),["nesw-rotate"]:(c,g)=>Vg('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+90,g),["senw-rotate"]:(c,g)=>Vg('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+180,g),["swne-rotate"]:(c,g)=>Vg('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+270,g)},SB=Mf(T(16));Mf(T(16));var Ux=T(16),Vx=Mf(T(16));if(!T(16).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!yf)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var RB=T(25),ws=Mf(T(16)),Tx="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,QB=1E4,NB=function(c){var g="function"===typeof Symbol&&Symbol.iterator,u=g&&c[g],M=0;if(u)return u.call(c);if(c&&"number"===typeof c.length)return{next:function(){c&&M>=
c.length&&(c=void 0);return{value:c&&c[M++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},Sx=Tx?Pg(Tx):Aj(),OB=Sx.addReactionToTrack,PB=Sx.recordReactionAsCommitted,Rx=function(c,g){var u="function"===typeof Symbol&&c[Symbol.iterator];if(!u)return c;c=u.call(c);var M,ea=[];try{for(;(void 0===g||0<g--)&&!(M=c.next()).done;)ea.push(M.value)}catch(xa){var ma={error:xa}}finally{try{M&&!M.done&&(u=c["return"])&&u.call(c)}finally{if(ma)throw ma.error;}}return ea},
MB=function(){return function(){}}(),rr=T(16),Qx="function"===typeof Symbol&&Symbol.for,Px=Qx?Symbol.for("react.forward_ref"):"function"===typeof rr.forwardRef&&(0,rr.forwardRef)(function(c){return null}).$$typeof,No=Qx?Symbol.for("react.memo"):"function"===typeof rr.memo&&(0,rr.memo)(function(c){return null}).$$typeof,so={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};mk.displayName="Observer";T(16);T(16);T(16);(function(c){c||=jl;Lc({reactionScheduler:c})})(RB.unstable_batchedUpdates);
var TB=Mf(T(16));Rb=T(611);var gp=TB.forwardRef(function(c,g){var {children:u,opacity:M,centered:ea,className:ma=""}=c,xa=hg(c,["children","opacity","centered","className"]);return(0,Rb.jsx)(mk,{children:()=>(0,Rb.jsx)("div",{ref:g,className:`tl-positioned-div ${ma}`,style:M?{opacity:M}:void 0,draggable:!1,children:(0,Rb.jsx)("div",wf(Fe({className:`tl-positioned-inner ${ea?"tl-centered":""}`},xa),{children:u}))})})}),LB=Mf(T(16));Rb=T(611);var $n=LB.forwardRef(function(c,g){var {id:u,className:M=
"",style:ea,children:ma}=c,xa=hg(c,["id","className","style","children"]);return(0,Rb.jsx)(mk,{children:()=>(0,Rb.jsx)("svg",{ref:g,style:ea,className:`tl-positioned-svg ${M}`,children:(0,Rb.jsx)("g",wf(Fe({id:u,className:"tl-centered-g"},xa),{children:ma}))})})}),ys=Mf(T(16)),dv=Mf(T(16)),xs=Mf(T(16));Rb=T(611);var sr=Xe(function(c){var {id:g,bounds:u,zIndex:M,rotation:ea=0,className:ma="",children:xa}=c;c=hg(c,"id bounds zIndex rotation className children".split(" "));const Ma=xs.useRef(null);xs.useLayoutEffect(()=>
{Ma.current.style.transform=`translate(
        calc(${u.minX}px - var(--tl-padding)),
        calc(${u.minY}px - var(--tl-padding)))
        rotate(${ea+(u.rotation||0)}rad)`},[u.minX,u.minY,ea,u.rotation]);xs.useLayoutEffect(()=>{const Za=Ma.current;Za.style.width=`calc(${Math.floor(u.width)}px + (var(--tl-padding) * 2))`;Za.style.height=`calc(${Math.floor(u.height)}px + (var(--tl-padding) * 2))`},[u.width,u.height]);xs.useLayoutEffect(()=>{const Za=Ma.current;void 0!==M&&(Za.style.zIndex=M.toString())},[M]);return(0,Rb.jsx)("div",wf(Fe({id:g,ref:Ma,className:`tl-positioned ${ma}`,"aria-label":"container"},c),{children:xa}))}),
ev=Mf(T(16));Rb=T(611);var tr=c=>c.stopPropagation(),hC=Xe(function({shapes:c,hidden:g,bounds:u,rotation:M=0}){const {components:{ContextBar:ea},viewport:{bounds:ma,camera:{point:[xa,Ma],zoom:Za}}}=Ug(),hb=ev.useRef(null);var zb=Ib.getRotatedBounds(u,M);zb=Ib.multiplyBounds(zb,Za);Rj(hb,u,M,10003);if(!ea)throw Error("Expected a ContextBar component.");const Ob=Ib.translateBounds(zb,[xa*Za,Ma*Za]);return(0,Rb.jsx)("div",{ref:hb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",
onPointerMove:tr,onPointerUp:tr,onPointerDown:tr,children:(0,Rb.jsx)(ea,{hidden:g,shapes:c,bounds:u,offsets:{left:Ob.minX,right:ma.width-Ob.maxX,top:Ob.minY,bottom:ma.height-Ob.maxY,width:Ob.width,height:Ob.height},scaledBounds:zb,rotation:M})})}),ry=Mf(T(16));Rb=T(611);var nC=Xe(function({children:c}){const g=ry.useRef(null),{viewport:u}=Ug();ry.useEffect(()=>$c(()=>{const M=g.current;if(M){var {zoom:ea,point:ma}=u.camera;M.style.setProperty("transform",`scale(${ea}) translate3d(${ma[0]}px, ${ma[1]}px, 0)`)}}),
[]);return(0,Rb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:c})});Rb=T(611);var sy=Xe(function({shape:c,isHovered:g=!1,isSelected:u=!1,isBinding:M=!1,isEditing:ea=!1,meta:ma}){const {bounds:xa,props:{scale:Ma,rotation:Za=0},ReactIndicator:hb}=c;return(0,Rb.jsx)(sr,{"data-type":"Indicator",bounds:xa,rotation:Za,scale:Ma,zIndex:ea?1E3:1E4,children:(0,Rb.jsx)($n,{children:(0,Rb.jsx)("g",{className:`tl-indicator-container ${u?"tl-selected":"tl-hovered"}`,children:(0,Rb.jsx)(hb,{isEditing:ea,
isBinding:M,isHovered:g,isSelected:u,isErasing:!1,meta:ma})})})})}),vC=Mf(T(16));Rb=T(611);var wC=Xe(function({bounds:c,hidden:g,shapes:u,rotation:M=0,detail:ea="size"}){const {components:{SelectionDetail:ma},viewport:{camera:{zoom:xa}}}=Ug(),Ma=vC.useRef(null),Za=Ib.multiplyBounds(c,xa);Rj(Ma,c,M,10003);if(!ma)throw Error("Expected a SelectionDetail component.");return(0,Rb.jsx)("div",{ref:Ma,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,Rb.jsx)(ma,
{shapes:u,bounds:c,scaledBounds:Za,zoom:xa,rotation:M,detail:ea})})}),ty=Mf(T(16));Rb=T(611);var xC=Xe(function({shape:c,isHovered:g=!1,isSelected:u=!1,isBinding:M=!1,isErasing:ea=!1,isEditing:ma=!1,onEditingEnd:xa,asset:Ma,meta:Za,zIndex:hb}){const {bounds:zb,props:{rotation:Ob,scale:bc},ReactComponent:yc}=c,ic=Bj(c);return(0,Rb.jsx)(sr,{"data-shape-id":c.id,zIndex:hb,"data-type":"Shape",bounds:zb,rotation:Ob,scale:bc,children:(0,Rb.jsx)(yc,{meta:Za,isEditing:ma,isBinding:M,isHovered:g,isSelected:u,
isErasing:ea,events:ic,asset:Ma,onEditingEnd:xa})})});Rb=T(611);var uy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],vy=Xe(function({size:c}){const {viewport:{camera:{point:g,zoom:u}}}=Ug();return(0,Rb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,Rb.jsx)("defs",{children:uy.map(([M,ea,ma],xa)=>{ma=ma*c*u;var Ma=g[0]*u,Za=g[1]*u;Ma=0<Ma?Ma%ma:ma+Ma%ma;Za=0<Za?Za%ma:ma+Za%ma;M=u<ea?md(u,[M,ea],[0,1]):1;return(0,Rb.jsx)("pattern",{id:`grid-${xa}`,
width:ma,height:ma,patternUnits:"userSpaceOnUse",children:(0,Rb.jsx)("circle",{className:"tl-grid-dot",cx:Ma,cy:Za,r:1.5,opacity:M})},`grid-pattern-${xa}`)})}),uy.map((M,ea)=>(0,Rb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ea})`},`grid-rect-${ea}`))]})});Rb=T(611);var wy=Xe(function({bounds:c}){const g=Ch("background");return(0,Rb.jsx)($n,wf(Fe({},g),{children:(0,Rb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,c.width),height:Math.max(1,c.height),pointerEvents:"all",rx:8,
ry:8})}))});T(16);Rb=T(611);var xy=Xe(function({scaledBounds:c,shapes:g,detail:u="size",rotation:M=0}){var ea;const ma=1===g.length?M:null!=(ea=c.rotation)?ea:0;return(0,Rb.jsx)(gp,{centered:!0,children:(0,Rb.jsx)("div",{className:"tl-bounds-detail",style:{transform:ma<Pe||ma>3*Pe?`rotate(${ma}rad) translateY(${c.height/2+24}px)`:`rotate(${Math.PI+ma}rad) translateY(${c.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${fb.dist(g[0].props.handles.start.point,
g[0].props.handles.end.point).toFixed()}`:"size"===u?`${c.width.toFixed()} \xD7 ${c.height.toFixed()}`:`\u2220${Wg.radiansToDegrees(Wg.clampRadians(M)).toFixed()}\xB0`})})});Rb=T(611);var yC={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},yt=Xe(function({cx:c,cy:g,size:u,targetSize:M,corner:ea,isHidden:ma}){const xa=Ch(ea);return(0,Rb.jsxs)("g",wf(Fe({opacity:ma?0:1},xa),{children:[(0,Rb.jsx)("rect",{className:"tl-transparent "+
(ma?"":yC[ea]),"aria-label":`${ea} target`,x:c-1.25*M,y:g-1.25*M,width:2.5*M,height:2.5*M,pointerEvents:ma?"none":"all"}),(0,Rb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ea} handle`,x:c-u/2,y:g-u/2,width:u,height:u,pointerEvents:"none"})]}))});Rb=T(611);var zC={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},wt=Xe(function({x:c,y:g,width:u,height:M,targetSize:ea,edge:ma,disabled:xa,isHidden:Ma}){const Za=Ch(ma);return(0,Rb.jsx)("rect",
Fe({pointerEvents:Ma||xa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ma?"":zC[ma]),"aria-label":`${ma} target`,opacity:Ma?0:1,x:c-ea,y:g-ea,width:Math.max(1,u+2*ea),height:Math.max(1,M+2*ea)},Za))});T(16);Rb=T(611);Xe(function({cx:c,cy:g,size:u,targetSize:M,isHidden:ea}){const ma=Ch("rotate");return(0,Rb.jsxs)("g",wf(Fe({opacity:ea?0:1},ma),{children:[(0,Rb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:c,cy:g,r:M,pointerEvents:ea?"none":"all"}),(0,Rb.jsx)("circle",
{className:"tl-rotate-handle","aria-label":"rotate handle",cx:c,cy:g,r:u/2,pointerEvents:"none"})]}))});T(16);Rb=T(611);var xt=Xe(function({cx:c,cy:g,targetSize:u,corner:M,isHidden:ea}){const ma=Ch(M);return(0,Rb.jsx)("g",wf(Fe({opacity:ea?0:1},ma),{children:(0,Rb.jsx)("rect",{className:"tl-transparent","aria-label":`${M} target`,x:c-2.5*u,y:g-2.5*u,width:3*u,height:3*u,pointerEvents:ea?"none":"all"})}))});Rb=T(611);var gy=Xe(function({bounds:c,showResizeHandles:g,showRotateHandles:u,shapes:M}){var ea,
ma,xa=rf();let {width:Ma,height:Za}=c;var hb=xa.viewport.camera.zoom;c=8/hb;hb=6/hb;M=1===M.length?M[0].canResize:[!0,!0];xa=null!=(ma=null==(ea=xa.editingShape)?void 0:ea.props.borderRadius)?ma:0;return(0,Rb.jsxs)($n,{children:[(0,Rb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ma,1),height:Math.max(Za,1),rx:xa,ry:xa,pointerEvents:"none"}),(0,Rb.jsx)(wt,{x:2*hb,y:0,width:Ma-4*hb,height:0,targetSize:hb,edge:"top_edge",disabled:!M[1],isHidden:!g}),(0,Rb.jsx)(wt,{x:Ma,y:2*hb,width:0,height:Za-
4*hb,targetSize:hb,edge:"right_edge",disabled:!M[0],isHidden:!g}),(0,Rb.jsx)(wt,{x:2*hb,y:Za,width:Ma-4*hb,height:0,targetSize:hb,edge:"bottom_edge",disabled:!M[1],isHidden:!g}),(0,Rb.jsx)(wt,{x:0,y:2*hb,width:0,height:Za-4*hb,targetSize:hb,edge:"left_edge",disabled:!M[0],isHidden:!g}),(0,Rb.jsx)(xt,{cx:0,cy:0,targetSize:hb,corner:"top_left_resize_corner",isHidden:!u}),(0,Rb.jsx)(xt,{cx:Ma+2*hb,cy:0,targetSize:hb,corner:"top_right_resize_corner",isHidden:!u}),(0,Rb.jsx)(xt,{cx:Ma+2*hb,cy:Za+2*hb,
targetSize:hb,corner:"bottom_right_resize_corner",isHidden:!u}),(0,Rb.jsx)(xt,{cx:0,cy:Za+2*hb,targetSize:hb,corner:"bottom_left_resize_corner",isHidden:!u}),(null==M?void 0:M.every(zb=>zb))&&(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)(yt,{cx:0,cy:0,size:c,targetSize:hb,corner:"top_left_corner",isHidden:!g}),(0,Rb.jsx)(yt,{cx:Ma,cy:0,size:c,targetSize:hb,corner:"top_right_corner",isHidden:!g}),(0,Rb.jsx)(yt,{cx:Ma,cy:Za,size:c,targetSize:hb,corner:"bottom_right_corner",isHidden:!g}),(0,Rb.jsx)(yt,
{cx:0,cy:Za,size:c,targetSize:hb,corner:"bottom_left_corner",isHidden:!g})]})]})});Rb=T(611);var dy=Xe(function({bounds:c}){return(0,Rb.jsx)(sr,{bounds:c,zIndex:10001,children:(0,Rb.jsx)($n,{children:(0,Rb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:c.width,height:c.height})})})});Rb=T(611);Xe(function(){return(0,Rb.jsx)(Rb.Fragment,{})});Rb=T(611);var ey=Xe(function({shape:c,handle:g,id:u}){c=lk(c,u);const [M,ea]=g.point;return(0,Rb.jsxs)("g",wf(Fe({className:"tl-handle","aria-label":"handle"},
c),{transform:`translate(${M}, ${ea})`,children:[(0,Rb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Rb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),fy=Mf(T(16));Rb=T(611);var hv=Xe(function({direction:c}){const {viewport:{bounds:g}}=Ug(),u=fy.useRef(null);fy.useLayoutEffect(()=>{const M=u.current;if(M){var ea=[g.width/2,g.height/2],ma=Ib.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[xa,Ma]]of ma)ma=b(ea,c,xa,Ma),ma.didIntersect&&
(ma=ma.points[0],M.style.setProperty("transform",`translate(${ma[0]-6}px,${ma[1]-6}px) rotate(${fb.toAngle(c)}rad)`))}},[c,g]);return(0,Rb.jsx)("div",{ref:u,className:"tl-direction-indicator",children:(0,Rb.jsx)("svg",{height:12,width:12,children:(0,Rb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});Rb=T(611);var jC=Xe(function({id:c,className:g,brush:u,shapes:M,assets:ea,bindingShapes:ma,editingShape:xa,hoveredShape:Ma,selectionBounds:Za,selectedShapes:hb,erasingShapes:zb,selectionDirectionHint:Ob,
cursor:bc="default",cursorRotation:yc=0,selectionRotation:ic=0,showSelection:Ac=!0,showHandles:tc=!0,showSelectionRotation:Vb=!1,showResizeHandles:wc=!0,showRotateHandles:Uc=!0,showSelectionDetail:Nc=!0,showContextBar:ed=!0,showGrid:ge=!0,gridSize:Pd=8,onEditingEnd:we=bB,theme:mf=qg,children:Le}){var hf;const ue=ys.useRef(null),{viewport:Nd,components:kd,meta:hd}=Ug(),td=rf(),zd=ys.useCallback(He=>{td.inputs.updateContainerOffset([He.minX,He.minY])},[]);Al(mf,c);Di(ue);bi(ue,Nd,zd);yk(ue);ni();mj(ue,
bc,yc);Ih(ue);oj(ue);c=Pj();const Kd=(bc=1===(null==hb?void 0:hb.length)&&hb[0])&&"handles"in bc.props?null==hb?void 0:hb[0]:void 0,Ce=ys.useMemo(()=>new Set(hb||[]),[hb]),Ee=ys.useMemo(()=>new Set(zb||[]),[zb]);return(0,Rb.jsxs)("div",{ref:ue,className:`tl-container ${null!=g?g:""}`,children:[(0,Rb.jsxs)("div",wf(Fe({tabIndex:-1,className:"tl-absolute tl-canvas"},c),{children:[ge&&kd.Grid&&(0,Rb.jsx)(kd.Grid,{size:Pd}),(0,Rb.jsxs)(nC,{children:[kd.SelectionBackground&&hb&&Za&&Ac&&(0,Rb.jsx)(sr,{"data-type":"SelectionBackground",
bounds:Za,zIndex:2,children:(0,Rb.jsx)(kd.SelectionBackground,{shapes:hb,bounds:Za,showResizeHandles:wc,showRotateHandles:Uc})}),M&&M.map((He,Ff)=>(0,Rb.jsx)(xC,{shape:He,asset:ea&&He.props.assetId?ea[He.props.assetId]:void 0,isEditing:He===xa,isHovered:He===Ma,isBinding:null==ma?void 0:ma.includes(He),isSelected:Ce.has(He),isErasing:Ee.has(He),meta:hd,zIndex:1E3+Ff,onEditingEnd:we},"shape_"+He.id)),!td.isIn("select.pinching")&&(null==hb?void 0:hb.map(He=>(0,Rb.jsx)(sy,{shape:He,isEditing:He===xa,
isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+He.id))),Ma&&td.isInAny("creating")&&(0,Rb.jsx)(sy,{shape:Ma},"hovered_indicator_"+Ma.id),u&&kd.Brush&&(0,Rb.jsx)(kd.Brush,{bounds:u}),hb&&Za&&(0,Rb.jsxs)(Rb.Fragment,{children:[Ac&&kd.SelectionForeground&&(0,Rb.jsx)(sr,{"data-type":"SelectionForeground",bounds:Za,zIndex:xa&&hb.includes(xa)?1002:10002,children:(0,Rb.jsx)(kd.SelectionForeground,{shapes:hb,bounds:Za,showResizeHandles:wc,showRotateHandles:Uc})}),tc&&Kd&&kd.Handle&&(0,Rb.jsx)(sr,
{"data-type":"onlySelectedShapeWithHandles",bounds:Za,zIndex:10003,children:(0,Rb.jsx)($n,{children:Object.entries(null!=(hf=Kd.props.handles)?hf:{}).map(([He,Ff])=>ys.createElement(kd.Handle,{key:`${Ff.id}_handle_${Ff.id}`,shape:Kd,handle:Ff,id:He}))})}),hb&&kd.SelectionDetail&&(0,Rb.jsx)(wC,{shapes:hb,bounds:Za,detail:Vb?"rotation":"size",hidden:!Nc,rotation:ic},"detail"+hb.map(He=>He.id).join("")),hb&&kd.ContextBar&&(0,Rb.jsx)(hC,{shapes:hb,hidden:!ed,bounds:1===hb.length?hb[0].bounds:Za,rotation:1===
hb.length?hb[0].props.rotation:0},"context"+hb.map(He=>He.id).join(""))]})]}),Ob&&Za&&hb&&(0,Rb.jsx)(hv,{direction:Ob,bounds:Za,shapes:hb}),(0,Rb.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),Le]})}),by=Mf(T(16)),cy=Mf(T(16));Rb=T(611);Xe(function({children:c}){const g=cy.useRef(null),{viewport:u}=Ug();cy.useEffect(()=>$c(()=>{const M=g.current;if(M){var {zoom:ea,point:ma}=u.camera;M.style.setProperty("transform",`scale(${ea}) translateX(${ma[0]}px) translateY(${ma[1]}px)`)}}),[]);return(0,Rb.jsx)("svg",
{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,Rb.jsx)("g",{ref:g,pointerEvents:"none",children:c})})});Rb=T(611);var kC=Xe(function(c){const g=Bm(c),u=zj(c.id);zk(g,c);Cl(g,c);return(0,Rb.jsx)(u.Provider,{value:g,children:c.children})});Rb=T(611);var lC=Xe(function({id:c="noid",viewport:g,inputs:u,callbacks:M=qg,meta:ea=qg,components:ma=qg,children:xa}){const [Ma,Za]=by.useState(()=>{const {Brush:zb,ContextBar:Ob,DirectionIndicator:bc,Grid:yc,Handle:ic,SelectionBackground:Ac,
SelectionDetail:tc,SelectionForeground:Vb}=ma;return{id:c,viewport:g,inputs:u,callbacks:M,meta:ea,components:{Brush:null===zb?void 0:dy,ContextBar:Ob,DirectionIndicator:null===bc?void 0:hv,Grid:null===yc?void 0:vy,Handle:null===ic?void 0:ey,SelectionBackground:null===Ac?void 0:wy,SelectionDetail:null===tc?void 0:xy,SelectionForeground:null===Vb?void 0:gy}}});by.useLayoutEffect(()=>{const {Brush:zb,ContextBar:Ob,DirectionIndicator:bc,Grid:yc,Handle:ic,SelectionBackground:Ac,SelectionDetail:tc,SelectionForeground:Vb}=
ma;return $c(()=>{Za({id:c,viewport:g,inputs:u,callbacks:M,meta:ea,components:{Brush:null===zb?void 0:dy,ContextBar:Ob,DirectionIndicator:null===bc?void 0:hv,Grid:null===yc?void 0:vy,Handle:null===ic?void 0:ey,SelectionBackground:null===Ac?void 0:wy,SelectionDetail:null===tc?void 0:xy,SelectionForeground:null===Vb?void 0:gy}})})},[]);const hb=sh(c);return(0,Rb.jsx)(hb.Provider,{value:Ma,children:xa})});Rb=T(611);Rb=T(611);var mC=Xe(function(c){const g=rf();return(0,Rb.jsx)(Tm,Fe({viewport:g.viewport,
inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,
showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},c))});Rb=T(611);var ut=Mf(T(16)),vt=Mf(T(16));Rb=T(611);Rb=T(611);var AC="object-compact object-expanded block block-search page page-search references-hide references-show whiteboard whiteboard-element select-cursor text connector".split(" "),zi=c=>{var {name:g,className:u}=c;c=hg(c,["name","className"]);
const M=AC.includes(g)?"tie tie-":"ti ti-";return(0,Rb.jsx)("i",Fe({className:[M+g,u].join(" ")},c))};Rb=T(611);var Yn=T(16),iC=T(16),to=T(16),zt=T(16),jv=T(16),kv=T(16),BC=T(25),um=T(16),ur=(0,um.forwardRef)((c,g)=>{var {children:u}=c;c=hg(c,["children"]);const M=um.Children.toArray(u),ea=M.find(Xl);if(ea){const ma=ea.props.children;u=M.map(xa=>xa===ea?1<um.Children.count(ma)?um.Children.only(null):(0,um.isValidElement)(ma)?ma.props.children:null:xa);return(0,um.createElement)(lv,Uf({},c,{ref:g}),
(0,um.isValidElement)(ma)?(0,um.cloneElement)(ma,void 0,u):null)}return(0,um.createElement)(lv,Uf({},c,{ref:g}),u)});ur.displayName="Slot";var lv=(0,um.forwardRef)((c,g)=>{const {children:u}=c;c=hg(c,["children"]);return(0,um.isValidElement)(u)?(0,um.cloneElement)(u,wf(Fe({},oh(c,u.props)),{ref:Ol(g,u.ref)})):1<um.Children.count(u)?um.Children.only(null):null});lv.displayName="SlotClone";var CC=({children:c})=>(0,um.createElement)(um.Fragment,null,c),cl="a button div h2 h3 img li nav ol p span svg ul".split(" ").reduce((c,
g)=>{const u=(0,kv.forwardRef)((M,ea)=>{var {asChild:ma}=M;M=hg(M,["asChild"]);ma=ma?ur:g;(0,kv.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,kv.createElement)(ma,Uf({},M,{ref:ea}))});u.displayName=`Primitive.${g}`;return wf(Fe({},c),{[g]:u})},{}),Tg=T(16),Oo=Mf(T(16)),yy=T(16),DC=(0,yy.createContext)(void 0),on=T(16),EC=T(16),hy,oC=(0,on.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),my=(0,on.forwardRef)((c,g)=>{const {disableOutsidePointerEvents:u=
!1,onEscapeKeyDown:M,onPointerDownOutside:ea,onFocusOutside:ma,onInteractOutside:xa,onDismiss:Ma}=c,Za=hg(c,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),hb=(0,on.useContext)(oC),[zb,Ob]=(0,on.useState)(null),[,bc]=(0,on.useState)({});g=ki(g,wc=>Ob(wc));var yc=Array.from(hb.layers),[ic]=[...hb.layersWithOutsidePointerEventsDisabled].slice(-1);ic=yc.indexOf(ic);const Ac=zb?yc.indexOf(zb):-1;yc=0<hb.layersWithOutsidePointerEventsDisabled.size;
const tc=Ac>=ic;ic=Kk(wc=>{const Uc=wc.target,Nc=[...hb.branches].some(ed=>ed.contains(Uc));tc&&!Nc&&(null===ea||void 0===ea||ea(wc),null===xa||void 0===xa||xa(wc),wc.defaultPrevented||null===Ma||void 0===Ma||Ma())});const Vb=Ck(wc=>{const Uc=wc.target;[...hb.branches].some(Nc=>Nc.contains(Uc))||(null===ma||void 0===ma||ma(wc),null===xa||void 0===xa||xa(wc),wc.defaultPrevented||null===Ma||void 0===Ma||Ma())});ej(wc=>{Ac===hb.layers.size-1&&(null===M||void 0===M||M(wc),!wc.defaultPrevented&&Ma&&(wc.preventDefault(),
Ma()))});(0,on.useEffect)(()=>{if(zb)return u&&(0===hb.layersWithOutsidePointerEventsDisabled.size&&(hy=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),hb.layersWithOutsidePointerEventsDisabled.add(zb)),hb.layers.add(zb),Ql(),()=>{u&&1===hb.layersWithOutsidePointerEventsDisabled.size&&(document.body.style.pointerEvents=hy)}},[zb,u,hb]);(0,on.useEffect)(()=>()=>{zb&&(hb.layers.delete(zb),hb.layersWithOutsidePointerEventsDisabled.delete(zb),Ql())},[zb,hb]);(0,on.useEffect)(()=>
{const wc=()=>bc({});document.addEventListener("dismissableLayer.update",wc);return()=>document.removeEventListener("dismissableLayer.update",wc)},[]);return(0,on.createElement)(cl.div,Uf({},Za,{ref:g,style:Fe({pointerEvents:yc?tc?"auto":"none":void 0},c.style),onFocusCapture:Ag(c.onFocusCapture,Vb.onFocusCapture),onBlurCapture:Ag(c.onBlurCapture,Vb.onBlurCapture),onPointerDownCapture:Ag(c.onPointerDownCapture,ic.onPointerDownCapture)}))}),sC=T(16),iv=0,Mp=T(16),jy={bubbles:!1,cancelable:!0},iy=(0,Mp.forwardRef)((c,
g)=>{const {loop:u=!1,trapped:M=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ma}=c;c=hg(c,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [xa,Ma]=(0,Mp.useState)(null),Za=Jj(ea),hb=Jj(ma),zb=(0,Mp.useRef)(null);g=ki(g,yc=>Ma(yc));const Ob=(0,Mp.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Mp.useEffect)(()=>{if(M){let yc=function(Ac){!Ob.paused&&xa&&(Ac=Ac.target,xa.contains(Ac)?zb.current=Ac:Wf(zb.current,{select:!0}))},ic=function(Ac){!Ob.paused&&
xa&&(xa.contains(Ac.relatedTarget)||Wf(zb.current,{select:!0}))};document.addEventListener("focusin",yc);document.addEventListener("focusout",ic);return()=>{document.removeEventListener("focusin",yc);document.removeEventListener("focusout",ic)}}},[M,xa,Ob.paused]);(0,Mp.useEffect)(()=>{if(xa){ly.add(Ob);const yc=document.activeElement;if(!xa.contains(yc)){const ic=new CustomEvent("focusScope.autoFocusOnMount",jy);xa.addEventListener("focusScope.autoFocusOnMount",Za);xa.dispatchEvent(ic);ic.defaultPrevented||
(Wk(pl(Kg(xa)),{select:!0}),document.activeElement===yc&&Wf(xa))}return()=>{xa.removeEventListener("focusScope.autoFocusOnMount",Za);setTimeout(()=>{const ic=new CustomEvent("focusScope.autoFocusOnUnmount",jy);xa.addEventListener("focusScope.autoFocusOnUnmount",hb);xa.dispatchEvent(ic);ic.defaultPrevented||Wf(null!==yc&&void 0!==yc?yc:document.body,{select:!0});xa.removeEventListener("focusScope.autoFocusOnUnmount",hb);ly.remove(Ob)},0)}}},[xa,Za,hb,Ob]);const bc=(0,Mp.useCallback)(yc=>{if((u||M)&&
!Ob.paused){var ic=document.activeElement;if("Tab"===yc.key&&!yc.altKey&&!yc.ctrlKey&&!yc.metaKey&&ic){const tc=yc.currentTarget;var Ac=tc;const Vb=Kg(Ac),wc=Rl(Vb,Ac);Ac=Rl(Vb.reverse(),Ac);const [Uc,Nc]=[wc,Ac];Uc&&Nc?yc.shiftKey||ic!==Nc?yc.shiftKey&&ic===Uc&&(yc.preventDefault(),u&&Wf(Nc,{select:!0})):(yc.preventDefault(),u&&Wf(Uc,{select:!0})):ic===tc&&yc.preventDefault()}}},[u,M,Ob.paused]);return(0,Mp.createElement)(cl.div,Uf({tabIndex:-1},c,{ref:g,onKeyDown:bc}))}),ly=function(){let c=[];
return{add(g){const u=c[0];g===u||null!==u&&void 0!==u&&u.pause();c=Si(c,g);c.unshift(g)},remove(g){var u;c=Si(c,g);null===(u=c[0])||void 0===u||u.resume()}}}(),ky=Mf(T(16)),rC=T(16),nn=(null===globalThis||void 0===globalThis?0:globalThis.document)?rC.useLayoutEffect:()=>{},qC=ky["useId".toString()]||(()=>{}),pC=0,vm=T(16),FC=(c,g,u)=>mi(void 0,null,function*(){const {placement:M="bottom",strategy:ea="absolute",middleware:ma=[],platform:xa}=u,Ma=yield null==xa.isRTL?void 0:xa.isRTL(g);let Za=yield xa.getElementRects({reference:c,
floating:g,strategy:ea}),{x:hb,y:zb}=Ik(Za,M,Ma),Ob=M,bc={},yc=0;for(let ic=0;ic<ma.length;ic++){const {name:Ac,fn:tc}=ma[ic],{x:Vb,y:wc,data:Uc,reset:Nc}=yield tc({x:hb,y:zb,initialPlacement:M,placement:Ob,strategy:ea,middlewareData:bc,rects:Za,platform:xa,elements:{reference:c,floating:g}});hb=null!=Vb?Vb:hb;zb=null!=wc?wc:zb;bc=wf(Fe({},bc),{[Ac]:Fe(Fe({},bc[Ac]),Uc)});Nc&&50>=yc&&(yc++,"object"==typeof Nc&&(Nc.placement&&(Ob=Nc.placement),Nc.rects&&(Za=!0===Nc.rects?yield xa.getElementRects({reference:c,
floating:g,strategy:ea}):Nc.rects),{x:hb,y:zb}=Ik(Za,Ob,Ma)),ic=-1)}return{x:hb,y:zb,placement:Ob,strategy:ea,middlewareData:bc}}),mv=Math.min,nv=Math.max,zy=c=>({name:"arrow",options:c,fn(g){return mi(this,null,function*(){const {element:u,padding:M=0}=null!=c?c:{},{x:ea,y:ma,placement:xa,rects:Ma,platform:Za}=g;if(null==u)return{};const hb=qm(M),zb={x:ea,y:ma},Ob=Ri(xa),bc=xa.split("-")[1],yc=il(Ob);var ic=yield Za.getDimensions(u);const Ac="y"===Ob?"top":"left",tc="y"===Ob?"bottom":"right";var Vb=
Ma.reference[yc]+Ma.reference[Ob]-zb[Ob]-Ma.floating[yc];const wc=zb[Ob]-Ma.reference[Ob];var Uc=yield null==Za.getOffsetParent?void 0:Za.getOffsetParent(u);let Nc=Uc?"y"===Ob?Uc.clientHeight||0:Uc.clientWidth||0:0;0===Nc&&(Nc=Ma.floating[yc]);Uc=hb[Ac];const ed=Nc-ic[yc]-hb[tc];ic=Nc/2-ic[yc]/2+(Vb/2-wc/2);Vb=nv(Uc,mv(ic,ed));return{[Ob]:zb[Ob]-(0<("start"===bc?hb[Ac]:hb[tc])&&ic!==Vb&&Ma.reference[yc]<=Ma.floating[yc]?ic<Uc?Uc-ic:ed-ic:0),data:{[Ob]:Vb,centerOffset:ic-Vb}}})}}),GC={left:"right",
right:"left",bottom:"top",top:"bottom"},HC={start:"end",end:"start"},Ay=["top","right","bottom","left"];Ay.reduce((c,g)=>c.concat(g,g+"-start",g+"-end"),[]);var IC=function(c){return void 0===c&&(c={}),{name:"flip",options:c,fn(g){return mi(this,null,function*(){var u;const {placement:M,middlewareData:ea,rects:ma,initialPlacement:xa,platform:Ma,elements:Za}=g;var hb=c;const {mainAxis:zb=!0,crossAxis:Ob=!0,fallbackPlacements:bc,fallbackStrategy:yc="bestFit",flipAlignment:ic=!0}=hb;hb=hg(hb,["mainAxis",
"crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const Ac=Cj(M);var tc=bc||(Ac!==xa&&ic?function(ge){const Pd=Vk(ge);return[kl(ge),Pd,kl(Pd)]}(xa):[Vk(xa)]);tc=[xa,...tc];const Vb=yield qj(g,hb),wc=[];hb=(null==(u=ea.flip)?void 0:u.overflows)||[];if(zb&&wc.push(Vb[Ac]),Ob){const {main:ge,cross:Pd}=Lk(M,ma,yield null==Ma.isRTL?void 0:Ma.isRTL(Za.floating));wc.push(Vb[ge],Vb[Pd])}if(hb=[...hb,{placement:M,overflows:wc}],!wc.every(ge=>0>=ge)){var Uc,Nc;u=(null!=(Uc=null==(Nc=ea.flip)?
void 0:Nc.index)?Uc:0)+1;if(Uc=tc[u])return{data:{index:u,overflows:hb},reset:{placement:Uc}};Uc="bottom";switch(yc){case "bestFit":var ed;(Nc=null==(ed=hb.map(ge=>[ge,ge.overflows.filter(Pd=>0<Pd).reduce((Pd,we)=>Pd+we,0)]).sort((ge,Pd)=>ge[1]-Pd[1])[0])?void 0:ed[0].placement)&&(Uc=Nc);break;case "initialPlacement":Uc=xa}if(M!==Uc)return{reset:{placement:Uc}}}return{}})}}},JC=function(c){c=void 0===c?{}:c;let {strategy:g="referenceHidden"}=c,u=hg(c,["strategy"]);return{name:"hide",fn(M){return mi(this,
null,function*(){var {rects:ea}=M;switch(g){case "referenceHidden":return ea=Cm(yield qj(M,wf(Fe({},u),{elementContext:"reference"})),ea.reference),{data:{referenceHiddenOffsets:ea,referenceHidden:Vm(ea)}};case "escaped":return ea=Cm(yield qj(M,wf(Fe({},u),{altBoundary:!0})),ea.floating),{data:{escapedOffsets:ea,escaped:Vm(ea)}};default:return{}}})}}},KC=function(c){return void 0===c&&(c=0),{name:"offset",options:c,fn(g){return mi(this,null,function*(){const {x:u,y:M}=g,ea=yield function(ma,xa){return mi(this,
null,function*(){const {placement:Ma,platform:Za,elements:hb}=ma;var zb=yield null==Za.isRTL?void 0:Za.isRTL(hb.floating),Ob=Cj(Ma);const bc=Ma.split("-")[1],yc="x"===Ri(Ma);Ob=["left","top"].includes(Ob)?-1:1;zb=zb&&yc?-1:1;const ic="function"==typeof xa?xa(ma):xa;let {mainAxis:Ac,crossAxis:tc,alignmentAxis:Vb}="number"==typeof ic?{mainAxis:ic,crossAxis:0,alignmentAxis:null}:Fe({mainAxis:0,crossAxis:0,alignmentAxis:null},ic);return bc&&"number"==typeof Vb&&(tc="end"===bc?-1*Vb:Vb),yc?{x:tc*zb,y:Ac*
Ob}:{x:Ac*Ob,y:tc*zb}})}(g,c);return{x:u+ea.x,y:M+ea.y,data:ea}})}}},LC=function(c){return void 0===c&&(c={}),{name:"shift",options:c,fn(g){return mi(this,null,function*(){const {x:u,y:M,placement:ea}=g;var ma=c;const {mainAxis:xa=!0,crossAxis:Ma=!1,limiter:Za={fn:yc=>{let {x:ic,y:Ac}=yc;return{x:ic,y:Ac}}}}=ma;var hb=hg(ma,["mainAxis","crossAxis","limiter"]);ma={x:u,y:M};hb=yield qj(g,hb);const zb=Ri(Cj(ea)),Ob="x"===zb?"y":"x";let bc=ma[zb];ma=ma[Ob];xa&&(bc=nv(bc+hb["y"===zb?"top":"left"],mv(bc,
bc-hb["y"===zb?"bottom":"right"])));Ma&&(ma=nv(ma+hb["y"===Ob?"top":"left"],mv(ma,ma-hb["y"===Ob?"bottom":"right"])));ma=Za.fn(wf(Fe({},g),{[zb]:bc,[Ob]:ma}));return wf(Fe({},ma),{data:{x:ma.x-u,y:ma.y-M}})})}}},MC=function(c){return void 0===c&&(c={}),{options:c,fn(g){const {x:u,y:M,placement:ea,rects:ma,middlewareData:xa}=g,{offset:Ma=0,mainAxis:Za=!0,crossAxis:hb=!0}=c;var zb={x:u,y:M};g=Ri(ea);const Ob="x"===g?"y":"x";let bc=zb[g];zb=zb[Ob];var yc="function"==typeof Ma?Ma(wf(Fe({},ma),{placement:ea})):
Ma;yc="number"==typeof yc?{mainAxis:yc,crossAxis:0}:Fe({mainAxis:0,crossAxis:0},yc);if(Za){var ic="y"===g?"height":"width",Ac=ma.reference[g]-ma.floating[ic]+yc.mainAxis;ic=ma.reference[g]+ma.reference[ic]-yc.mainAxis;bc<Ac?bc=Ac:bc>ic&&(bc=ic)}if(hb){var tc,Vb,wc,Uc;const Nc="y"===g?"width":"height";Ac=["top","left"].includes(Cj(ea));ic=ma.reference[Ob]-ma.floating[Nc]+(Ac&&null!=(tc=null==(Vb=xa.offset)?void 0:Vb[Ob])?tc:0)+(Ac?0:yc.crossAxis);tc=ma.reference[Ob]+ma.reference[Nc]+(Ac?0:null!=(wc=
null==(Uc=xa.offset)?void 0:Uc[Ob])?wc:0)-(Ac?yc.crossAxis:0);zb<ic?zb=ic:zb>tc&&(zb=tc)}return{[g]:bc,[Ob]:zb}}}},By=Math.min,zs=Math.max,At=Math.round,NC={getClippingRect:function(c){let {element:g,boundary:u,rootBoundary:M,strategy:ea}=c;c=[...("clippingAncestors"===u?Ij(g):[].concat(u)),M];c=c.reduce((ma,xa)=>{xa=Hh(g,xa,ea);return ma.top=zs(xa.top,ma.top),ma.right=By(xa.right,ma.right),ma.bottom=By(xa.bottom,ma.bottom),ma.left=zs(xa.left,ma.left),ma},Hh(g,c[0],ea));return{width:c.right-c.left,
height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(c){let {rect:g,offsetParent:u,strategy:M}=c;var ea=fj(u);const ma=Dj(u);if(u===ma)return g;c={scrollLeft:0,scrollTop:0};var xa=0,Ma=0;(ea||!ea&&"fixed"!==M)&&(("body"!==Ej(u)||Zk(ma))&&(c=Kj(u)),fj(u))&&(ea=Uj(u,!0),xa=ea.x+u.clientLeft,Ma=ea.y+u.clientTop);return wf(Fe({},g),{x:g.x-c.scrollLeft+xa,y:g.y-c.scrollTop+Ma})},isElement:gj,getDimensions:rm,getOffsetParent:Bk,getDocumentElement:Dj,getElementRects:c=>
{let {reference:g,floating:u,strategy:M}=c;c=Bk(u);var ea=fj(c);const ma=Dj(c);var xa;if(xa=ea)xa=Uj(c),xa=At(xa.width)!==c.offsetWidth||At(xa.height)!==c.offsetHeight;xa=Uj(g,xa,"fixed"===M);let Ma={scrollLeft:0,scrollTop:0};var Za=0,hb=0;if(ea||!ea&&"fixed"!==M)(("body"!==Ej(c)||Zk(ma))&&(Ma=Kj(c)),fj(c))?(ea=Uj(c,!0),Za=ea.x+c.clientLeft,hb=ea.y+c.clientTop):ma&&(Za=im(ma));return{reference:{x:xa.left+Ma.scrollLeft-Za,y:xa.top+Ma.scrollTop-hb,width:xa.width,height:xa.height},floating:wf(Fe({},
rm(u)),{x:0,y:0})}},getClientRects:c=>Array.from(c.getClientRects()),isRTL:c=>"rtl"===Pl(c).direction},OC=(c,g,u)=>FC(c,g,Fe({platform:NC},u)),En=Mf(T(16),1),Cy=T(16),PC=Mf(T(25),1),ov="undefined"!==typeof document?Cy.useLayoutEffect:Cy.useEffect,QC=c=>{const {element:g,padding:u}=c;return{name:"arrow",options:c,fn(M){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return zy({element:g.current,padding:u}).fn(M)}else if(g)return zy({element:g,padding:u}).fn(M);return{}}}},
RC=T(16),[pv,Dy]=cj("Popper"),[SC,Ey]=pv("Popper"),TC=(0,vm.forwardRef)((c,g)=>{const {__scopePopper:u,virtualRef:M}=c;c=hg(c,["__scopePopper","virtualRef"]);const ea=Ey("PopperAnchor",u),ma=(0,vm.useRef)(null);g=ki(g,ma);(0,vm.useEffect)(()=>{ea.onAnchorChange((null===M||void 0===M?void 0:M.current)||ma.current)});return M?null:(0,vm.createElement)(cl.div,Uf({},c,{ref:g}))}),[UC]=pv("PopperContent"),[VC,WC]=pv("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),XC=(0,vm.forwardRef)((c,g)=>
{var u,M,ea,ma,xa,Ma,Za,hb;const {__scopePopper:zb,side:Ob="bottom",sideOffset:bc=0,align:yc="center",alignOffset:ic=0,arrowPadding:Ac=0,collisionBoundary:tc=[],collisionPadding:Vb=0,sticky:wc="partial",hideWhenDetached:Uc=!1,avoidCollisions:Nc=!0}=c;c=hg(c,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const ed=Ey("PopperContent",zb),[ge,Pd]=(0,vm.useState)(null);g=ki(g,lp=>Pd(lp));const [we,mf]=
(0,vm.useState)(null);var Le=Dg(we),hf=null!==(u=null===Le||void 0===Le?void 0:Le.width)&&void 0!==u?u:0;u=null!==(M=null===Le||void 0===Le?void 0:Le.height)&&void 0!==M?M:0;M=Ob+("center"!==yc?"-"+yc:"");Le="number"===typeof Vb?Vb:Fe({top:0,right:0,bottom:0,left:0},Vb);const ue=Array.isArray(tc)?tc:[tc],Nd=0<ue.length;Le={padding:Le,boundary:ue.filter(Jh),altBoundary:Nd};const {reference:kd,floating:hd,strategy:td,x:zd,y:Kd,placement:Ce,middlewareData:Ee,update:He}=ih({strategy:"fixed",placement:M,
whileElementsMounted:Nk,middleware:[KC({mainAxis:bc+u,alignmentAxis:ic}),Nc?LC(Fe({mainAxis:!0,crossAxis:!1,limiter:"partial"===wc?MC():void 0},Le)):void 0,we?QC({element:we,padding:Ac}):void 0,Nc?IC(Fe({},Le)):void 0,YC({arrowWidth:hf,arrowHeight:u}),Uc?JC({strategy:"referenceHidden"}):void 0].filter(ik)});nn(()=>{kd(ed.anchor)},[kd,ed.anchor]);const Ff=null!==zd&&null!==Kd,[sf,Xg]=Ui(Ce);hf=null===(ea=Ee.arrow)||void 0===ea?void 0:ea.x;ea=null===(ma=Ee.arrow)||void 0===ma?void 0:ma.y;ma=0!==(null===
(xa=Ee.arrow)||void 0===xa?void 0:xa.centerOffset);const [Rg,di]=(0,vm.useState)();nn(()=>{ge&&di(window.getComputedStyle(ge).zIndex)},[ge]);const {hasParent:fk,positionUpdateFns:sk}=WC("PopperContent",zb),rn=!fk;(0,vm.useLayoutEffect)(()=>{if(!rn)return sk.add(He),()=>{sk.delete(He)}},[rn,sk,He]);(0,vm.useLayoutEffect)(()=>{rn&&Ff&&Array.from(sk).reverse().forEach(lp=>requestAnimationFrame(lp))},[rn,Ff,sk]);xa=wf(Fe({"data-side":sf,"data-align":Xg},c),{ref:g,style:wf(Fe({},c.style),{animation:Ff?
void 0:"none",opacity:null!==(Ma=Ee.hide)&&void 0!==Ma&&Ma.referenceHidden?0:void 0})});return(0,vm.createElement)("div",{ref:hd,"data-radix-popper-content-wrapper":"",style:{position:td,left:0,top:0,transform:Ff?`translate3d(${Math.round(zd)}px, ${Math.round(Kd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Rg,["--radix-popper-transform-origin"]:[null===(Za=Ee.transformOrigin)||void 0===Za?void 0:Za.x,null===(hb=Ee.transformOrigin)||void 0===hb?void 0:hb.y].join(" ")}},(0,vm.createElement)(UC,
{scope:zb,placedSide:sf,onArrowChange:mf,arrowX:hf,arrowY:ea,shouldHideArrow:ma},rn?(0,vm.createElement)(VC,{scope:zb,hasParent:!0,positionUpdateFns:sk},(0,vm.createElement)(cl.div,xa)):(0,vm.createElement)(cl.div,xa)))}),YC=c=>({name:"transformOrigin",options:c,fn(g){var u,M,ea,ma,xa;const {placement:Ma,rects:Za,middlewareData:hb}=g,zb=(g=0!==(null===(u=hb.arrow)||void 0===u?void 0:u.centerOffset))?0:c.arrowWidth;u=g?0:c.arrowHeight;const [Ob,bc]=Ui(Ma),yc={start:"0%",center:"50%",end:"100%"}[bc],
ic=(null!==(M=null===(ea=hb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==M?M:0)+zb/2;M=(null!==(ma=null===(xa=hb.arrow)||void 0===xa?void 0:xa.y)&&void 0!==ma?ma:0)+u/2;xa=ma="";"bottom"===Ob?(ma=g?yc:`${ic}px`,xa=`${-u}px`):"top"===Ob?(ma=g?yc:`${ic}px`,xa=`${Za.floating.height+u}px`):"right"===Ob?(ma=`${-u}px`,xa=g?yc:`${M}px`):"left"===Ob&&(ma=`${Za.floating.width+u}px`,xa=g?yc:`${M}px`);return{data:{x:ma,y:xa}}}}),ZC=c=>{const {__scopePopper:g,children:u}=c,[M,ea]=(0,vm.useState)(null);return(0,vm.createElement)(SC,
{scope:g,anchor:M,onAnchorChange:ea},u)},Fy=T(16),$C=Mf(T(25)),aD=(0,Fy.forwardRef)((c,g)=>{var u;const {container:M=null===globalThis||void 0===globalThis?void 0:null===(u=globalThis.document)||void 0===u?void 0:u.body}=c;c=hg(c,["container"]);return M?$C.default.createPortal((0,Fy.createElement)(cl.div,Uf({},c,{ref:g})),M):null}),hp=T(16),bD=T(25),Gy=c=>{const {present:g,children:u}=c;c=Vi(g);const M="function"===typeof u?u({present:c.isPresent}):hp.Children.only(u),ea=ki(c.ref,M.ref);return"function"===
typeof u||c.isPresent?(0,hp.cloneElement)(M,{ref:ea}):null};Gy.displayName="Presence";var Hm=T(16),cD={bubbles:!1,cancelable:!0},[qv,Hy,dD]=Ak("RovingFocusGroup"),[eD,Bt]=cj("RovingFocusGroup",[dD]),[fD,gD]=eD("RovingFocusGroup"),Iy=(0,Hm.forwardRef)((c,g)=>(0,Hm.createElement)(qv.Provider,{scope:c.__scopeRovingFocusGroup},(0,Hm.createElement)(qv.Slot,{scope:c.__scopeRovingFocusGroup},(0,Hm.createElement)(hD,Uf({},c,{ref:g}))))),hD=(0,Hm.forwardRef)((c,g)=>{const {__scopeRovingFocusGroup:u,orientation:M,
loop:ea=!1,dir:ma,currentTabStopId:xa,defaultCurrentTabStopId:Ma,onCurrentTabStopIdChange:Za,onEntryFocus:hb}=c,zb=hg(c,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),Ob=(0,Hm.useRef)(null);g=ki(g,Ob);const bc=dj(ma),[yc=null,ic]=nj({prop:xa,defaultProp:Ma,onChange:Za}),[Ac,tc]=(0,Hm.useState)(!1),Vb=Jj(hb),wc=Hy(u),Uc=(0,Hm.useRef)(!1);(0,Hm.useEffect)(()=>{const Nc=Ob.current;if(Nc)return Nc.addEventListener("rovingFocusGroup.onEntryFocus",
Vb),()=>Nc.removeEventListener("rovingFocusGroup.onEntryFocus",Vb)},[Vb]);return(0,Hm.createElement)(fD,{scope:u,orientation:M,dir:bc,loop:ea,currentTabStopId:yc,onItemFocus:(0,Hm.useCallback)(Nc=>ic(Nc),[ic]),onItemShiftTab:(0,Hm.useCallback)(()=>tc(!0),[])},(0,Hm.createElement)(cl.div,Uf({tabIndex:Ac?-1:0,"data-orientation":M},zb,{ref:g,style:Fe({outline:"none"},c.style),onMouseDown:Ag(c.onMouseDown,()=>{Uc.current=!0}),onFocus:Ag(c.onFocus,Nc=>{var ed=!Uc.current;if(Nc.target===Nc.currentTarget&&
ed&&!Ac&&(ed=new CustomEvent("rovingFocusGroup.onEntryFocus",cD),Nc.currentTarget.dispatchEvent(ed),!ed.defaultPrevented)){Nc=wc().filter(Pd=>Pd.focusable);ed=Nc.find(Pd=>Pd.active);const ge=Nc.find(Pd=>Pd.id===yc);Nc=[ed,ge,...Nc].filter(Boolean).map(Pd=>Pd.ref.current);rj(Nc)}Uc.current=!1}),onBlur:Ag(c.onBlur,()=>tc(!1))})))}),Jy=(0,Hm.forwardRef)((c,g)=>{const {__scopeRovingFocusGroup:u,focusable:M=!0,active:ea=!1}=c,ma=hg(c,["__scopeRovingFocusGroup","focusable","active"]),xa=vf(),Ma=gD("RovingFocusGroupItem",
u),Za=Ma.currentTabStopId===xa,hb=Hy(u);return(0,Hm.createElement)(qv.ItemSlot,{scope:u,id:xa,focusable:M,active:ea},(0,Hm.createElement)(cl.span,Uf({tabIndex:Za?0:-1,"data-orientation":Ma.orientation},ma,{ref:g,onMouseDown:Ag(c.onMouseDown,zb=>{if(M)Ma.onItemFocus(xa);else zb.preventDefault()}),onFocus:Ag(c.onFocus,()=>Ma.onItemFocus(xa)),onKeyDown:Ag(c.onKeyDown,zb=>{if("Tab"===zb.key&&zb.shiftKey)Ma.onItemShiftTab();else if(zb.target===zb.currentTarget){var Ob=Lg(zb,Ma.orientation,Ma.dir);if(void 0!==
Ob){zb.preventDefault();let bc=hb().filter(yc=>yc.focusable).map(yc=>yc.ref.current);if("last"===Ob)bc.reverse();else if("prev"===Ob||"next"===Ob)"prev"===Ob&&bc.reverse(),zb=bc.indexOf(zb.currentTarget),bc=Ma.loop?li(bc,zb+1):bc.slice(zb+1);setTimeout(()=>rj(bc))}}})})))}),iD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},jD=function(c){return"undefined"===typeof document?null:(Array.isArray(c)?c[0]:c).ownerDocument.body},
vr=new WeakMap,Ct=new WeakMap,Dt={},Et=0,rv=function(c,g,u){void 0===g&&(g=jD(c));void 0===u&&(u="data-aria-hidden");var M=Array.isArray(c)?c:[c];Dt[u]||(Dt[u]=new WeakMap);var ea=Dt[u],ma=[],xa=new Set,Ma=function(hb){hb&&!xa.has(hb)&&(xa.add(hb),Ma(hb.parentNode))};M.forEach(Ma);var Za=function(hb){!hb||0<=M.indexOf(hb)||Array.prototype.forEach.call(hb.children,function(zb){if(xa.has(zb))Za(zb);else{var Ob=zb.getAttribute("aria-hidden");Ob=null!==Ob&&"false"!==Ob;var bc=(vr.get(zb)||0)+1,yc=(ea.get(zb)||
0)+1;vr.set(zb,bc);ea.set(zb,yc);ma.push(zb);1===bc&&Ob&&Ct.set(zb,!0);1===yc&&zb.setAttribute(u,"true");Ob||zb.setAttribute("aria-hidden","true")}})};Za(g);xa.clear();Et++;return function(){ma.forEach(function(hb){var zb=vr.get(hb)-1,Ob=ea.get(hb)-1;vr.set(hb,zb);ea.set(hb,Ob);zb||(Ct.has(hb)||hb.removeAttribute("aria-hidden"),Ct.delete(hb));Ob||hb.removeAttribute(u)});Et--;Et||(vr=new WeakMap,vr=new WeakMap,Ct=new WeakMap,Dt={})}},Ky=Mf(Co(),1),{__assign:Np,__rest:Ly,__spreadArray:kD}=Ky.default,
My=Mf(T(16)),ip=Mf(T(16)),lD=T(16),mD=Mf(T(16)),Ny=function(c){var g=c.sideCar;c=Ly(c,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return mD.createElement(g,Np({},c))};Ny.isSideCarExport=!0;var Oy=function(c){void 0===c&&(c={});var g=Hl(null);g.options=Np({async:!0,ssr:!1},c);return g}(),sv=function(){},Ft=ip.forwardRef(function(c,g){var u=ip.useRef(null),M=ip.useState({onScrollCapture:sv,
onWheelCapture:sv,onTouchMoveCapture:sv}),ea=M[0];M=M[1];var ma=c.forwardProps,xa=c.children,Ma=c.className,Za=c.removeScrollBar,hb=c.enabled,zb=c.shards,Ob=c.sideCar,bc=c.noIsolation,yc=c.inert,ic=c.allowPinchZoom,Ac=c.as;Ac=void 0===Ac?"div":Ac;c=Ly(c,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=ng([u,g]);ea=Np(Np({},c),ea);return ip.createElement(ip.Fragment,null,hb&&ip.createElement(Ob,{sideCar:Oy,removeScrollBar:Za,
shards:zb,noIsolation:bc,inert:yc,setCallbacks:M,allowPinchZoom:!!ic,lockRef:u}),ma?ip.cloneElement(ip.Children.only(xa),Np(Np({},ea),{ref:g})):ip.createElement(Ac,Np({},ea,{className:Ma,ref:g}),xa))});Ft.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ft.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var bm=Mf(T(16)),Py=Mf(T(16)),nD=Mf(T(16)),oD=function(){var c=0,g=null;return{add:function(u){if(0==c){if(document){var M=document.createElement("style");
M.type="text/css";var ea="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;ea&&M.setAttribute("nonce",ea)}else M=null;if(g=M)M=g,M.styleSheet?M.styleSheet.cssText=u:M.appendChild(document.createTextNode(u)),u=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(u)}c++},remove:function(){c--;!c&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},pD=function(){var c=oD();return function(g,u){nD.useEffect(function(){c.add(g);return function(){c.remove()}},[g&&u])}},
Qy=function(){var c=pD();return function(g){c(g.styles,g.dynamic);return null}},qD={left:0,top:0,right:0,gap:0},rD=Qy(),sD=function(c,g,u,M){var ea=c.left,ma=c.top,xa=c.right;c=c.gap;void 0===u&&(u="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(M,";\n   padding-right: ").concat(c,"px ").concat(M,";\n  }\n  body {\n    overflow: hidden ").concat(M,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(M,";"),"margin"===u&&
"\n    padding-left: ".concat(ea,"px;\n    padding-top: ").concat(ma,"px;\n    padding-right: ").concat(xa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(c,"px ").concat(M,";\n    "),"padding"===u&&"padding-right: ".concat(c,"px ").concat(M,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(c,"px ").concat(M,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(c,"px ").concat(M,";\n  }\n  \n  .").concat("right-scroll-bar-position",
" .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(M,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(M,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(c,"px;\n  }\n")},tD=function(c){var g=c.noRelative,u=c.noImportant;c=c.gapMode;var M=void 0===c?"margin":c;c=Py.useMemo(function(){var ea=M;void 0===ea&&(ea="margin");if("undefined"===typeof window)ea=qD;else{var ma=window.getComputedStyle(document.body),
xa=ma["padding"===ea?"paddingTop":"marginTop"],Ma=ma["padding"===ea?"paddingRight":"marginRight"];ea=[parseInt(ma["padding"===ea?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(xa||"",10)||0,parseInt(Ma||"",10)||0];ea={left:ea[0],top:ea[1],right:ea[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+ea[2]-ea[0])}}return ea},[M]);return Py.createElement(rD,{styles:sD(c,!g,M,u?"":"!important")})},tv=!1;if("undefined"!==typeof window)try{var Gt=Object.defineProperty({},"passive",
{get:function(){return tv=!0}});window.addEventListener("test",Gt,Gt);window.removeEventListener("test",Gt,Gt)}catch(c){tv=!1}var wr=tv?{passive:!1}:!1,Ry=function(c,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Sy(c,g)){var u=Ty(c,g);if(u[1]>u[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},Sy=function(c,g){"v"===c?(c=window.getComputedStyle(g),c="hidden"!==c.overflowY&&!(c.overflowY===c.overflowX&&"visible"===c.overflowY)):(c=window.getComputedStyle(g),
c="hidden"!==c.overflowX&&!(c.overflowY===c.overflowX&&"visible"===c.overflowX));return c},Ty=function(c,g){return"v"===c?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},Ht=function(c){return"changedTouches"in c?[c.changedTouches[0].clientX,c.changedTouches[0].clientY]:[0,0]},Uy=function(c){return c&&"current"in c?c.current:c},uD=function(c){return"\n  .block-interactivity-".concat(c," {pointer-events: none;}\n  .allow-interactivity-").concat(c," {pointer-events: all;}\n")},
vD=0,xr=[];Oy.useMedium(function(c){var g=bm.useRef([]),u=bm.useRef([0,0]),M=bm.useRef(),ea=bm.useState(vD++)[0],ma=bm.useState(function(){return Qy()})[0],xa=bm.useRef(c);bm.useEffect(function(){xa.current=c},[c]);bm.useEffect(function(){if(c.inert){document.body.classList.add("block-interactivity-".concat(ea));var ic=kD([c.lockRef.current],(c.shards||[]).map(Uy),!0).filter(Boolean);ic.forEach(function(Ac){return Ac.classList.add("allow-interactivity-".concat(ea))});return function(){document.body.classList.remove("block-interactivity-".concat(ea));
ic.forEach(function(Ac){return Ac.classList.remove("allow-interactivity-".concat(ea))})}}},[c.inert,c.lockRef.current,c.shards]);var Ma=bm.useCallback(function(ic,Ac){if("touches"in ic&&2===ic.touches.length)return!xa.current.allowPinchZoom;var tc=Ht(ic),Vb=u.current,wc="deltaX"in ic?ic.deltaX:Vb[0]-tc[0];Vb="deltaY"in ic?ic.deltaY:Vb[1]-tc[1];var Uc=ic.target,Nc=Math.abs(wc)>Math.abs(Vb)?"h":"v";if("touches"in ic&&"h"===Nc&&"range"===Uc.type)return!1;var ed=Ry(Nc,Uc);if(!ed)return!0;ed?tc=Nc:(tc=
"v"===Nc?"h":"v",ed=Ry(Nc,Uc));if(!ed)return!1;!M.current&&"changedTouches"in ic&&(wc||Vb)&&(M.current=tc);if(!tc)return!0;tc=M.current||tc;Vb="h"===tc?wc:Vb;wc=window.getComputedStyle(Ac).direction;wc="h"===tc&&"rtl"===wc?-1:1;Nc=wc*Vb;ic=ic.target;Vb=Ac.contains(ic);Uc=!1;Nc=0<Nc;var ge=ed=0;do{var Pd=Ty(tc,ic),we=Pd[0];Pd=Pd[1]-Pd[2]-wc*we;(we||Pd)&&Sy(tc,ic)&&(ed+=Pd,ge+=we);ic=ic.parentNode}while(!Vb&&ic!==document.body||Vb&&(Ac.contains(ic)||Ac===ic));Nc&&0===ed?Uc=!0:Nc||0!==ge||(Uc=!0);return Uc},
[]),Za=bm.useCallback(function(ic){if(xr.length&&xr[xr.length-1]===ma){var Ac="deltaY"in ic?[ic.deltaX,ic.deltaY]:Ht(ic),tc=g.current.filter(function(Vb){var wc;if(wc=Vb.name===ic.type&&Vb.target===ic.target)Vb=Vb.delta,wc=Vb[0]===Ac[0]&&Vb[1]===Ac[1];return wc})[0];tc&&tc.should?ic.preventDefault():tc||(tc=(xa.current.shards||[]).map(Uy).filter(Boolean).filter(function(Vb){return Vb.contains(ic.target)}),(0<tc.length?Ma(ic,tc[0]):!xa.current.noIsolation)&&ic.preventDefault())}},[]),hb=bm.useCallback(function(ic,
Ac,tc,Vb){var wc={name:ic,delta:Ac,target:tc,should:Vb};g.current.push(wc);setTimeout(function(){g.current=g.current.filter(function(Uc){return Uc!==wc})},1)},[]),zb=bm.useCallback(function(ic){u.current=Ht(ic);M.current=void 0},[]),Ob=bm.useCallback(function(ic){hb(ic.type,[ic.deltaX,ic.deltaY],ic.target,Ma(ic,c.lockRef.current))},[]),bc=bm.useCallback(function(ic){hb(ic.type,Ht(ic),ic.target,Ma(ic,c.lockRef.current))},[]);bm.useEffect(function(){xr.push(ma);c.setCallbacks({onScrollCapture:Ob,onWheelCapture:Ob,
onTouchMoveCapture:bc});document.addEventListener("wheel",Za,wr);document.addEventListener("touchmove",Za,wr);document.addEventListener("touchstart",zb,wr);return function(){xr=xr.filter(function(ic){return ic!==ma});document.removeEventListener("wheel",Za,wr);document.removeEventListener("touchmove",Za,wr);document.removeEventListener("touchstart",zb,wr)}},[]);var yc=c.removeScrollBar;return bm.createElement(bm.Fragment,null,c.inert?bm.createElement(ma,{styles:uD(ea)}):null,yc?bm.createElement(tD,
{gapMode:"margin"}):null)});var uv=My.forwardRef(function(c,g){return My.createElement(Ft,Np({},c,{ref:g,sideCar:Ny}))});uv.classNames=Ft.classNames;var vv=["Enter"," "],Vy=["ArrowUp","PageDown","End"],wD=["ArrowDown","PageUp","Home",...Vy];[...vv];[...vv];var [wv,xD,yD]=Ak("Menu"),[Gq,It]=cj("Menu",[yD,Dy,Bt]),xv=Dy(),Wy=Bt(),[zD,Jt]=Gq("Menu"),[AD,yv]=Gq("Menu"),Xy=(0,Tg.forwardRef)((c,g)=>{var {__scopeMenu:u}=c;c=hg(c,["__scopeMenu"]);u=xv(u);return(0,Tg.createElement)(TC,Uf({},u,c,{ref:g}))}),
[,BD]=Gq("MenuPortal",{forceMount:void 0}),[CD,Yy]=Gq("MenuContent"),Zy=(0,Tg.forwardRef)((c,g)=>{var u=BD("MenuContent",c.__scopeMenu);({forceMount:u=u.forceMount}=c);const M=hg(c,["forceMount"]),ea=Jt("MenuContent",c.__scopeMenu),ma=yv("MenuContent",c.__scopeMenu);return(0,Tg.createElement)(wv.Provider,{scope:c.__scopeMenu},(0,Tg.createElement)(Gy,{present:u||ea.open},(0,Tg.createElement)(wv.Slot,{scope:c.__scopeMenu},ma.modal?(0,Tg.createElement)(DD,Uf({},M,{ref:g})):(0,Tg.createElement)(ED,Uf({},
M,{ref:g})))))}),DD=(0,Tg.forwardRef)((c,g)=>{const u=Jt("MenuContent",c.__scopeMenu),M=(0,Tg.useRef)(null);g=ki(g,M);(0,Tg.useEffect)(()=>{const ea=M.current;if(ea)return rv(ea)},[]);return(0,Tg.createElement)($y,Uf({},c,{ref:g,trapFocus:u.open,disableOutsidePointerEvents:u.open,disableOutsideScroll:!0,onFocusOutside:Ag(c.onFocusOutside,ea=>ea.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>u.onOpenChange(!1)}))}),ED=(0,Tg.forwardRef)((c,g)=>{const u=Jt("MenuContent",c.__scopeMenu);
return(0,Tg.createElement)($y,Uf({},c,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>u.onOpenChange(!1)}))}),$y=(0,Tg.forwardRef)((c,g)=>{const {__scopeMenu:u,loop:M=!1,trapFocus:ea,onOpenAutoFocus:ma,onCloseAutoFocus:xa,disableOutsidePointerEvents:Ma,onEscapeKeyDown:Za,onPointerDownOutside:hb,onFocusOutside:zb,onInteractOutside:Ob,onDismiss:bc,disableOutsideScroll:yc}=c,ic=hg(c,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),
Ac=Jt("MenuContent",u),tc=yv("MenuContent",u),Vb=xv(u),wc=Wy(u),Uc=xD(u),[Nc,ed]=(0,Tg.useState)(null),ge=(0,Tg.useRef)(null);g=ki(g,ge,Ac.onContentChange);const Pd=(0,Tg.useRef)(0),we=(0,Tg.useRef)(""),mf=(0,Tg.useRef)(0),Le=(0,Tg.useRef)(null),hf=(0,Tg.useRef)("right"),ue=(0,Tg.useRef)(0),Nd=yc?uv:Tg.Fragment,kd=yc?{as:ur,allowPinchZoom:!0}:void 0,hd=zd=>{var Kd,Ce;zd=we.current+zd;const Ee=Uc().filter(Rg=>!Rg.disabled),He=document.activeElement,Ff=null===(Kd=Ee.find(Rg=>Rg.ref.current===He))||
void 0===Kd?void 0:Kd.textValue;Kd=Ee.map(Rg=>Rg.textValue);const sf=Pb(Kd,zd,Ff),Xg=null===(Ce=Ee.find(Rg=>Rg.textValue===sf))||void 0===Ce?void 0:Ce.ref.current;(function fk(di){we.current=di;window.clearTimeout(Pd.current);""!==di&&(Pd.current=window.setTimeout(()=>fk(""),1E3))})(zd);Xg&&setTimeout(()=>Xg.focus())};(0,Tg.useEffect)(()=>()=>window.clearTimeout(Pd.current),[]);Zl();const td=(0,Tg.useCallback)(zd=>{var Kd,Ce,Ee;if(Ee=hf.current===(null===(Kd=Le.current)||void 0===Kd?void 0:Kd.side)){if(Kd=
null===(Ce=Le.current)||void 0===Ce?void 0:Ce.area){const {x:He,y:Ff}={x:zd.clientX,y:zd.clientY};zd=!1;for(let sf=0,Xg=Kd.length-1;sf<Kd.length;Xg=sf++){Ce=Kd[sf].x;Ee=Kd[sf].y;const Rg=Kd[Xg].x,di=Kd[Xg].y;Ee>Ff!==di>Ff&&He<(Rg-Ce)*(Ff-Ee)/(di-Ee)+Ce&&(zd=!zd)}Kd=zd}else Kd=!1;Ee=Kd}return Ee},[]);return(0,Tg.createElement)(CD,{scope:u,searchRef:we,onItemEnter:(0,Tg.useCallback)(zd=>{td(zd)&&zd.preventDefault()},[td]),onItemLeave:(0,Tg.useCallback)(zd=>{var Kd;td(zd)||(null===(Kd=ge.current)||void 0===
Kd||Kd.focus(),ed(null))},[td]),onTriggerLeave:(0,Tg.useCallback)(zd=>{td(zd)&&zd.preventDefault()},[td]),pointerGraceTimerRef:mf,onPointerGraceIntentChange:(0,Tg.useCallback)(zd=>{Le.current=zd},[])},(0,Tg.createElement)(Nd,kd,(0,Tg.createElement)(iy,{asChild:!0,trapped:ea,onMountAutoFocus:Ag(ma,zd=>{var Kd;zd.preventDefault();null===(Kd=ge.current)||void 0===Kd||Kd.focus()}),onUnmountAutoFocus:xa},(0,Tg.createElement)(my,{asChild:!0,disableOutsidePointerEvents:Ma,onEscapeKeyDown:Za,onPointerDownOutside:hb,
onFocusOutside:zb,onInteractOutside:Ob,onDismiss:bc},(0,Tg.createElement)(Iy,Uf({asChild:!0},wc,{dir:tc.dir,orientation:"vertical",loop:M,currentTabStopId:Nc,onCurrentTabStopIdChange:ed,onEntryFocus:zd=>{tc.isUsingKeyboardRef.current||zd.preventDefault()}}),(0,Tg.createElement)(XC,Uf({role:"menu","aria-orientation":"vertical","data-state":Ac.open?"open":"closed",dir:tc.dir},Vb,ic,{ref:g,style:Fe({outline:"none"},ic.style),onKeyDown:Ag(ic.onKeyDown,zd=>{var Kd=zd.target.closest('[role\x3d"menu"]')===
zd.currentTarget;const Ce=zd.ctrlKey||zd.altKey||zd.metaKey,Ee=1===zd.key.length;Kd&&("Tab"===zd.key&&zd.preventDefault(),!Ce&&Ee&&hd(zd.key));zd.target===ge.current&&wD.includes(zd.key)&&(zd.preventDefault(),Kd=Uc().filter(He=>!He.disabled).map(He=>He.ref.current),Vy.includes(zd.key)&&Kd.reverse(),xi(Kd))}),onBlur:Ag(c.onBlur,zd=>{zd.currentTarget.contains(zd.target)||(window.clearTimeout(Pd.current),we.current="")}),onPointerMove:Ag(c.onPointerMove,cc(zd=>{const Kd=ue.current!==zd.clientX;zd.currentTarget.contains(zd.target)&&
Kd&&(hf.current=zd.clientX>ue.current?"right":"left",ue.current=zd.clientX)}))})))))))}),az=(0,Tg.forwardRef)((c,g)=>{const {disabled:u=!1,onSelect:M}=c,ea=hg(c,["disabled","onSelect"]),ma=(0,Tg.useRef)(null),xa=yv("MenuItem",c.__scopeMenu),Ma=Yy("MenuItem",c.__scopeMenu);g=ki(g,ma);const Za=(0,Tg.useRef)(!1);return(0,Tg.createElement)(FD,Uf({},ea,{ref:g,disabled:u,onClick:Ag(c.onClick,()=>{const hb=ma.current;if(!u&&hb){const zb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});hb.addEventListener("menu.itemSelect",
Ob=>null===M||void 0===M?void 0:M(Ob),{once:!0});Ki(hb,zb);if(zb.defaultPrevented)Za.current=!1;else xa.onClose()}}),onPointerDown:hb=>{var zb;null===(zb=c.onPointerDown)||void 0===zb||zb.call(c,hb);Za.current=!0},onPointerUp:Ag(c.onPointerUp,hb=>{var zb;Za.current||null===(zb=hb.currentTarget)||void 0===zb||zb.click()}),onKeyDown:Ag(c.onKeyDown,hb=>{const zb=""!==Ma.searchRef.current;u||zb&&" "===hb.key||!vv.includes(hb.key)||(hb.currentTarget.click(),hb.preventDefault())})}))}),FD=(0,Tg.forwardRef)((c,
g)=>{const {__scopeMenu:u,disabled:M=!1,textValue:ea}=c,ma=hg(c,["__scopeMenu","disabled","textValue"]),xa=Yy("MenuItem",u),Ma=Wy(u),Za=(0,Tg.useRef)(null);g=ki(g,Za);const [hb,zb]=(0,Tg.useState)(!1),[Ob,bc]=(0,Tg.useState)("");(0,Tg.useEffect)(()=>{const yc=Za.current;if(yc){var ic;bc((null!==(ic=yc.textContent)&&void 0!==ic?ic:"").trim())}},[ma.children]);return(0,Tg.createElement)(wv.ItemSlot,{scope:u,disabled:M,textValue:null!==ea&&void 0!==ea?ea:Ob},(0,Tg.createElement)(Jy,Uf({asChild:!0},Ma,
{focusable:!M}),(0,Tg.createElement)(cl.div,Uf({role:"menuitem","data-highlighted":hb?"":void 0,"aria-disabled":M||void 0,"data-disabled":M?"":void 0},ma,{ref:g,onPointerMove:Ag(c.onPointerMove,cc(yc=>{if(M)xa.onItemLeave(yc);else xa.onItemEnter(yc),yc.defaultPrevented||yc.currentTarget.focus()})),onPointerLeave:Ag(c.onPointerLeave,cc(yc=>xa.onItemLeave(yc))),onFocus:Ag(c.onFocus,()=>zb(!0)),onBlur:Ag(c.onBlur,()=>zb(!1))}))))});Gq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Gq("MenuItemIndicator",
{checked:!1});var GD=(0,Tg.forwardRef)((c,g)=>{c=hg(c,["__scopeMenu"]);return(0,Tg.createElement)(cl.div,Uf({role:"separator","aria-orientation":"horizontal"},c,{ref:g}))});Gq("MenuSub");var bz=c=>{const {__scopeMenu:g,open:u=!1,children:M,dir:ea,onOpenChange:ma,modal:xa=!0}=c;c=xv(g);const [Ma,Za]=(0,Tg.useState)(null),hb=(0,Tg.useRef)(!1),zb=Jj(ma),Ob=dj(ea);(0,Tg.useEffect)(()=>{const bc=()=>{hb.current=!0;document.addEventListener("pointerdown",yc,{capture:!0,once:!0});document.addEventListener("pointermove",
yc,{capture:!0,once:!0})},yc=()=>hb.current=!1;document.addEventListener("keydown",bc,{capture:!0});return()=>{document.removeEventListener("keydown",bc,{capture:!0});document.removeEventListener("pointerdown",yc,{capture:!0});document.removeEventListener("pointermove",yc,{capture:!0})}},[]);return(0,Tg.createElement)(ZC,c,(0,Tg.createElement)(zD,{scope:g,open:u,onOpenChange:zb,content:Ma,onContentChange:Za},(0,Tg.createElement)(AD,{scope:g,onClose:(0,Tg.useCallback)(()=>zb(!1),[zb]),isUsingKeyboardRef:hb,
dir:Ob,modal:xa},M)))},[HD]=cj("DropdownMenu",[It]),Kt=It(),[ID,cz]=HD("DropdownMenu"),JD=(0,Yn.forwardRef)((c,g)=>{const {__scopeDropdownMenu:u,disabled:M=!1}=c,ea=hg(c,["__scopeDropdownMenu","disabled"]),ma=cz("DropdownMenuTrigger",u),xa=Kt(u);return(0,Yn.createElement)(Xy,Uf({asChild:!0},xa),(0,Yn.createElement)(cl.button,Uf({type:"button",id:ma.triggerId,"aria-haspopup":"menu","aria-expanded":ma.open?!0:void 0,"aria-controls":ma.open?ma.contentId:void 0,"data-state":ma.open?"open":"closed","data-disabled":M?
"":void 0,disabled:M},ea,{ref:Ol(g,ma.triggerRef),onPointerDown:Ag(c.onPointerDown,Ma=>{M||0!==Ma.button||!1!==Ma.ctrlKey||(ma.onOpenToggle(),ma.open||Ma.preventDefault())}),onKeyDown:Ag(c.onKeyDown,Ma=>{if(!M){if(["Enter"," "].includes(Ma.key))ma.onOpenToggle();if("ArrowDown"===Ma.key)ma.onOpenChange(!0);[" ","ArrowDown"].includes(Ma.key)&&Ma.preventDefault()}})})))}),KD=(0,Yn.forwardRef)((c,g)=>{var {__scopeDropdownMenu:u}=c;const M=hg(c,["__scopeDropdownMenu"]),ea=cz("DropdownMenuContent",u);u=
Kt(u);const ma=(0,Yn.useRef)(!1);return(0,Yn.createElement)(Zy,Uf({id:ea.contentId,"aria-labelledby":ea.triggerId},u,M,{ref:g,onCloseAutoFocus:Ag(c.onCloseAutoFocus,xa=>{var Ma;ma.current||null===(Ma=ea.triggerRef.current)||void 0===Ma||Ma.focus();ma.current=!1;xa.preventDefault()}),onInteractOutside:Ag(c.onInteractOutside,xa=>{xa=xa.detail.originalEvent;const Ma=0===xa.button&&!0===xa.ctrlKey;xa=2===xa.button||Ma;if(!ea.modal||xa)ma.current=!0}),style:wf(Fe({},c.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
As=(0,Yn.forwardRef)((c,g)=>{var {__scopeDropdownMenu:u}=c;c=hg(c,["__scopeDropdownMenu"]);u=Kt(u);return(0,Yn.createElement)(az,Uf({},u,c,{ref:g}))}),LD=c=>{const {__scopeDropdownMenu:g,children:u,dir:M,open:ea,defaultOpen:ma,onOpenChange:xa,modal:Ma=!0}=c;c=Kt(g);const Za=(0,Yn.useRef)(null),[hb=!1,zb]=nj({prop:ea,defaultProp:ma,onChange:xa});return(0,Yn.createElement)(ID,{scope:g,triggerId:vf(),triggerRef:Za,contentId:vf(),open:hb,onOpenChange:zb,onOpenToggle:(0,Yn.useCallback)(()=>zb(Ob=>!Ob),
[zb]),modal:Ma},(0,Yn.createElement)(bz,Uf({},c,{open:hb,onOpenChange:zb,dir:M,modal:Ma}),u))};Rb=T(611);var MD=Xe(function(){const c=rf(),g=u=>{u.preventDefault()};return(0,Rb.jsxs)(LD,{children:[(0,Rb.jsx)(JD,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*c.viewport.camera.zoom).toFixed(0)+"%"}),(0,Rb.jsxs)(KD,{className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Rb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:c.api.zoomToFit,children:["Zoom to fit",(0,Rb.jsx)("div",
{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:"⇧"})," ",(0,Rb.jsx)("code",{children:"1"})]})})]}),(0,Rb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:c.api.zoomToSelection,children:["Zoom to selection",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"⇧"})," ",(0,Rb.jsx)("code",
{children:"1"})]})})]}),(0,Rb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:c.api.zoomIn,children:["Zoom in",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"+"})]})})]}),(0,Rb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:c.api.zoomOut,children:["Zoom out",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"-"})]})})]}),(0,Rb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:c.api.resetZoom,children:["Reset zoom",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:"⇧"})," ",(0,Rb.jsx)("code",{children:"0"})]})})]})]})]})}),dz=T(16),ez=["horizontal","vertical"],Bs=(0,dz.forwardRef)((c,g)=>{const {decorative:u,orientation:M="horizontal"}=
c;c=hg(c,["decorative","orientation"]);const ea=ez.includes(M)?M:"horizontal";return(0,dz.createElement)(cl.div,Uf({"data-orientation":ea},u?{role:"none"}:{"aria-orientation":"vertical"===ea?ea:void 0,role:"separator"},c,{ref:g}))});Bs.propTypes={orientation(c,g,u){c=c[g];g=String(c);return c&&!ez.includes(c)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${u}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};Rb=T(611);var ND=Xe(function(){const c=rf(),g=vt.useCallback(()=>{c.api.undo()},[c]),u=vt.useCallback(()=>{c.api.redo()},[c]),M=vt.useCallback(()=>{c.api.zoomIn()},[c]),ea=vt.useCallback(()=>{c.api.zoomOut()},[c]);return(0,Rb.jsxs)("div",{className:"tl-action-bar",children:[(0,Rb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,Rb.jsx)(ji,{title:"Undo",onClick:g,children:(0,Rb.jsx)(zi,{name:"arrow-back-up"})}),(0,Rb.jsx)(ji,{title:"Redo",
onClick:u,children:(0,Rb.jsx)(zi,{name:"arrow-forward-up"})})]}),(0,Rb.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,Rb.jsx)(ji,{title:"Zoom in",onClick:M,id:"tl-zoom-in",children:(0,Rb.jsx)(zi,{name:"plus"})}),(0,Rb.jsx)(ji,{title:"Zoom out",onClick:ea,id:"tl-zoom-out",children:(0,Rb.jsx)(zi,{name:"minus"})}),(0,Rb.jsx)(Bs,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Rb.jsx)(MD,{})]})]})}),Hq=Mf(T(16)),fz=Mf(T(25));Rb=T(611);var Lt=c=>`[${c.map(g=>g.toFixed(2)).join(", ")}]`,
OD=Xe(function(){const c=rf(),g=Hq.default.useRef(),[,u]=Hq.default.useState(0);Hq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);u(M=>M+1);return()=>{var M;null==(M=g.current)?void 0:M.remove()}},[]);Hq.default.useEffect(()=>{requestIdleCallback(()=>{var M,ea;null==(ea=null==(M=g.current)?void 0:M.querySelector(`[data-item-index="${c.history.pointer}"]`))?void 0:ea.scrollIntoView()})},[c.history.pointer]);return g.current?
fz.default.createPortal((0,Rb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:c.history.stack.map((M,ea)=>(0,Rb.jsx)("div",{"data-item-index":ea,style:{background:c.history.pointer===ea?"pink":"grey"},onClick:()=>c.history.setPointer(ea),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:M.pages[0].nonce},ea))}),g.current):null});Xe(()=>{const {viewport:{bounds:c,camera:{point:g,zoom:u}},inputs:M}=
Ug(),ea=Hq.default.useRef(),ma=Hq.default.useRef();Hq.default.useEffect(()=>{var Ma=document.getElementById("tl-dev-tools-canvas-anchor");ea.current=Ma;Ma=document.getElementById("tl-statusbar-anchor");ma.current=Ma},[]);var xa=[["Z",u.toFixed(2)],["MP",Lt(M.currentPoint)],["MS",Lt(M.currentScreenPoint)],["VP",Lt(g)],["VBR",Lt([c.maxX,c.maxY])]].map(Ma=>Ma.join("")).join("|");xa=ma.current?fz.default.createPortal((0,Rb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:xa}),ma.current):
null;return(0,Rb.jsxs)(Rb.Fragment,{children:[xa,(0,Rb.jsx)(OD,{})]})});var Mt=Mf(T(16));Rb=T(611);var Po=Xe(c=>{var {id:g,icon:u,title:M}=c;c=hg(c,["id","icon","title"]);var ea,ma;const xa=rf(),Ma=Mt.useCallback(hb=>{(hb=hb.currentTarget.dataset.tool)&&xa.selectTool(hb)},[xa]),Za=null==(ma=(null==(ea=[...xa.Tools,ar,br])?void 0:ea.find(hb=>hb.id===g)).shortcut)?void 0:ma[0];ea=Za?`${M} (${Za})`:M;return(0,Rb.jsx)(ji,wf(Fe({},c),{title:ea,"data-tool":g,"data-selected":g===xa.selectedTool.id,onClick:Ma,
children:"string"===typeof u?(0,Rb.jsx)(zi,{name:u}):u}))}),PD=Xe(()=>{const c=[{id:"box",icon:"square",title:"Rectangle"},{id:"ellipse",icon:"circle",title:"Circle"},{id:"polygon",icon:"triangle",title:"Triangle"}],g=rf(),[u,M]=Mt.useState(()=>{var xa;return(null!=(xa=c.find(Ma=>Ma.id===g.selectedTool.id))?xa:c[0]).id}),[ea,ma]=Mt.useState(!1);Mt.useEffect(()=>{M(xa=>{var Ma,Za;return null!=(Za=null==(Ma=c.find(hb=>hb.id===g.selectedTool.id))?void 0:Ma.id)?Za:xa})},[g.selectedTool.id]);return(0,Rb.jsxs)("div",
{className:"tl-geometry-tools-pane-anchor",onMouseEnter:()=>ma(!0),onMouseLeave:()=>ma(!1),children:[(0,Rb.jsx)(Po,Fe({},c.find(xa=>xa.id===u))),ea&&(0,Rb.jsx)("div",{className:"tl-geometry-tools-pane",children:c.map(xa=>(0,Rb.jsx)(Po,Fe({},xa),xa.id))})]})}),QD=Xe(function(){const c=rf();return(0,Rb.jsx)("div",{className:"tl-primary-tools",children:(0,Rb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel","data-tool-locked":c.settings.isToolLocked,children:[(0,Rb.jsx)(Po,{title:"Select",
id:"select",icon:"select-cursor"}),(0,Rb.jsx)(Po,{title:"Move",id:"move",icon:c.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Rb.jsx)(Po,{title:"Draw",id:"pencil",icon:"ballpen"}),(0,Rb.jsx)(Po,{title:"Highlight",id:"highlighter",icon:"highlight"}),(0,Rb.jsx)(Po,{title:"Eraser",id:"erase",icon:"eraser"}),(0,Rb.jsx)(Po,{title:"Connector",id:"line",icon:"connector"}),(0,Rb.jsx)(Po,{title:"Text",id:"text",icon:"text"}),(0,Rb.jsx)(PD,{}),(0,Rb.jsx)(Po,{title:"Logseq Portal",id:"logseq-portal",icon:(0,Rb.jsx)(Jk,
{})})]})})}),RD=Mf(T(16));Rb=T(611);Xe(function(){const c=rf();RD.useEffect(()=>{const g=document.querySelector(".logseq-tldraw-wrapper .tl-canvas"),u=document.querySelector(".logseq-tldraw-wrapper .tl-action-bar");g&&(g.style.height="calc(100% - 32px)");u&&(u.style.marginBottom="32px");return()=>{g&&(g.style.height="100%");u&&(u.style.marginBottom="0px")}});return(0,Rb.jsxs)("div",{className:"tl-statusbar",children:[c.selectedTool.id," | ",c.selectedTool.currentState.id,(0,Rb.jsx)("div",{style:{flex:1}}),
(0,Rb.jsx)("div",{id:"tl-statusbar-anchor",style:{display:"flex"}})]})});Rb=T(611);var SD=Xe(function(){return(0,Rb.jsxs)(Rb.Fragment,{children:[!1,!1,(0,Rb.jsx)(QD,{}),(0,Rb.jsx)(ND,{})]})}),Cs=Mf(T(16)),yr=Mf(T(16)),jp=Mf(T(16)).default.createContext({}),zv=Mf(T(16));Rb=T(611);var TD=Mf(T(16)),Bf=T(16),gz=T(25),UD=T(16),[,VD]=function(c,g){function u(ea){const {children:ma}=ea,xa=hg(ea,["children"]);ea=(0,to.useMemo)(()=>xa,Object.values(xa));return(0,to.createElement)(M.Provider,{value:ea},ma)}
const M=(0,to.createContext)(g);u.displayName=c+"Provider";return[u,function(ea){const ma=(0,to.useContext)(M);if(ma)return ma;if(void 0!==g)return g;throw Error(`\`${ea}\` must be used within \`${c}\``);}]}("Label",{id:void 0,controlRef:{current:null}}),WD=c=>{const g=VD("LabelConsumer"),{controlRef:u}=g;(0,UD.useEffect)(()=>{c&&(u.current=c)},[c,u]);return g.id},hz=T(16),iz=T(16),XD=(0,iz.forwardRef)((c,g)=>(0,iz.createElement)(cl.span,Uf({},c,{ref:g,style:Fe({position:"absolute",border:0,width:1,
height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},c.style)}))),YD=[" ","Enter","ArrowUp","ArrowDown"],ZD=[" ","Enter"],[Nt,Av,$D]=Ak("Select"),[Ds]=cj("Select",[$D]),[aE,zr]=Ds("Select"),[bE,cE]=Ds("Select"),dE=(0,Bf.forwardRef)((c,g)=>{const {__scopeSelect:u,disabled:M=!1,"aria-labelledby":ea}=c;c=hg(c,["__scopeSelect","disabled","aria-labelledby"]);const ma=zr("SelectTrigger",u);g=ki(g,ma.onTriggerChange);const xa=Av(u);var Ma=WD(ma.trigger);
Ma=ea||Ma;const [Za,hb,zb]=Sb(Ob=>{const bc=xa().filter(ic=>!ic.disabled),yc=bc.find(ic=>ic.value===ma.value);Ob=tb(bc,Ob,yc);if(void 0!==Ob)ma.onValueChange(Ob.value)});return(0,Bf.createElement)(cl.button,Uf({type:"button",role:"combobox","aria-controls":ma.contentId,"aria-expanded":ma.open,"aria-autocomplete":"none","aria-labelledby":Ma,dir:ma.dir,"data-state":ma.open?"open":"closed",disabled:M,"data-disabled":M?"":void 0,"data-placeholder":void 0===ma.value?"":void 0},c,{ref:g,onPointerDown:Ag(c.onPointerDown,
Ob=>{Ob.target.releasePointerCapture(Ob.pointerId);0===Ob.button&&!1===Ob.ctrlKey&&(M||(ma.onOpenChange(!0),zb()),ma.triggerPointerDownPosRef.current={x:Math.round(Ob.pageX),y:Math.round(Ob.pageY)},Ob.preventDefault())}),onKeyDown:Ag(c.onKeyDown,Ob=>{const bc=""!==Za.current;Ob.ctrlKey||Ob.altKey||Ob.metaKey||1!==Ob.key.length||hb(Ob.key);bc&&" "===Ob.key||!YD.includes(Ob.key)||(M||(ma.onOpenChange(!0),zb()),Ob.preventDefault())})}))}),eE=(0,Bf.forwardRef)((c,g)=>{const {__scopeSelect:u,children:M,
placeholder:ea}=c;c=hg(c,["__scopeSelect","className","style","children","placeholder"]);const ma=zr("SelectValue",u),{onValueNodeHasChildrenChange:xa}=ma,Ma=void 0!==M;g=ki(g,ma.onValueNodeChange);nn(()=>{xa(Ma)},[xa,Ma]);return(0,Bf.createElement)(cl.span,Uf({},c,{ref:g,style:{pointerEvents:"none"}}),void 0===ma.value&&void 0!==ea?ea:M)}),fE=(0,Bf.forwardRef)((c,g)=>{const {children:u}=c;c=hg(c,["__scopeSelect","children"]);return(0,Bf.createElement)(cl.span,Uf({"aria-hidden":!0},c,{ref:g}),u||
"▼")}),gE=(0,Bf.forwardRef)((c,g)=>{const u=zr("SelectContent",c.__scopeSelect),[M,ea]=(0,Bf.useState)();nn(()=>{ea(new DocumentFragment)},[]);return(0,Bf.createElement)(Bf.Fragment,null,u.open?(0,Bf.createElement)(hE,Uf({},c,{ref:g})):M?(0,gz.createPortal)((0,Bf.createElement)(jz,{scope:c.__scopeSelect},(0,Bf.createElement)(Nt.Slot,{scope:c.__scopeSelect},(0,Bf.createElement)("div",null,c.children))),M):null)}),[jz,Ar]=Ds("SelectContent"),hE=(0,Bf.forwardRef)((c,g)=>{const {__scopeSelect:u,onCloseAutoFocus:M}=
c;c=hg(c,["__scopeSelect","onCloseAutoFocus"]);const ea=zr("SelectContent",u),[ma,xa]=(0,Bf.useState)(null),[Ma,Za]=(0,Bf.useState)(null),[hb,zb]=(0,Bf.useState)(null);g=ki(g,Kd=>Za(Kd));const [Ob,bc]=(0,Bf.useState)(null),[yc,ic]=(0,Bf.useState)(null),Ac=Av(u),[tc,Vb]=(0,Bf.useState)(!1),wc=(0,Bf.useRef)(!0),Uc=(0,Bf.useRef)(!1),Nc=(0,Bf.useRef)(!1);(0,Bf.useEffect)(()=>{if(Ma)return rv(Ma)},[Ma]);Zl();const [ed,ge]=(0,Bf.useState)();nn(()=>{Ma&&ge(window.getComputedStyle(Ma).zIndex)},[Ma]);const Pd=
(0,Bf.useCallback)(Kd=>{const [Ce,...Ee]=Ac().map(sf=>sf.ref.current),[He]=Ee.slice(-1),Ff=document.activeElement;for(const sf of Kd){if(sf===Ff)break;null===sf||void 0===sf||sf.scrollIntoView({block:"nearest"});sf===Ce&&hb&&(hb.scrollTop=0);sf===He&&hb&&(hb.scrollTop=hb.scrollHeight);null===sf||void 0===sf||sf.focus();if(document.activeElement!==Ff)break}},[Ac,hb]),we=(0,Bf.useCallback)(()=>{if(ea.trigger&&ea.valueNode&&ma&&Ma&&hb&&Ob&&yc){var Kd=ea.trigger.getBoundingClientRect(),Ce=Ma.getBoundingClientRect(),
Ee=ea.valueNode.getBoundingClientRect(),He=yc.getBoundingClientRect();"rtl"!==ea.dir?(He=Ee.left-(He.left-Ce.left),Ee=Kd.width+(Kd.left-He),Ce=ka(He,[10,window.innerWidth-10-Math.max(Ee,Ce.width)]),ma.style.minWidth=Ee+"px",ma.style.left=Ce+"px"):(He=window.innerWidth-Ee.right-(Ce.right-He.right),Ee=Kd.width+(window.innerWidth-Kd.right-He),Ce=ka(He,[10,window.innerWidth-10-Math.max(Ee,Ce.width)]),ma.style.minWidth=Ee+"px",ma.style.right=Ce+"px");const fk=Ac();Ce=window.innerHeight-20;var Ff=hb.scrollHeight,
sf=window.getComputedStyle(Ma);Ee=parseInt(sf.borderTopWidth,10);var Xg=parseInt(sf.paddingTop,10);He=parseInt(sf.borderBottomWidth,10);sf=parseInt(sf.paddingBottom,10);var Rg=Ee+Xg+Ff+sf+He;Ff=Math.min(5*Ob.offsetHeight,Rg);var di=window.getComputedStyle(hb);sf=parseInt(di.paddingTop,10);di=parseInt(di.paddingBottom,10);const sk=Kd.top+Kd.height/2-10,rn=Ce-sk;Kd=Ob.offsetHeight/2;Xg=Ee+Xg+(Ob.offsetTop+Kd);Rg-=Xg;Xg<=sk?(Ee=Ob===fk[fk.length-1].ref.current,ma.style.bottom="0px",ma.style.height=Xg+
Math.max(rn,Kd+(Ee?di:0)+(Ma.clientHeight-hb.offsetTop-hb.offsetHeight)+He)+"px"):(He=Ob===fk[0].ref.current,ma.style.top="0px",ma.style.height=Math.max(sk,Ee+hb.offsetTop+(He?sf:0)+Kd)+Rg+"px",hb.scrollTop=Xg-sk+hb.offsetTop);ma.style.margin="10px 0";ma.style.minHeight=Ff+"px";ma.style.maxHeight=Ce+"px";Vb(!0);requestAnimationFrame(()=>Uc.current=!0)}},[Ac,ea.trigger,ea.valueNode,ma,Ma,hb,Ob,yc,ea.dir]);nn(()=>we(),[we]);const mf=(0,Bf.useCallback)(()=>Pd([Ob,Ma]),[Pd,Ob,Ma]);(0,Bf.useEffect)(()=>
{tc&&mf()},[tc,mf]);const Le=(0,Bf.useCallback)(Kd=>{Kd&&!0===wc.current&&(we(),mf(),wc.current=!1)},[we,mf]),{onOpenChange:hf,triggerPointerDownPosRef:ue}=ea;(0,Bf.useEffect)(()=>{if(Ma){var Kd=0,Ce=0;const Ee=Ff=>{var sf,Xg,Rg,di;Kd=Math.abs(Math.round(Ff.pageX)-(null!==(sf=null===(Xg=ue.current)||void 0===Xg?void 0:Xg.x)&&void 0!==sf?sf:0));Ce=Math.abs(Math.round(Ff.pageY)-(null!==(Rg=null===(di=ue.current)||void 0===di?void 0:di.y)&&void 0!==Rg?Rg:0))},He=Ff=>{10>=Kd&&10>=Ce?Ff.preventDefault():
Ma.contains(Ff.target)||hf(!1);document.removeEventListener("pointermove",Ee);ue.current=null};null!==ue.current&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",He,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Ee);document.removeEventListener("pointerup",He,{capture:!0})}}},[Ma,hf,ue]);(0,Bf.useEffect)(()=>{const Kd=()=>hf(!1);window.addEventListener("blur",Kd);window.addEventListener("resize",Kd);return()=>{window.removeEventListener("blur",
Kd);window.removeEventListener("resize",Kd)}},[hf]);const [Nd,kd]=Sb(Kd=>{const Ce=Ac().filter(Ff=>!Ff.disabled),Ee=Ce.find(Ff=>Ff.ref.current===document.activeElement),He=tb(Ce,Kd,Ee);He&&setTimeout(()=>He.ref.current.focus())}),hd=(0,Bf.useCallback)((Kd,Ce,Ee)=>{Ee=!Nc.current&&!Ee;if(void 0!==ea.value&&ea.value===Ce||Ee)bc(Kd),Ee&&(Nc.current=!0)},[ea.value]),td=(0,Bf.useCallback)(()=>null===Ma||void 0===Ma?void 0:Ma.focus(),[Ma]),zd=(0,Bf.useCallback)((Kd,Ce,Ee)=>{Ee=!Nc.current&&!Ee;(void 0!==
ea.value&&ea.value===Ce||Ee)&&ic(Kd)},[ea.value]);return(0,Bf.createElement)(jz,{scope:u,contentWrapper:ma,content:Ma,viewport:hb,onViewportChange:zb,itemRefCallback:hd,selectedItem:Ob,onItemLeave:td,itemTextRefCallback:zd,selectedItemText:yc,onScrollButtonChange:Le,isPositioned:tc,shouldExpandOnScrollRef:Uc,searchRef:Nd},(0,Bf.createElement)(uv,{as:ur,allowPinchZoom:!0},(0,Bf.createElement)("div",{ref:xa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ed}},(0,Bf.createElement)(iy,
{asChild:!0,trapped:ea.open,onMountAutoFocus:Kd=>{Kd.preventDefault()},onUnmountAutoFocus:Ag(M,Kd=>{var Ce;null===(Ce=ea.trigger)||void 0===Ce||Ce.focus({preventScroll:!0});Kd.preventDefault()})},(0,Bf.createElement)(my,Uf({role:"listbox",id:ea.contentId,"data-state":ea.open?"open":"closed",dir:ea.dir,onContextMenu:Kd=>Kd.preventDefault()},c,{ref:g,style:Fe({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},c.style),disableOutsidePointerEvents:!0,onFocusOutside:Kd=>
Kd.preventDefault(),onDismiss:()=>ea.onOpenChange(!1),onKeyDown:Ag(c.onKeyDown,Kd=>{var Ce=Kd.ctrlKey||Kd.altKey||Kd.metaKey;"Tab"===Kd.key&&Kd.preventDefault();Ce||1!==Kd.key.length||kd(Kd.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Kd.key)){let Ee=Ac().filter(He=>!He.disabled).map(He=>He.ref.current);["ArrowUp","End"].includes(Kd.key)&&(Ee=Ee.slice().reverse());["ArrowUp","ArrowDown"].includes(Kd.key)&&(Ce=Ee.indexOf(Kd.target),Ee=Ee.slice(Ce+1));setTimeout(()=>Pd(Ee));Kd.preventDefault()}})}))))))}),
iE=(0,Bf.forwardRef)((c,g)=>{const {__scopeSelect:u}=c;c=hg(c,["__scopeSelect"]);const M=Ar("SelectViewport",u);g=ki(g,M.onViewportChange);const ea=(0,Bf.useRef)(0);return(0,Bf.createElement)(Bf.Fragment,null,(0,Bf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,Bf.createElement)(Nt.Slot,{scope:u},(0,Bf.createElement)(cl.div,
Uf({"data-radix-select-viewport":"",role:"presentation"},c,{ref:g,style:Fe({position:"relative",flex:1,overflow:"auto"},c.style),onScroll:Ag(c.onScroll,ma=>{ma=ma.currentTarget;const {contentWrapper:xa,shouldExpandOnScrollRef:Ma}=M;if(null!==Ma&&void 0!==Ma&&Ma.current&&xa){var Za=Math.abs(ea.current-ma.scrollTop);if(0<Za){var hb=window.innerHeight-20,zb=parseFloat(xa.style.minHeight);const Ob=parseFloat(xa.style.height);zb=Math.max(zb,Ob);zb<hb&&(Za=zb+Za,hb=Math.min(hb,Za),Za-=hb,xa.style.height=
hb+"px","0px"===xa.style.bottom&&(ma.scrollTop=0<Za?Za:0,xa.style.justifyContent="flex-end"))}}ea.current=ma.scrollTop})}))))});Ds("SelectGroup");var [jE,kE]=Ds("SelectItem"),lE=(0,Bf.forwardRef)((c,g)=>{const {__scopeSelect:u,value:M,disabled:ea=!1,textValue:ma}=c;c=hg(c,["__scopeSelect","value","disabled","textValue"]);const xa=zr("SelectItem",u),Ma=Ar("SelectItem",u),Za=xa.value===M,[hb,zb]=(0,Bf.useState)(null!==ma&&void 0!==ma?ma:""),[Ob,bc]=(0,Bf.useState)(!1);g=ki(g,Ac=>{var tc;return null===
(tc=Ma.itemRefCallback)||void 0===tc?void 0:tc.call(Ma,Ac,M,ea)});const yc=vf(),ic=()=>{ea||(xa.onValueChange(M),xa.onOpenChange(!1))};return(0,Bf.createElement)(jE,{scope:u,value:M,disabled:ea,textId:yc,isSelected:Za,onItemTextChange:(0,Bf.useCallback)(Ac=>{zb(tc=>{var Vb;return tc||(null!==(Vb=null===Ac||void 0===Ac?void 0:Ac.textContent)&&void 0!==Vb?Vb:"").trim()})},[])},(0,Bf.createElement)(Nt.ItemSlot,{scope:u,value:M,disabled:ea,textValue:hb},(0,Bf.createElement)(cl.div,Uf({role:"option","aria-labelledby":yc,
"data-highlighted":Ob?"":void 0,"aria-selected":Za&&Ob,"data-state":Za?"checked":"unchecked","aria-disabled":ea||void 0,"data-disabled":ea?"":void 0,tabIndex:ea?void 0:-1},c,{ref:g,onFocus:Ag(c.onFocus,()=>bc(!0)),onBlur:Ag(c.onBlur,()=>bc(!1)),onPointerUp:Ag(c.onPointerUp,ic),onPointerMove:Ag(c.onPointerMove,Ac=>{if(ea){var tc;null===(tc=Ma.onItemLeave)||void 0===tc||tc.call(Ma)}else Ac.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ag(c.onPointerLeave,Ac=>{if(Ac.currentTarget===document.activeElement){var tc;
null===(tc=Ma.onItemLeave)||void 0===tc||tc.call(Ma)}}),onKeyDown:Ag(c.onKeyDown,Ac=>{var tc;if(""===(null===(tc=Ma.searchRef)||void 0===tc?void 0:tc.current)||" "!==Ac.key)ZD.includes(Ac.key)&&ic()," "===Ac.key&&Ac.preventDefault()})}))))}),mE=(0,Bf.forwardRef)((c,g)=>{var {__scopeSelect:u}=c;c=hg(c,["__scopeSelect","className","style"]);const M=zr("SelectItemText",u),ea=Ar("SelectItemText",u),ma=kE("SelectItemText",u);u=cE("SelectItemText",u);const [xa,Ma]=(0,Bf.useState)(null);g=ki(g,bc=>Ma(bc),
ma.onItemTextChange,bc=>{var yc;return null===(yc=ea.itemTextRefCallback)||void 0===yc?void 0:yc.call(ea,bc,ma.value,ma.disabled)});const Za=null===xa||void 0===xa?void 0:xa.textContent,hb=(0,Bf.useMemo)(()=>(0,Bf.createElement)("option",{key:ma.value,value:ma.value,disabled:ma.disabled},Za),[ma.disabled,ma.value,Za]),{onNativeOptionAdd:zb,onNativeOptionRemove:Ob}=u;nn(()=>{zb(hb);return()=>Ob(hb)},[zb,Ob,hb]);return(0,Bf.createElement)(Bf.Fragment,null,(0,Bf.createElement)(cl.span,Uf({id:ma.textId},
c,{ref:g})),ma.isSelected&&M.valueNode&&!M.valueNodeHasChildren?(0,gz.createPortal)(c.children,M.valueNode):null)}),nE=(0,Bf.forwardRef)((c,g)=>{const u=Ar("SelectScrollUpButton",c.__scopeSelect),[M,ea]=(0,Bf.useState)(!1);g=ki(g,u.onScrollButtonChange);nn(()=>{if(u.viewport&&u.isPositioned){let ma=function(){ea(0<xa.scrollTop)};const xa=u.viewport;ma();xa.addEventListener("scroll",ma);return()=>xa.removeEventListener("scroll",ma)}},[u.viewport,u.isPositioned]);return M?(0,Bf.createElement)(kz,Uf({},
c,{ref:g,onAutoScroll:()=>{const {viewport:ma,selectedItem:xa}=u;ma&&xa&&(ma.scrollTop-=xa.offsetHeight)}})):null}),oE=(0,Bf.forwardRef)((c,g)=>{const u=Ar("SelectScrollDownButton",c.__scopeSelect),[M,ea]=(0,Bf.useState)(!1);g=ki(g,u.onScrollButtonChange);nn(()=>{if(u.viewport&&u.isPositioned){let ma=function(){ea(Math.ceil(xa.scrollTop)<xa.scrollHeight-xa.clientHeight)};const xa=u.viewport;ma();xa.addEventListener("scroll",ma);return()=>xa.removeEventListener("scroll",ma)}},[u.viewport,u.isPositioned]);
return M?(0,Bf.createElement)(kz,Uf({},c,{ref:g,onAutoScroll:()=>{const {viewport:ma,selectedItem:xa}=u;ma&&xa&&(ma.scrollTop+=xa.offsetHeight)}})):null}),kz=(0,Bf.forwardRef)((c,g)=>{const {__scopeSelect:u,onAutoScroll:M}=c;c=hg(c,["__scopeSelect","onAutoScroll"]);const ea=Ar("SelectScrollButton",u),ma=(0,Bf.useRef)(null),xa=Av(u),Ma=(0,Bf.useCallback)(()=>{null!==ma.current&&(window.clearInterval(ma.current),ma.current=null)},[]);(0,Bf.useEffect)(()=>()=>Ma(),[Ma]);nn(()=>{var Za;const hb=xa().find(zb=>
zb.ref.current===document.activeElement);null===hb||void 0===hb||null===(Za=hb.ref.current)||void 0===Za||Za.scrollIntoView({block:"nearest"})},[xa]);return(0,Bf.createElement)(cl.div,Uf({"aria-hidden":!0},c,{ref:g,style:Fe({flexShrink:0},c.style),onPointerMove:Ag(c.onPointerMove,()=>{var Za;null===(Za=ea.onItemLeave)||void 0===Za||Za.call(ea);null===ma.current&&(ma.current=window.setInterval(M,50))}),onPointerLeave:Ag(c.onPointerLeave,()=>{Ma()})}))}),lz=(0,Bf.forwardRef)((c,g)=>{const {value:u}=
c;c=hg(c,["value"]);const M=(0,Bf.useRef)(null);g=ki(g,M);const ea=Db(u);(0,Bf.useEffect)(()=>{const ma=M.current,xa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(ea!==u&&xa){const Ma=new Event("change",{bubbles:!0});xa.call(ma,u);ma.dispatchEvent(Ma)}},[ea,u]);return(0,Bf.createElement)(XD,{asChild:!0},(0,Bf.createElement)("select",Uf({},c,{ref:g,defaultValue:u})))});lz.displayName="BubbleSelect";var Iq=c=>{const {__scopeSelect:g,children:u,open:M,defaultOpen:ea,
onOpenChange:ma,value:xa,defaultValue:Ma,onValueChange:Za,dir:hb,name:zb,autoComplete:Ob}=c,[bc,yc]=(0,Bf.useState)(null),[ic,Ac]=(0,Bf.useState)(null),[tc,Vb]=(0,Bf.useState)(!1),wc=dj(hb),[Uc=!1,Nc]=nj({prop:M,defaultProp:ea,onChange:ma}),[ed,ge]=nj({prop:xa,defaultProp:Ma,onChange:Za}),Pd=(0,Bf.useRef)(null),we=bc?!!bc.closest("form"):!0,[mf,Le]=(0,Bf.useState)(new Set),hf=Array.from(mf).map(ue=>ue.props.value).join(";");return(0,Bf.createElement)(aE,{scope:g,trigger:bc,onTriggerChange:yc,valueNode:ic,
onValueNodeChange:Ac,valueNodeHasChildren:tc,onValueNodeHasChildrenChange:Vb,contentId:vf(),value:ed,onValueChange:ge,open:Uc,onOpenChange:Nc,dir:wc,triggerPointerDownPosRef:Pd},(0,Bf.createElement)(Nt.Provider,{scope:g},(0,Bf.createElement)(bE,{scope:c.__scopeSelect,onNativeOptionAdd:(0,Bf.useCallback)(ue=>{Le(Nd=>(new Set(Nd)).add(ue))},[]),onNativeOptionRemove:(0,Bf.useCallback)(ue=>{Le(Nd=>{Nd=new Set(Nd);Nd.delete(ue);return Nd})},[])},u)),we?(0,Bf.createElement)(lz,{key:hf,"aria-hidden":!0,
tabIndex:-1,name:zb,autoComplete:Ob,value:ed,onChange:ue=>ge(ue.target.value)},Array.from(mf)):null)},pE=dE,qE=eE,rE=fE,sE=c=>(0,Bf.createElement)(aD,Uf({asChild:!0},c)),tE=gE,uE=iE,vE=lE,wE=mE,xE=nE,yE=oE;Rb=T(611);var zE=Mf(T(16));Rb=T(611);var Bv=zE.forwardRef((c,g)=>{var {value:u,className:M}=c;c=hg(c,["autoResize","value","className"]);return(0,Rb.jsx)("div",{className:"tl-input"+(M?" "+M:""),children:(0,Rb.jsxs)("div",{className:"tl-input-sizer",children:[(0,Rb.jsx)("div",{className:"tl-input-hidden",
children:u}),(0,Rb.jsx)("input",Fe({ref:g,value:u,className:"tl-text-input",type:"text"},c))]})})}),dl=Mf(T(16)),mz=T(16),nz=(0,mz.forwardRef)((c,g)=>{const {pressed:u,defaultPressed:M=!1,onPressedChange:ea}=c,ma=hg(c,["pressed","defaultPressed","onPressedChange"]),[xa=!1,Ma]=nj({prop:u,onChange:ea,defaultProp:M});return(0,mz.createElement)(cl.button,Uf({type:"button","aria-pressed":xa,"data-state":xa?"on":"off","data-disabled":c.disabled?"":void 0},ma,{ref:g,onClick:Ag(c.onClick,()=>{c.disabled||
Ma(!xa)})}))}),AE=nz,[oz]=cj("ToggleGroup",[Bt]),pz=Bt(),BE=dl.default.forwardRef((c,g)=>{const {type:u}=c;c=hg(c,["type"]);if("single"===u)return dl.default.createElement(CE,Uf({},c,{ref:g}));if("multiple"===u)return dl.default.createElement(DE,Uf({},c,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[qz,rz]=oz("ToggleGroup"),CE=dl.default.forwardRef((c,g)=>{const {value:u,defaultValue:M,onValueChange:ea=()=>{}}=c,ma=hg(c,["value","defaultValue","onValueChange"]),[xa,Ma]=
nj({prop:u,defaultProp:M,onChange:ea});return dl.default.createElement(qz,{scope:c.__scopeToggleGroup,type:"single",value:xa?[xa]:[],onItemActivate:Ma,onItemDeactivate:dl.default.useCallback(()=>Ma(""),[Ma])},dl.default.createElement(sz,Uf({},ma,{ref:g})))}),DE=dl.default.forwardRef((c,g)=>{const {value:u,defaultValue:M,onValueChange:ea=()=>{}}=c,ma=hg(c,["value","defaultValue","onValueChange"]),[xa=[],Ma]=nj({prop:u,defaultProp:M,onChange:ea}),Za=dl.default.useCallback(zb=>Ma((Ob=[])=>[...Ob,zb]),
[Ma]),hb=dl.default.useCallback(zb=>Ma((Ob=[])=>Ob.filter(bc=>bc!==zb)),[Ma]);return dl.default.createElement(qz,{scope:c.__scopeToggleGroup,type:"multiple",value:xa,onItemActivate:Za,onItemDeactivate:hb},dl.default.createElement(sz,Uf({},ma,{ref:g})))}),[EE,FE]=oz("ToggleGroup"),sz=dl.default.forwardRef((c,g)=>{const {__scopeToggleGroup:u,disabled:M=!1,rovingFocus:ea=!0,orientation:ma,dir:xa,loop:Ma=!0}=c;var Za=hg(c,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));c=pz(u);
const hb=dj(xa);Za=Fe({role:"group",dir:hb},Za);return dl.default.createElement(EE,{scope:u,rovingFocus:ea,disabled:M},ea?dl.default.createElement(Iy,Uf({asChild:!0},c,{orientation:ma,dir:hb,loop:Ma}),dl.default.createElement(cl.div,Uf({},Za,{ref:g}))):dl.default.createElement(cl.div,Uf({},Za,{ref:g})))}),GE=dl.default.forwardRef((c,g)=>{var u=rz("ToggleGroupItem",c.__scopeToggleGroup);const M=FE("ToggleGroupItem",c.__scopeToggleGroup),ea=pz(c.__scopeToggleGroup);u=u.value.includes(c.value);const ma=
M.disabled||c.disabled;c=wf(Fe({},c),{pressed:u,disabled:ma});const xa=dl.default.useRef(null);return M.rovingFocus?dl.default.createElement(Jy,Uf({asChild:!0},ea,{focusable:!ma,active:u,ref:xa}),dl.default.createElement(tz,Uf({},c,{ref:g}))):dl.default.createElement(tz,Uf({},c,{ref:g}))}),tz=dl.default.forwardRef((c,g)=>{const {__scopeToggleGroup:u,value:M}=c,ea=hg(c,["__scopeToggleGroup","value"]),ma=rz("ToggleGroupItem",u);c={role:"radio","aria-checked":c.pressed,"aria-pressed":void 0};return dl.default.createElement(nz,
Uf({},"single"===ma.type?c:void 0,ea,{ref:g,onPressedChange:xa=>{if(xa)ma.onItemActivate(M);else ma.onItemDeactivate(M)}}))}),uz=BE,vz=GE;Rb=T(611);Rb=T(611);Rb=T(611);var wz="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink IFrameSource LogseqPortalViewMode ArrowMode OpenPage".split(" "),HE=["Edit","YoutubeLink","IFrameSource","OpenPage"],Fn=new Map,Cv={"logseq-portal":["Edit","LogseqPortalViewMode","ScaleLevel","OpenPage","AutoResizing"],youtube:["YoutubeLink"],iframe:["IFrameSource"],
box:["Swatch","NoFill","StrokeType"],ellipse:["Swatch","NoFill","StrokeType"],polygon:["Swatch","NoFill","StrokeType"],line:["Edit","Swatch","ArrowMode"],pencil:["Swatch"],highlighter:["Swatch"],text:["Edit","Swatch","ScaleLevel","AutoResizing","TextStyle"],html:["ScaleLevel","AutoResizing"]},IE=Object.entries(Cv).filter(([,c])=>c.includes("NoFill")&&c.includes("Swatch")).map(([c])=>c),JE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"Edit")[0];return(0,Rb.jsx)(ji,{type:"button",title:"Edit",onClick:()=>
{var u,M,ea,ma,xa,Ma;c.api.editShape(g);if("logseq-portal"===g.props.type){let Za=g.props.pageId;"P"===g.props.blockType&&(Za=(null==(ea=null==(M=null==(u=window.logseq)?void 0:u.api)?void 0:M.get_page_blocks_tree)?void 0:ea.call(M,g.props.pageId).find(hb=>!("propertiesOrder"in hb))).uuid);null==(Ma=null==(xa=null==(ma=window.logseq)?void 0:ma.api)?void 0:xa.edit_block)?void 0:Ma.call(xa,Za)}},children:(0,Rb.jsx)(zi,{name:"text"})})}),KE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"AutoResizing"),
u=g.every(M=>M.props.isAutoResizing);return(0,Rb.jsx)(Zb,{title:"Auto Resize",toggle:g.every(M=>"logseq-portal"===M.props.type),className:"tl-button",pressed:u,onPressedChange:M=>{g.forEach(ea=>{if("logseq-portal"===ea.props.type)ea.update({isAutoResizing:M});else ea.onResetBounds({zoom:c.viewport.camera.zoom})});c.persist()},children:(0,Rb.jsx)(zi,{name:"dimensions"})})}),LE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"LogseqPortalViewMode"),u=g.every(M=>M.collapsed);return(0,Rb.jsx)(rb,{title:"View Mode",
options:[{value:"1",icon:"object-compact"},{value:"0",icon:"object-expanded"}],value:u?"1":"0",onValueChange:M=>{g.forEach(ea=>{ea.setCollapsed("1"===M?!0:!1)});c.persist()}})}),ME=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"ScaleLevel"),u=1<(new Set(g.map(M=>M.scaleLevel))).size?"":g[0].scaleLevel;return(0,Rb.jsx)(Nb,{title:"Scale Level",options:[{label:"Extra Small",value:"xs"},{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"},{label:"Extra Large",value:"xl"},
{label:"Huge",value:"xxl"}],value:u,onValueChange:M=>{g.forEach(ea=>{ea.setScaleLevel(M)});c.persist()}})}),NE=Xe(()=>{const {handlers:c}=yr.default.useContext(jp);var g=rf();g=zc(g.selectedShapesArray,"OpenPage")[0];const {pageId:u,blockType:M}=g.props;return(0,Rb.jsxs)("span",{className:"flex gap-1",children:[(0,Rb.jsx)(ji,{title:"Open Page in Right Sidebar",type:"button",onClick:()=>null==c?void 0:c.sidebarAddBlock(u,"B"===M?"block":"page"),children:(0,Rb.jsx)(zi,{name:"layout-sidebar-right"})}),
(0,Rb.jsx)(ji,{title:"Open Page",type:"button",onClick:()=>null==c?void 0:c.redirectToPage(u),children:(0,Rb.jsx)(zi,{name:"external-link"})})]})}),OE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"IFrameSource")[0],u=yr.default.useCallback(ea=>{g.onIFrameSourceChange(ea.target.value.trim().toLowerCase());c.persist()},[]),M=yr.default.useCallback(()=>{g.reload()},[]);return(0,Rb.jsxs)("span",{className:"flex gap-3",children:[(0,Rb.jsx)(ji,{title:"Reload",type:"button",onClick:M,children:(0,Rb.jsx)(zi,
{name:"refresh"})}),(0,Rb.jsx)(Bv,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:u}),(0,Rb.jsx)(ji,{title:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,Rb.jsx)(zi,{name:"external-link"})})]})}),PE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"YoutubeLink")[0],u=yr.default.useCallback(M=>{g.onYoutubeLinkChange(M.target.value);c.persist()},[]);return(0,Rb.jsxs)("span",{className:"flex gap-3",children:[(0,Rb.jsx)(Bv,{title:"YouTube Link",
className:"tl-youtube-link",value:`${g.props.url}`,onChange:u}),(0,Rb.jsx)(ji,{title:"Open YouTube Link",type:"button",onClick:()=>{var M,ea,ma;return null==(ma=null==(ea=null==(M=window.logseq)?void 0:M.api)?void 0:ea.open_external_link)?void 0:ma.call(ea,g.props.url)},children:(0,Rb.jsx)(zi,{name:"external-link"})})]})}),QE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"NoFill"),u=yr.default.useCallback(ea=>{g.forEach(ma=>ma.update({noFill:ea}));c.persist()},[]),M=g.every(ea=>ea.props.noFill);
return(0,Rb.jsx)(Zb,{title:"Fill Toggle",className:"tl-button",pressed:M,onPressedChange:u,children:M?(0,Rb.jsx)(zi,{name:"eye-off"}):(0,Rb.jsx)(zi,{name:"eye"})})}),RE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"Swatch"),u=yr.default.useMemo(()=>{let M="";return Ef(ea=>{g.forEach(ma=>{ma.update({fill:M,stroke:M})});c.persist()},100,ea=>{M=ea.target.value})},[]);return(0,Rb.jsx)(ac,{title:"Color Picker",value:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,onChange:u})}),SE=Xe(()=>{const c=
rf(),g=zc(c.selectedShapesArray,"StrokeType"),u=g.every(M=>"dashed"===M.props.strokeType)?"dashed":g.every(M=>"line"===M.props.strokeType)?"line":"mixed";return(0,Rb.jsx)(rb,{title:"Stroke Type",options:[{value:"line",icon:"circle"},{value:"dashed",icon:"circle-dashed"}],value:u,onValueChange:M=>{g.forEach(ea=>{ea.update({strokeType:M})});c.persist()}})}),TE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,"ArrowMode");var u=g.every(ea=>{var ma;return"arrow"===(null==(ma=ea.props.decorations)?void 0:
ma.start)});const M=g.every(ea=>{var ma;return"arrow"===(null==(ma=ea.props.decorations)?void 0:ma.end)});u=[u?"start":null,M?"end":null].filter(zg);return(0,Rb.jsx)(Kb,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:u,onValueChange:ea=>{g.forEach(ma=>{var xa=ma.update;var Ma={start:ea.includes("start")?"arrow":null,end:ea.includes("end")?"arrow":null};xa.call(ma,{decorations:Ma})});c.persist()}})}),UE=Xe(()=>{const c=rf(),g=zc(c.selectedShapesArray,
"TextStyle"),u=g.every(ea=>500<ea.props.fontWeight),M=g.every(ea=>ea.props.italic);return(0,Rb.jsxs)("span",{className:"flex gap-1",children:[(0,Rb.jsx)(Zb,{title:"Bold",className:"tl-button",pressed:u,onPressedChange:ea=>{g.forEach(ma=>{ma.update({fontWeight:ea?700:400});ma.onResetBounds()});c.persist()},children:(0,Rb.jsx)(zi,{name:"bold"})}),(0,Rb.jsx)(Zb,{title:"Italic",className:"tl-button",pressed:M,onPressedChange:ea=>{g.forEach(ma=>{ma.update({italic:ea});ma.onResetBounds()});c.persist()},
children:(0,Rb.jsx)(zi,{name:"italic"})})]})});Fn.set("Edit",JE);Fn.set("AutoResizing",KE);Fn.set("LogseqPortalViewMode",LE);Fn.set("ScaleLevel",ME);Fn.set("OpenPage",NE);Fn.set("YoutubeLink",PE);Fn.set("IFrameSource",OE);Fn.set("NoFill",QE);Fn.set("Swatch",RE);Fn.set("StrokeType",SE);Fn.set("ArrowMode",TE);Fn.set("TextStyle",UE);var xz=c=>{var g;return(null!=(g=Cv[c])?g:[]).filter(zg)},VE=c=>{const g=c.map(M=>M.props.type),u=new Set(0<c.length?xz(g[0]):[]);for(let M=1;M<g.length&&0<u.size;M++){const ea=
xz(g[M]);u.forEach(ma=>{ea.includes(ma)||u.delete(ma)})}1<c.length&&HE.forEach(M=>{u.has(M)&&u.delete(M)});return Array.from(u).sort((M,ea)=>wz.indexOf(M)-wz.indexOf(ea)).map(M=>Fn.get(M))};Rb=T(611);var WE=Xe(({shapes:c,offsets:g,hidden:u})=>{const M=rf(),ea=Cs.useRef(null),ma=Cs.useRef(null);Cs.useLayoutEffect(()=>{setTimeout(()=>{const Ma=ma.current;if(Ma){var {offsetWidth:Za,offsetHeight:hb}=Ma;ea.current=[Za,hb]}})});Cs.useLayoutEffect(()=>{var Ma;const Za=ma.current;if(Za){var hb=null!=(Ma=
ea.current)?Ma:[0,0];Ma=wf(Fe({},g),{bottom:g.bottom-32});var zb=0;if(116>Ma.top){var Ob=Ma.height/2+72;140>Ma.bottom&&(Ob+=Ma.bottom-140)}else Ob=-(Ma.height/2+40);16>Ma.left+Ma.width/2-hb[0]/2?zb+=-(Ma.left+Ma.width/2-hb[0]/2-16):16>Ma.right+Ma.width/2-hb[0]/2&&(zb+=Ma.right+Ma.width/2-hb[0]/2-16);var [bc,yc]=[zb,Ob];Za.style.setProperty("transform",`translateX(${bc}px) translateY(${yc}px)`)}},[g]);if(!M)return null;const xa=VE(c);return(0,Rb.jsx)(gp,{centered:!0,children:0<xa.length&&(0,Rb.jsx)("div",
{ref:ma,className:"tl-toolbar tl-context-bar",style:{visibility:u?"hidden":"visible",pointerEvents:u?"none":"all"},children:xa.map((Ma,Za)=>(0,Rb.jsxs)(Cs.Fragment,{children:[(0,Rb.jsx)(Ma,{}),Za<xa.length-1&&(0,Rb.jsx)(Bs,{className:"tl-toolbar-separator",orientation:"vertical"})]},Za))})})}),yz=Mf(T(16)),Ll=T(16),[XE]=cj("ContextMenu",[It]),Es=It(),[YE,zz]=XE("ContextMenu"),ZE=(0,Ll.forwardRef)((c,g)=>{var {__scopeContextMenu:u}=c;const M=hg(c,["__scopeContextMenu"]),ea=zz("ContextMenuTrigger",
u);u=Es(u);const ma=(0,Ll.useRef)({x:0,y:0}),xa=(0,Ll.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(Fe({width:0,height:0},ma.current))}),Ma=(0,Ll.useRef)(0),Za=(0,Ll.useCallback)(()=>window.clearTimeout(Ma.current),[]);(0,Ll.useEffect)(()=>Za,[Za]);return(0,Ll.createElement)(Ll.Fragment,null,(0,Ll.createElement)(Xy,Uf({},u,{virtualRef:xa})),(0,Ll.createElement)(cl.span,Uf({"data-state":ea.open?"open":"closed"},M,{ref:g,style:Fe({WebkitTouchCallout:"none"},c.style),onContextMenu:Ag(c.onContextMenu,
hb=>{Za();ma.current={x:hb.clientX,y:hb.clientY};ea.onOpenChange(!0);hb.preventDefault()}),onPointerDown:Ag(c.onPointerDown,Mc(hb=>{Za();Ma.current=window.setTimeout(()=>{ma.current={x:hb.clientX,y:hb.clientY};ea.onOpenChange(!0)},700)})),onPointerMove:Ag(c.onPointerMove,Mc(Za)),onPointerCancel:Ag(c.onPointerCancel,Mc(Za)),onPointerUp:Ag(c.onPointerUp,Mc(Za))})))}),$E=(0,Ll.forwardRef)((c,g)=>{var {__scopeContextMenu:u}=c;const M=hg(c,["__scopeContextMenu"]),ea=zz("ContextMenuContent",u);u=Es(u);
const ma=(0,Ll.useRef)(!1);return(0,Ll.createElement)(Zy,Uf({},u,M,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:xa=>{var Ma;null===(Ma=c.onCloseAutoFocus)||void 0===Ma||Ma.call(c,xa);!xa.defaultPrevented&&ma.current&&xa.preventDefault();ma.current=!1},onInteractOutside:xa=>{var Ma;null===(Ma=c.onInteractOutside)||void 0===Ma||Ma.call(c,xa);xa.defaultPrevented||ea.modal||(ma.current=!0)},style:wf(Fe({},c.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Gn=(0,Ll.forwardRef)((c,g)=>{var {__scopeContextMenu:u}=c;c=hg(c,["__scopeContextMenu"]);u=Es(u);return(0,Ll.createElement)(az,Uf({},u,c,{ref:g}))}),Fs=(0,Ll.forwardRef)((c,g)=>{var {__scopeContextMenu:u}=c;c=hg(c,["__scopeContextMenu"]);u=Es(u);return(0,Ll.createElement)(GD,Uf({},u,c,{ref:g}))}),aF=c=>{const {__scopeContextMenu:g,children:u,onOpenChange:M,dir:ea,modal:ma=!0}=c,[xa,Ma]=(0,Ll.useState)(!1);c=Es(g);const Za=Jj(M),hb=(0,Ll.useCallback)(zb=>{Ma(zb);Za(zb)},[Za]);return(0,Ll.createElement)(YE,
{scope:g,open:xa,onOpenChange:hb,modal:ma},(0,Ll.createElement)(bz,Uf({},c,{dir:ea,open:xa,onOpenChange:hb,modal:ma}),u))};Rb=T(611);var bF=Xe(function({children:c,collisionRef:g}){var u,M,ea,ma,xa;const Ma=rf(),Za=yz.useRef(null),hb=Ob=>{Ob();Ma.transition("select")},zb=yz.useMemo(()=>{var Ob,bc,yc;return(null==(yc=null==(bc=null==(Ob=null==window?void 0:window.logseq)?void 0:Ob.api)?void 0:bc.get_state_from_store)?void 0:yc.call(bc,"ui/developer-mode?"))||!1},[]);return(0,Rb.jsxs)(aF,{children:[(0,Rb.jsx)(ZE,
{children:c}),(0,Rb.jsx)($E,{className:"tl-menu tl-context-menu",ref:Za,onEscapeKeyDown:()=>Ma.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,Rb.jsxs)("div",{children:[1<(null==(u=Ma.selectedShapes)?void 0:u.size)&&(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsxs)(Gn,{children:[(0,Rb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Rb.jsx)(ji,{title:"Align left",onClick:()=>hb(()=>Ma.align("left")),children:(0,Rb.jsx)(zi,{name:"layout-align-left"})}),
(0,Rb.jsx)(ji,{title:"Align center horizontally",onClick:()=>hb(()=>Ma.align("centerHorizontal")),children:(0,Rb.jsx)(zi,{name:"layout-align-center"})}),(0,Rb.jsx)(ji,{title:"Align right",onClick:()=>hb(()=>Ma.align("right")),children:(0,Rb.jsx)(zi,{name:"layout-align-right"})}),(0,Rb.jsx)(Bs,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Rb.jsx)(ji,{title:"Distribute horizontally",onClick:()=>hb(()=>Ma.distribute("horizontal")),children:(0,Rb.jsx)(zi,{name:"layout-distribute-vertical"})})]}),
(0,Rb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Rb.jsx)(ji,{title:"Align top",onClick:()=>hb(()=>Ma.align("top")),children:(0,Rb.jsx)(zi,{name:"layout-align-top"})}),(0,Rb.jsx)(ji,{title:"Align center vertically",onClick:()=>hb(()=>Ma.align("centerVertical")),children:(0,Rb.jsx)(zi,{name:"layout-align-middle"})}),(0,Rb.jsx)(ji,{title:"Align bottom",onClick:()=>hb(()=>Ma.align("bottom")),children:(0,Rb.jsx)(zi,{name:"layout-align-bottom"})}),(0,Rb.jsx)(Bs,{className:"tl-toolbar-separator",
orientation:"vertical"}),(0,Rb.jsx)(ji,{title:"Distribute vertically",onClick:()=>hb(()=>Ma.distribute("vertical")),children:(0,Rb.jsx)(zi,{name:"layout-distribute-horizontal"})})]})]}),(0,Rb.jsx)(Fs,{className:"menu-separator"}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.packIntoRectangle),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,Rb.jsx)(Fs,{className:"menu-separator"})]}),0<(null==(M=Ma.selectedShapes)?void 0:M.size)&&(0,Rb.jsxs)(Rb.Fragment,
{children:[(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.cut),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"X"})]})})]}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.copy),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"C"})]})})]})]}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.paste),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"V"})]})})]}),(0,Rb.jsx)(Fs,
{className:"menu-separator"}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.api.selectAll),children:["Select all",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:oq})," ",(0,Rb.jsx)("code",{children:"A"})]})})]}),1<(null==(ea=Ma.selectedShapes)?void 0:ea.size)&&(0,Rb.jsx)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.api.deselectAll),children:"Deselect all"}),0<(null==(ma=Ma.selectedShapes)?
void 0:ma.size)&&(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.api.deleteShapes),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsx)("span",{className:"keyboard-shortcut",children:(0,Rb.jsx)("code",{children:"Del"})})})]}),1<(null==(xa=Ma.selectedShapes)?void 0:xa.size)&&(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)(Fs,{className:"menu-separator"}),(0,Rb.jsxs)(Gn,
{className:"tl-menu-item",onClick:()=>hb(Ma.flipHorizontal),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.flipVertical),children:[(0,Rb.jsx)(zi,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,Rb.jsx)(Fs,{className:"menu-separator"}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.bringToFront),children:["Move to front",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:"⇧"})," ",(0,Rb.jsx)("code",{children:"]"})]})})]}),(0,Rb.jsxs)(Gn,{className:"tl-menu-item",onClick:()=>hb(Ma.sendToBack),children:["Move to back",(0,Rb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Rb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Rb.jsx)("code",{children:"⇧"})," ",(0,Rb.jsx)("code",{children:"["})]})})]}),zb&&(0,Rb.jsx)(Gn,{className:"tl-menu-item",onClick:()=>console.log(Ma.selectedShapesArray.map(Ob=>
me(Ob.serialized,new Map))),children:"(Dev) Print shape props"})]})]})})]})}),cF=Mf(T(16)),Az=Mf(T(16)),Qo=function(c){function g(u){u=c.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+u+" for more information.")||this;if(void 0===u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}vd(g,c);return g}(Fd(Error)),Bz={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",
azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",
darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",
indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",
magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",
paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",
thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},dF=/^#[a-fA-F0-9]{6}$/,eF=/^#[a-fA-F0-9]{8}$/,fF=/^#[a-fA-F0-9]{3}$/,gF=/^#[a-fA-F0-9]{4}$/,Dv=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,hF=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,iF=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,
jF=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ev=function(c){return 7===c.length&&c[1]===c[2]&&c[3]===c[4]&&c[5]===c[6]?"#"+c[1]+c[3]+c[5]:c},kF=Rf(Li,Li.length,[]);Rb=T(611);Rb=T(611);var Ot=class extends Dn{constructor(){super(...arguments);kb(this,"ReactComponent",Xe(({events:c,isErasing:g,isBinding:u,isSelected:M})=>{const {props:{size:[ea,ma],stroke:xa,fill:Ma,noFill:Za,strokeWidth:hb,
strokeType:zb,borderRadius:Ob,opacity:bc}}=this;return(0,Rb.jsxs)($n,wf(Fe({},c),{opacity:g?.2:bc,children:[u&&(0,Rb.jsx)(Mg,{mode:"svg",strokeWidth:hb,size:[ea,ma]}),(0,Rb.jsx)("rect",{className:M||!Za?"tl-hitarea-fill":"tl-hitarea-stroke",x:hb/2,y:hb/2,rx:Ob,ry:Ob,width:Math.max(.01,ea-hb),height:Math.max(.01,ma-hb),pointerEvents:"all"}),(0,Rb.jsx)("rect",{x:hb/2,y:hb/2,rx:Ob,ry:Ob,width:Math.max(.01,ea-hb),height:Math.max(.01,ma-hb),strokeWidth:hb,stroke:Za?Ma:xa,strokeDasharray:"dashed"===zb?
"8 2":void 0,fill:Za?"none":Ma})]}))}));kb(this,"ReactIndicator",Xe(()=>{const {props:{size:[c,g],borderRadius:u}}=this;return(0,Rb.jsx)("rect",{width:c,height:g,rx:u,ry:u,fill:"transparent"})}));kb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));void 0!==c.borderRadius&&(c.borderRadius=Math.max(0,c.borderRadius));return Fg(this,c)})}};kb(Ot,"id","box");kb(Ot,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],
borderRadius:2,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Rb=T(611);var Fv=class extends Yu{constructor(){super(...arguments);kb(this,"ReactComponent",Xe(({events:c,isErasing:g})=>{const {radius:u,stroke:M,fill:ea,strokeWidth:ma,opacity:xa}=this.props;return(0,Rb.jsxs)($n,wf(Fe({},c),{opacity:g?.2:xa,children:[(0,Rb.jsx)("circle",{className:"tl-hitarea-fill",cx:u,cy:u,r:u}),(0,Rb.jsx)("circle",{cx:u,cy:u,r:u,stroke:M,fill:ea,
strokeWidth:ma,pointerEvents:"none"})]}))}));kb(this,"ReactIndicator",Xe(()=>{const {radius:c}=this.props;return(0,Rb.jsx)("circle",{cx:c,cy:c,r:c,pointerEvents:"all"})}));kb(this,"validateProps",c=>{void 0!==c.radius&&(c.radius=Math.max(c.radius,1));return Fg(this,c)})}};kb(Fv,"id","dot");kb(Fv,"defaultProps",{id:"dot",parentId:"page",type:"dot",point:[0,0],radius:4,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Rb=T(611);var Pt=
class extends Zu{constructor(){super(...arguments);kb(this,"ReactComponent",Xe(({isSelected:c,isErasing:g,events:u})=>{const {size:[M,ea],stroke:ma,fill:xa,noFill:Ma,strokeWidth:Za,strokeType:hb,opacity:zb}=this.props;return(0,Rb.jsxs)($n,wf(Fe({},u),{opacity:g?.2:zb,children:[(0,Rb.jsx)("ellipse",{className:c||!Ma?"tl-hitarea-fill":"tl-hitarea-stroke",cx:M/2,cy:ea/2,rx:Math.max(.01,(M-Za)/2),ry:Math.max(.01,(ea-Za)/2)}),(0,Rb.jsx)("ellipse",{cx:M/2,cy:ea/2,rx:Math.max(.01,(M-Za)/2),ry:Math.max(.01,
(ea-Za)/2),strokeWidth:Za,stroke:Ma?xa:ma,strokeDasharray:"dashed"===hb?"8 2":void 0,fill:Ma?"none":xa})]}))}));kb(this,"ReactIndicator",Xe(()=>{const {size:[c,g]}=this.props;return(0,Rb.jsx)("ellipse",{cx:c/2,cy:g/2,rx:c/2,ry:g/2,strokeWidth:2,fill:"transparent"})}));kb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));return Fg(this,c)})}getShapeSVGJsx(c){const {size:[g,u],stroke:M,fill:ea,noFill:ma,strokeWidth:xa,strokeType:Ma,opacity:Za}=
this.props;return(0,Rb.jsxs)("g",{opacity:Za,children:[(0,Rb.jsx)("ellipse",{className:ma?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:u/2,rx:Math.max(.01,(g-xa)/2),ry:Math.max(.01,(u-xa)/2)}),(0,Rb.jsx)("ellipse",{cx:g/2,cy:u/2,rx:Math.max(.01,(g-xa)/2),ry:Math.max(.01,(u-xa)/2),strokeWidth:xa,stroke:ma?ea:M,strokeDasharray:"dashed"===Ma?"8 2":void 0,fill:ma?"none":ea})]})}};kb(Pt,"id","ellipse");kb(Pt,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"#000000",
fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Rb=T(611);var Gs=class extends qr{constructor(c={}){super(c);kb(this,"ReactComponent",Xe(({events:g,isErasing:u})=>{const {pointsPath:M,props:{stroke:ea,strokeWidth:ma,opacity:xa}}=this;return(0,Rb.jsx)($n,wf(Fe({},g),{opacity:u?.2:xa,children:(0,Rb.jsx)("path",{d:M,strokeWidth:16*ma,stroke:ea,fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:.5})}))}));kb(this,"ReactIndicator",
Xe(()=>{const {pointsPath:g}=this;return(0,Rb.jsx)("path",{d:g,fill:"none"})}));kb(this,"validateProps",g=>{g=Fg(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});yf(this)}get pointsPath(){const {points:c}=this.props;return ok.getCurvedPathForPoints(c)}getShapeSVGJsx(){const {pointsPath:c,props:{stroke:g,strokeWidth:u}}=this;return(0,Rb.jsx)("path",{d:c,strokeWidth:16*u,stroke:g,fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:.5})}};
kb(Gs,"id","highlighter");kb(Gs,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"#ffcc00",fill:"#ffcc00",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});je([ah],Gs.prototype,"pointsPath",1);var Gv=Mf(T(16));Rb=T(611);var Hv={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Op=class extends Dn{constructor(){super(...arguments);kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"htmlAnchorRef",Gv.createRef());
kb(this,"setScaleLevel",c=>mi(this,null,function*(){var g;const u=fb.mul(this.props.size,Hv[null!=c?c:"md"]/Hv[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:c});yield hi();this.update({size:u})}));kb(this,"onResetBounds",c=>{var g;if(this.htmlAnchorRef.current){const u=this.htmlAnchorRef.current.getBoundingClientRect(),[M,ea]=fb.div([u.width,u.height],null!=(g=null==c?void 0:c.zoom)?g:1);this.update({size:[Math.max(Math.min(M||400,1400),10),Math.max(Math.min(ea||400,1400),10)]})}return this});
kb(this,"ReactComponent",Xe(({events:c,isErasing:g,isEditing:u})=>{const {props:{html:M,scaleLevel:ea}}=this,ma=Ng(),xa=rf(),Ma=xa.selectedIds.has(this.id),Za=ma||Ma&&!u||"select"!==xa.selectedTool.id,hb=Gv.useCallback(Ob=>{Za||Ob.stopPropagation()},[Za]),zb=Hv[null!=ea?ea:"md"];Gv.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:xa.viewport.camera.zoom}),xa.persist(!0))},[]);return(0,Rb.jsx)(gp,wf(Fe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},c),{children:(0,Rb.jsx)("div",
{onWheelCapture:hb,onPointerDown:hb,onPointerUp:hb,className:"tl-html-container",style:{pointerEvents:ma||!u&&!Ma?"none":"all",overflow:u?"auto":"hidden",width:`calc(100% / ${zb})`,height:`calc(100% / ${zb})`,transform:`scale(${zb})`},children:(0,Rb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:M.trim()}})})}))}));kb(this,"ReactIndicator",Xe(()=>{const {props:{size:[c,g]}}=this;return(0,Rb.jsx)("rect",{width:c,height:g,fill:"transparent"})}));kb(this,
"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));return Fg(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}};kb(Op,"id","html");kb(Op,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});je([ah],Op.prototype,"scaleLevel",1);je([cf],Op.prototype,"setScaleLevel",2);var lF=Mf(T(16));Rb=T(611);var Qt=class extends $u{constructor(){super(...arguments);kb(this,"ReactComponent",Xe(({events:c,
isErasing:g,isBinding:u,asset:M})=>{const {props:{opacity:ea,objectFit:ma,clipping:xa,size:[Ma,Za]}}=this,[hb,zb,Ob,bc]=Array.isArray(xa)?xa:[xa,xa,xa,xa],{handlers:yc}=lF.useContext(jp);return(0,Rb.jsxs)(gp,wf(Fe({},c),{opacity:g?.2:ea,children:[u&&(0,Rb.jsx)(Mg,{mode:"html",strokeWidth:4,size:[Ma,Za]}),(0,Rb.jsx)("div",{className:"tl-image-shape-container",children:M?(0,Rb.jsx)("img",{src:yc?yc.makeAssetUrl(M.src):M.src,draggable:!1,style:{position:"relative",top:-hb,left:-bc,width:Ma+(bc-zb),height:Za+
(hb-Ob),objectFit:ma}}):"Asset is missing"})]}))}));kb(this,"ReactIndicator",Xe(()=>{const {props:{size:[c,g]}}=this;return(0,Rb.jsx)("rect",{width:c,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:c}){var g,u;const M=this.getBounds(),{assetId:ea,clipping:ma,size:[xa,Ma]}=this.props;if(c=c.find(Za=>Za.id===ea)){const [Za,hb,zb,Ob]=Array.isArray(ma)?ma:[ma,ma,ma,ma],bc=null==(u=null==(g=window.logseq)?void 0:g.api)?void 0:u.make_asset_url;return(0,Rb.jsx)("foreignObject",{width:M.width,height:M.height,
children:(0,Rb.jsx)("img",{src:bc?bc(c.src):c.src,draggable:!1,style:{position:"relative",top:-Za,left:-Ob,width:xa+(Ob-hb),height:Ma+(Za-zb),objectFit:this.props.objectFit,pointerEvents:"all"}})})}return super.getShapeSVGJsx({})}};kb(Qt,"id","image");kb(Qt,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Cz=Mf(T(16));Rb=T(611);var Rt=class extends Dn{constructor(){super(...arguments);
kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"canChangeAspectRatio",!1);kb(this,"ReactComponent",Xe(({events:c,isErasing:g,asset:u,isEditing:M})=>{const {props:{opacity:ea}}=this,ma=Ng();var xa=rf();const Ma=xa.selectedIds.has(this.id),Za=ma||Ma&&!M||"select"!==xa.selectedTool.id;xa=Cz.useCallback(zb=>{Za||zb.stopPropagation()},[Za]);const {handlers:hb}=Cz.useContext(jp);return(0,Rb.jsx)(gp,wf(Fe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:ea}},c),{children:(0,Rb.jsx)("div",
{onWheelCapture:xa,onPointerDown:xa,onPointerUp:xa,className:"tl-video-container",style:{pointerEvents:ma||!M&&!Ma?"none":"all",overflow:M?"auto":"hidden"},children:u&&(0,Rb.jsx)("video",{controls:!0,src:hb?hb.makeAssetUrl(u.src):u.src})})}))}));kb(this,"ReactIndicator",Xe(()=>{const {props:{size:[c,g]}}=this;return(0,Rb.jsx)("rect",{width:c,height:g,fill:"transparent"})}))}};kb(Rt,"id","video");kb(Rt,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var Dz=Mf(T(16));Rb=T(611);var Jq=class extends Dn{constructor(){super(...arguments);kb(this,"frameRef",Dz.createRef());kb(this,"canEdit",!0);kb(this,"onIFrameSourceChange",c=>{this.update({url:c})});kb(this,"reload",()=>{var c,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(c=this.frameRef)?void 0:c.current)?void 0:g.src)});kb(this,"ReactComponent",Xe(({events:c,isErasing:g,isEditing:u})=>{Dz.useRef(null);return(0,Rb.jsx)(gp,wf(Fe({style:{overflow:"hidden",
pointerEvents:"all",opacity:g?.2:1}},c),{children:(0,Rb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:u?"all":"none",userSelect:"none"},children:this.props.url&&(0,Rb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Rb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts"})})})}))}));kb(this,"ReactIndicator",Xe(()=>{const {props:{size:[c,
g]}}=this;return(0,Rb.jsx)("rect",{width:c,height:g,fill:"transparent",rx:8,ry:8})}))}};kb(Jq,"id","iframe");kb(Jq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});je([cf],Jq.prototype,"onIFrameSourceChange",2);je([cf],Jq.prototype,"reload",2);var Iv=Mf(T(16)),mF=Mf(T(16));Rb=T(611);Rb=T(611);var nF=mF.memo(function({style:c,start:g,end:u,decorationStart:M,decorationEnd:ea}){var ma=fb.dist(g,u);if(2>ma)return null;const {strokeWidth:xa}=c,Ma=1+1.618*xa,
Za="M"+fb.toFixed(g)+"L"+fb.toFixed(u);ma=Math.min(ma/3,16*xa);M=M?sg(g,u,ma):null;ea=ea?sg(u,g,ma):null;return(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)("path",{className:"tl-stroke-hitarea",d:Za}),(0,Rb.jsx)("path",{d:Za,strokeWidth:Ma,stroke:c.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===c.strokeType?"8 4":void 0,pointerEvents:"stroke"}),M&&(0,Rb.jsx)(gh,{left:M.left,middle:g,right:M.right,stroke:c.stroke,strokeWidth:Ma}),ea&&(0,Rb.jsx)(gh,{left:ea.left,middle:u,
right:ea.right,stroke:c.stroke,strokeWidth:Ma})]})});Rb=T(611);var uo=Mf(T(16)),Hn=class{static insertTextFirefox(c,g){c.setRangeText(g,c.selectionStart||0,c.selectionEnd||0,"end");c.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(c,g){const u=c.ownerDocument,M=u.activeElement;M!==c&&c.focus();u.execCommand("insertText",!1,g)||Hn.insertTextFirefox(c,g);M===u.body?c.blur():M instanceof HTMLElement&&M!==c&&M.focus()}static set(c,g){c.select();Hn.insert(c,
g)}static getSelection(c){const {selectionStart:g,selectionEnd:u}=c;return c.value.slice(g?g:void 0,u?u:void 0)}static wrapSelection(c,g,u){const {selectionStart:M,selectionEnd:ea}=c,ma=Hn.getSelection(c);Hn.insert(c,g+ma+(null!=u?u:g));c.selectionStart=(M||0)+g.length;c.selectionEnd=(ea||0)+g.length}static replace(c,g,u){let M=0;c.value.replace(g,(...ea)=>{const ma=M+ea[ea.length-2],xa=ea[0].length;c.selectionStart=ma;c.selectionEnd=ma+xa;ea="string"===typeof u?u:u(...ea);Hn.insert(c,ea);c.selectionStart=
ma;M+=ea.length-xa;return ea})}static findLineEnd(c,g){const u=c.lastIndexOf("\n",g-1)+1;return"\t"!==c.charAt(u)?g:u+1}static indent(c){var g;const {selectionStart:u,selectionEnd:M,value:ea}=c;var ma=ea.slice(u,M);if((ma=null==(g=/\n/g.exec(ma))?void 0:g.length)&&0<ma){g=ea.lastIndexOf("\n",u-1)+1;var xa=c.value.slice(g,M-1);ma=xa.replace(/^|\n/g,"$\x26  ");xa=ma.length-xa.length;c.setSelectionRange(g,M-1);Hn.insert(c,ma);c.setSelectionRange(u+1,M+xa)}else Hn.insert(c,"  ")}static unindent(c){const {selectionStart:g,
selectionEnd:u,value:M}=c;var ea=M.lastIndexOf("\n",g-1)+1;const ma=Hn.findLineEnd(M,u);var xa=c.value.slice(ea,ma);const Ma=xa.replace(/(^|\n)(\t| {1,2})/g,"$1");xa=xa.length-Ma.length;c.setSelectionRange(ea,ma);Hn.insert(c,Ma);ea=(ea=/\t| {1,2}/.exec(M.slice(ea,g)))?ea[0].length:0;c.setSelectionRange(g-ea,Math.max(g-ea,u-xa))}};Rb=T(611);var St=c=>c.stopPropagation(),oF=uo.memo(function({font:c,text:g,color:u,offsetX:M=0,offsetY:ea=0,scale:ma=1,isEditing:xa=!1,onBlur:Ma,onChange:Za}){const hb=uo.useRef(null),
zb=uo.useRef(!1),Ob=uo.useCallback(Vb=>{Za($q.normalizeText(Vb.currentTarget.value))},[Za]),bc=uo.useCallback(Vb=>{if("Escape"!==Vb.key)if("Tab"===Vb.key&&0===g.length)Vb.preventDefault();else{if("Meta"!==Vb.key&&!Vb.metaKey)Vb.stopPropagation();else if("z"===Vb.key&&Vb.metaKey){Vb.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Vb.stopPropagation();Vb.preventDefault();return}"Tab"===Vb.key&&(Vb.preventDefault(),Vb.shiftKey?Hn.unindent(Vb.currentTarget):Hn.indent(Vb.currentTarget),
null==Za?void 0:Za($q.normalizeText(Vb.currentTarget.value)))}},[Za]),yc=uo.useCallback(Vb=>{xa&&(Vb.currentTarget.setSelectionRange(0,0),null==Ma?void 0:Ma())},[Ma]),ic=uo.useCallback(Vb=>{xa&&zb.current&&document.activeElement===Vb.currentTarget&&Vb.currentTarget.select()},[xa]),Ac=uo.useCallback(Vb=>{xa&&Vb.stopPropagation()},[xa]);uo.useEffect(()=>{xa&&requestAnimationFrame(()=>{zb.current=!0;const Vb=hb.current;Vb&&(Vb.focus(),Vb.select())})},[xa,Ma]);const tc=uo.useRef(null);uo.useLayoutEffect(()=>
{const Vb=tc.current;if(Vb){var wc=Gf(g,c,4);Vb.style.transform=`scale(${ma}, ${ma}) translate(${M}px, ${ea}px)`;Vb.style.width=wc[0]+1+"px";Vb.style.height=wc[1]+1+"px"}},[g,c,ea,M,ma]);return(0,Rb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Rb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:tc,style:{font:c,color:u,pointerEvents:g?"all":"none",userSelect:xa?"text":"none"},children:[xa?(0,Rb.jsx)("textarea",{ref:hb,style:{font:c,color:u},className:"tl-text-label-textarea",
name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:u,onFocus:ic,onChange:Ob,onKeyDown:bc,onBlur:yc,onPointerDown:Ac,onContextMenu:St,onCopy:St,onPaste:St,onCut:St}):g,"​"]})})});Rb=T(611);var Tt=class extends is{constructor(){super(...arguments);kb(this,"hideSelection",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",Xe(({events:c,isErasing:g,
isEditing:u,onEditingEnd:M})=>{const {stroke:ea,handles:{start:ma,end:xa},opacity:Ma,label:Za,id:hb}=this.props,zb=Za||u?Gf(Za,"18px / 1 var(--ls-font-family)",4):[0,0],Ob=fb.med(ma.point,xa.point);var bc=fb.dist(ma.point,xa.point);bc=Math.max(.5,Math.min(1,Math.max(bc/(zb[1]+128),bc/(zb[0]+128))));const yc=this.getBounds(),ic=Iv.useMemo(()=>fb.sub(Ob,fb.toFixed([yc.width/2,yc.height/2])),[yc,bc,Ob]),Ac=Iv.useCallback(tc=>{var Vb;null==(Vb=this.update)?void 0:Vb.call(this,{label:tc})},[Za]);return(0,Rb.jsxs)("div",
wf(Fe({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Rb.jsx)(oF,{font:"18px / 1 var(--ls-font-family)",text:Za,color:ea,offsetX:ic[0],offsetY:ic[1],scale:bc,isEditing:u,onChange:Ac,onBlur:M}),(0,Rb.jsxs)($n,{opacity:g?.2:Ma,id:hb+"_svg",children:[(0,Rb.jsx)(Jf,{id:hb,bounds:yc,labelSize:zb,offset:ic,scale:bc}),(0,Rb.jsx)("g",{pointerEvents:"none",mask:Za||u?`url(#${hb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));kb(this,"ReactIndicator",Xe(()=>{const {id:c,
decorations:g,label:u,strokeWidth:M,handles:{start:ea,end:ma}}=this.props,xa=this.getBounds(),Ma=u?Gf(u,"18px / 1 var(--ls-font-family)",4):[0,0],Za=fb.med(ea.point,ma.point);var hb=fb.dist(ea.point,ma.point);hb=Math.max(.5,Math.min(1,Math.max(hb/(Ma[1]+128),hb/(Ma[0]+128))));const zb=Iv.useMemo(()=>fb.sub(Za,fb.toFixed([xa.width/2,xa.height/2])),[xa,hb,Za]);return(0,Rb.jsxs)("g",{children:[(0,Rb.jsx)(Jf,{id:c,bounds:xa,labelSize:Ma,offset:zb,scale:hb}),(0,Rb.jsx)("path",{mask:u?`url(#${c}_clip)`:
"",d:bh({strokeWidth:M},ea.point,ma.point,null==g?void 0:g.start,null==g?void 0:g.end)}),u&&(0,Rb.jsx)("rect",{x:xa.width/2-Ma[0]/2*hb+zb[0],y:xa.height/2-Ma[1]/2*hb+zb[1],width:Ma[0]*hb,height:Ma[1]*hb,rx:4*hb,ry:4*hb,fill:"transparent"})]})}));kb(this,"validateProps",c=>Fg(this,c))}getShapeSVGJsx({preview:c}){const {stroke:g,fill:u,strokeWidth:M,strokeType:ea,decorations:ma,label:xa,handles:{start:Ma,end:Za}}=this.props,hb=fb.med(Ma.point,Za.point);return(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)(nF,
{style:{stroke:g,fill:u,strokeWidth:M,strokeType:ea},start:Ma.point,end:Za.point,decorationStart:null==ma?void 0:ma.start,decorationEnd:null==ma?void 0:ma.end}),c&&(0,Rb.jsx)(Rb.Fragment,{children:(0,Rb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${hb[0]}, ${hb[1]})`,textAnchor:"middle",stroke:g,fill:g,children:xa})})]})}};kb(Tt,"id","line");kb(Tt,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,
point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"var(--ls-primary-text-color, #000)",fill:"var(--ls-secondary-background-color)",noFill:!0,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});var pn=T(16),pF=["children"],Ut="undefined"!==typeof document?pn.useLayoutEffect:pn.useEffect,eh=Mf(T(16)),Zh=T(16),qF=T(25),Hs,cm,rF="undefined"!=typeof document?Zh.useLayoutEffect:Zh.useEffect;!function(c){c[c.DEBUG=0]="DEBUG";c[c.INFO=1]="INFO";c[c.WARN=2]="WARN";c[c.ERROR=
3]="ERROR"}(cm||={});var sF=((Hs={})[cm.DEBUG]="debug",Hs[cm.INFO]="log",Hs[cm.WARN]="warn",Hs[cm.ERROR]="error",Hs),Pp=mh(function(){var c=bf(cm.ERROR);return{log:bf(function(g,u,M){var ea;void 0===M&&(M=cm.INFO);M>=(null!=(ea=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?ea:c(4))&&console[sF[M]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,u)}),logLevel:c}},[],{singleton:!0}),qn=mh(function(){var c=Yf(),g=Yf(),u=bf(0),M=Yf(),ea=bf(0),
ma=Yf(),xa=Yf(),Ma=bf(0),Za=bf(0),hb=bf(0),zb=bf(0),Ob=Yf(),bc=Yf(),yc=bf(!1),ic=bf(!1);return gg(pf(c,ie(function(Ac){return Ac.scrollTop})),g),gg(pf(c,ie(function(Ac){return Ac.scrollHeight})),xa),gg(g,ea),{scrollContainerState:c,scrollTop:g,viewportHeight:ma,headerHeight:Ma,fixedHeaderHeight:Za,fixedFooterHeight:hb,footerHeight:zb,scrollHeight:xa,smoothScrollTargetReached:M,react18ConcurrentRendering:ic,scrollTo:Ob,scrollBy:bc,statefulScrollTop:ea,deviation:u,scrollingInProgress:yc}},[],{singleton:!0}),
Hi={lvl:0},Jv=mh(function(){return{recalcInProgress:bf(!1)}},[],{singleton:!0}),tF={offsetHeight:"height",offsetWidth:"width"},kp=mh(function(c){var g=c[0].log,u=c[1].recalcInProgress;c=Yf();var M=Yf(),ea=kj(M,0),ma=Yf(),xa=Yf(),Ma=bf(0),Za=bf([]),hb=bf(void 0),zb=bf(void 0),Ob=bf(function(wc,Uc){return rh(wc,tF[Uc])}),bc=bf(void 0),yc=bf(0),ic={offsetTree:[],sizeTree:Hi,groupOffsetTree:Hi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},Ac=kj(pf(c,le(Za,g,yc),Ig(ua,ic),df()),ic);gg(pf(Za,re(function(wc){return 0<
wc.length}),le(Ac,yc),ie(function(wc){var Uc=wc[0],Nc=wc[1],ed=wc[2];wc=Uc.reduce(function(ge,Pd,we){return ek(ge,Pd,Fa(Pd,Nc.offsetTree,ed)||we)},Hi);return Gg({},Nc,{groupIndices:Uc,groupOffsetTree:wc})})),Ac);gg(pf(M,le(Ac),re(function(wc){return wc[0]<wc[1].lastIndex}),ie(function(wc){var Uc=wc[1];return[{startIndex:wc[0],endIndex:Uc.lastIndex,size:Uc.lastSize}]})),c);gg(hb,zb);var tc=kj(pf(hb,ie(function(wc){return void 0===wc})),!0);gg(pf(zb,re(function(wc){return void 0!==wc&&Ac(4).sizeTree===
Hi}),ie(function(wc){return[{startIndex:0,endIndex:0,size:wc}]})),c);ic=wj(pf(c,le(Ac),Ig(function(wc,Uc){Uc=Uc[1];return{changed:Uc!==wc.sizes,sizes:Uc}},{changed:!1,sizes:ic}),ie(function(wc){return wc.changed})));xf(pf(Ma,Ig(function(wc,Uc){return{diff:wc.prev-Uc,prev:Uc}},{diff:0,prev:0}),ie(function(wc){return wc.diff})),function(wc){0<wc?(u(0,!0),ma(0,wc)):0>wc&&xa(0,wc)});xf(pf(Ma,le(g)),function(wc){0>wc[0]&&(0,wc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Ma},cm.ERROR)});g=wj(ma);gg(pf(ma,le(Ac),ie(function(wc){var Uc=wc[0];wc=wc[1];if(0<wc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ym(wc.sizeTree).reduce(function(Nc,ed){var ge=ed.k;ed=ed.v;return{ranges:[].concat(Nc.ranges,[{startIndex:Nc.prevIndex,endIndex:ge+Uc-1,size:Nc.prevSize}]),prevIndex:ge+Uc,prevSize:ed}},{ranges:[],prevIndex:0,prevSize:wc.lastSize}).ranges})),c);var Vb=wj(pf(xa,le(Ac,yc),ie(function(wc){return Fa(-wc[0],
wc[1].offsetTree,wc[2])})));return gg(pf(xa,le(Ac,yc),ie(function(wc){var Uc=wc[0],Nc=wc[1];wc=wc[2];if(0<Nc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var ed=Ym(Nc.sizeTree).reduce(function(ge,Pd){return ek(ge,Math.max(0,Pd.k+Uc),Pd.v)},Hi);return Gg({},Nc,{sizeTree:ed},wa(Nc.offsetTree,0,ed,wc))})),Ac),{data:bc,totalCount:M,sizeRanges:c,groupIndices:Za,defaultItemSize:zb,fixedItemSize:hb,unshiftWith:ma,shiftWith:xa,shiftWithOffset:Vb,beforeUnshiftWith:g,
firstItemIndex:Ma,gap:yc,sizes:Ac,listRefresh:ic,statefulTotalCount:ea,trackItemSizes:tc,itemSize:Ob}},wh(Pp,Jv),{singleton:!0}),uF="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Is=mh(function(c){function g(){tc&&(tc(),tc=null);wc&&(wc(),wc=null);Vb&&(clearTimeout(Vb),Vb=null);Ma(0,!1)}var u=c[0],M=u.sizes,ea=u.totalCount,ma=u.listRefresh;u=u.gap;var xa=c[1],Ma=xa.scrollingInProgress,Za=xa.viewportHeight,hb=xa.scrollTo,zb=xa.smoothScrollTargetReached,Ob=xa.headerHeight,
bc=xa.footerHeight,yc=xa.fixedHeaderHeight;xa=xa.fixedFooterHeight;c=c[2].log;var ic=Yf(),Ac=bf(0),tc=null,Vb=null,wc=null;return gg(pf(ic,le(M,Za,ea,Ac,Ob,bc,c),le(u,yc,xa),ie(function(Uc){var Nc=Uc[0],ed=Nc[0],ge=Nc[1],Pd=Nc[2],we=Nc[3],mf=Nc[4],Le=Nc[5],hf=Nc[6],ue=Nc[7],Nd=Uc[1];Nc=Uc[2];Uc=Uc[3];var kd=sb(ed),hd=kd.align,td=kd.behavior,zd=kd.offset;--we;kd=$a(kd,ge,we);Le=Fa(kd,ge.offsetTree,Nd)+Le;"end"===hd?(Le+=Nc+Oj(ge.sizeTree,kd)[1]-Pd+Uc,kd===we&&(Le+=hf)):"center"===hd?Le+=(Nc+Oj(ge.sizeTree,
kd)[1]-Pd+Uc)/2:Le-=mf;zd&&(Le+=zd);var Kd=function(Ee){g();Ee?(ue("retrying to scroll to",{location:ed},cm.DEBUG),ic(0,ed)):ue("list did not change, scroll successful",{},cm.DEBUG)};if(g(),"smooth"===td){var Ce=!1;wc=xf(ma,function(Ee){Ce=Ce||Ee});tc=Oi(zb,function(){Kd(Ce)})}else tc=Oi(pf(ma,function(Ee){var He=setTimeout(function(){Ee(!1)},150);return function(Ff){Ff&&(Ee(!0),clearTimeout(He))}}),Kd);Vb=setTimeout(function(){g()},1200);Ma(0,!0);return ue("scrolling from index to",{index:kd,top:Le,
behavior:td},cm.DEBUG),{top:Le,behavior:td}})),hb),{scrollToIndex:ic,topListHeight:Ac}},wh(kp,qn,Pp),{singleton:!0}),vF={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Js=mh(function(c){var g=c[0],u=g.scrollContainerState;c=g.scrollTop;var M=g.viewportHeight,ea=g.headerHeight,ma=g.footerHeight,xa=g.scrollBy;g=bf(!1);var Ma=bf(!0),Za=Yf(),hb=Yf(),zb=bf(4),Ob=bf(0),bc=kj(pf(Ve(pf(kg(c),Ji(1),qi(!0)),pf(kg(c),Ji(1),qi(!1),ll(100))),
df()),!1),yc=kj(pf(Ve(pf(xa,qi(!0)),pf(xa,qi(!1),ll(200))),df()),!1);gg(pf(se(kg(c),kg(Ob)),ie(function(ic){return ic[0]<=ic[1]}),df()),Ma);gg(pf(Ma,jh(50)),hb);M=wj(pf(se(u,kg(M),kg(ea),kg(ma),kg(zb)),Ig(function(ic,Ac){var tc,Vb,wc=Ac[0],Uc=wc.scrollTop;wc=wc.scrollHeight;var Nc=Ac[1],ed={viewportHeight:Nc,scrollTop:Uc,scrollHeight:wc};return Uc+Nc-wc>-Ac[4]?(Uc>ic.state.scrollTop?(tc="SCROLLED_DOWN",Vb=ic.state.scrollTop-Uc):(tc="SIZE_DECREASED",Vb=ic.state.scrollTop-Uc||ic.scrollTopDelta),{atBottom:!0,
state:ed,atBottomBecause:tc,scrollTopDelta:Vb}):{atBottom:!1,notAtBottomBecause:ed.scrollHeight>ic.state.scrollHeight?"SIZE_INCREASED":Nc<ic.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Uc<ic.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:ed}},vF),df(function(ic,Ac){return ic&&ic.atBottom===Ac.atBottom})));ea=kj(pf(u,Ig(function(ic,Ac){var tc=Ac.scrollTop,Vb=Ac.scrollHeight;Ac=Ac.viewportHeight;return 1.01>Math.abs(ic.scrollHeight-Vb)?{scrollTop:tc,scrollHeight:Vb,
jump:0,changed:!1}:ic.scrollTop!==tc&&1>Vb-(tc+Ac)?{scrollHeight:Vb,scrollTop:tc,jump:ic.scrollTop-tc,changed:!0}:{scrollHeight:Vb,scrollTop:tc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),re(function(ic){return ic.changed}),ie(function(ic){return ic.jump})),0);gg(pf(M,ie(function(ic){return ic.atBottom})),g);gg(pf(g,jh(50)),Za);ma=bf("down");gg(pf(u,ie(function(ic){return ic.scrollTop}),df(),Ig(function(ic,Ac){return yc(4)?{direction:ic.direction,prevScrollTop:Ac}:{direction:Ac<
ic.prevScrollTop?"up":"down",prevScrollTop:Ac}},{direction:"down",prevScrollTop:0}),ie(function(ic){return ic.direction})),ma);gg(pf(u,jh(50),qi("none")),ma);u=bf(0);return gg(pf(bc,re(function(ic){return!ic}),qi(0)),u),gg(pf(c,jh(100),le(bc),re(function(ic){return!!ic[1]}),Ig(function(ic,Ac){return[ic[1],Ac[0]]},[0,0]),ie(function(ic){return ic[1]-ic[0]})),u),{isScrolling:bc,isAtTop:Ma,isAtBottom:g,atBottomState:M,atTopStateChange:hb,atBottomStateChange:Za,scrollDirection:ma,atBottomThreshold:zb,
atTopThreshold:Ob,scrollVelocity:u,lastJumpDueToItemResize:ea}},wh(qn)),Kq=mh(function(c){var g=c[0].log;c=bf(!1);var u=wj(pf(c,re(function(M){return M}),df()));return xf(c,function(M){M&&g(4)("props updated",{},cm.DEBUG)}),{propsReady:c,didMount:u}},wh(Pp),{singleton:!0}),Kv=mh(function(c){var g=c[0],u=g.sizes,M=g.listRefresh;g=g.defaultItemSize;var ea=c[1].scrollTop,ma=c[2].scrollToIndex;c=c[3].didMount;var xa=bf(!0),Ma=bf(0);return gg(pf(c,le(Ma),re(function(Za){return!!Za[1]}),qi(!1)),xa),xf(pf(se(M,
c),le(xa,u,g),re(function(Za){var hb=Za[1],zb=Za[3];return Za[0][1]&&(Za[2].sizeTree!==Hi||void 0!==zb)&&!hb}),le(Ma)),function(Za){var hb=Za[1];setTimeout(function(){Oi(ea,function(){xa(0,!0)});ma(0,hb)})}),{scrolledToInitialItem:xa,initialTopMostItemIndex:Ma}},wh(kp,qn,Is,Kq),{singleton:!0}),wF=mh(function(c){function g(Ac){Za(0,{index:"LAST",align:"end",behavior:Ac})}function u(Ac){var tc=Oi(Ma,function(Vb){!Ac||Vb.atBottom||"SIZE_INCREASED"!==Vb.notAtBottomBecause||ic||(Ob(4)("scrolling to bottom due to increased size",
{},cm.DEBUG),g("auto"))});setTimeout(tc,100)}var M=c[0],ea=M.totalCount,ma=M.listRefresh,xa=c[1];M=xa.isAtBottom;var Ma=xa.atBottomState,Za=c[2].scrollToIndex;xa=c[3].scrolledToInitialItem;var hb=c[4],zb=hb.propsReady;hb=hb.didMount;var Ob=c[5].log;c=c[6].scrollingInProgress;var bc=bf(!1),yc=Yf(),ic=null;return xf(pf(se(pf(kg(ea),Ji(1)),hb),le(kg(bc),M,xa,c),ie(function(Ac){var tc=Ac[0],Vb=tc[0];tc=tc[1]&&Ac[3];var wc="auto";tc&&(wc=Ac[1],Ac=Ac[2]||Ac[4],wc="function"==typeof wc?Yb(wc(Ac)):Ac&&Yb(wc),
tc=tc&&!!wc);return{totalCount:Vb,shouldFollow:tc,followOutputBehavior:wc}}),re(function(Ac){return Ac.shouldFollow})),function(Ac){var tc=Ac.totalCount,Vb=Ac.followOutputBehavior;ic&&(ic(),ic=null);ic=Oi(ma,function(){Ob(4)("following output to ",{totalCount:tc},cm.DEBUG);g(Vb);ic=null})}),xf(pf(se(kg(bc),ea,zb),re(function(Ac){return Ac[0]&&Ac[2]}),Ig(function(Ac,tc){tc=tc[1];return{refreshed:Ac.value===tc,value:tc}},{refreshed:!1,value:0}),re(function(Ac){return Ac.refreshed}),le(bc,ea)),function(Ac){u(!1!==
Ac[1])}),xf(yc,function(){u(!1!==bc(4))}),xf(se(kg(bc),Ma),function(Ac){var tc=Ac[1];Ac[0]&&!tc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===tc.notAtBottomBecause&&g("auto")}),{followOutput:bc,autoscrollToBottom:yc}},wh(kp,Js,Is,Kv,Kq,Pp,qn)),Ez=mh(function(c){var g=c[0],u=g.totalCount,M=g.groupIndices;g=g.sizes;var ea=c[1];c=ea.scrollTop;ea=ea.headerHeight;var ma=Yf(),xa=Yf(),Ma=wj(pf(ma,ie(Bc)));return gg(pf(Ma,ie(function(Za){return Za.totalCount})),u),gg(pf(Ma,ie(function(Za){return Za.groupIndices})),
M),gg(pf(se(c,g,ea),re(function(Za){return Za[1].groupOffsetTree!==Hi}),ie(function(Za){return Oj(Za[1].groupOffsetTree,Math.max(Za[0]-Za[2],0),"v")[0]}),df(),ie(function(Za){return[Za]})),xa),{groupCounts:ma,topItemsIndexes:xa}},wh(kp,qn)),Lv=mh(function(c){var g=c[0];c=g.scrollTop;var u=g.viewportHeight,M=g.deviation,ea=g.headerHeight,ma=g.fixedHeaderHeight;g=Yf();var xa=bf(0),Ma=bf(0),Za=bf(0);c=kj(pf(se(kg(c),kg(u),kg(ea),kg(g,Dc),kg(Za),kg(xa),kg(ma),kg(M),kg(Ma)),ie(function(hb){var zb=hb[0],
Ob=hb[1],bc=hb[2],yc=hb[3],ic=yc[0];yc=yc[1];var Ac=hb[4],tc=hb[6],Vb=hb[7],wc=hb[8],Uc=zb-Vb;hb=hb[5]+tc;var Nc=Math.max(bc-Uc,0),ed="none",ge="number"==typeof wc?wc:wc.top||0;wc="number"==typeof wc?wc:wc.bottom||0;return ic-=Vb,yc+=bc+tc,ic+(bc+tc)>zb+hb-ge&&(ed="up"),yc-Vb<zb-Nc+Ob+wc&&(ed="down"),"none"!==ed?[Math.max(Uc-bc-Md(Ac,"top",ed)-ge,0),Uc-Nc-tc+Ob+Md(Ac,"bottom",ed)+wc]:null}),re(function(hb){return null!=hb}),df(Dc)),[0,0]);return{listBoundary:g,overscan:Za,topListHeight:xa,increaseViewportBy:Ma,
visibleRange:c}},wh(qn),{singleton:!0}),Fz={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Br=mh(function(c){var g=c[0],u=g.sizes,M=g.totalCount,ea=g.data,ma=g.firstItemIndex,xa=g.gap,Ma=c[1],Za=c[2],hb=Za.visibleRange;g=Za.listBoundary;Za=Za.topListHeight;var zb=c[3],Ob=zb.scrolledToInitialItem,bc=zb.initialTopMostItemIndex;zb=c[4].topListHeight;var yc=c[5],ic=c[6].didMount,Ac=c[7].recalcInProgress;c=bf([]);var tc=Yf();gg(Ma.topItemsIndexes,
c);u=kj(pf(se(ic,Ac,kg(hb,Dc),kg(M),kg(u),kg(bc),Ob,kg(c),kg(ma),kg(xa),ea),re(function(Vb){return Vb[0]&&!Vb[1]}),ie(function(Vb){var wc=Vb[2],Uc=wc[0],Nc=wc[1];wc=Vb[3];var ed=Vb[5],ge=Vb[6],Pd=Vb[7],we=Vb[8],mf=Vb[9],Le=Vb[10];Vb=Vb[4];var hf=Vb.sizeTree,ue=Vb.offsetTree;if(0===wc||0===Uc&&0===Nc)return Gg({},Fz,{totalCount:wc});if(hf===Hi)return Be(function(Ff,sf,Xg){return sf.groupOffsetTree!==Hi?(Ff=pb(Ff,sf),[{index:Oj(sf.groupOffsetTree,Ff)[0],size:0,offset:0},{index:Ff,size:0,offset:0,data:Xg&&
Xg[0]}]):[{index:Ff,size:0,offset:0,data:Xg&&Xg[0]}]}("number"==typeof ed?ed:"LAST"===ed.index?wc-1:ed.index,Vb,Le),[],wc,mf,Vb,we);ed=[];if(0<Pd.length){var Nd,kd=Pd[0],hd=Pd[Pd.length-1],td=0;for(hf=dk(om(hf,kd,hd));!(Nd=hf()).done;){var zd=Nd.value;Nd=zd.value;var Kd=Math.min(zd.end,hd);for(zd=Math.max(zd.start,kd);zd<=Kd;zd++)ed.push({index:zd,size:Nd,offset:td,data:Le&&Le[zd]}),td+=Nd}}if(!ge)return Be([],ed,wc,mf,Vb,we);var Ce=0<Pd.length?Pd[Pd.length-1]+1:0,Ee=function(Ff,sf,Xg,Rg){return void 0===
Rg&&(Rg=0),0<Rg&&(sf=Math.max(sf,Ff[ri(Ff,Rg,Wl)].offset)),Dm((fk=Xg,rn=ri(di=Ff,sf,sk=C),lp=ri(di,fk,sk,rn),di.slice(rn,lp+1)),X);var di,fk,sk,rn,lp}(ue,Uc,Nc,Ce);if(0===Ee.length)return null;var He=wc-1;return Be(fi([],function(Ff){for(var sf,Xg=dk(Ee);!(sf=Xg()).done;){var Rg=sf.value,di=Rg.value;sf=di.offset;var fk=Rg.start,sk=di.size;di.offset<Uc&&(di=(fk+=Math.floor((Uc-di.offset+mf)/(sk+mf)))-Rg.start,sf+=di*sk+di*mf);fk<Ce&&(sf+=(Ce-fk)*sk,fk=Ce);for(Rg=Math.min(Rg.end,He);fk<=Rg&&!(sf>=Nc);fk++)Ff.push({index:fk,
size:sk,offset:sf,data:Le&&Le[fk]}),sf+=sk+mf}}),ed,wc,mf,Vb,we)}),re(function(Vb){return null!==Vb}),df()),Fz);return gg(pf(ea,re(function(Vb){return void 0!==Vb}),ie(function(Vb){return Vb.length})),M),gg(pf(u,ie(function(Vb){return Vb.topListHeight})),zb),gg(zb,Za),gg(pf(u,ie(function(Vb){return[Vb.top,Vb.bottom]})),g),gg(pf(u,ie(function(Vb){return Vb.items})),tc),Gg({listState:u,topItemsIndexes:c,endReached:wj(pf(u,re(function(Vb){return 0<Vb.items.length}),le(M,ea),re(function(Vb){var wc=Vb[0].items;
return wc[wc.length-1].originalIndex===Vb[1]-1}),ie(function(Vb){return[Vb[1]-1,Vb[2]]}),df(Dc),ie(function(Vb){return Vb[0]}))),startReached:wj(pf(u,jh(200),re(function(Vb){var wc=Vb.items;return 0<wc.length&&wc[0].originalIndex===Vb.topItems.length}),ie(function(Vb){return Vb.items[0].index}),df())),rangeChanged:wj(pf(u,re(function(Vb){return 0<Vb.items.length}),ie(function(Vb){Vb=Vb.items;for(var wc=0,Uc=Vb.length-1;"group"===Vb[wc].type&&wc<Uc;)wc++;for(;"group"===Vb[Uc].type&&Uc>wc;)Uc--;return{startIndex:Vb[wc].index,
endIndex:Vb[Uc].index}}),df(Id))),itemsRendered:tc},yc)},wh(kp,Ez,Lv,Kv,Is,Js,Kq,Jv),{singleton:!0}),xF=mh(function(c){var g=c[0],u=g.sizes,M=g.firstItemIndex,ea=g.data;g=g.gap;var ma=c[1].listState;c=c[2].didMount;var xa=bf(0);return gg(pf(c,le(xa),re(function(Ma){return 0!==Ma[1]}),le(u,M,g,ea),ie(function(Ma){var Za=Ma[0][1],hb=Ma[1],zb=Ma[2],Ob=Ma[3];Ma=Ma[4];var bc=void 0===Ma?[]:Ma;Ma=0;if(0<hb.groupIndices.length)for(var yc,ic=dk(hb.groupIndices);!((yc=ic()).done||yc.value-Ma>=Za);)Ma++;Za+=
Ma;return Be(Array.from({length:Za}).map(function(Ac,tc){return{index:tc,size:0,offset:0,data:bc[tc]}}),[],Za,Ob,hb,zb)})),ma),{initialItemCount:xa}},wh(kp,Br,Kq),{singleton:!0}),Gz=mh(function(c){c=c[0].scrollVelocity;var g=bf(!1),u=Yf(),M=bf(!1);return gg(pf(c,le(M,g,u),re(function(ea){return!!ea[1]}),ie(function(ea){var ma=ea[0],xa=ea[1],Ma=ea[2];ea=ea[3];var Za=xa.enter;if(Ma){if((0,xa.exit)(ma,ea))return!1}else if(Za(ma,ea))return!0;return Ma}),df()),g),xf(pf(se(g,c,u),le(M)),function(ea){var ma=
ea[0];ea=ea[1];return ma[0]&&ea&&ea.change&&ea.change(ma[1],ma[2])}),{isSeeking:g,scrollSeekConfiguration:M,scrollVelocity:c,scrollSeekRangeChanged:u}},wh(Js),{singleton:!0}),yF=mh(function(c){c=c[0].topItemsIndexes;var g=bf(0);return gg(pf(g,re(function(u){return 0<u}),ie(function(u){return Array.from({length:u}).map(function(M,ea){return ea})})),c),{topItemCount:g}},wh(Br)),Mv=mh(function(c){var g=c[0],u=g.footerHeight,M=g.headerHeight,ea=g.fixedHeaderHeight;g=g.fixedFooterHeight;var ma=c[1].listState;
c=Yf();u=kj(pf(se(u,g,M,ea,ma),ie(function(xa){var Ma=xa[4];return xa[0]+xa[1]+xa[2]+xa[3]+Ma.offsetBottom+Ma.bottom})),0);return gg(kg(u),c),{totalListHeight:u,totalListHeightChanged:c}},wh(qn,Br),{singleton:!0}),zF=zf(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),AF=mh(function(c){function g(tc){0<tc?(M(0,{top:-tc,behavior:"auto"}),ma(0,0)):(ma(0,0),M(0,{top:-tc,behavior:"auto"}))}var u=c[0],M=u.scrollBy,ea=u.scrollTop,ma=u.deviation,xa=u.scrollingInProgress,
Ma=c[1];u=Ma.isScrolling;var Za=Ma.isAtBottom,hb=Ma.scrollDirection,zb=c[3],Ob=zb.beforeUnshiftWith,bc=zb.shiftWithOffset,yc=zb.sizes;zb=zb.gap;var ic=c[4].log,Ac=c[5].recalcInProgress;c=wj(pf(c[2].listState,le(Ma.lastJumpDueToItemResize),Ig(function(tc,Vb){var wc=tc[1],Uc=Vb[0],Nc=Uc.items,ed=Uc.totalCount;Uc=Uc.bottom+Uc.offsetBottom;var ge=0;return tc[2]===ed&&0<wc.length&&0<Nc.length&&(0===Nc[0].originalIndex&&0===wc[0].originalIndex||0!=(ge=Uc-tc[3])&&(ge+=Vb[1])),[ge,Nc,ed,Uc]},[0,[],0,0]),
re(function(tc){return 0!==tc[0]}),le(ea,hb,xa,Za,ic),re(function(tc){return!tc[3]&&0!==tc[1]&&"up"===tc[2]}),ie(function(tc){var Vb=tc[0][0];return(0,tc[5])("Upward scrolling compensation",{amount:Vb},cm.DEBUG),Vb})));return xf(pf(c,le(ma,u)),function(tc){var Vb=tc[0],wc=tc[1];tc[2]&&zF()?ma(0,wc-Vb):g(-Vb)}),xf(pf(se(kj(u,!1),ma,Ac),re(function(tc){return!tc[0]&&!tc[2]&&0!==tc[1]}),ie(function(tc){return tc[1]}),jh(1)),g),gg(pf(bc,ie(function(tc){return{top:-tc}})),M),xf(pf(Ob,le(yc,zb),ie(function(tc){var Vb=
tc[0];return Vb*tc[1].lastSize+Vb*tc[2]})),function(tc){ma(0,tc);requestAnimationFrame(function(){nm(M,{top:tc});requestAnimationFrame(function(){ma(0,0);Ac(0,!1)})})}),{deviation:ma}},wh(qn,Js,Br,kp,Pp,Jv)),BF=mh(function(c){var g=c[0].totalListHeight,u=c[1].didMount,M=c[2].scrollTo;c=bf(0);return xf(pf(u,le(c),re(function(ea){return 0!==ea[1]}),ie(function(ea){return{top:ea[1]}})),function(ea){Oi(pf(g,re(function(ma){return 0!==ma})),function(){setTimeout(function(){M(0,ea)})})}),{initialScrollTop:c}},
wh(Mv,Kq,qn),{singleton:!0}),CF=mh(function(c){var g=c[0].viewportHeight;c=c[1].totalListHeight;var u=bf(!1);return{alignToBottom:u,paddingTopAddition:kj(pf(se(u,g,c),re(function(M){return M[0]}),ie(function(M){return Math.max(0,M[1]-M[2])}),df()),0)}},wh(qn,Mv),{singleton:!0}),Hz=mh(function(c){var g=c[0];c=g.scrollTo;g=g.scrollContainerState;var u=Yf(),M=Yf(),ea=Yf(),ma=bf(!1),xa=bf(void 0);return gg(pf(se(u,M),ie(function(Ma){var Za=Ma[0];return{scrollTop:Math.max(0,Za.scrollTop-Ma[1].offsetTop),
scrollHeight:Za.scrollHeight,viewportHeight:Za.viewportHeight}})),g),gg(pf(c,le(M),ie(function(Ma){var Za=Ma[0];return Gg({},Za,{top:Za.top+Ma[1].offsetTop})})),ea),{useWindowScroll:ma,customScrollParent:xa,windowScrollContainerState:u,windowViewportRect:M,windowScrollTo:ea}},wh(qn)),DF=["done","behavior","align"],EF=mh(function(c){var g=c[0],u=g.sizes,M=g.totalCount;g=g.gap;var ea=c[1],ma=ea.scrollTop,xa=ea.viewportHeight,Ma=ea.headerHeight,Za=ea.fixedHeaderHeight,hb=ea.fixedFooterHeight,zb=ea.scrollingInProgress;
c=c[2].scrollToIndex;ea=Yf();return gg(pf(ea,le(u,xa,M,Ma,Za,hb,ma),le(g),ie(function(Ob){var bc=Ob[0],yc=bc[0],ic=bc[1],Ac=bc[2],tc=bc[3],Vb=bc[4],wc=bc[5],Uc=bc[6];bc=bc[7];var Nc=Ob[1];Ob=yc.done;var ed=yc.behavior,ge=yc.align,Pd=Lf(yc,DF),we=null;yc=$a(yc,ic,tc-1);Vb=Fa(yc,ic.offsetTree,Nc)+Vb+wc;return Vb<bc+wc?we=Gg({},Pd,{behavior:ed,align:null!=ge?ge:"start"}):Vb+Oj(ic.sizeTree,yc)[1]>bc+Ac-Uc&&(we=Gg({},Pd,{behavior:ed,align:null!=ge?ge:"end"})),we?Ob&&Oi(pf(zb,Ji(1),re(function(mf){return!1===
mf})),Ob):Ob&&Ob(),we}),re(function(Ob){return null!==Ob})),c),{scrollIntoView:ea}},wh(kp,qn,Is,Br,Pp),{singleton:!0}),FF=["listState","topItemsIndexes"],GF=mh(function(c){return Gg({},c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},wh(Lv,xF,Kq,Gz,Mv,BF,CF,Hz,EF)),Iz=mh(function(c){var g=c[0],u=g.totalCount,M=g.sizeRanges,ea=g.fixedItemSize,ma=g.defaultItemSize,xa=g.trackItemSizes,Ma=g.itemSize,Za=g.data,hb=g.firstItemIndex,zb=g.groupIndices,Ob=g.statefulTotalCount;g=g.gap;var bc=c[1],yc=bc.initialTopMostItemIndex;
bc=bc.scrolledToInitialItem;var ic=c[2],Ac=c[3],tc=c[4],Vb=tc.listState,wc=tc.topItemsIndexes;tc=Lf(tc,FF);var Uc=c[5].scrollToIndex,Nc=c[7].topItemCount,ed=c[8].groupCounts,ge=c[9];c=c[10];return gg(tc.rangeChanged,ge.scrollSeekRangeChanged),gg(pf(ge.windowViewportRect,ie(function(Pd){return Pd.visibleHeight})),ic.viewportHeight),Gg({totalCount:u,data:Za,firstItemIndex:hb,sizeRanges:M,initialTopMostItemIndex:yc,scrolledToInitialItem:bc,topItemsIndexes:wc,topItemCount:Nc,groupCounts:ed,fixedItemHeight:ea,
defaultItemHeight:ma,gap:g},Ac,{statefulTotalCount:Ob,listState:Vb,scrollToIndex:Uc,trackItemSizes:xa,itemSize:Ma,groupIndices:zb},tc,ge,ic,c)},wh(kp,Kv,qn,wF,Br,Is,AF,yF,Ez,GF,Pp)),Jz=zf(function(){if("undefined"==typeof document)return"sticky";var c=document.createElement("div");return c.style.position="-webkit-sticky","-webkit-sticky"===c.style.position?"-webkit-sticky":"sticky"}),Vt=eh.createContext(void 0),Kz=eh.createContext(void 0),HF=["placeholder"],IF=["style","children"],JF=["style","children"],
KF=mh(function(){var c=bf(function(Za){return"Item "+Za}),g=bf(null),u=bf(function(Za){return"Group "+Za}),M=bf({}),ea=bf(sj),ma=bf("div"),xa=bf(fl),Ma=function(Za,hb){return void 0===hb&&(hb=null),kj(pf(M,ie(function(zb){return zb[Za]}),df()),hb)};return{context:g,itemContent:c,groupContent:u,components:M,computeItemKey:ea,headerFooterTag:ma,scrollerRef:xa,FooterComponent:Ma("Footer"),HeaderComponent:Ma("Header"),TopItemListComponent:Ma("TopItemList"),ListComponent:Ma("List","div"),ItemComponent:Ma("Item",
"div"),GroupComponent:Ma("Group","div"),ScrollerComponent:Ma("Scroller","div"),EmptyPlaceholder:Ma("EmptyPlaceholder"),ScrollSeekPlaceholder:Ma("ScrollSeekPlaceholder")}}),LF=mh(function(c){function g(ea,ma,xa){gg(pf(ea,le(M.components),ie(function(Ma){var Za,hb=Ma[0];Ma=Ma[1];return console.warn("react-virtuoso: "+xa+" property is deprecated. Pass components."+ma+" instead."),Gg({},Ma,((Za={})[ma]=hb,Za))})),M.components)}var u=c[0],M=c[1];c={item:$f(M.itemContent,"Rename the %citem%c prop to %citemContent."),
group:$f(M.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:$f(u.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:$f(u.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:$f(u.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Yf(),maxHeightCacheSize:Yf(),footer:Yf(),header:Yf(),HeaderContainer:Yf(),FooterContainer:Yf(),ItemContainer:Yf(),ScrollContainer:Yf(),GroupContainer:Yf(),
ListContainer:Yf(),emptyComponent:Yf(),scrollSeek:Yf()};return xf(c.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),xf(c.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),xf(c.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),
xf(c.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),xf(c.scrollSeek,function(ea){var ma=ea.placeholder;ea=Lf(ea,HF);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ma=Gg({},(0,M.components)(4),{ScrollSeekPlaceholder:ma});
(0,M.components)(0,ma);(0,u.scrollSeekConfiguration)(0,ea)}),g(c.footer,"Footer","footer"),g(c.header,"Header","header"),g(c.ItemContainer,"Item","ItemContainer"),g(c.ListContainer,"List","ListContainer"),g(c.ScrollContainer,"Scroller","ScrollContainer"),g(c.emptyComponent,"EmptyPlaceholder","emptyComponent"),g(c.GroupContainer,"Group","GroupContainer"),Gg({},u,M,c)},wh(Iz,KF)),MF=function(c){return eh.createElement("div",{style:{height:c.height}})},NF={position:Jz(),zIndex:1,overflowAnchor:"none"},
OF={overflowAnchor:"none"},Lz=eh.memo(function(c){c=c.showTopList;c=void 0!==c&&c;var g=jj("listState"),u=ao("sizeRanges"),M=jj("useWindowScroll"),ea=jj("customScrollParent"),ma=ao("windowScrollContainerState"),xa=ao("scrollContainerState");M=ea||M?ma:xa;var Ma=jj("itemContent"),Za=jj("context"),hb=jj("groupContent");ma=jj("trackItemSizes");xa=jj("itemSize");var zb=jj("log"),Ob=ao("gap");u=Fh(u,xa,ma,c?fl:M,zb,Ob,ea).callbackRef;ea=eh.useState(0);var bc=ea[0],yc=ea[1];Nv("deviation",function(Nc){bc!==
Nc&&yc(Nc)});ea=jj("EmptyPlaceholder");var ic=jj("ScrollSeekPlaceholder")||MF;M=jj("ListComponent");var Ac=jj("ItemComponent"),tc=jj("GroupComponent"),Vb=jj("computeItemKey"),wc=jj("isSeeking"),Uc=0<jj("groupIndices").length;ma=jj("paddingTopAddition");ma=c?{}:{boxSizing:"border-box",paddingTop:g.offsetTop+ma,paddingBottom:g.offsetBottom,marginTop:bc};return!c&&0===g.totalCount&&ea?(0,Zh.createElement)(ea,lg(ea,Za)):(0,Zh.createElement)(M,Gg({},lg(M,Za),{ref:u,style:ma,"data-test-id":c?"virtuoso-top-item-list":
"virtuoso-item-list"}),(c?g.topItems:g.items).map(function(Nc){var ed=Nc.originalIndex,ge=Vb(ed+g.firstItemIndex,Nc.data,Za);return wc?(0,Zh.createElement)(ic,Gg({},lg(ic,Za),{key:ge,index:Nc.index,height:Nc.size,type:Nc.type||"item"},"group"===Nc.type?{}:{groupIndex:Nc.groupIndex})):"group"===Nc.type?(0,Zh.createElement)(tc,Gg({},lg(tc,Za),{key:ge,"data-index":ed,"data-known-size":Nc.size,"data-item-index":Nc.index,style:NF}),hb(Nc.index)):(0,Zh.createElement)(Ac,Gg({},lg(Ac,Za),{key:ge,"data-index":ed,
"data-known-size":Nc.size,"data-item-index":Nc.index,"data-item-group-index":Nc.groupIndex,style:OF}),Uc?Ma(Nc.index,Nc.groupIndex,Nc.data,Za):Ma(Nc.index,Nc.data,Za))}))}),PF={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Cr={width:"100%",height:"100%",position:"absolute",top:0},QF={width:"100%",position:Jz(),top:0},RF=eh.memo(function(){var c=jj("HeaderComponent"),g=ao("headerHeight"),u=jj("headerFooterTag"),M=Mj(function(ma){return g(rh(ma,"height"))}),
ea=jj("context");return c?(0,Zh.createElement)(u,{ref:M},(0,Zh.createElement)(c,lg(c,ea))):null}),SF=eh.memo(function(){var c=jj("FooterComponent"),g=ao("footerHeight"),u=jj("headerFooterTag"),M=Mj(function(ma){return g(rh(ma,"height"))}),ea=jj("context");return c?(0,Zh.createElement)(u,{ref:M},(0,Zh.createElement)(c,lg(c,ea))):null}),TF=function(c){c=c.children;var g=(0,Zh.useContext)(Vt),u=ao("viewportHeight"),M=ao("fixedItemHeight"),ea=Mj(oi(u,function(ma){return rh(ma,"height")}));return eh.useEffect(function(){g&&
(u(g.viewportHeight),M(g.itemHeight))},[g,u,M]),eh.createElement("div",{style:Cr,ref:ea,"data-viewport-type":"element"},c)},Mz=function(c){c=c.children;var g=(0,Zh.useContext)(Vt),u=ao("windowViewportRect"),M=ao("fixedItemHeight"),ea=jj("customScrollParent");ea=Bg(u,ea);return eh.useEffect(function(){g&&(M(g.itemHeight),u({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,u,M]),eh.createElement("div",{ref:ea,style:Cr,"data-viewport-type":"window"},c)},UF=function(c){c=c.children;
var g=jj("TopItemListComponent"),u=jj("headerHeight");u=Gg({},QF,{marginTop:u+"px"});var M=jj("context");return(0,Zh.createElement)(g||"div",{style:u,context:M},c)},Wt=rl(LF,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",
groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",
logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},
methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},
eh.memo(function(c){var g=jj("useWindowScroll"),u=0<jj("topItemsIndexes").length,M=jj("customScrollParent"),ea=M||g?Mz:TF;return eh.createElement(M||g?XF:WF,Gg({},c),eh.createElement(ea,null,eh.createElement(RF,null),eh.createElement(Lz,null),eh.createElement(SF,null)),u&&eh.createElement(UF,null,eh.createElement(Lz,{showTopList:!0})))})),VF=Wt.Component,ao=Wt.usePublisher,jj=Wt.useEmitterValue,Nv=Wt.useEmitter,WF=Qh({usePublisher:ao,useEmitterValue:jj,useEmitter:Nv}),XF=gi({usePublisher:ao,useEmitterValue:jj,
useEmitter:Nv}),Nz={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},YF={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Oz=Math.round,Pz=Math.ceil,Xt=Math.floor,Ov=Math.min,Dr=Math.max,ZF=mh(function(c){var g=c[0],u=g.overscan,M=g.visibleRange,ea=g.listBoundary,ma=c[1];g=ma.scrollTop;var xa=ma.viewportHeight,Ma=ma.scrollBy,Za=ma.scrollTo,hb=ma.smoothScrollTargetReached,zb=ma.scrollContainerState,Ob=ma.footerHeight;ma=ma.headerHeight;
var bc=c[2],yc=c[3],ic=c[4],Ac=ic.propsReady,tc=ic.didMount,Vb=c[5];ic=Vb.windowViewportRect;var wc=Vb.windowScrollTo,Uc=Vb.useWindowScroll,Nc=Vb.customScrollParent;Vb=Vb.windowScrollContainerState;c=c[6];var ed=bf(0),ge=bf(0),Pd=bf(Nz),we=bf({height:0,width:0}),mf=bf({height:0,width:0}),Le=Yf(),hf=Yf(),ue=bf(0),Nd=bf(void 0),kd=bf({row:0,column:0});gg(pf(se(tc,ge,Nd),re(function(hd){return 0!==hd[1]}),ie(function(hd){return{items:Rh(0,hd[1]-1,hd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,
itemWidth:0}})),Pd);gg(pf(se(kg(ed),M,kg(kd,ag),kg(mf,function(hd,td){return hd&&hd.width===td.width&&hd.height===td.height}),Nd),le(we),ie(function(hd){var td=hd[0],zd=td[0],Kd=td[1],Ce=Kd[0],Ee=Kd[1],He=td[2],Ff=td[3],sf=td[4],Xg=hd[1];hd=He.row;td=Ff.height;Kd=Ff.width;var Rg=Xg.width;if(0===zd||0===Rg)return Nz;if(0===Kd)return YF;var di=He.column;Rg=Dr(1,Xt((Rg+di)/(Kd+di)));Ce=Rg*Xt((Ce+hd)/(td+hd));Ee=Rg*Pz((Ee+hd)/(td+hd))-1;Ee=Dr(0,Ov(zd-1,Ee));Ce=Rh(Ov(Ee,Dr(0,Ce)),Ee,sf);Ff=Kf(Xg,He,Ff,
Ce);He=Ff.top;Ff=Ff.bottom;zd=Pz(zd/Rg);return{items:Ce,offsetTop:He,offsetBottom:zd*td+(zd-1)*hd-Ff,top:He,bottom:Ff,itemHeight:td,itemWidth:Kd}})),Pd);gg(pf(Nd,re(function(hd){return void 0!==hd}),ie(function(hd){return hd.length})),ed);gg(pf(we,ie(function(hd){return hd.height})),xa);gg(pf(se(we,mf,Pd,kd),ie(function(hd){hd=Kf(hd[0],hd[3],hd[1],hd[2].items);return[hd.top,hd.bottom]}),df(Dc)),ea);M=wj(pf(kg(Pd),re(function(hd){return 0<hd.items.length}),le(ed),re(function(hd){var td=hd[0].items;
return td[td.length-1].index===hd[1]-1}),ie(function(hd){return hd[1]-1}),df()));ea=wj(pf(kg(Pd),re(function(hd){hd=hd.items;return 0<hd.length&&0===hd[0].index}),qi(0),df()));xa=wj(pf(kg(Pd),re(function(hd){return 0<hd.items.length}),ie(function(hd){hd=hd.items;return{startIndex:hd[0].index,endIndex:hd[hd.length-1].index}}),df(Id)));gg(xa,yc.scrollSeekRangeChanged);gg(pf(Le,le(we,mf,ed,kd),ie(function(hd){var td=hd[1],zd=hd[2],Kd=hd[3],Ce=hd[4],Ee=sb(hd[0]);hd=Ee.align;var He=Ee.behavior,Ff=Ee.offset;
Ee=Ee.index;"LAST"===Ee&&(Ee=Kd-1);Kd=xh(td,Ce,zd,Dr(0,Ee,Ov(Kd-1,Ee)));return"end"===hd?Kd=Oz(Kd-td.height+zd.height):"center"===hd&&(Kd=Oz(Kd-td.height/2+zd.height/2)),Ff&&(Kd+=Ff),{top:Kd,behavior:He}})),Za);tc=kj(pf(Pd,ie(function(hd){return hd.offsetBottom+hd.bottom})),0);return gg(pf(ic,ie(function(hd){return{width:hd.visibleWidth,height:hd.visibleHeight}})),we),Gg({data:Nd,totalCount:ed,viewportDimensions:we,itemDimensions:mf,scrollTop:g,scrollHeight:hf,overscan:u,scrollBy:Ma,scrollTo:Za,scrollToIndex:Le,
smoothScrollTargetReached:hb,windowViewportRect:ic,windowScrollTo:wc,useWindowScroll:Uc,customScrollParent:Nc,windowScrollContainerState:Vb,deviation:ue,scrollContainerState:zb,footerHeight:Ob,headerHeight:ma,initialItemCount:ge,gap:kd},yc,{gridState:Pd,totalListHeight:tc},bc,{startReached:ea,endReached:M,rangeChanged:xa,propsReady:Ac},c)},wh(Lv,qn,Js,Gz,Kq,Hz,Pp)),$F=["placeholder"],aG=mh(function(){var c=bf(function(hb){return"Item "+hb}),g=bf({}),u=bf(null),M=bf("virtuoso-grid-item"),ea=bf("virtuoso-grid-list"),
ma=bf(sj),xa=bf("div"),Ma=bf(fl),Za=function(hb,zb){return void 0===zb&&(zb=null),kj(pf(g,ie(function(Ob){return Ob[hb]}),df()),zb)};return{context:u,itemContent:c,components:g,computeItemKey:ma,itemClassName:M,listClassName:ea,headerFooterTag:xa,scrollerRef:Ma,FooterComponent:Za("Footer"),HeaderComponent:Za("Header"),ListComponent:Za("List","div"),ItemComponent:Za("Item","div"),ScrollerComponent:Za("Scroller","div"),ScrollSeekPlaceholder:Za("ScrollSeekPlaceholder","div")}}),bG=mh(function(c){function g(ea,
ma,xa){gg(pf(ea,le(M.components),ie(function(Ma){var Za,hb=Ma[0];Ma=Ma[1];return console.warn("react-virtuoso: "+xa+" property is deprecated. Pass components."+ma+" instead."),Gg({},Ma,((Za={})[ma]=hb,Za))})),M.components)}var u=c[0],M=c[1];c={item:$f(M.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Yf(),ScrollContainer:Yf(),ListContainer:Yf(),emptyComponent:Yf(),scrollSeek:Yf()};return xf(c.scrollSeek,function(ea){var ma=ea.placeholder;ea=Lf(ea,$F);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");
ma=Gg({},(0,M.components)(4),{ScrollSeekPlaceholder:ma});(0,M.components)(0,ma);(0,u.scrollSeekConfiguration)(0,ea)}),g(c.ItemContainer,"Item","ItemContainer"),g(c.ListContainer,"List","ListContainer"),g(c.ScrollContainer,"Scroller","ScrollContainer"),Gg({},u,M,c)},wh(ZF,aG)),cG=eh.memo(function(){var c=ul("gridState"),g=ul("listClassName"),u=ul("itemClassName"),M=ul("itemContent"),ea=ul("computeItemKey"),ma=ul("isSeeking"),xa=vo("scrollHeight"),Ma=ul("ItemComponent"),Za=ul("ListComponent"),hb=ul("ScrollSeekPlaceholder"),
zb=ul("context"),Ob=vo("itemDimensions"),bc=vo("gap"),yc=ul("log"),ic=Mj(function(Ac){xa(Ac.parentElement.parentElement.scrollHeight);var tc=Ac.firstChild;tc&&Ob(tc.getBoundingClientRect());bc({row:hh("row-gap",getComputedStyle(Ac).rowGap,yc),column:hh("column-gap",getComputedStyle(Ac).columnGap,yc)})});return(0,Zh.createElement)(Za,Gg({ref:ic,className:g},lg(Za,zb),{style:{paddingTop:c.offsetTop,paddingBottom:c.offsetBottom}}),c.items.map(function(Ac){var tc=ea(Ac.index,Ac.data,zb);return ma?(0,Zh.createElement)(hb,
Gg({key:tc},lg(hb,zb),{index:Ac.index,height:c.itemHeight,width:c.itemWidth})):(0,Zh.createElement)(Ma,Gg({},lg(Ma,zb),{className:u,"data-index":Ac.index,key:tc}),M(Ac.index,Ac.data,zb))}))}),dG=eh.memo(function(){var c=ul("HeaderComponent"),g=vo("headerHeight"),u=ul("headerFooterTag"),M=Mj(function(ma){return g(rh(ma,"height"))}),ea=ul("context");return c?(0,Zh.createElement)(u,{ref:M},(0,Zh.createElement)(c,lg(c,ea))):null}),eG=eh.memo(function(){var c=ul("FooterComponent"),g=vo("footerHeight"),
u=ul("headerFooterTag"),M=Mj(function(ma){return g(rh(ma,"height"))}),ea=ul("context");return c?(0,Zh.createElement)(u,{ref:M},(0,Zh.createElement)(c,lg(c,ea))):null}),fG=function(c){c=c.children;var g=(0,Zh.useContext)(Kz),u=vo("itemDimensions"),M=vo("viewportDimensions"),ea=Mj(function(ma){M(ma.getBoundingClientRect())});return eh.useEffect(function(){g&&(M({height:g.viewportHeight,width:g.viewportWidth}),u({height:g.itemHeight,width:g.itemWidth}))},[g,M,u]),eh.createElement("div",{style:Cr,ref:ea},
c)},gG=function(c){c=c.children;var g=(0,Zh.useContext)(Kz),u=vo("windowViewportRect"),M=vo("itemDimensions"),ea=ul("customScrollParent");ea=Bg(u,ea);return eh.useEffect(function(){g&&(M({height:g.itemHeight,width:g.itemWidth}),u({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,u,M]),eh.createElement("div",{ref:ea,style:Cr},c)},Pv=rl(bG,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",
data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},eh.memo(function(c){c=Gg({},c);var g=ul("useWindowScroll"),u=ul("customScrollParent"),M=u||g?gG:fG;return eh.createElement(u||g?iG:hG,Gg({},c),eh.createElement(M,null,eh.createElement(dG,null),eh.createElement(cG,null),eh.createElement(eG,null)))})),vo=Pv.usePublisher,ul=Pv.useEmitterValue,Qz=Pv.useEmitter,
hG=Qh({usePublisher:vo,useEmitterValue:ul,useEmitter:Qz}),iG=gi({usePublisher:vo,useEmitterValue:ul,useEmitter:Qz}),jG=mh(function(){var c=bf(function(Za){return eh.createElement("td",null,"Item $",Za)}),g=bf(null),u=bf(null),M=bf(null),ea=bf({}),ma=bf(sj),xa=bf(fl),Ma=function(Za,hb){return void 0===hb&&(hb=null),kj(pf(ea,ie(function(zb){return zb[Za]}),df()),hb)};return{context:g,itemContent:c,fixedHeaderContent:u,fixedFooterContent:M,components:ea,computeItemKey:ma,scrollerRef:xa,TableComponent:Ma("Table",
"table"),TableHeadComponent:Ma("TableHead","thead"),TableFooterComponent:Ma("TableFoot","tfoot"),TableBodyComponent:Ma("TableBody","tbody"),TableRowComponent:Ma("TableRow","tr"),ScrollerComponent:Ma("Scroller","div"),EmptyPlaceholder:Ma("EmptyPlaceholder"),ScrollSeekPlaceholder:Ma("ScrollSeekPlaceholder"),FillerRow:Ma("FillerRow")}}),kG=mh(function(c){return Gg({},c[0],c[1])},wh(Iz,jG)),lG=function(c){return eh.createElement("tr",null,eh.createElement("td",{style:{height:c.height}}))},mG=function(c){return eh.createElement("tr",
null,eh.createElement("td",{style:{height:c.height,padding:0,border:0}}))},nG=eh.memo(function(){var c=Wj("listState"),g=wo("sizeRanges"),u=Wj("useWindowScroll"),M=Wj("customScrollParent"),ea=wo("windowScrollContainerState"),ma=wo("scrollContainerState");u=M||u?ea:ma;var xa=Wj("itemContent");ea=Wj("trackItemSizes");M=Fh(g,Wj("itemSize"),ea,u,Wj("log"),void 0,M);g=M.callbackRef;var Ma=M.ref;M=eh.useState(0);var Za=M[0],hb=M[1];Rv("deviation",function(Vb){Za!==Vb&&(Ma.current.style.marginTop=Vb+"px",
hb(Vb))});ea=Wj("EmptyPlaceholder");var zb=Wj("ScrollSeekPlaceholder")||lG;u=Wj("FillerRow")||mG;M=Wj("TableBodyComponent");var Ob=Wj("TableRowComponent"),bc=Wj("computeItemKey"),yc=Wj("isSeeking");ma=Wj("paddingTopAddition");var ic=Wj("firstItemIndex"),Ac=Wj("statefulTotalCount"),tc=Wj("context");if(0===Ac&&ea)return(0,Zh.createElement)(ea,lg(ea,tc));ea=c.offsetTop+ma+Za;ma=c.offsetBottom;ea=0<ea?eh.createElement(u,{height:ea,key:"padding-top"}):null;u=0<ma?eh.createElement(u,{height:ma,key:"padding-bottom"}):
null;c=c.items.map(function(Vb){var wc=Vb.originalIndex,Uc=bc(wc+ic,Vb.data,tc);return yc?(0,Zh.createElement)(zb,Gg({},lg(zb,tc),{key:Uc,index:Vb.index,height:Vb.size,type:Vb.type||"item"})):(0,Zh.createElement)(Ob,Gg({},lg(Ob,tc),{key:Uc,"data-index":wc,"data-known-size":Vb.size,"data-item-index":Vb.index,style:{overflowAnchor:"none"}}),xa(Vb.index,Vb.data,tc))});return(0,Zh.createElement)(M,Gg({ref:g,"data-test-id":"virtuoso-item-list"},lg(M,tc)),[ea].concat(c,[u]))}),oG=function(c){c=c.children;
var g=(0,Zh.useContext)(Vt),u=wo("viewportHeight"),M=wo("fixedItemHeight"),ea=Mj(oi(u,function(ma){return rh(ma,"height")}));return eh.useEffect(function(){g&&(u(g.viewportHeight),M(g.itemHeight))},[g,u,M]),eh.createElement("div",{style:Cr,ref:ea,"data-viewport-type":"element"},c)},pG=function(c){c=c.children;var g=(0,Zh.useContext)(Vt),u=wo("windowViewportRect"),M=wo("fixedItemHeight"),ea=Wj("customScrollParent");ea=Bg(u,ea);return eh.useEffect(function(){g&&(M(g.itemHeight),u({offsetTop:0,visibleHeight:g.viewportHeight,
visibleWidth:100}))},[g,u,M]),eh.createElement("div",{ref:ea,style:Cr,"data-viewport-type":"window"},c)},Qv=rl(kG,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",
groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",
react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},eh.memo(function(c){var g=Wj("useWindowScroll"),
u=Wj("customScrollParent"),M=wo("fixedHeaderHeight"),ea=wo("fixedFooterHeight"),ma=Wj("fixedHeaderContent"),xa=Wj("fixedFooterContent"),Ma=Wj("context");M=Mj(oi(M,function(Ob){return rh(Ob,"height")}));var Za=Mj(oi(ea,function(Ob){return rh(Ob,"height")}));ea=u||g?rG:qG;g=u||g?pG:oG;u=Wj("TableComponent");var hb=Wj("TableHeadComponent"),zb=Wj("TableFooterComponent");ma=ma?eh.createElement(hb,Gg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:M},lg(hb,Ma)),ma()):null;xa=xa?eh.createElement(zb,
Gg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Za},lg(zb,Ma)),xa()):null;return eh.createElement(ea,Gg({},c),eh.createElement(g,null,eh.createElement(u,Gg({style:{borderSpacing:0}},lg(u,Ma)),[ma,eh.createElement(nG,{key:"TableBody"}),xa])))})),wo=Qv.usePublisher,Wj=Qv.useEmitterValue,Rv=Qv.useEmitter,qG=Qh({usePublisher:wo,useEmitterValue:Wj,useEmitter:Rv}),rG=gi({usePublisher:wo,useEmitterValue:Wj,useEmitter:Rv}),Nj=Mf(T(16));Rb=T(611);var Ks={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},
Lq=({type:c,active:g})=>(0,Rb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,Rb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BS:"block-search",PS:"page-search"})[c]}`})}),sG=Xe(({children:c})=>(0,Rb.jsx)("div",{className:"tl-logseq-portal-header",children:c})),Rz=(c,g)=>(0,Rb.jsx)("span",{children:c.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((u,M)=>1===M%2?(0,Rb.jsx)("mark",{className:"tl-highlighted",children:u}):u).map((u,
M)=>(0,Rb.jsx)(Nj.Fragment,{children:u},M))}),tG=(c,g)=>{const {handlers:u}=Nj.useContext(jp),[M,ea]=Nj.useState(null),ma=aj(c,200);Nj.useEffect(()=>{let xa=!1;if(0<ma.length){const Ma={"pages?":!0,"blocks?":!0,"files?":!1};"B"===g?Ma["pages?"]=!1:"P"===g&&(Ma["blocks?"]=!1);u.search(ma,Ma).then(Za=>{xa||ea(Za)})}else ea(null);return()=>{xa=!0}},[ma,null==u?void 0:u.search]);return M},Sz=({active:c,style:g,icon:u,otherIcon:M,onClick:ea})=>{const [ma,xa]=Nj.useState(!1);Nj.useEffect(()=>{xa(!0);const Ma=
setTimeout(()=>{xa(!1)},500);return()=>clearTimeout(Ma)},[c]);return(0,Rb.jsx)("div",{"data-active":c,"data-recently-changed":ma,style:g,className:"tl-circle-button",onMouseDown:ea,children:(0,Rb.jsxs)("div",{className:"tl-circle-button-icons-wrapper","data-icons-count":M?2:1,children:[M&&(0,Rb.jsx)(zi,{name:M}),(0,Rb.jsx)(zi,{name:u})]})})},Mq=class extends Dn{constructor(c={}){var g;super(c);kb(this,"hideRotateHandle",!0);kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",
!0);kb(this,"persist",null);kb(this,"initialHeightCalculated",!0);kb(this,"getInnerHeight",null);kb(this,"setCollapsed",u=>mi(this,null,function*(){var M;"B"===this.props.blockType?(this.update({compact:u}),this.canResize[1]=!u,u||(yield hi(),this.onResetBounds()),null==(M=this.persist)?void 0:M.call(this)):(M=this.props.size[1],this.canResize[1]=!u,console.log(u,u?this.getHeaderHeight():this.props.collapsedHeight,this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!u,collapsed:u,
size:[this.props.size[0],u?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:u?M:this.props.collapsedHeight}))}));kb(this,"setScaleLevel",u=>mi(this,null,function*(){var M;const ea=fb.mul(this.props.size,Ks[null!=u?u:"md"]/Ks[null!=(M=this.props.scaleLevel)?M:"md"]);this.update({scaleLevel:u});yield hi();this.update({size:ea})}));kb(this,"onResetBounds",u=>{u=this.getAutoResizeHeight();null!==u&&1<Math.abs(u-this.props.size[1])&&(this.update({size:[this.props.size[0],u]}),this.initialHeightCalculated=
!0);return this});kb(this,"onResize",(u,M)=>{var ea;const {bounds:ma,rotation:xa,scale:[Ma,Za]}=M;u=[...this.scale];0>Ma&&(u[0]*=-1);0>Za&&(u[1]*=-1);M=ma.height;this.props.isAutoResizing&&(M=null!=(ea=this.getAutoResizeHeight())?ea:M);return this.update({point:[ma.minX,ma.minY],size:[Math.max(1,ma.width),Math.max(1,M)],scale:u,rotation:xa})});kb(this,"LogseqQuickSearch",Xe(({onChange:u})=>{const [M,ea]=Nj.useState(Mq.defaultSearchQuery),[ma,xa]=Nj.useState(Mq.defaultSearchFilter),Ma=Nj.useRef(null),
{handlers:Za,renderers:hb}=Nj.useContext(jp),zb=rf(),Ob=Nj.useCallback(Nc=>{var ed;u(Nc);null==(ed=Ma.current)?void 0:ed.blur();Nc&&(Mq.defaultSearchQuery="",Mq.defaultSearchFilter=null)},[]),bc=Nj.useCallback(Nc=>{const ed=null==Za?void 0:Za.addNewBlock(Nc);ed&&(Ob(ed),setTimeout(()=>{var ge,Pd,we;zb.api.editShape(this);null==(we=null==(Pd=null==(ge=window.logseq)?void 0:ge.api)?void 0:Pd.edit_block)?void 0:we.call(Pd,ed)}));return ed},[]),yc=Nj.useRef(null),[ic,Ac]=Nj.useState(0),tc=tG(M,ma),[Vb,
wc]=Nj.useState("circle-plus");Nj.useEffect(()=>{setTimeout(()=>{var Nc;null==(Nc=Ma.current)?void 0:Nc.focus()})},[ma]);Nj.useEffect(()=>{Mq.defaultSearchQuery=M;Mq.defaultSearchFilter=ma},[M,ma]);const Uc=Nj.useMemo(()=>{var Nc;const ed=[],ge=null==hb?void 0:hb.Breadcrumb;if(!ge||!Za)return[];ed.push({actionIcon:"circle-plus",onChosen:()=>!!bc(M),element:(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)(Lq,{active:!0,type:"B"}),0<M.length?(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)("strong",
{children:"New whiteboard block:"}),M]}):(0,Rb.jsx)("strong",{children:"New whiteboard block"})]})});(null==(Nc=null==tc?void 0:tc.pages)?0:Nc.some(Pd=>Pd.toLowerCase()===M.toLowerCase()))||!M||ed.push({actionIcon:"circle-plus",onChosen:()=>{Ob(M);return!0},element:(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)(Lq,{active:!0,type:"P"}),(0,Rb.jsx)("strong",{children:"New page:"}),M]})});0===M.length&&null===ma&&ed.push({actionIcon:"search",onChosen:()=>{xa("B");return!0},
element:(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)(Lq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{xa("P");return!0},element:(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)(Lq,{type:"PS"}),"Search only pages"]})});ma&&"P"!==ma||!tc||!tc.pages||ed.push(...tc.pages.map(Pd=>({actionIcon:"search",onChosen:()=>{Ob(Pd);return!0},element:(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)(Lq,
{type:Za.isWhiteboardPage(Pd)?"WP":"P"}),Rz(Pd,M)]})})));ma&&"B"!==ma||!tc||!tc.blocks||ed.push(...tc.blocks.filter(Pd=>Pd.content&&Pd.uuid).map(({content:Pd,uuid:we})=>{const mf=Za.queryBlockByUUID(we);return{actionIcon:"search",onChosen:()=>{var Le,hf,ue;return mf?(Ob(we),null==(ue=null==(hf=null==(Le=window.logseq)?void 0:Le.api)?void 0:hf.set_blocks_id)?void 0:ue.call(hf,[we]),!0):!1},element:mf?(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)(Lq,
{type:"B"}),(0,Rb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Rb.jsx)(ge,{blockId:we})})]}),(0,Rb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Rb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),Rz(Pd,M)]})]}):(0,Rb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));return ed},[M,ma,tc,null==hb?void 0:hb.Breadcrumb,Za]);Nj.useEffect(()=>{const Nc=
ed=>{var ge,Pd;let we=ic;"ArrowDown"===ed.key?we=Math.min(Uc.length-1,ic+1):"ArrowUp"===ed.key?we=Math.max(0,ic-1):"Enter"===ed.key?(null==(ge=Uc[ic])?void 0:ge.onChosen(),ed.stopPropagation(),ed.preventDefault()):"Backspace"===ed.key&&0===M.length?xa(null):"Escape"===ed.key&&Ob("");we!==ic&&(ge=Uc[we],Ac(we),wc(ge.actionIcon),ed.stopPropagation(),ed.preventDefault(),(ed=null==(Pd=yc.current)?void 0:Pd.querySelector(".tl-quick-search-option:nth-child("+(we+1)+")"))&&(null==ed?void 0:ed.scrollIntoViewIfNeeded(!1)))};
document.addEventListener("keydown",Nc,!0);return()=>{document.removeEventListener("keydown",Nc,!0)}},[Uc,ic,M]);return(0,Rb.jsxs)("div",{className:"tl-quick-search",children:[(0,Rb.jsx)(Sz,{icon:Vb,onClick:()=>{var Nc;null==(Nc=Uc[ic])?void 0:Nc.onChosen()}}),(0,Rb.jsxs)("div",{className:"tl-quick-search-input-container",children:[ma&&(0,Rb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Rb.jsx)(Lq,{type:ma}),"B"===ma?"Search blocks":"Search pages",(0,Rb.jsx)("div",{className:"tl-quick-search-input-filter-remove",
onClick:()=>xa(null),children:(0,Rb.jsx)(zi,{name:"x"})})]}),(0,Rb.jsx)(Bv,{ref:Ma,type:"text",value:M,className:"tl-quick-search-input",placeholder:"Create or search your graph...",onChange:Nc=>ea(Nc.target.value),onKeyDown:Nc=>{"Enter"===Nc.key&&Ob(M)}})]}),(0,Rb.jsx)("div",{className:"tl-quick-search-options",ref:yc,children:(0,Rb.jsx)(VF,{style:{height:36*Math.min(Math.max(1,Uc.length),12)},totalCount:Uc.length,itemContent:Nc=>{const {actionIcon:ed,onChosen:ge,element:Pd}=Uc[Nc];return(0,Rb.jsx)("div",
{"data-focused":Nc===ic,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{wc(ed);Ac(Nc)},onMouseDownCapture:we=>{ge()&&(we.stopPropagation(),we.preventDefault())},children:Pd},Nc)}})})]})}));kb(this,"PortalComponent",Xe(({})=>{const {props:{pageId:u}}=this,{renderers:M}=Nj.useContext(jp),ea=rf(),ma=Nj.useRef(null),[,xa]=this.useComponentSize(ma,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==M||!M.Page)return null;const {Page:Ma,
Block:Za}=M;Nj.useEffect(()=>{var hb,zb;if(this.props.isAutoResizing){const Ob=(null!=(zb=null==(hb=this.getInnerHeight)?void 0:hb.call(this))?zb:xa)+this.getHeaderHeight();xa&&1<Math.abs(Ob-this.props.size[1])&&(this.update({size:[this.props.size[0],Ob]}),ea.persist(!0))}},[xa,this.props.isAutoResizing]);Nj.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ea.persist(!0)})},[this.initialHeightCalculated]);return(0,Rb.jsx)("div",{ref:ma,className:"tl-logseq-cp-container",
style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:"B"===this.props.blockType&&this.props.compact?(0,Rb.jsx)(Za,{blockId:u}):(0,Rb.jsx)(Ma,{pageName:u})})}));kb(this,"ReactComponent",Xe(u=>{var M;const {events:ea,isErasing:ma,isEditing:xa,isBinding:Ma}=u,{props:{opacity:Za,pageId:hb,stroke:zb,fill:Ob,scaleLevel:bc,strokeWidth:yc,size:ic}}=this,Ac=rf(),{renderers:tc,handlers:Vb}=Nj.useContext(jp);this.persist=()=>Ac.persist();const wc=Ng(),Uc=Ac.selectedIds.has(this.id)&&1===Ac.selectedIds.size,
Nc=Ac.isIn("logseq-portal.creating")&&!hb,ed=(wc||Uc&&!xa||"select"!==Ac.selectedTool.id)&&!Nc,ge=Nj.useCallback(td=>{ed||td.stopPropagation()},[ed]),Pd=1===Ac.selectedShapesArray.length&&Ac.selectedShapesArray.some(td=>"logseq-portal"===td.type&&td.props.id!==this.props.id&&hb&&td.props.pageId===hb),we=Ks[null!=bc?bc:"md"];Nj.useEffect(()=>this.props.collapsed&&xa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[xa,this.props.collapsed]);const mf=Nj.useCallback(td=>{this.initialHeightCalculated=!1;const zd=Zf(td)?"B":"P";this.update({pageId:td,size:[400,320],blockType:zd,compact:"B"===zd});Ac.selectTool("select");Ac.history.resume();Ac.history.persist()},[]),Le=this.PortalComponent,hf=this.LogseqQuickSearch;var ue=Nj.useMemo(()=>{var td;if(hb&&"B"===this.props.blockType)return null==(td=null==Vb?void 0:Vb.queryBlockByUUID(hb))?void 0:td.content},[null==Vb?void 0:Vb.queryBlockByUUID,hb]);ue="B"===
this.props.blockType&&"string"!==typeof ue;const Nd=(!this.props.collapsed||xa)&&!ue;if(null==tc||!tc.Page)return null;const {Breadcrumb:kd,PageNameLink:hd}=tc;return(0,Rb.jsxs)(gp,wf(Fe({style:{pointerEvents:"all",opacity:ma?.2:Za}},ea),{children:[Ma&&(0,Rb.jsx)(Mg,{mode:"html",strokeWidth:yc,size:ic}),(0,Rb.jsx)("div",{onWheelCapture:ge,onPointerDown:ge,onPointerUp:ge,style:{width:"100%",height:"100%",pointerEvents:wc||!xa&&!Uc?"none":"all"},children:Nc?(0,Rb.jsx)(hf,{onChange:mf}):(0,Rb.jsxs)(Rb.Fragment,
{children:[(0,Rb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":hb,"data-portal-selected":Pd,"data-editing":xa,style:{background:this.props.compact?"transparent":Ob,color:zb,width:`calc(100% / ${we})`,height:`calc(100% / ${we})`,transform:`scale(${we})`,"--ls-primary-background-color":(null==Ob?0:Ob.startsWith("var"))?void 0:Ob,"--ls-primary-text-color":(null==zb?0:zb.startsWith("var"))?void 0:zb,"--ls-title-text-color":(null==zb?0:zb.startsWith("var"))?
void 0:zb},children:[!this.props.compact&&!ue&&(0,Rb.jsx)(sG,{type:null!=(M=this.props.blockType)?M:"P",children:"P"===this.props.blockType?(0,Rb.jsx)(hd,{pageName:hb}):(0,Rb.jsx)(kd,{blockId:hb})}),ue&&(0,Rb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Nd&&(0,Rb.jsx)(Le,Fe({},u))]}),(0,Rb.jsx)(Sz,{active:!!this.collapsed,style:{opacity:Uc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:()=>this.setCollapsed(!this.collapsed),otherIcon:"whiteboard-element"})]})})]}))}));
kb(this,"ReactIndicator",Xe(()=>{const u=this.getBounds();return 1===rf().selectedShapesArray.length?null:(0,Rb.jsx)("rect",{width:u.width,height:u.height,fill:"transparent",rx:8,ry:8})}));kb(this,"validateProps",u=>{var M;if(void 0!==u.size){const ea=Ks[null!=(M=this.props.scaleLevel)?M:"md"];u.size[0]=Math.max(u.size[0],240*ea);u.size[1]=Math.max(u.size[1],40*ea)}return Fg(this,u)});yf(this);c.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=c.size)?void 0:g[1])&&(this.initialHeightCalculated=
!1)}static isPageOrBlock(c){return c?/^\(\(.*\)\)$/.test(c)&&40===c.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}useComponentSize(c,g=""){const [u,M]=Nj.useState([0,0]),ea=rf();Nj.useEffect(()=>{if(null==c?0:c.current){const ma=g?c.current.querySelector(g):c.current;if(ma){const xa=()=>{const {width:Za,height:hb}=ma.getBoundingClientRect(),zb=fb.div([Za,hb],ea.viewport.camera.zoom);
M(zb);return zb};xa();this.getInnerHeight=()=>xa()[1];const Ma=new ResizeObserver(()=>{xa()});Ma.observe(ma);return()=>{Ma.disconnect()}}}return()=>{}},[c,g]);return u}getHeaderHeight(){var c;const g=Ks[null!=(c=this.props.scaleLevel)?c:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var c,g;const u=this.getBounds();return(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)("rect",{fill:this.props.fill,
stroke:this.props.stroke,strokeWidth:null!=(c=this.props.strokeWidth)?c:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:u.width,rx:8,ry:8,height:u.height}),!this.props.compact&&(0,Rb.jsx)("rect",{fill:"#aaa",x:1,y:1,width:u.width-2,height:38,rx:8,ry:8}),(0,Rb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${u.width/2}, ${10+u.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:this.props.stroke,stroke:this.props.stroke,children:"P"===this.props.blockType?
this.props.pageId:""})]})}},Im=Mq;kb(Im,"id","logseq-portal");kb(Im,"defaultSearchQuery","");kb(Im,"defaultSearchFilter",null);kb(Im,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"var(--ls-primary-text-color)",fill:"var(--ls-secondary-background-color)",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});je([ah],Im.prototype,"collapsed",
1);je([cf],Im.prototype,"setCollapsed",2);je([ah],Im.prototype,"scaleLevel",1);je([cf],Im.prototype,"setScaleLevel",2);var {min:Er,PI:uG}=Math,Ls=uG+1E-4;Rb=T(611);var vG={easing:c=>Math.sin(c*Math.PI/2),simulatePressure:!0},wG={easing:c=>c*c,simulatePressure:!1},Ms=class extends qr{constructor(c={}){super(c);kb(this,"ReactComponent",Xe(({events:g,isErasing:u})=>{const {props:{opacity:M}}=this;return(0,Rb.jsx)($n,wf(Fe({},g),{opacity:u?.2:M,children:this.getShapeSVGJsx()}))}));kb(this,"ReactIndicator",
Xe(()=>{const {pointsPath:g}=this;return(0,Rb.jsx)("path",{d:g})}));kb(this,"validateProps",g=>{g=Fg(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});yf(this)}get pointsPath(){var c=this.props;if(2>c.points.length)var g="";else g=wf(Fe({size:1+1.5*c.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===c.points[1][2]?vG:wG),{last:c.isComplete}),c=go(c.points,g),g=ok.getSvgPathFromStroke(fo(c,g));return g}getShapeSVGJsx(){const {pointsPath:c,props:{stroke:g,
strokeWidth:u,strokeType:M}}=this;return(0,Rb.jsx)("path",{pointerEvents:"none",d:c,strokeWidth:u/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:g,fill:g,strokeDasharray:"dashed"===M?"12 4":void 0})}};kb(Ms,"id","pencil");kb(Ms,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"var(--tl-foreground, #000)",fill:"var(--tl-foreground, #000)",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});je([ah],Ms.prototype,"pointsPath",1);Rb=T(611);var Yt=
class extends Ap{constructor(){super(...arguments);kb(this,"ReactComponent",Xe(({events:c,isErasing:g,isSelected:u})=>{const {offset:[M,ea],props:{stroke:ma,fill:xa,noFill:Ma,strokeWidth:Za,opacity:hb,strokeType:zb}}=this,Ob=this.getVertices(Za/2).join();return(0,Rb.jsx)($n,wf(Fe({},c),{opacity:g?.2:hb,children:(0,Rb.jsxs)("g",{transform:`translate(${M}, ${ea})`,children:[(0,Rb.jsx)("polygon",{className:u||!Ma?"tl-hitarea-fill":"tl-hitarea-stroke",points:Ob}),(0,Rb.jsx)("polygon",{points:Ob,stroke:Ma?
xa:ma,fill:Ma?"none":xa,strokeWidth:Za,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===zb?"8 2":void 0})]})}))}));kb(this,"ReactIndicator",Xe(()=>{const {offset:[c,g],props:{strokeWidth:u}}=this;return(0,Rb.jsx)("polygon",{transform:`translate(${c}, ${g})`,points:this.getVertices(u/2).join()})}));kb(this,"validateProps",c=>{void 0!==c.sides&&(c.sides=Math.max(c.sides,3));return Fg(this,c)})}getShapeSVGJsx(c){const {offset:[g,u],props:{stroke:M,fill:ea,noFill:ma,strokeWidth:xa,opacity:Ma,
strokeType:Za}}=this;c=this.getVertices(xa/2).join();return(0,Rb.jsxs)("g",{transform:`translate(${g}, ${u})`,opacity:Ma,children:[(0,Rb.jsx)("polygon",{className:ma?"tl-hitarea-stroke":"tl-hitarea-fill",points:c}),(0,Rb.jsx)("polygon",{points:c,stroke:ma?ea:M,fill:ma?"none":ea,strokeWidth:xa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Za?"8 2":void 0})]})}};kb(Yt,"id","polygon");kb(Yt,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,
isFlippedY:!1,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});var Ro=Mf(T(16));Rb=T(611);var xG={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Fr=class extends Uu{constructor(){super(...arguments);kb(this,"ReactComponent",Xe(({events:c,isErasing:g,isEditing:u,onEditingEnd:M})=>{const {props:{opacity:ea,fontFamily:ma,fontSize:xa,fontWeight:Ma,italic:Za,lineHeight:hb,text:zb,stroke:Ob,padding:bc}}=this,yc=Ro.useRef(null),ic=Ro.useRef(!1),Ac=
Ro.useRef(null),tc=Ro.useCallback(ed=>{const {isSizeLocked:ge}=this.props;ed=$q.normalizeText(ed.currentTarget.value);ge?this.update({text:ed,size:this.getAutoSizedBoundingBox({text:ed})}):this.update({text:ed})},[]),Vb=Ro.useCallback(ed=>{if("Escape"!==ed.key)if("Tab"===ed.key&&0===zb.length)ed.preventDefault();else{if("Meta"!==ed.key&&!ed.metaKey)ed.stopPropagation();else if("z"===ed.key&&ed.metaKey){ed.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);ed.stopPropagation();
ed.preventDefault();return}"Tab"===ed.key&&(ed.preventDefault(),ed.shiftKey?Hn.unindent(ed.currentTarget):Hn.indent(ed.currentTarget),this.update({text:$q.normalizeText(ed.currentTarget.value)}))}},[]),wc=Ro.useCallback(ed=>{ed.currentTarget.setSelectionRange(0,0);null==M?void 0:M()},[M]),Uc=Ro.useCallback(ed=>{u&&ic.current&&document.activeElement===ed.currentTarget&&ed.currentTarget.select()},[u]),Nc=Ro.useCallback(ed=>{u&&ed.stopPropagation()},[u]);Ro.useEffect(()=>{u?requestAnimationFrame(()=>
{ic.current=!0;const ed=yc.current;ed&&(ed.focus(),ed.select())}):null==M?void 0:M()},[u,M]);Ro.useLayoutEffect(()=>{const {fontFamily:ed,fontSize:ge,fontWeight:Pd,lineHeight:we,padding:mf}=this.props,[Le,hf]=Gf(zb,{fontFamily:ed,fontSize:ge,fontWeight:Pd,lineHeight:we},mf);this.update({size:[Le,hf]})},[]);return(0,Rb.jsx)(gp,wf(Fe({},c),{opacity:g?.2:ea,children:(0,Rb.jsx)("div",{ref:Ac,className:"tl-text-shape-wrapper","data-hastext":!!zb,"data-isediting":u,style:{fontFamily:ma,fontStyle:Za?"italic":
"normal",fontSize:xa,fontWeight:Ma,padding:bc,lineHeight:hb,color:Ob},children:u?(0,Rb.jsx)("textarea",{ref:yc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:zb,onFocus:Uc,onChange:tc,onKeyDown:Vb,onBlur:wc,onPointerDown:Nc}):(0,Rb.jsxs)(Rb.Fragment,{children:[zb,"​"]})})}))}));kb(this,"setScaleLevel",c=>mi(this,null,function*(){this.update({scaleLevel:c,
fontSize:xG[null!=c?c:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",Xe(()=>{const {props:{borderRadius:c},bounds:g}=this;return(0,Rb.jsx)("rect",{width:g.width,height:g.height,rx:c,ry:c,fill:"transparent"})}));kb(this,"validateProps",c=>Fg(this,c));kb(this,"getBounds",()=>{const [c,g]=this.props.point,[u,M]=this.props.size;return{minX:c,minY:g,maxX:c+u,maxY:g+M,width:u,height:M}});kb(this,"onResizeStart",({isSingle:c})=>{var g;if(!c)return this;this.scale=[...(null!=(g=this.props.scale)?
g:[1,1])];return this.update({isSizeLocked:!1})});kb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getAutoSizedBoundingBox(c={}){const {text:g=this.props.text,fontFamily:u=this.props.fontFamily,fontSize:M=this.props.fontSize,fontWeight:ea=this.props.fontWeight,lineHeight:ma=this.props.lineHeight,padding:xa=this.props.padding}=c,[Ma,Za]=Gf(g,{fontFamily:u,fontSize:M,lineHeight:ma,
fontWeight:ea},xa);return[Ma,Za]}getShapeSVGJsx(){const {props:{text:c,stroke:g,fontSize:u,fontFamily:M}}=this,ea=this.getBounds();return(0,Rb.jsx)("foreignObject",{width:ea.width,height:ea.height,children:(0,Rb.jsx)("div",{style:{color:g,fontSize:u,fontFamily:M},children:c})})}};kb(Fr,"id","text");kb(Fr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[100,100],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family), 'Helvetica Neue', Helvetica, Arial, sans-serif",
borderRadius:0,stroke:"var(--tl-foreground, #000)",fill:"#ffffff",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});je([ah],Fr.prototype,"scaleLevel",1);je([cf],Fr.prototype,"setScaleLevel",2);Rb=T(611);var Tz=class extends Dn{constructor(){super(...arguments);kb(this,"aspectRatio",480/853);kb(this,"canChangeAspectRatio",!1);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"onYoutubeLinkChange",c=>{this.update({url:c,size:Tz.defaultProps.size})});kb(this,"ReactComponent",Xe(({events:c,isErasing:g,
isEditing:u})=>(0,Rb.jsx)(gp,wf(Fe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},c),{children:(0,Rb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:u?"all":"none",userSelect:"none"},children:this.embedId?(0,Rb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Rb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,
frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Rb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Rb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Rb.jsxs)("g",{children:[(0,Rb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Rb.jsx)("g",{children:(0,Rb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Rb.jsxs)("g",{fill:"#fff",children:[(0,Rb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Rb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));kb(this,"ReactIndicator",Xe(()=>{const {props:{size:[c,g]}}=this;return(0,Rb.jsx)("rect",{width:c,height:g,fill:"transparent",rx:8,ry:8})}));kb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[0]*this.aspectRatio,1));return Fg(this,c)})}get embedId(){var c,g;const u=this.props.url,M=u.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);
return null!=(g=null!=(c=null==M?void 0:M[1])?c:u)?g:""}},Nq=Tz;kb(Nq,"id","youtube");kb(Nq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});je([ah],Nq.prototype,"embedId",1);je([cf],Nq.prototype,"onYoutubeLinkChange",2);var Uz=[Ot,Fv,Pt,Gs,Qt,Rt,Tt,Ms,Yt,Fr,Nq,Jq,Op,Im],Sv=class extends $o{constructor(){super(...arguments);kb(this,"Shape",Ot)}};kb(Sv,"id","box");kb(Sv,"shortcut",["8"]);var Vz=class extends $o{constructor(){super(...arguments);kb(this,
"Shape",Pt)}};kb(Vz,"id","ellipse");var Tv=class extends qt{};kb(Tv,"id","erase");kb(Tv,"shortcut",["5"]);var Uv=class extends js{constructor(){super(...arguments);kb(this,"Shape",Gs);kb(this,"simplify",!0);kb(this,"simplifyTolerance",.618)}};kb(Uv,"id","highlighter");kb(Uv,"shortcut",["4"]);var Vv=class extends pt{constructor(){super(...arguments);kb(this,"Shape",Tt)}};kb(Vv,"id","line");kb(Vv,"shortcut",["6"]);var Wv=class extends js{constructor(){super(...arguments);kb(this,"Shape",Ms);kb(this,
"simplify",!1)}};kb(Wv,"id","pencil");kb(Wv,"shortcut",["3"]);var Wz=class extends $o{constructor(){super(...arguments);kb(this,"Shape",Yt)}};kb(Wz,"id","polygon");var Xv=class extends nt{constructor(){super(...arguments);kb(this,"Shape",Fr)}};kb(Xv,"id","text");kb(Xv,"shortcut",["7"]);var Xz=class extends $o{constructor(){super(...arguments);kb(this,"Shape",Nq)}};kb(Xz,"id","youtube");var Yz=class extends yi{constructor(){super(...arguments);kb(this,"creatingShape");kb(this,"offset",[0,0]);kb(this,
"onEnter",()=>{this.app.history.pause();Cc(()=>{const c=new Im({id:ca(),parentId:this.app.currentPage.id,point:fb.sub(this.app.inputs.originPoint,this.offset),size:Im.defaultProps.size});this.creatingShape=c;this.app.currentPage.addShapes(c);this.app.setEditingShape(c);this.app.setSelectedShapes([c]);(.8>this.app.viewport.camera.zoom||1.2<this.app.viewport.camera.zoom)&&this.app.api.resetZoomToCursor()})});kb(this,"onPointerDown",c=>{switch(c.type){case "shape":if(c.shape===this.creatingShape)break;
this.app.selectTool("select");break;case "canvas":c.order||this.app.selectTool("select")}});kb(this,"onExit",()=>{var c;this.creatingShape&&(this.app.history.resume(),(null==(c=this.creatingShape)?0:c.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()))})}};kb(Yz,"id","creating");var Zz=class extends yi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"onPointerDown",c=>{this.tool.transition("creating")})}};
kb(Zz,"id","idle");var Ns=class extends Hp{constructor(){super(...arguments);kb(this,"Shape",Im);kb(this,"onPinch",c=>{this.app.viewport.pinchCamera(c.point,[0,0],c.offset[0])})}};kb(Ns,"id","logseq-portal");kb(Ns,"shortcut",["9"]);kb(Ns,"states",[Zz,Yz]);kb(Ns,"initial","idle");var $z=class extends $o{constructor(){super(...arguments);kb(this,"Shape",Op)}};kb($z,"id","youtube");var aA=class extends $o{constructor(){super(...arguments);kb(this,"Shape",Jq)}};kb(aA,"id","iframe");var yG=Mf(T(614));
Rb=T(611);var zG=new Map(Uz.map(c=>[c.id,c])),Yv=class{constructor(c){kb(this,"shapes");kb(this,"pageId");kb(this,"assets");c&&this.load(c)}load(c){const g=c.pages[0];this.pageId=null==g?void 0:g.id;this.assets=c.assets;this.shapes=null==g?void 0:g.shapes.map(u=>{var M=u.type;if(!M)throw Error("No shape type provided.");const ea=zG.get(M);if(!ea)throw Error(`Could not find shape class for ${M}`);return new ea(u)})}generatePreviewJsx(c){var g,u;const M=[...(null!=(g=this.shapes)?g:[]).map(Za=>Za.getRotatedBounds())];
(g=null==c?void 0:c.currentView)&&M.push(g);let ea=Ib.getCommonBounds(M);if(!ea)return null;ea=Ib.expandBounds(ea,16);ea=c?Ib.ensureRatio(ea,4/3):ea;const ma=Za=>[(Za[0]-ea.minX).toFixed(2),(Za[1]-ea.minY).toFixed(2)],[xa,Ma]=g?ma([g.minX,g.minY]):[0,0];return ea&&(0,Rb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ea.minX.toFixed(2),"data-common-bound-y":ea.minY.toFixed(2),"data-common-bound-width":ea.width.toFixed(2),"data-common-bound-height":ea.height.toFixed(2),viewBox:[0,
0,ea.width,ea.height].join(" "),children:[(0,Rb.jsx)("defs",{children:g&&(0,Rb.jsxs)(Rb.Fragment,{children:[(0,Rb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${xa}, ${Ma})`,width:g.width,height:g.height}),(0,Rb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Rb.jsx)("rect",{width:ea.width,height:ea.height,fill:"white"}),(0,Rb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,Rb.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(u=this.shapes)?
void 0:u.map(Za=>{var hb,zb;const {bounds:Ob,props:{rotation:bc}}=Za,[yc,ic]=ma([Ob.minX,Ob.minY]),Ac=+(180*((null!=bc?bc:0)+(null!=(hb=Ob.rotation)?hb:0))/Math.PI).toFixed(2),[tc,Vb]=[(Ob.width/2).toFixed(2),(Ob.height/2).toFixed(2)];return(0,Rb.jsx)("g",{transform:[`translate(${yc}, ${ic})`,`rotate(${Ac}, ${tc}, ${Vb})`].join(" "),children:Za.getShapeSVGJsx({assets:null!=(zb=this.assets)?zb:[]})},Za.id)})}),(0,Rb.jsx)("rect",{mask:g?`url(#${this.pageId}-camera-mask)`:"",width:ea.width,height:ea.height,
fill:"transparent"}),g&&(0,Rb.jsx)("use",{id:"minimap-camera-rect","data-x":xa,"data-y":Ma,"data-width":g.width,"data-height":g.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/c.camera.zoom})]})}exportAsSVG(){const c=this.generatePreviewJsx();return c?yG.default.renderToString(c):""}},AG=c=>{var g;if(c=null==(g=c.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:g[1]){g=decodeURIComponent(c);try{var u=JSON.parse(g)}catch(M){u=null}return u}},BG=[".png",
".svg",".jpg",".jpeg",".gif"],CG=[".mp4",".webm",".ogg"],DG=Mf(T(16));Rb=T(611);var EG={ContextBar:WE},FG=[Sv,Vz,Wz,Tv,Uv,Vv,Wv,Xv,Xz,aA,$z,Ns],GG=c=>{var {onPersist:g,model:u}=c;c=hg(c,["onPersist","model"]);const M=Um(),ea=gn(),ma=Uo(),xa=ut.useRef(null),Ma=ut.useCallback((Za,hb)=>{(0,Pw.default)(Za.serialized,u)||(null==g?void 0:g(Za,hb))},[u]);return(0,Rb.jsx)(kC,wf(Fe({Shapes:Uz,Tools:FG,onDrop:M,onPaste:ea,onCanvasDBClick:ma,onPersist:Ma,model:u},c),{children:(0,Rb.jsx)(bF,{collisionRef:xa,
children:(0,Rb.jsx)("div",{ref:xa,className:"logseq-tldraw logseq-tldraw-wrapper",children:(0,Rb.jsx)(mC,{components:EG,children:(0,Rb.jsx)(SD,{})})})})}))},HG=function(c){var {renderers:g,handlers:u}=c;c=hg(c,["renderers","handlers"]);const M={renderers:ut.useMemo(()=>Object.fromEntries(Object.entries(g).map(([ea,ma])=>[ea,ut.memo(ma)])),[]),handlers:u};return(0,Rb.jsx)(jp.Provider,{value:M,children:(0,Rb.jsx)(GG,Fe({},c))})}};
'use strict';var T3c=function(a){return a},U3c=function(a,b){React.useLayoutEffect(function(){var c=a.K?a.K():a.call(null);if($APP.n(c))return c},$APP.Wb(b)?b:$APP.qn.C(b))},V3c=function(a){a=$APP.jE(a);return $APP.Mn.j($APP.U9a,a)},W3c=function(a){var b=$APP.bw.C($APP.tE(a));a=V3c(a);a=$APP.ug.j(function(d){return $APP.B.j(b,$APP.bw.C($APP.OC.C(d)))},a);var c=$APP.Fh($APP.Mn.j($APP.Vb,$APP.$h.j(function(d){return $APP.Uv.F(d,new $APP.O(null,2,5,$APP.R,[$APP.PC,$APP.bw],null),null)},a)));a=$APP.Mn.j(function(d){d=
$APP.bw.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},Z3c=function(a,b){b=$APP.Jr.G(b,$APP.E([new $APP.m(null,1,[$APP.Kr,!0],null)]));b=$APP.Lf(b);var c=$APP.H.j(b,X3c),d=$APP.H.j(b,$APP.nH),e=$APP.H.j(b,Y3c),f=$APP.yz();return $APP.kn(null,function(){return $APP.kn($APP.n(d)?$APP.v3a(f,a,new $APP.m(null,1,[$APP.Bu,100],null)):null,function(g){return $APP.kn($APP.n(c)?$APP.y3a(a,10):null,function(h){return $APP.kn($APP.n(e)?$APP.z3a(a,100):null,function(l){return $APP.dn($APP.Aj(new $APP.m(null,
3,[$APP.RE,h,$APP.KC,g,$APP.y1a,l],null)))})})})})},$3c=function(a){return $APP.jn($APP.nob($APP.yz(),new $APP.O(null,1,5,$APP.R,[$APP.Jr.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.pob($APP.n(c)?c:b)):null})},h4c=function(a){return new $APP.m(null,8,[$APP.y6,Z3c,a4c,function(b){return $APP.Aj($APP.KD($APP.lj(b)))},b4c,$APP.TE,c4c,$3c,d4c,T3c,e4c,function(b){var c=$APP.t,d=c.C,e=$APP.Ay(),f=$APP.tE(a),
g=W3c(a);b=new $APP.m(null,6,[$APP.PC,$APP.Ah($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.R,[$APP.bw],null)),$APP.AA,e,$APP.TD,$APP.n(b)?b:"",$APP.jD,$APP.Hs,$APP.rC,new $APP.m(null,1,[$APP.Gs,$APP.Fs.C?$APP.Fs.C(a):$APP.Fs.call(null,a)],null),$APP.OC,new $APP.m(null,1,[$APP.Gs,a],null)],null);$APP.CC(new $APP.O(null,1,5,$APP.R,[b],null));return d.call(c,e)},f4c,function(b,c){return $APP.xA($APP.yz(),$APP.bw.C($APP.tE(b)),$APP.ai.C(c))},g4c,function(b){return $APP.n($APP.TE(b))?$APP.uJ(b,null):$APP.rJ(b)}],
null)},a4c=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),e4c=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),Y3c=new $APP.N(null,"files?","files?",-1267491104),i4c=new $APP.N(null,"renderers","renderers",-1460292282),j4c=new $APP.N(null,"model","model",331153215),k4c=new $APP.N(null,"PageNameLink","PageNameLink",10142086),l4c=new $APP.N(null,"onMount","onMount",-876858467),d4c=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),m4c=new $APP.N(null,"onPersist","onPersist",
-1848738852),n4c=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),g4c=new $APP.N(null,"redirectToPage","redirectToPage",87147838),c4c=new $APP.N(null,"saveAsset","saveAsset",-668047853),o4c=new $APP.N(null,"Block","Block",-1959785792),f4c=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),p4c=new $APP.N(null,"Page","Page",-1267059506),X3c=new $APP.N(null,"pages?","pages?",-2065014049),b4c=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579);$APP.kda("tldraw");var q4c=$APP.un(615);var r4c,s4c;$APP.oWc={};r4c=$APP.nS($APP.za(q4c,"App"));$APP.rWc=$APP.za(q4c,"generateJSXFromApp");
s4c=new $APP.m(null,4,[p4c,$APP.gt($APP.kt,function(a){return(0,$APP.EVc)(new $APP.m(null,2,[$APP.yK,$APP.za(a,"pageName"),$APP.nsb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),o4c,$APP.gt($APP.kt,function(a){a=$APP.Hi($APP.za(a,"blockId"));var b=$APP.IKa($APP.HXb);a=b.C?b.C(a):b.call(null,a);return $APP.Ss(a)},null,"frontend.extensions.tldraw/block-cp"),n4c,$APP.gt($APP.kt,function(a){return $APP.Ss($APP.nV(new $APP.m(null,1,[$APP.cZ,!0],null),$APP.yz(),$APP.Hi($APP.za(a,"blockId")),new $APP.m(null,
1,[$APP.VNb,!0],null)))},null,"frontend.extensions.tldraw/breadcrumb"),k4c,$APP.gt($APP.kt,function(a){return(0,$APP.VU)(new $APP.m(null,1,[$APP.cZ,!0],null),new $APP.m(null,1,[$APP.Gs,$APP.za(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link")],null);
$APP.pWc=$APP.gt($APP.kt,function(a,b){var c=$APP.jtb(a,b),d=$APP.ut(null),e=$APP.D.F(d,0,null),f=$APP.D.F(d,1,null);U3c(function(){if($APP.n($APP.n(e)?a:e)){var g=$APP.za(e,"api");$APP.n(g)&&$APP.n($APP.n(b)?$APP.lj(b):b)&&(g.selectShapes(b),g.zoomToSelection())}return null},new $APP.O(null,3,5,$APP.R,[a,b,e],null));return $APP.n(function(){var g=$APP.Mf(a);return $APP.n(g)?$APP.Mf($APP.za(c,"currentPageId")):g}())?$APP.W("div",{style:{overscrollBehavior:"none"},onBlur:function(g){g=$APP.za(g,"target").tagName;
var h=new $APP.Bh(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);g=h.C?h.C(g):h.call(null,g);return $APP.n(g)?$APP.zA():null},onWheel:$APP.Qt,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.Ss(function(){var g=new $APP.m(null,5,[i4c,s4c,$APP.Vy,h4c(a),l4c,function(h){return f.C?f.C(h):f.call(null,h)},m4c,function(h){return $APP.Ysb(a,$APP.za(h,"serialized"))},j4c,c],null);return r4c.C?r4c.C(g):r4c.call(null,g)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.lb.Th();
}).call(this);